!function(e,t){function n(e){var t,n,i=M[e]={};for(e=e.split(/\s+/),t=0,n=e.length;n>t;t++)i[e[t]]=!0;return i}function i(e,n,i){if(i===t&&1===e.nodeType){var s="data-"+n.replace(H,"-$1").toLowerCase();if(i=e.getAttribute(s),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:O.isNumeric(i)?+i:L.test(i)?O.parseJSON(i):i}catch(r){}O.data(e,n,i)}else i=t}return i}function s(e){for(var t in e)if(("data"!==t||!O.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function r(e,t,n){var i=t+"defer",s=t+"queue",r=t+"mark",o=O._data(e,i);!o||"queue"!==n&&O._data(e,s)||"mark"!==n&&O._data(e,r)||setTimeout(function(){O._data(e,s)||O._data(e,r)||(O.removeData(e,i,!0),o.fire())},0)}function o(){return!1}function a(){return!0}function h(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function l(e,t,n){if(t=t||0,O.isFunction(t))return O.grep(e,function(e,i){var s=!!t.call(e,i,e);return s===n});if(t.nodeType)return O.grep(e,function(e){return e===t===n});if("string"==typeof t){var i=O.grep(e,function(e){return 1===e.nodeType});if(ut.test(t))return O.filter(t,i,!n);t=O.filter(t,i)}return O.grep(e,function(e){return O.inArray(e,t)>=0===n})}function u(e){var t=ft.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function c(e){return O.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function d(e,t){if(1===t.nodeType&&O.hasData(e)){var n,i,s,r=O._data(e),o=O._data(t,r),a=r.events;if(a){delete o.handle,o.events={};for(n in a)for(i=0,s=a[n].length;s>i;i++)O.event.add(t,n,a[n][i])}o.data&&(o.data=O.extend({},o.data))}}function p(e,t){var n;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),n=t.nodeName.toLowerCase(),"object"===n?t.outerHTML=e.outerHTML:"input"!==n||"checkbox"!==e.type&&"radio"!==e.type?"option"===n?t.selected=e.defaultSelected:"input"===n||"textarea"===n?t.defaultValue=e.defaultValue:"script"===n&&t.text!==e.text&&(t.text=e.text):(e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value)),t.removeAttribute(O.expando),t.removeAttribute("_submit_attached"),t.removeAttribute("_change_attached"))}function f(e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName("*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll("*"):[]}function g(e){("checkbox"===e.type||"radio"===e.type)&&(e.defaultChecked=e.checked)}function m(e){var t=(e.nodeName||"").toLowerCase();"input"===t?g(e):"script"!==t&&"undefined"!=typeof e.getElementsByTagName&&O.grep(e.getElementsByTagName("input"),g)}function v(e){var t=k.createElement("div");return Tt.appendChild(t),t.innerHTML=e.outerHTML,t.firstChild}function y(e,t,n){var i="width"===t?e.offsetWidth:e.offsetHeight,s="width"===t?1:0,r=4;if(i>0){if("border"!==n)for(;r>s;s+=2)n||(i-=parseFloat(O.css(e,"padding"+Rt[s]))||0),"margin"===n?i+=parseFloat(O.css(e,n+Rt[s]))||0:i-=parseFloat(O.css(e,"border"+Rt[s]+"Width"))||0;return i+"px"}if(i=Pt(e,t),(0>i||null==i)&&(i=e.style[t]),Mt.test(i))return i;if(i=parseFloat(i)||0,n)for(;r>s;s+=2)i+=parseFloat(O.css(e,"padding"+Rt[s]))||0,"padding"!==n&&(i+=parseFloat(O.css(e,"border"+Rt[s]+"Width"))||0),"margin"===n&&(i+=parseFloat(O.css(e,n+Rt[s]))||0);return i+"px"}function w(e){return function(t,n){if("string"!=typeof t&&(n=t,t="*"),O.isFunction(n))for(var i,s,r,o=t.toLowerCase().split(tn),a=0,h=o.length;h>a;a++)i=o[a],r=/^\+/.test(i),r&&(i=i.substr(1)||"*"),s=e[i]=e[i]||[],s[r?"unshift":"push"](n)}}function b(e,n,i,s,r,o){r=r||n.dataTypes[0],o=o||{},o[r]=!0;for(var a,h=e[r],l=0,u=h?h.length:0,c=e===on;u>l&&(c||!a);l++)a=h[l](n,i,s),"string"==typeof a&&(!c||o[a]?a=t:(n.dataTypes.unshift(a),a=b(e,n,i,s,a,o)));return!c&&a||o["*"]||(a=b(e,n,i,s,"*",o)),a}function x(e,n){var i,s,r=O.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((r[i]?e:s||(s={}))[i]=n[i]);s&&O.extend(!0,e,s)}function V(e,t,n,i){if(O.isArray(t))O.each(t,function(t,s){n||Bt.test(e)?i(e,s):V(e+"["+("object"==typeof s?t:"")+"]",s,n,i)});else if(n||"object"!==O.type(t))i(e,t);else for(var s in t)V(e+"["+s+"]",t[s],n,i)}function S(e,n,i){var s,r,o,a,h=e.contents,l=e.dataTypes,u=e.responseFields;for(r in u)r in i&&(n[u[r]]=i[r]);for(;"*"===l[0];)l.shift(),s===t&&(s=e.mimeType||n.getResponseHeader("content-type"));if(s)for(r in h)if(h[r]&&h[r].test(s)){l.unshift(r);break}if(l[0]in i)o=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}return o?(o!==l[0]&&l.unshift(o),i[o]):void 0}function D(e,n){e.dataFilter&&(n=e.dataFilter(n,e.dataType));var i,s,r,o,a,h,l,u,c=e.dataTypes,d={},p=c.length,f=c[0];for(i=1;p>i;i++){if(1===i)for(s in e.converters)"string"==typeof s&&(d[s.toLowerCase()]=e.converters[s]);if(o=f,f=c[i],"*"===f)f=o;else if("*"!==o&&o!==f){if(a=o+" "+f,h=d[a]||d["* "+f],!h){u=t;for(l in d)if(r=l.split(" "),(r[0]===o||"*"===r[0])&&(u=d[r[1]+" "+f])){l=d[l],l===!0?h=u:u===!0&&(h=l);break}}h||u||O.error("No conversion from "+a.replace(" "," to ")),h!==!0&&(n=h?h(n):u(l(n)))}}return n}function _(){try{return new e.XMLHttpRequest}catch(t){}}function C(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function A(){return setTimeout(T,0),yn=O.now()}function T(){yn=t}function P(e,t){var n={};return O.each(Vn.concat.apply([],Vn.slice(0,t)),function(){n[this]=e}),n}function E(e){if(!wn[e]){var t=k.body,n=O("<"+e+">").appendTo(t),i=n.css("display");n.remove(),("none"===i||""===i)&&(gn||(gn=k.createElement("iframe"),gn.frameBorder=gn.width=gn.height=0),t.appendChild(gn),mn&&gn.createElement||(mn=(gn.contentWindow||gn.contentDocument).document,mn.write((O.support.boxModel?"<!doctype html>":"")+"<html><body>"),mn.close()),n=mn.createElement(e),mn.body.appendChild(n),i=O.css(n,"display"),t.removeChild(gn)),wn[e]=i}return wn[e]}function N(e){return O.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var k=e.document,G=e.navigator,I=e.location,O=function(){function n(){if(!a.isReady){try{k.documentElement.doScroll("left")}catch(e){return setTimeout(n,1),void 0}a.ready()}}var i,s,r,o,a=function(e,t){return new a.fn.init(e,t,i)},h=e.jQuery,l=e.$,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,c=/\S/,d=/^\s+/,p=/\s+$/,f=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,g=/^[\],:{}\s]*$/,m=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,v=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,y=/(?:^|:|,)(?:\s*\[)+/g,w=/(webkit)[ \/]([\w.]+)/,b=/(opera)(?:.*version)?[ \/]([\w.]+)/,x=/(msie) ([\w.]+)/,V=/(mozilla)(?:.*? rv:([\w.]+))?/,S=/-([a-z]|[0-9])/gi,D=/^-ms-/,_=function(e,t){return(t+"").toUpperCase()},C=G.userAgent,A=Object.prototype.toString,T=Object.prototype.hasOwnProperty,P=Array.prototype.push,E=Array.prototype.slice,N=String.prototype.trim,I=Array.prototype.indexOf,O={};return a.fn=a.prototype={constructor:a,init:function(e,n,i){var s,r,o,h;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("body"===e&&!n&&k.body)return this.context=k,this[0]=k.body,this.selector=e,this.length=1,this;if("string"==typeof e){if(s="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:u.exec(e),!s||!s[1]&&n)return!n||n.jquery?(n||i).find(e):this.constructor(n).find(e);if(s[1])return n=n instanceof a?n[0]:n,h=n?n.ownerDocument||n:k,o=f.exec(e),o?a.isPlainObject(n)?(e=[k.createElement(o[1])],a.fn.attr.call(e,n,!0)):e=[h.createElement(o[1])]:(o=a.buildFragment([s[1]],[h]),e=(o.cacheable?a.clone(o.fragment):o.fragment).childNodes),a.merge(this,e);if(r=k.getElementById(s[2]),r&&r.parentNode){if(r.id!==s[2])return i.find(e);this.length=1,this[0]=r}return this.context=k,this.selector=e,this}return a.isFunction(e)?i.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),a.makeArray(e,this))},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return E.call(this,0)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e,t,n){var i=this.constructor();return a.isArray(e)?P.apply(i,e):a.merge(i,e),i.prevObject=this,i.context=this.context,"find"===t?i.selector=this.selector+(this.selector?" ":"")+n:t&&(i.selector=this.selector+"."+t+"("+n+")"),i},each:function(e,t){return a.each(this,e,t)},ready:function(e){return a.bindReady(),r.add(e),this},eq:function(e){return e=+e,-1===e?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(E.apply(this,arguments),"slice",E.call(arguments).join(","))},map:function(e){return this.pushStack(a.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:P,sort:[].sort,splice:[].splice},a.fn.init.prototype=a.fn,a.extend=a.fn.extend=function(){var e,n,i,s,r,o,h=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof h&&(c=h,h=arguments[1]||{},l=2),"object"==typeof h||a.isFunction(h)||(h={}),u===l&&(h=this,--l);u>l;l++)if(null!=(e=arguments[l]))for(n in e)i=h[n],s=e[n],h!==s&&(c&&s&&(a.isPlainObject(s)||(r=a.isArray(s)))?(r?(r=!1,o=i&&a.isArray(i)?i:[]):o=i&&a.isPlainObject(i)?i:{},h[n]=a.extend(c,o,s)):s!==t&&(h[n]=s));return h},a.extend({noConflict:function(t){return e.$===a&&(e.$=l),t&&e.jQuery===a&&(e.jQuery=h),a},isReady:!1,readyWait:1,holdReady:function(e){e?a.readyWait++:a.ready(!0)},ready:function(e){if(e===!0&&!--a.readyWait||e!==!0&&!a.isReady){if(!k.body)return setTimeout(a.ready,1);if(a.isReady=!0,e!==!0&&--a.readyWait>0)return;r.fireWith(k,[a]),a.fn.trigger&&a(k).trigger("ready").off("ready")}},bindReady:function(){if(!r){if(r=a.Callbacks("once memory"),"complete"===k.readyState)return setTimeout(a.ready,1);if(k.addEventListener)k.addEventListener("DOMContentLoaded",o,!1),e.addEventListener("load",a.ready,!1);else if(k.attachEvent){k.attachEvent("onreadystatechange",o),e.attachEvent("onload",a.ready);var t=!1;try{t=null==e.frameElement}catch(i){}k.documentElement.doScroll&&t&&n()}}},isFunction:function(e){return"function"===a.type(e)},isArray:Array.isArray||function(e){return"array"===a.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):O[A.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==a.type(e)||e.nodeType||a.isWindow(e))return!1;try{if(e.constructor&&!T.call(e,"constructor")&&!T.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var i;for(i in e);return i===t||T.call(e,i)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw new Error(e)},parseJSON:function(t){return"string"==typeof t&&t?(t=a.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):g.test(t.replace(m,"@").replace(v,"]").replace(y,""))?new Function("return "+t)():(a.error("Invalid JSON: "+t),void 0)):null},parseXML:function(n){if("string"!=typeof n||!n)return null;var i,s;try{e.DOMParser?(s=new DOMParser,i=s.parseFromString(n,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(n))}catch(r){i=t}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||a.error("Invalid XML: "+n),i},noop:function(){},globalEval:function(t){t&&c.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(D,"ms-").replace(S,_)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,n,i){var s,r=0,o=e.length,h=o===t||a.isFunction(e);if(i)if(h){for(s in e)if(n.apply(e[s],i)===!1)break}else for(;o>r&&n.apply(e[r++],i)!==!1;);else if(h){for(s in e)if(n.call(e[s],s,e[s])===!1)break}else for(;o>r&&n.call(e[r],r,e[r++])!==!1;);return e},trim:N?function(e){return null==e?"":N.call(e)}:function(e){return null==e?"":e.toString().replace(d,"").replace(p,"")},makeArray:function(e,t){var n=t||[];if(null!=e){var i=a.type(e);null==e.length||"string"===i||"function"===i||"regexp"===i||a.isWindow(e)?P.call(n,e):a.merge(n,e)}return n},inArray:function(e,t,n){var i;if(t){if(I)return I.call(t,e,n);for(i=t.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var i=e.length,s=0;if("number"==typeof n.length)for(var r=n.length;r>s;s++)e[i++]=n[s];else for(;n[s]!==t;)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var i,s=[];n=!!n;for(var r=0,o=e.length;o>r;r++)i=!!t(e[r],r),n!==i&&s.push(e[r]);return s},map:function(e,n,i){var s,r,o=[],h=0,l=e.length,u=e instanceof a||l!==t&&"number"==typeof l&&(l>0&&e[0]&&e[l-1]||0===l||a.isArray(e));if(u)for(;l>h;h++)s=n(e[h],h,i),null!=s&&(o[o.length]=s);else for(r in e)s=n(e[r],r,i),null!=s&&(o[o.length]=s);return o.concat.apply([],o)},guid:1,proxy:function(e,n){if("string"==typeof n){var i=e[n];n=e,e=i}if(!a.isFunction(e))return t;var s=E.call(arguments,2),r=function(){return e.apply(n,s.concat(E.call(arguments)))};return r.guid=e.guid=e.guid||r.guid||a.guid++,r},access:function(e,n,i,s,r,o,h){var l,u=null==i,c=0,d=e.length;if(i&&"object"==typeof i){for(c in i)a.access(e,n,c,i[c],1,o,s);r=1}else if(s!==t){if(l=h===t&&a.isFunction(s),u&&(l?(l=n,n=function(e,t,n){return l.call(a(e),n)}):(n.call(e,s),n=null)),n)for(;d>c;c++)n(e[c],i,l?s.call(e[c],c,n(e[c],i)):s,h);r=1}return r?e:u?n.call(e):d?n(e[0],i):o},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=w.exec(e)||b.exec(e)||x.exec(e)||e.indexOf("compatible")<0&&V.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,n){return new e.fn.init(t,n)}a.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(n,i){return i&&i instanceof a&&!(i instanceof e)&&(i=e(i)),a.fn.init.call(this,n,i,t)},e.fn.init.prototype=e.fn;var t=e(k);return e},browser:{}}),a.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){O["[object "+t+"]"]=t.toLowerCase()}),s=a.uaMatch(C),s.browser&&(a.browser[s.browser]=!0,a.browser.version=s.version),a.browser.webkit&&(a.browser.safari=!0),c.test("Â ")&&(d=/^[\s\xA0]+/,p=/[\s\xA0]+$/),i=a(k),k.addEventListener?o=function(){k.removeEventListener("DOMContentLoaded",o,!1),a.ready()}:k.attachEvent&&(o=function(){"complete"===k.readyState&&(k.detachEvent("onreadystatechange",o),a.ready())}),a}(),M={};O.Callbacks=function(e){e=e?M[e]||n(e):{};var i,s,r,o,a,h,l=[],u=[],c=function(t){var n,i,s,r;for(n=0,i=t.length;i>n;n++)s=t[n],r=O.type(s),"array"===r?c(s):"function"===r&&(e.unique&&p.has(s)||l.push(s))},d=function(t,n){for(n=n||[],i=!e.memory||[t,n],s=!0,r=!0,h=o||0,o=0,a=l.length;l&&a>h;h++)if(l[h].apply(t,n)===!1&&e.stopOnFalse){i=!0;break}r=!1,l&&(e.once?i===!0?p.disable():l=[]:u&&u.length&&(i=u.shift(),p.fireWith(i[0],i[1])))},p={add:function(){if(l){var e=l.length;c(arguments),r?a=l.length:i&&i!==!0&&(o=e,d(i[0],i[1]))}return this},remove:function(){if(l)for(var t=arguments,n=0,i=t.length;i>n;n++)for(var s=0;s<l.length&&(t[n]!==l[s]||(r&&a>=s&&(a--,h>=s&&h--),l.splice(s--,1),!e.unique));s++);return this},has:function(e){if(l)for(var t=0,n=l.length;n>t;t++)if(e===l[t])return!0;return!1},empty:function(){return l=[],this},disable:function(){return l=u=i=t,this},disabled:function(){return!l},lock:function(){return u=t,i&&i!==!0||p.disable(),this},locked:function(){return!u},fireWith:function(t,n){return u&&(r?e.once||u.push([t,n]):e.once&&i||d(t,n)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!s}};return p};var j=[].slice;O.extend({Deferred:function(e){var t,n=O.Callbacks("once memory"),i=O.Callbacks("once memory"),s=O.Callbacks("memory"),r="pending",o={resolve:n,reject:i,notify:s},a={done:n.add,fail:i.add,progress:s.add,state:function(){return r},isResolved:n.fired,isRejected:i.fired,then:function(e,t,n){return h.done(e).fail(t).progress(n),this},always:function(){return h.done.apply(h,arguments).fail.apply(h,arguments),this},pipe:function(e,t,n){return O.Deferred(function(i){O.each({done:[e,"resolve"],fail:[t,"reject"],progress:[n,"notify"]},function(e,t){var n,s=t[0],r=t[1];O.isFunction(s)?h[e](function(){n=s.apply(this,arguments),n&&O.isFunction(n.promise)?n.promise().then(i.resolve,i.reject,i.notify):i[r+"With"](this===h?i:this,[n])}):h[e](i[r])})}).promise()},promise:function(e){if(null==e)e=a;else for(var t in a)e[t]=a[t];return e}},h=a.promise({});for(t in o)h[t]=o[t].fire,h[t+"With"]=o[t].fireWith;return h.done(function(){r="resolved"},i.disable,s.lock).fail(function(){r="rejected"},n.disable,s.lock),e&&e.call(h,h),h},when:function(e){function t(e){return function(t){i[e]=arguments.length>1?j.call(arguments,0):t,--a||h.resolveWith(h,i)}}function n(e){return function(t){o[e]=arguments.length>1?j.call(arguments,0):t,h.notifyWith(l,o)}}var i=j.call(arguments,0),s=0,r=i.length,o=new Array(r),a=r,h=1>=r&&e&&O.isFunction(e.promise)?e:O.Deferred(),l=h.promise();if(r>1){for(;r>s;s++)i[s]&&i[s].promise&&O.isFunction(i[s].promise)?i[s].promise().then(t(s),h.reject,n(s)):--a;a||h.resolveWith(h,i)}else h!==e&&h.resolveWith(h,r?[e]:[]);return l}}),O.support=function(){var t,n,i,s,r,o,a,h,l,u,c,d=k.createElement("div");if(k.documentElement,d.setAttribute("className","t"),d.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*"),i=d.getElementsByTagName("a")[0],!n||!n.length||!i)return{};s=k.createElement("select"),r=s.appendChild(k.createElement("option")),o=d.getElementsByTagName("input")[0],t={leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:"/a"===i.getAttribute("href"),opacity:/^0.55/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:"on"===o.value,optSelected:r.selected,getSetAttribute:"t"!==d.className,enctype:!!k.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==k.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},O.boxModel=t.boxModel="CSS1Compat"===k.compatMode,o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!r.disabled;try{delete d.test}catch(p){t.deleteExpando=!1}if(!d.addEventListener&&d.attachEvent&&d.fireEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).fireEvent("onclick")),o=k.createElement("input"),o.value="t",o.setAttribute("type","radio"),t.radioValue="t"===o.value,o.setAttribute("checked","checked"),o.setAttribute("name","t"),d.appendChild(o),a=k.createDocumentFragment(),a.appendChild(d.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=o.checked,a.removeChild(o),a.appendChild(d),d.attachEvent)for(u in{submit:1,change:1,focusin:1})l="on"+u,c=l in d,c||(d.setAttribute(l,"return;"),c="function"==typeof d[l]),t[u+"Bubbles"]=c;return a.removeChild(d),a=s=r=d=o=null,O(function(){var n,i,s,r,o,a,l,u,p,f,g,m,v=k.getElementsByTagName("body")[0];v&&(l=1,m="padding:0;margin:0;border:",f="position:absolute;top:0;left:0;width:1px;height:1px;",g=m+"0;visibility:hidden;",u="style='"+f+m+"5px solid #000;",p="<div "+u+"display:block;'><div style='"+m+"0;display:block;overflow:hidden;'></div></div>"+"<table "+u+"' cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",n=k.createElement("div"),n.style.cssText=g+"width:0;height:0;position:static;top:0;margin-top:"+l+"px",v.insertBefore(n,v.firstChild),d=k.createElement("div"),n.appendChild(d),d.innerHTML="<table><tr><td style='"+m+"0;display:none'></td><td>t</td></tr></table>",h=d.getElementsByTagName("td"),c=0===h[0].offsetHeight,h[0].style.display="",h[1].style.display="none",t.reliableHiddenOffsets=c&&0===h[0].offsetHeight,e.getComputedStyle&&(d.innerHTML="",a=k.createElement("div"),a.style.width="0",a.style.marginRight="0",d.style.width="2px",d.appendChild(a),t.reliableMarginRight=0===(parseInt((e.getComputedStyle(a,null)||{marginRight:0}).marginRight,10)||0)),"undefined"!=typeof d.style.zoom&&(d.innerHTML="",d.style.width=d.style.padding="1px",d.style.border=0,d.style.overflow="hidden",d.style.display="inline",d.style.zoom=1,t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div style='width:5px;'></div>",t.shrinkWrapBlocks=3!==d.offsetWidth),d.style.cssText=f+g,d.innerHTML=p,i=d.firstChild,s=i.firstChild,r=i.nextSibling.firstChild.firstChild,o={doesNotAddBorder:5!==s.offsetTop,doesAddBorderForTableAndCells:5===r.offsetTop},s.style.position="fixed",s.style.top="20px",o.fixedPosition=20===s.offsetTop||15===s.offsetTop,s.style.position=s.style.top="",i.style.overflow="hidden",i.style.position="relative",o.subtractsBorderForOverflowNotVisible=-5===s.offsetTop,o.doesNotIncludeMarginInBodyOffset=v.offsetTop!==l,e.getComputedStyle&&(d.style.marginTop="1%",t.pixelMargin="1%"!==(e.getComputedStyle(d,null)||{marginTop:0}).marginTop),"undefined"!=typeof n.style.zoom&&(n.style.zoom=1),v.removeChild(n),a=d=n=null,O.extend(t,o))}),t}();var L=/^(?:\{.*\}|\[.*\])$/,H=/([A-Z])/g;O.extend({cache:{},uuid:0,expando:"jQuery"+(O.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?O.cache[e[O.expando]]:e[O.expando],!!e&&!s(e)},data:function(e,n,i,s){if(O.acceptData(e)){var r,o,a,h=O.expando,l="string"==typeof n,u=e.nodeType,c=u?O.cache:e,d=u?e[h]:e[h]&&h,p="events"===n;if(d&&c[d]&&(p||s||c[d].data)||!l||i!==t)return d||(u?e[h]=d=++O.uuid:d=h),c[d]||(c[d]={},u||(c[d].toJSON=O.noop)),("object"==typeof n||"function"==typeof n)&&(s?c[d]=O.extend(c[d],n):c[d].data=O.extend(c[d].data,n)),r=o=c[d],s||(o.data||(o.data={}),o=o.data),i!==t&&(o[O.camelCase(n)]=i),p&&!o[n]?r.events:(l?(a=o[n],null==a&&(a=o[O.camelCase(n)])):a=o,a)}},removeData:function(e,t,n){if(O.acceptData(e)){var i,r,o,a=O.expando,h=e.nodeType,l=h?O.cache:e,u=h?e[a]:a;if(l[u]){if(t&&(i=n?l[u]:l[u].data)){O.isArray(t)||(t in i?t=[t]:(t=O.camelCase(t),t=t in i?[t]:t.split(" ")));for(r=0,o=t.length;o>r;r++)delete i[t[r]];if(!(n?s:O.isEmptyObject)(i))return}(n||(delete l[u].data,s(l[u])))&&(O.support.deleteExpando||!l.setInterval?delete l[u]:l[u]=null,h&&(O.support.deleteExpando?delete e[a]:e.removeAttribute?e.removeAttribute(a):e[a]=null))}}},_data:function(e,t,n){return O.data(e,t,n,!0)},acceptData:function(e){if(e.nodeName){var t=O.noData[e.nodeName.toLowerCase()];if(t)return!(t===!0||e.getAttribute("classid")!==t)}return!0}}),O.fn.extend({data:function(e,n){var s,r,o,a,h,l=this[0],u=0,c=null;if(e===t){if(this.length&&(c=O.data(l),1===l.nodeType&&!O._data(l,"parsedAttrs"))){for(o=l.attributes,h=o.length;h>u;u++)a=o[u].name,0===a.indexOf("data-")&&(a=O.camelCase(a.substring(5)),i(l,a,c[a]));O._data(l,"parsedAttrs",!0)}return c}return"object"==typeof e?this.each(function(){O.data(this,e)}):(s=e.split(".",2),s[1]=s[1]?"."+s[1]:"",r=s[1]+"!",O.access(this,function(n){return n===t?(c=this.triggerHandler("getData"+r,[s[0]]),c===t&&l&&(c=O.data(l,e),c=i(l,e,c)),c===t&&s[1]?this.data(s[0]):c):(s[1]=n,this.each(function(){var t=O(this);t.triggerHandler("setData"+r,s),O.data(this,e,n),t.triggerHandler("changeData"+r,s)}),void 0)},null,n,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){O.removeData(this,e)})}}),O.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",O._data(e,t,(O._data(e,t)||0)+1))},_unmark:function(e,t,n){if(e!==!0&&(n=t,t=e,e=!1),t){n=n||"fx";var i=n+"mark",s=e?0:(O._data(t,i)||1)-1;s?O._data(t,i,s):(O.removeData(t,i,!0),r(t,n,"mark"))}},queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=O._data(e,t),n&&(!i||O.isArray(n)?i=O._data(e,t,O.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=O.queue(e,t),i=n.shift(),s={};"inprogress"===i&&(i=n.shift()),i&&("fx"===t&&n.unshift("inprogress"),O._data(e,t+".run",s),i.call(e,function(){O.dequeue(e,t)},s)),n.length||(O.removeData(e,t+"queue "+t+".run",!0),r(e,t,"queue"))}}),O.fn.extend({queue:function(e,n){var i=2;return"string"!=typeof e&&(n=e,e="fx",i--),arguments.length<i?O.queue(this[0],e):n===t?this:this.each(function(){var t=O.queue(this,e,n);"fx"===e&&"inprogress"!==t[0]&&O.dequeue(this,e)})},dequeue:function(e){return this.each(function(){O.dequeue(this,e)})},delay:function(e,t){return e=O.fx?O.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){function i(){--h||r.resolveWith(o,[o])}"string"!=typeof e&&(n=e,e=t),e=e||"fx";for(var s,r=O.Deferred(),o=this,a=o.length,h=1,l=e+"defer",u=e+"queue",c=e+"mark";a--;)(s=O.data(o[a],l,t,!0)||(O.data(o[a],u,t,!0)||O.data(o[a],c,t,!0))&&O.data(o[a],l,O.Callbacks("once memory"),!0))&&(h++,s.add(i));return i(),r.promise(n)}});var R,F,$,z=/[\n\t\r]/g,B=/\s+/,W=/\r/g,q=/^(?:button|input)$/i,U=/^(?:button|input|object|select|textarea)$/i,Q=/^a(?:rea)?$/i,X=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Y=O.support.getSetAttribute;O.fn.extend({attr:function(e,t){return O.access(this,O.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){O.removeAttr(this,e)})},prop:function(e,t){return O.access(this,O.prop,e,t,arguments.length>1)},removeProp:function(e){return e=O.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,i,s,r,o,a;if(O.isFunction(e))return this.each(function(t){O(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(B),n=0,i=this.length;i>n;n++)if(s=this[n],1===s.nodeType)if(s.className||1!==t.length){for(r=" "+s.className+" ",o=0,a=t.length;a>o;o++)~r.indexOf(" "+t[o]+" ")||(r+=t[o]+" ");s.className=O.trim(r)}else s.className=e;return this},removeClass:function(e){var n,i,s,r,o,a,h;if(O.isFunction(e))return this.each(function(t){O(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(n=(e||"").split(B),i=0,s=this.length;s>i;i++)if(r=this[i],1===r.nodeType&&r.className)if(e){for(o=(" "+r.className+" ").replace(z," "),a=0,h=n.length;h>a;a++)o=o.replace(" "+n[a]+" "," ");r.className=O.trim(o)}else r.className="";return this},toggleClass:function(e,t){var n=typeof e,i="boolean"==typeof t;return O.isFunction(e)?this.each(function(n){O(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var s,r=0,o=O(this),a=t,h=e.split(B);s=h[r++];)a=i?a:!o.hasClass(s),o[a?"addClass":"removeClass"](s);else("undefined"===n||"boolean"===n)&&(this.className&&O._data(this,"__className__",this.className),this.className=this.className||e===!1?"":O._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(z," ").indexOf(t)>-1)return!0;return!1},val:function(e){var n,i,s,r=this[0];{if(arguments.length)return s=O.isFunction(e),this.each(function(i){var r,o=O(this);1===this.nodeType&&(r=s?e.call(this,i,o.val()):e,null==r?r="":"number"==typeof r?r+="":O.isArray(r)&&(r=O.map(r,function(e){return null==e?"":e+""})),n=O.valHooks[this.type]||O.valHooks[this.nodeName.toLowerCase()],n&&"set"in n&&n.set(this,r,"value")!==t||(this.value=r))});if(r)return n=O.valHooks[r.type]||O.valHooks[r.nodeName.toLowerCase()],n&&"get"in n&&(i=n.get(r,"value"))!==t?i:(i=r.value,"string"==typeof i?i.replace(W,""):null==i?"":i)}}}),O.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,i,s,r=e.selectedIndex,o=[],a=e.options,h="select-one"===e.type;if(0>r)return null;for(n=h?r:0,i=h?r+1:a.length;i>n;n++)if(s=a[n],!(!s.selected||(O.support.optDisabled?s.disabled:null!==s.getAttribute("disabled"))||s.parentNode.disabled&&O.nodeName(s.parentNode,"optgroup"))){if(t=O(s).val(),h)return t;o.push(t)}return h&&!o.length&&a.length?O(a[r]).val():o},set:function(e,t){var n=O.makeArray(t);return O(e).find("option").each(function(){this.selected=O.inArray(O(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,n,i,s){var r,o,a,h=e.nodeType;if(e&&3!==h&&8!==h&&2!==h)return s&&n in O.attrFn?O(e)[n](i):"undefined"==typeof e.getAttribute?O.prop(e,n,i):(a=1!==h||!O.isXMLDoc(e),a&&(n=n.toLowerCase(),o=O.attrHooks[n]||(X.test(n)?F:R)),i!==t?null===i?(O.removeAttr(e,n),void 0):o&&"set"in o&&a&&(r=o.set(e,i,n))!==t?r:(e.setAttribute(n,""+i),i):o&&"get"in o&&a&&null!==(r=o.get(e,n))?r:(r=e.getAttribute(n),null===r?t:r))},removeAttr:function(e,t){var n,i,s,r,o,a=0;if(t&&1===e.nodeType)for(i=t.toLowerCase().split(B),r=i.length;r>a;a++)s=i[a],s&&(n=O.propFix[s]||s,o=X.test(s),o||O.attr(e,s,""),e.removeAttribute(Y?s:n),o&&n in e&&(e[n]=!1))},attrHooks:{type:{set:function(e,t){if(q.test(e.nodeName)&&e.parentNode)O.error("type property can't be changed");else if(!O.support.radioValue&&"radio"===t&&O.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return R&&O.nodeName(e,"button")?R.get(e,t):t in e?e.value:null},set:function(e,t,n){return R&&O.nodeName(e,"button")?R.set(e,t,n):(e.value=t,void 0)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,i){var s,r,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return o=1!==a||!O.isXMLDoc(e),o&&(n=O.propFix[n]||n,r=O.propHooks[n]),i!==t?r&&"set"in r&&(s=r.set(e,i,n))!==t?s:e[n]=i:r&&"get"in r&&null!==(s=r.get(e,n))?s:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):U.test(e.nodeName)||Q.test(e.nodeName)&&e.href?0:t}}}}),O.attrHooks.tabindex=O.propHooks.tabIndex,F={get:function(e,n){var i,s=O.prop(e,n);return s===!0||"boolean"!=typeof s&&(i=e.getAttributeNode(n))&&i.nodeValue!==!1?n.toLowerCase():t},set:function(e,t,n){var i;return t===!1?O.removeAttr(e,n):(i=O.propFix[n]||n,i in e&&(e[i]=!0),e.setAttribute(n,n.toLowerCase())),n}},Y||($={name:!0,id:!0,coords:!0},R=O.valHooks.button={get:function(e,n){var i;return i=e.getAttributeNode(n),i&&($[n]?""!==i.nodeValue:i.specified)?i.nodeValue:t},set:function(e,t,n){var i=e.getAttributeNode(n);return i||(i=k.createAttribute(n),e.setAttributeNode(i)),i.nodeValue=t+""}},O.attrHooks.tabindex.set=R.set,O.each(["width","height"],function(e,t){O.attrHooks[t]=O.extend(O.attrHooks[t],{set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}})}),O.attrHooks.contenteditable={get:R.get,set:function(e,t,n){""===t&&(t="false"),R.set(e,t,n)}}),O.support.hrefNormalized||O.each(["href","src","width","height"],function(e,n){O.attrHooks[n]=O.extend(O.attrHooks[n],{get:function(e){var i=e.getAttribute(n,2);return null===i?t:i}})}),O.support.style||(O.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),O.support.optSelected||(O.propHooks.selected=O.extend(O.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),O.support.enctype||(O.propFix.enctype="encoding"),O.support.checkOn||O.each(["radio","checkbox"],function(){O.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),O.each(["radio","checkbox"],function(){O.valHooks[this]=O.extend(O.valHooks[this],{set:function(e,t){return O.isArray(t)?e.checked=O.inArray(O(e).val(),t)>=0:void 0}})});var J=/^(?:textarea|input|select)$/i,Z=/^([^\.]*)?(?:\.(.+))?$/,K=/(?:^|\s)hover(\.\S+)?\b/,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,it=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,st=function(e){var t=it.exec(e);
return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},rt=function(e,t){var n=e.attributes||{};return!(t[1]&&e.nodeName.toLowerCase()!==t[1]||t[2]&&(n.id||{}).value!==t[2]||t[3]&&!t[3].test((n["class"]||{}).value))},ot=function(e){return O.event.special.hover?e:e.replace(K,"mouseenter$1 mouseleave$1")};O.event={add:function(e,n,i,s,r){var o,a,h,l,u,c,d,p,f,g,m;if(3!==e.nodeType&&8!==e.nodeType&&n&&i&&(o=O._data(e))){for(i.handler&&(f=i,i=f.handler,r=f.selector),i.guid||(i.guid=O.guid++),h=o.events,h||(o.events=h={}),a=o.handle,a||(o.handle=a=function(e){return"undefined"==typeof O||e&&O.event.triggered===e.type?t:O.event.dispatch.apply(a.elem,arguments)},a.elem=e),n=O.trim(ot(n)).split(" "),l=0;l<n.length;l++)u=Z.exec(n[l])||[],c=u[1],d=(u[2]||"").split(".").sort(),m=O.event.special[c]||{},c=(r?m.delegateType:m.bindType)||c,m=O.event.special[c]||{},p=O.extend({type:c,origType:u[1],data:s,handler:i,guid:i.guid,selector:r,quick:r&&st(r),namespace:d.join(".")},f),g=h[c],g||(g=h[c]=[],g.delegateCount=0,m.setup&&m.setup.call(e,s,d,a)!==!1||(e.addEventListener?e.addEventListener(c,a,!1):e.attachEvent&&e.attachEvent("on"+c,a))),m.add&&(m.add.call(e,p),p.handler.guid||(p.handler.guid=i.guid)),r?g.splice(g.delegateCount++,0,p):g.push(p),O.event.global[c]=!0;e=null}},global:{},remove:function(e,t,n,i,s){var r,o,a,h,l,u,c,d,p,f,g,m,v=O.hasData(e)&&O._data(e);if(v&&(d=v.events)){for(t=O.trim(ot(t||"")).split(" "),r=0;r<t.length;r++)if(o=Z.exec(t[r])||[],a=h=o[1],l=o[2],a){for(p=O.event.special[a]||{},a=(i?p.delegateType:p.bindType)||a,g=d[a]||[],u=g.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,c=0;c<g.length;c++)m=g[c],!s&&h!==m.origType||n&&n.guid!==m.guid||l&&!l.test(m.namespace)||i&&i!==m.selector&&("**"!==i||!m.selector)||(g.splice(c--,1),m.selector&&g.delegateCount--,p.remove&&p.remove.call(e,m));0===g.length&&u!==g.length&&(p.teardown&&p.teardown.call(e,l)!==!1||O.removeEvent(e,a,v.handle),delete d[a])}else for(a in d)O.event.remove(e,a+t[r],n,i,!0);O.isEmptyObject(d)&&(f=v.handle,f&&(f.elem=null),O.removeData(e,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(n,i,s,r){if(!s||3!==s.nodeType&&8!==s.nodeType){var o,a,h,l,u,c,d,p,f,g,m=n.type||n,v=[];if(!nt.test(m+O.event.triggered)&&(m.indexOf("!")>=0&&(m=m.slice(0,-1),a=!0),m.indexOf(".")>=0&&(v=m.split("."),m=v.shift(),v.sort()),s&&!O.event.customEvent[m]||O.event.global[m]))if(n="object"==typeof n?n[O.expando]?n:new O.Event(m,n):new O.Event(m),n.type=m,n.isTrigger=!0,n.exclusive=a,n.namespace=v.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,c=m.indexOf(":")<0?"on"+m:"",s){if(n.result=t,n.target||(n.target=s),i=null!=i?O.makeArray(i):[],i.unshift(n),d=O.event.special[m]||{},!d.trigger||d.trigger.apply(s,i)!==!1){if(f=[[s,d.bindType||m]],!r&&!d.noBubble&&!O.isWindow(s)){for(g=d.delegateType||m,l=nt.test(g+m)?s:s.parentNode,u=null;l;l=l.parentNode)f.push([l,g]),u=l;u&&u===s.ownerDocument&&f.push([u.defaultView||u.parentWindow||e,g])}for(h=0;h<f.length&&!n.isPropagationStopped();h++)l=f[h][0],n.type=f[h][1],p=(O._data(l,"events")||{})[n.type]&&O._data(l,"handle"),p&&p.apply(l,i),p=c&&l[c],p&&O.acceptData(l)&&p.apply(l,i)===!1&&n.preventDefault();return n.type=m,r||n.isDefaultPrevented()||d._default&&d._default.apply(s.ownerDocument,i)!==!1||"click"===m&&O.nodeName(s,"a")||!O.acceptData(s)||c&&s[m]&&("focus"!==m&&"blur"!==m||0!==n.target.offsetWidth)&&!O.isWindow(s)&&(u=s[c],u&&(s[c]=null),O.event.triggered=m,s[m](),O.event.triggered=t,u&&(s[c]=u)),n.result}}else{o=O.cache;for(h in o)o[h].events&&o[h].events[m]&&O.event.trigger(n,i,o[h].handle.elem,!0)}}},dispatch:function(n){n=O.event.fix(n||e.event);var i,s,r,o,a,h,l,u,c,d,p=(O._data(this,"events")||{})[n.type]||[],f=p.delegateCount,g=[].slice.call(arguments,0),m=!n.exclusive&&!n.namespace,v=O.event.special[n.type]||{},y=[];if(g[0]=n,n.delegateTarget=this,!v.preDispatch||v.preDispatch.call(this,n)!==!1){if(f&&(!n.button||"click"!==n.type))for(o=O(this),o.context=this.ownerDocument||this,r=n.target;r!=this;r=r.parentNode||this)if(r.disabled!==!0){for(h={},u=[],o[0]=r,i=0;f>i;i++)c=p[i],d=c.selector,h[d]===t&&(h[d]=c.quick?rt(r,c.quick):o.is(d)),h[d]&&u.push(c);u.length&&y.push({elem:r,matches:u})}for(p.length>f&&y.push({elem:this,matches:p.slice(f)}),i=0;i<y.length&&!n.isPropagationStopped();i++)for(l=y[i],n.currentTarget=l.elem,s=0;s<l.matches.length&&!n.isImmediatePropagationStopped();s++)c=l.matches[s],(m||!n.namespace&&!c.namespace||n.namespace_re&&n.namespace_re.test(c.namespace))&&(n.data=c.data,n.handleObj=c,a=((O.event.special[c.origType]||{}).handle||c.handler).apply(l.elem,g),a!==t&&(n.result=a,a===!1&&(n.preventDefault(),n.stopPropagation())));return v.postDispatch&&v.postDispatch.call(this,n),n.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,s,r,o=n.button,a=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||k,s=i.documentElement,r=i.body,e.pageX=n.clientX+(s&&s.scrollLeft||r&&r.scrollLeft||0)-(s&&s.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(s&&s.scrollTop||r&&r.scrollTop||0)-(s&&s.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),e.which||o===t||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[O.expando])return e;var n,i,s=e,r=O.event.fixHooks[e.type]||{},o=r.props?this.props.concat(r.props):this.props;for(e=O.Event(s),n=o.length;n;)i=o[--n],e[i]=s[i];return e.target||(e.target=s.srcElement||k),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),r.filter?r.filter(e,s):e},special:{ready:{setup:O.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){O.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,i){var s=O.extend(new O.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?O.event.trigger(s,null,t):O.event.dispatch.call(t,s),s.isDefaultPrevented()&&n.preventDefault()}},O.event.handle=O.event.dispatch,O.removeEvent=k.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent&&e.detachEvent("on"+t,n)},O.Event=function(e,t){return this instanceof O.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?a:o):this.type=e,t&&O.extend(this,t),this.timeStamp=e&&e.timeStamp||O.now(),this[O.expando]=!0,void 0):new O.Event(e,t)},O.Event.prototype={preventDefault:function(){this.isDefaultPrevented=a;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=a;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()},isDefaultPrevented:o,isPropagationStopped:o,isImmediatePropagationStopped:o},O.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){O.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,s=e.relatedTarget,r=e.handleObj;return r.selector,(!s||s!==i&&!O.contains(i,s))&&(e.type=r.origType,n=r.handler.apply(this,arguments),e.type=t),n}}}),O.support.submitBubbles||(O.event.special.submit={setup:function(){return O.nodeName(this,"form")?!1:(O.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,i=O.nodeName(n,"input")||O.nodeName(n,"button")?n.form:t;i&&!i._submit_attached&&(O.event.add(i,"submit._submit",function(e){e._submit_bubble=!0}),i._submit_attached=!0)}),void 0)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&O.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return O.nodeName(this,"form")?!1:(O.event.remove(this,"._submit"),void 0)}}),O.support.changeBubbles||(O.event.special.change={setup:function(){return J.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(O.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),O.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1,O.event.simulate("change",this,e,!0))})),!1):(O.event.add(this,"beforeactivate._change",function(e){var t=e.target;J.test(t.nodeName)&&!t._change_attached&&(O.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||O.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)}),void 0)},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return O.event.remove(this,"._change"),J.test(this.nodeName)}}),O.support.focusinBubbles||O.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,i=function(e){O.event.simulate(t,e.target,O.event.fix(e),!0)};O.event.special[t]={setup:function(){0===n++&&k.addEventListener(e,i,!0)},teardown:function(){0===--n&&k.removeEventListener(e,i,!0)}}}),O.fn.extend({on:function(e,n,i,s,r){var a,h;if("object"==typeof e){"string"!=typeof n&&(i=i||n,n=t);for(h in e)this.on(h,n,i,e[h],r);return this}if(null==i&&null==s?(s=n,i=n=t):null==s&&("string"==typeof n?(s=i,i=t):(s=i,i=n,n=t)),s===!1)s=o;else if(!s)return this;return 1===r&&(a=s,s=function(e){return O().off(e),a.apply(this,arguments)},s.guid=a.guid||(a.guid=O.guid++)),this.each(function(){O.event.add(this,e,s,i,n)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,n,i){if(e&&e.preventDefault&&e.handleObj){var s=e.handleObj;return O(e.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this}if("object"==typeof e){for(var r in e)this.off(r,n,e[r]);return this}return(n===!1||"function"==typeof n)&&(i=n,n=t),i===!1&&(i=o),this.each(function(){O.event.remove(this,e,i,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return O(this.context).on(e,this.selector,t,n),this},die:function(e,t){return O(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1==arguments.length?this.off(e,"**"):this.off(t,e,n)},trigger:function(e,t){return this.each(function(){O.event.trigger(e,t,this)})},triggerHandler:function(e,t){return this[0]?O.event.trigger(e,t,this[0],!0):void 0},toggle:function(e){var t=arguments,n=e.guid||O.guid++,i=0,s=function(n){var s=(O._data(this,"lastToggle"+e.guid)||0)%i;return O._data(this,"lastToggle"+e.guid,s+1),n.preventDefault(),t[s].apply(this,arguments)||!1};for(s.guid=n;i<t.length;)t[i++].guid=n;return this.click(s)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),O.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){O.fn[t]=function(e,n){return null==n&&(n=e,e=null),arguments.length>0?this.on(t,null,e,n):this.trigger(t)},O.attrFn&&(O.attrFn[t]=!0),et.test(t)&&(O.event.fixHooks[t]=O.event.keyHooks),tt.test(t)&&(O.event.fixHooks[t]=O.event.mouseHooks)}),function(){function e(e,t,n,i,r,o){for(var a=0,h=i.length;h>a;a++){var l=i[a];if(l){var u=!1;for(l=l[e];l;){if(l[s]===n){u=i[l.sizset];break}if(1!==l.nodeType||o||(l[s]=n,l.sizset=a),l.nodeName.toLowerCase()===t){u=l;break}l=l[e]}i[a]=u}}}function n(e,t,n,i,r,o){for(var a=0,h=i.length;h>a;a++){var l=i[a];if(l){var u=!1;for(l=l[e];l;){if(l[s]===n){u=i[l.sizset];break}if(1===l.nodeType)if(o||(l[s]=n,l.sizset=a),"string"!=typeof t){if(l===t){u=!0;break}}else if(d.filter(t,[l]).length>0){u=l;break}l=l[e]}i[a]=u}}}var i=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,s="sizcache"+(Math.random()+"").replace(".",""),r=0,o=Object.prototype.toString,a=!1,h=!0,l=/\\/g,u=/\r\n/g,c=/\W/;[0,0].sort(function(){return h=!1,0});var d=function(e,t,n,s){n=n||[],t=t||k;var r=t;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!e||"string"!=typeof e)return n;var a,h,l,u,c,p,m,v,w=!0,b=d.isXML(t),x=[],S=e;do if(i.exec(""),a=i.exec(S),a&&(S=a[3],x.push(a[1]),a[2])){u=a[3];break}while(a);if(x.length>1&&g.exec(e))if(2===x.length&&f.relative[x[0]])h=V(x[0]+x[1],t,s);else for(h=f.relative[x[0]]?[t]:d(x.shift(),t);x.length;)e=x.shift(),f.relative[e]&&(e+=x.shift()),h=V(e,h,s);else if(!s&&x.length>1&&9===t.nodeType&&!b&&f.match.ID.test(x[0])&&!f.match.ID.test(x[x.length-1])&&(c=d.find(x.shift(),t,b),t=c.expr?d.filter(c.expr,c.set)[0]:c.set[0]),t)for(c=s?{expr:x.pop(),set:y(s)}:d.find(x.pop(),1!==x.length||"~"!==x[0]&&"+"!==x[0]||!t.parentNode?t:t.parentNode,b),h=c.expr?d.filter(c.expr,c.set):c.set,x.length>0?l=y(h):w=!1;x.length;)p=x.pop(),m=p,f.relative[p]?m=x.pop():p="",null==m&&(m=t),f.relative[p](l,m,b);else l=x=[];if(l||(l=h),l||d.error(p||e),"[object Array]"===o.call(l))if(w)if(t&&1===t.nodeType)for(v=0;null!=l[v];v++)l[v]&&(l[v]===!0||1===l[v].nodeType&&d.contains(t,l[v]))&&n.push(h[v]);else for(v=0;null!=l[v];v++)l[v]&&1===l[v].nodeType&&n.push(h[v]);else n.push.apply(n,l);else y(l,n);return u&&(d(u,r,n,s),d.uniqueSort(n)),n};d.uniqueSort=function(e){if(b&&(a=h,e.sort(b),a))for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1);return e},d.matches=function(e,t){return d(e,null,null,t)},d.matchesSelector=function(e,t){return d(t,null,null,[e]).length>0},d.find=function(e,t,n){var i,s,r,o,a,h;if(!e)return[];for(s=0,r=f.order.length;r>s;s++)if(a=f.order[s],(o=f.leftMatch[a].exec(e))&&(h=o[1],o.splice(1,1),"\\"!==h.substr(h.length-1)&&(o[1]=(o[1]||"").replace(l,""),i=f.find[a](o,t,n),null!=i))){e=e.replace(f.match[a],"");break}return i||(i="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName("*"):[]),{set:i,expr:e}},d.filter=function(e,n,i,s){for(var r,o,a,h,l,u,c,p,g,m=e,v=[],y=n,w=n&&n[0]&&d.isXML(n[0]);e&&n.length;){for(a in f.filter)if(null!=(r=f.leftMatch[a].exec(e))&&r[2]){if(u=f.filter[a],c=r[1],o=!1,r.splice(1,1),"\\"===c.substr(c.length-1))continue;if(y===v&&(v=[]),f.preFilter[a])if(r=f.preFilter[a](r,y,i,v,s,w)){if(r===!0)continue}else o=h=!0;if(r)for(p=0;null!=(l=y[p]);p++)l&&(h=u(l,r,p,y),g=s^h,i&&null!=h?g?o=!0:y[p]=!1:g&&(v.push(l),o=!0));if(h!==t){if(i||(y=v),e=e.replace(f.match[a],""),!o)return[];break}}if(e===m){if(null!=o)break;d.error(e)}m=e}return y},d.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var p=d.getText=function(e){var t,n,i=e.nodeType,s="";if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;if("string"==typeof e.innerText)return e.innerText.replace(u,"");for(e=e.firstChild;e;e=e.nextSibling)s+=p(e)}else if(3===i||4===i)return e.nodeValue}else for(t=0;n=e[t];t++)8!==n.nodeType&&(s+=p(n));return s},f=d.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n="string"==typeof t,i=n&&!c.test(t),s=n&&!i;i&&(t=t.toLowerCase());for(var r,o=0,a=e.length;a>o;o++)if(r=e[o]){for(;(r=r.previousSibling)&&1!==r.nodeType;);e[o]=s||r&&r.nodeName.toLowerCase()===t?r||!1:r===t}s&&d.filter(t,e,!0)},">":function(e,t){var n,i="string"==typeof t,s=0,r=e.length;if(i&&!c.test(t)){for(t=t.toLowerCase();r>s;s++)if(n=e[s]){var o=n.parentNode;e[s]=o.nodeName.toLowerCase()===t?o:!1}}else{for(;r>s;s++)n=e[s],n&&(e[s]=i?n.parentNode:n.parentNode===t);i&&d.filter(t,e,!0)}},"":function(t,i,s){var o,a=r++,h=n;"string"!=typeof i||c.test(i)||(i=i.toLowerCase(),o=i,h=e),h("parentNode",i,a,t,o,s)},"~":function(t,i,s){var o,a=r++,h=n;"string"!=typeof i||c.test(i)||(i=i.toLowerCase(),o=i,h=e),h("previousSibling",i,a,t,o,s)}},find:{ID:function(e,t,n){if("undefined"!=typeof t.getElementById&&!n){var i=t.getElementById(e[1]);return i&&i.parentNode?[i]:[]}},NAME:function(e,t){if("undefined"!=typeof t.getElementsByName){for(var n=[],i=t.getElementsByName(e[1]),s=0,r=i.length;r>s;s++)i[s].getAttribute("name")===e[1]&&n.push(i[s]);return 0===n.length?null:n}},TAG:function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e[1]):void 0}},preFilter:{CLASS:function(e,t,n,i,s,r){if(e=" "+e[1].replace(l,"")+" ",r)return e;for(var o,a=0;null!=(o=t[a]);a++)o&&(s^(o.className&&(" "+o.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?n||i.push(o):n&&(t[a]=!1));return!1},ID:function(e){return e[1].replace(l,"")},TAG:function(e){return e[1].replace(l,"").toLowerCase()},CHILD:function(e){if("nth"===e[1]){e[2]||d.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===e[2]&&"2n"||"odd"===e[2]&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&d.error(e[0]);return e[0]=r++,e},ATTR:function(e,t,n,i,s,r){var o=e[1]=e[1].replace(l,"");return!r&&f.attrMap[o]&&(e[1]=f.attrMap[o]),e[4]=(e[4]||e[5]||"").replace(l,""),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,n,s,r){if("not"===e[1]){if(!((i.exec(e[3])||"").length>1||/^\w/.test(e[3]))){var o=d.filter(e[3],t,n,!0^r);return n||s.push.apply(s,o),!1}e[3]=d(e[3],null,null,t)}else if(f.match.POS.test(e[0])||f.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&"hidden"!==e.type},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!d(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return"input"===e.nodeName.toLowerCase()&&"text"===n&&(t===n||null===t)},radio:function(e){return"input"===e.nodeName.toLowerCase()&&"radio"===e.type},checkbox:function(e){return"input"===e.nodeName.toLowerCase()&&"checkbox"===e.type},file:function(e){return"input"===e.nodeName.toLowerCase()&&"file"===e.type},password:function(e){return"input"===e.nodeName.toLowerCase()&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"submit"===e.type},image:function(e){return"input"===e.nodeName.toLowerCase()&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,n,i){return t===i.length-1},even:function(e,t){return 0===t%2},odd:function(e,t){return 1===t%2},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,i){var s=t[1],r=f.filters[s];if(r)return r(e,n,t,i);if("contains"===s)return(e.textContent||e.innerText||p([e])||"").indexOf(t[3])>=0;if("not"===s){for(var o=t[3],a=0,h=o.length;h>a;a++)if(o[a]===e)return!1;return!0}d.error(s)},CHILD:function(e,t){var n,i,r,o,a,h,l=t[1],u=e;switch(l){case"only":case"first":for(;u=u.previousSibling;)if(1===u.nodeType)return!1;if("first"===l)return!0;u=e;case"last":for(;u=u.nextSibling;)if(1===u.nodeType)return!1;return!0;case"nth":if(n=t[2],i=t[3],1===n&&0===i)return!0;if(r=t[0],o=e.parentNode,o&&(o[s]!==r||!e.nodeIndex)){for(a=0,u=o.firstChild;u;u=u.nextSibling)1===u.nodeType&&(u.nodeIndex=++a);o[s]=r}return h=e.nodeIndex-i,0===n?0===h:0===h%n&&h/n>=0}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],i=d.attr?d.attr(e,n):f.attrHandle[n]?f.attrHandle[n](e):null!=e[n]?e[n]:e.getAttribute(n),s=i+"",r=t[2],o=t[4];return null==i?"!="===r:!r&&d.attr?null!=i:"="===r?s===o:"*="===r?s.indexOf(o)>=0:"~="===r?(" "+s+" ").indexOf(o)>=0:o?"!="===r?s!==o:"^="===r?0===s.indexOf(o):"$="===r?s.substr(s.length-o.length)===o:"|="===r?s===o||s.substr(0,o.length+1)===o+"-":!1:s&&i!==!1},POS:function(e,t,n,i){var s=t[2],r=f.setFilters[s];return r?r(e,n,t,i):void 0}}},g=f.match.POS,m=function(e,t){return"\\"+(t-0+1)};for(var v in f.match)f.match[v]=new RegExp(f.match[v].source+/(?![^\[]*\])(?![^\(]*\))/.source),f.leftMatch[v]=new RegExp(/(^(?:.|\r|\n)*?)/.source+f.match[v].source.replace(/\\(\d+)/g,m));f.match.globalPOS=g;var y=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(k.documentElement.childNodes,0)[0].nodeType}catch(w){y=function(e,t){var n=0,i=t||[];if("[object Array]"===o.call(e))Array.prototype.push.apply(i,e);else if("number"==typeof e.length)for(var s=e.length;s>n;n++)i.push(e[n]);else for(;e[n];n++)i.push(e[n]);return i}}var b,x;k.documentElement.compareDocumentPosition?b=function(e,t){return e===t?(a=!0,0):e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t)?-1:1:e.compareDocumentPosition?-1:1}:(b=function(e,t){if(e===t)return a=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,i,s=[],r=[],o=e.parentNode,h=t.parentNode,l=o;if(o===h)return x(e,t);if(!o)return-1;if(!h)return 1;for(;l;)s.unshift(l),l=l.parentNode;for(l=h;l;)r.unshift(l),l=l.parentNode;n=s.length,i=r.length;for(var u=0;n>u&&i>u;u++)if(s[u]!==r[u])return x(s[u],r[u]);return u===n?x(e,r[u],-1):x(s[u],t,1)},x=function(e,t,n){if(e===t)return n;for(var i=e.nextSibling;i;){if(i===t)return-1;i=i.nextSibling}return 1}),function(){var e=k.createElement("div"),n="script"+(new Date).getTime(),i=k.documentElement;e.innerHTML="<a name='"+n+"'/>",i.insertBefore(e,i.firstChild),k.getElementById(n)&&(f.find.ID=function(e,n,i){if("undefined"!=typeof n.getElementById&&!i){var s=n.getElementById(e[1]);return s?s.id===e[1]||"undefined"!=typeof s.getAttributeNode&&s.getAttributeNode("id").nodeValue===e[1]?[s]:t:[]}},f.filter.ID=function(e,t){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&n&&n.nodeValue===t}),i.removeChild(e),i=e=null}(),function(){var e=k.createElement("div");e.appendChild(k.createComment("")),e.getElementsByTagName("*").length>0&&(f.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if("*"===e[1]){for(var i=[],s=0;n[s];s++)1===n[s].nodeType&&i.push(n[s]);n=i}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&"undefined"!=typeof e.firstChild.getAttribute&&"#"!==e.firstChild.getAttribute("href")&&(f.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),k.querySelectorAll&&!function(){var e=d,t=k.createElement("div"),n="__sizzle__";if(t.innerHTML="<p class='TEST'></p>",!t.querySelectorAll||0!==t.querySelectorAll(".TEST").length){d=function(t,i,s,r){if(i=i||k,!r&&!d.isXML(i)){var o=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(o&&(1===i.nodeType||9===i.nodeType)){if(o[1])return y(i.getElementsByTagName(t),s);if(o[2]&&f.find.CLASS&&i.getElementsByClassName)return y(i.getElementsByClassName(o[2]),s)}if(9===i.nodeType){if("body"===t&&i.body)return y([i.body],s);if(o&&o[3]){var a=i.getElementById(o[3]);if(!a||!a.parentNode)return y([],s);if(a.id===o[3])return y([a],s)}try{return y(i.querySelectorAll(t),s)}catch(h){}}else if(1===i.nodeType&&"object"!==i.nodeName.toLowerCase()){var l=i,u=i.getAttribute("id"),c=u||n,p=i.parentNode,g=/^\s*[+~]/.test(t);u?c=c.replace(/'/g,"\\$&"):i.setAttribute("id",c),g&&p&&(i=i.parentNode);try{if(!g||p)return y(i.querySelectorAll("[id='"+c+"'] "+t),s)}catch(m){}finally{u||l.removeAttribute("id")}}}return e(t,i,s,r)};for(var i in e)d[i]=e[i];t=null}}(),function(){var e=k.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var n=!t.call(k.createElement("div"),"div"),i=!1;try{t.call(k.documentElement,"[test!='']:sizzle")}catch(s){i=!0}d.matchesSelector=function(e,s){if(s=s.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!d.isXML(e))try{if(i||!f.match.PSEUDO.test(s)&&!/!=/.test(s)){var r=t.call(e,s);if(r||!n||e.document&&11!==e.document.nodeType)return r}}catch(o){}return d(s,null,null,[e]).length>0}}}(),function(){var e=k.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>",e.getElementsByClassName&&0!==e.getElementsByClassName("e").length&&(e.lastChild.className="e",1!==e.getElementsByClassName("e").length&&(f.order.splice(1,0,"CLASS"),f.find.CLASS=function(e,t,n){return"undefined"==typeof t.getElementsByClassName||n?void 0:t.getElementsByClassName(e[1])},e=null))}(),d.contains=k.documentElement.contains?function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:k.documentElement.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:function(){return!1},d.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?"HTML"!==t.nodeName:!1};var V=function(e,t,n){for(var i,s=[],r="",o=t.nodeType?[t]:t;i=f.match.PSEUDO.exec(e);)r+=i[0],e=e.replace(f.match.PSEUDO,"");e=f.relative[e]?e+"*":e;for(var a=0,h=o.length;h>a;a++)d(e,o[a],s,n);return d.filter(r,s)};d.attr=O.attr,d.selectors.attrMap={},O.find=d,O.expr=d.selectors,O.expr[":"]=O.expr.filters,O.unique=d.uniqueSort,O.text=d.getText,O.isXMLDoc=d.isXML,O.contains=d.contains}();var at=/Until$/,ht=/^(?:parents|prevUntil|prevAll)/,lt=/,/,ut=/^.[^:#\[\.,]*$/,ct=Array.prototype.slice,dt=O.expr.match.globalPOS,pt={children:!0,contents:!0,next:!0,prev:!0};O.fn.extend({find:function(e){var t,n,i=this;if("string"!=typeof e)return O(e).filter(function(){for(t=0,n=i.length;n>t;t++)if(O.contains(i[t],this))return!0});var s,r,o,a=this.pushStack("","find",e);for(t=0,n=this.length;n>t;t++)if(s=a.length,O.find(e,this[t],a),t>0)for(r=s;r<a.length;r++)for(o=0;s>o;o++)if(a[o]===a[r]){a.splice(r--,1);break}return a},has:function(e){var t=O(e);return this.filter(function(){for(var e=0,n=t.length;n>e;e++)if(O.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(l(this,e,!1),"not",e)},filter:function(e){return this.pushStack(l(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?dt.test(e)?O(e,this.context).index(this[0])>=0:O.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,i,s=[],r=this[0];if(O.isArray(e)){for(var o=1;r&&r.ownerDocument&&r!==t;){for(n=0;n<e.length;n++)O(r).is(e[n])&&s.push({selector:e[n],elem:r,level:o});r=r.parentNode,o++}return s}var a=dt.test(e)||"string"!=typeof e?O(e,t||this.context):0;for(n=0,i=this.length;i>n;n++)for(r=this[n];r;){if(a?a.index(r)>-1:O.find.matchesSelector(r,e)){s.push(r);break}if(r=r.parentNode,!r||!r.ownerDocument||r===t||11===r.nodeType)break}return s=s.length>1?O.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?"string"==typeof e?O.inArray(this[0],O(e)):O.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n="string"==typeof e?O(e,t):O.makeArray(e&&e.nodeType?[e]:e),i=O.merge(this.get(),n);return this.pushStack(h(n[0])||h(i[0])?i:O.unique(i))},andSelf:function(){return this.add(this.prevObject)}}),O.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return O.dir(e,"parentNode")},parentsUntil:function(e,t,n){return O.dir(e,"parentNode",n)},next:function(e){return O.nth(e,2,"nextSibling")},prev:function(e){return O.nth(e,2,"previousSibling")},nextAll:function(e){return O.dir(e,"nextSibling")},prevAll:function(e){return O.dir(e,"previousSibling")},nextUntil:function(e,t,n){return O.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return O.dir(e,"previousSibling",n)},siblings:function(e){return O.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return O.sibling(e.firstChild)},contents:function(e){return O.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:O.makeArray(e.childNodes)}},function(e,t){O.fn[e]=function(n,i){var s=O.map(this,t,n);return at.test(e)||(i=n),i&&"string"==typeof i&&(s=O.filter(i,s)),s=this.length>1&&!pt[e]?O.unique(s):s,(this.length>1||lt.test(i))&&ht.test(e)&&(s=s.reverse()),this.pushStack(s,e,ct.call(arguments).join(","))}}),O.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?O.find.matchesSelector(t[0],e)?[t[0]]:[]:O.find.matches(e,t)},dir:function(e,n,i){for(var s=[],r=e[n];r&&9!==r.nodeType&&(i===t||1!==r.nodeType||!O(r).is(i));)1===r.nodeType&&s.push(r),r=r[n];return s},nth:function(e,t,n){t=t||1;for(var i=0;e&&(1!==e.nodeType||++i!==t);e=e[n]);return e},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var ft="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gt=/ jQuery\d+="(?:\d+|null)"/g,mt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,yt=/<([\w:]+)/,wt=/<tbody/i,bt=/<|&#?\w+;/,xt=/<(?:script|style)/i,Vt=/<(?:script|object|embed|option|style)/i,St=new RegExp("<(?:"+ft+")[\\s/>]","i"),Dt=/checked\s*(?:[^=]|=\s*.checked.)/i,_t=/\/(java|ecma)script/i,Ct=/^\s*<!(?:\[CDATA\[|\-\-)/,At={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Tt=u(k);At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,O.support.htmlSerialize||(At._default=[1,"div<div>","</div>"]),O.fn.extend({text:function(e){return O.access(this,function(e){return e===t?O.text(this):this.empty().append((this[0]&&this[0].ownerDocument||k).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(O.isFunction(e))return this.each(function(t){O(this).wrapAll(e.call(this,t))});if(this[0]){var t=O(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return O.isFunction(e)?this.each(function(t){O(this).wrapInner(e.call(this,t))}):this.each(function(){var t=O(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=O.isFunction(e);return this.each(function(n){O(this).wrapAll(t?e.call(this,n):e)
})},unwrap:function(){return this.parent().each(function(){O.nodeName(this,"body")||O(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=O.clean(arguments);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,O.clean(arguments)),e}},remove:function(e,t){for(var n,i=0;null!=(n=this[i]);i++)(!e||O.filter(e,[n]).length)&&(t||1!==n.nodeType||(O.cleanData(n.getElementsByTagName("*")),O.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&O.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return O.clone(this,e,t)})},html:function(e){return O.access(this,function(e){var n=this[0]||{},i=0,s=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,""):null;if(!("string"!=typeof e||xt.test(e)||!O.support.leadingWhitespace&&mt.test(e)||At[(yt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;s>i;i++)n=this[i]||{},1===n.nodeType&&(O.cleanData(n.getElementsByTagName("*")),n.innerHTML=e);n=0}catch(r){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return this[0]&&this[0].parentNode?O.isFunction(e)?this.each(function(t){var n=O(this),i=n.html();n.replaceWith(e.call(this,t,i))}):("string"!=typeof e&&(e=O(e).detach()),this.each(function(){var t=this.nextSibling,n=this.parentNode;O(this).remove(),t?O(t).before(e):O(n).append(e)})):this.length?this.pushStack(O(O.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,i){var s,r,o,a,h=e[0],l=[];if(!O.support.checkClone&&3===arguments.length&&"string"==typeof h&&Dt.test(h))return this.each(function(){O(this).domManip(e,n,i,!0)});if(O.isFunction(h))return this.each(function(s){var r=O(this);e[0]=h.call(this,s,n?r.html():t),r.domManip(e,n,i)});if(this[0]){if(a=h&&h.parentNode,s=O.support.parentNode&&a&&11===a.nodeType&&a.childNodes.length===this.length?{fragment:a}:O.buildFragment(e,this,l),o=s.fragment,r=1===o.childNodes.length?o=o.firstChild:o.firstChild){n=n&&O.nodeName(r,"tr");for(var u=0,d=this.length,p=d-1;d>u;u++)i.call(n?c(this[u],r):this[u],s.cacheable||d>1&&p>u?O.clone(o,!0,!0):o)}l.length&&O.each(l,function(e,t){t.src?O.ajax({type:"GET",global:!1,url:t.src,async:!1,dataType:"script"}):O.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Ct,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),O.buildFragment=function(e,t,n){var i,s,r,o,a=e[0];return t&&t[0]&&(o=t[0].ownerDocument||t[0]),o.createDocumentFragment||(o=k),!(1===e.length&&"string"==typeof a&&a.length<512&&o===k&&"<"===a.charAt(0))||Vt.test(a)||!O.support.checkClone&&Dt.test(a)||!O.support.html5Clone&&St.test(a)||(s=!0,r=O.fragments[a],r&&1!==r&&(i=r)),i||(i=o.createDocumentFragment(),O.clean(e,o,i,n)),s&&(O.fragments[a]=r?i:1),{fragment:i,cacheable:s}},O.fragments={},O.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){O.fn[e]=function(n){var i=[],s=O(n),r=1===this.length&&this[0].parentNode;if(r&&11===r.nodeType&&1===r.childNodes.length&&1===s.length)return s[t](this[0]),this;for(var o=0,a=s.length;a>o;o++){var h=(o>0?this.clone(!0):this).get();O(s[o])[t](h),i=i.concat(h)}return this.pushStack(i,e,s.selector)}}),O.extend({clone:function(e,t,n){var i,s,r,o=O.support.html5Clone||O.isXMLDoc(e)||!St.test("<"+e.nodeName+">")?e.cloneNode(!0):v(e);if(!(O.support.noCloneEvent&&O.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||O.isXMLDoc(e)))for(p(e,o),i=f(e),s=f(o),r=0;i[r];++r)s[r]&&p(i[r],s[r]);if(t&&(d(e,o),n))for(i=f(e),s=f(o),r=0;i[r];++r)d(i[r],s[r]);return i=s=null,o},clean:function(e,t,n,i){var s,r,o,a=[];t=t||k,"undefined"==typeof t.createElement&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||k);for(var h,l=0;null!=(h=e[l]);l++)if("number"==typeof h&&(h+=""),h){if("string"==typeof h)if(bt.test(h)){h=h.replace(vt,"<$1></$2>");var c,d=(yt.exec(h)||["",""])[1].toLowerCase(),p=At[d]||At._default,f=p[0],g=t.createElement("div"),v=Tt.childNodes;for(t===k?Tt.appendChild(g):u(t).appendChild(g),g.innerHTML=p[1]+h+p[2];f--;)g=g.lastChild;if(!O.support.tbody){var y=wt.test(h),w="table"!==d||y?"<table>"!==p[1]||y?[]:g.childNodes:g.firstChild&&g.firstChild.childNodes;for(o=w.length-1;o>=0;--o)O.nodeName(w[o],"tbody")&&!w[o].childNodes.length&&w[o].parentNode.removeChild(w[o])}!O.support.leadingWhitespace&&mt.test(h)&&g.insertBefore(t.createTextNode(mt.exec(h)[0]),g.firstChild),h=g.childNodes,g&&(g.parentNode.removeChild(g),v.length>0&&(c=v[v.length-1],c&&c.parentNode&&c.parentNode.removeChild(c)))}else h=t.createTextNode(h);var b;if(!O.support.appendChecked)if(h[0]&&"number"==typeof(b=h.length))for(o=0;b>o;o++)m(h[o]);else m(h);h.nodeType?a.push(h):a=O.merge(a,h)}if(n)for(s=function(e){return!e.type||_t.test(e.type)},l=0;a[l];l++)if(r=a[l],i&&O.nodeName(r,"script")&&(!r.type||_t.test(r.type)))i.push(r.parentNode?r.parentNode.removeChild(r):r);else{if(1===r.nodeType){var x=O.grep(r.getElementsByTagName("script"),s);a.splice.apply(a,[l+1,0].concat(x))}n.appendChild(r)}return a},cleanData:function(e){for(var t,n,i,s=O.cache,r=O.event.special,o=O.support.deleteExpando,a=0;null!=(i=e[a]);a++)if((!i.nodeName||!O.noData[i.nodeName.toLowerCase()])&&(n=i[O.expando])){if(t=s[n],t&&t.events){for(var h in t.events)r[h]?O.event.remove(i,h):O.removeEvent(i,h,t.handle);t.handle&&(t.handle.elem=null)}o?delete i[O.expando]:i.removeAttribute&&i.removeAttribute(O.expando),delete s[n]}}});var Pt,Et,Nt,kt=/alpha\([^)]*\)/i,Gt=/opacity=([^)]*)/,It=/([A-Z]|^ms)/g,Ot=/^[\-+]?(?:\d*\.)?\d+$/i,Mt=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,jt=/^([\-+])=([\-+.\de]+)/,Lt=/^margin/,Ht={position:"absolute",visibility:"hidden",display:"block"},Rt=["Top","Right","Bottom","Left"];O.fn.css=function(e,n){return O.access(this,function(e,n,i){return i!==t?O.style(e,n,i):O.css(e,n)},e,n,arguments.length>1)},O.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Pt(e,"opacity");return""===n?"1":n}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":O.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,i,s){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a=O.camelCase(n),h=e.style,l=O.cssHooks[a];if(n=O.cssProps[a]||a,i===t)return l&&"get"in l&&(r=l.get(e,!1,s))!==t?r:h[n];if(o=typeof i,"string"===o&&(r=jt.exec(i))&&(i=+(r[1]+1)*+r[2]+parseFloat(O.css(e,n)),o="number"),!(null==i||"number"===o&&isNaN(i)||("number"!==o||O.cssNumber[a]||(i+="px"),l&&"set"in l&&(i=l.set(e,i))===t)))try{h[n]=i}catch(u){}}},css:function(e,n,i){var s,r;return n=O.camelCase(n),r=O.cssHooks[n],n=O.cssProps[n]||n,"cssFloat"===n&&(n="float"),r&&"get"in r&&(s=r.get(e,!0,i))!==t?s:Pt?Pt(e,n):void 0},swap:function(e,t,n){var i,s,r={};for(s in t)r[s]=e.style[s],e.style[s]=t[s];i=n.call(e);for(s in t)e.style[s]=r[s];return i}}),O.curCSS=O.css,k.defaultView&&k.defaultView.getComputedStyle&&(Et=function(e,t){var n,i,s,r,o=e.style;return t=t.replace(It,"-$1").toLowerCase(),(i=e.ownerDocument.defaultView)&&(s=i.getComputedStyle(e,null))&&(n=s.getPropertyValue(t),""!==n||O.contains(e.ownerDocument.documentElement,e)||(n=O.style(e,t))),!O.support.pixelMargin&&s&&Lt.test(t)&&Mt.test(n)&&(r=o.width,o.width=n,n=s.width,o.width=r),n}),k.documentElement.currentStyle&&(Nt=function(e,t){var n,i,s,r=e.currentStyle&&e.currentStyle[t],o=e.style;return null==r&&o&&(s=o[t])&&(r=s),Mt.test(r)&&(n=o.left,i=e.runtimeStyle&&e.runtimeStyle.left,i&&(e.runtimeStyle.left=e.currentStyle.left),o.left="fontSize"===t?"1em":r,r=o.pixelLeft+"px",o.left=n,i&&(e.runtimeStyle.left=i)),""===r?"auto":r}),Pt=Et||Nt,O.each(["height","width"],function(e,t){O.cssHooks[t]={get:function(e,n,i){return n?0!==e.offsetWidth?y(e,t,i):O.swap(e,Ht,function(){return y(e,t,i)}):void 0},set:function(e,t){return Ot.test(t)?t+"px":t}}}),O.support.opacity||(O.cssHooks.opacity={get:function(e,t){return Gt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,s=O.isNumeric(t)?"alpha(opacity="+100*t+")":"",r=i&&i.filter||n.filter||"";n.zoom=1,t>=1&&""===O.trim(r.replace(kt,""))&&(n.removeAttribute("filter"),i&&!i.filter)||(n.filter=kt.test(r)?r.replace(kt,s):r+" "+s)}}),O(function(){O.support.reliableMarginRight||(O.cssHooks.marginRight={get:function(e,t){return O.swap(e,{display:"inline-block"},function(){return t?Pt(e,"margin-right"):e.style.marginRight})}})}),O.expr&&O.expr.filters&&(O.expr.filters.hidden=function(e){var t=e.offsetWidth,n=e.offsetHeight;return 0===t&&0===n||!O.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||O.css(e,"display"))},O.expr.filters.visible=function(e){return!O.expr.filters.hidden(e)}),O.each({margin:"",padding:"",border:"Width"},function(e,t){O.cssHooks[e+t]={expand:function(n){var i,s="string"==typeof n?n.split(" "):[n],r={};for(i=0;4>i;i++)r[e+Rt[i]+t]=s[i]||s[i-2]||s[0];return r}}});var Ft,$t,zt=/%20/g,Bt=/\[\]$/,Wt=/\r?\n/g,qt=/#.*$/,Ut=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Qt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Xt=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Yt=/^(?:GET|HEAD)$/,Jt=/^\/\//,Zt=/\?/,Kt=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,en=/^(?:select|textarea)/i,tn=/\s+/,nn=/([?&])_=[^&]*/,sn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,rn=O.fn.load,on={},an={},hn=["*/"]+["*"];try{Ft=I.href}catch(ln){Ft=k.createElement("a"),Ft.href="",Ft=Ft.href}$t=sn.exec(Ft.toLowerCase())||[],O.fn.extend({load:function(e,n,i){if("string"!=typeof e&&rn)return rn.apply(this,arguments);if(!this.length)return this;var s=e.indexOf(" ");if(s>=0){var r=e.slice(s,e.length);e=e.slice(0,s)}var o="GET";n&&(O.isFunction(n)?(i=n,n=t):"object"==typeof n&&(n=O.param(n,O.ajaxSettings.traditional),o="POST"));var a=this;return O.ajax({url:e,type:o,dataType:"html",data:n,complete:function(e,t,n){n=e.responseText,e.isResolved()&&(e.done(function(e){n=e}),a.html(r?O("<div>").append(n.replace(Kt,"")).find(r):n)),i&&a.each(i,[n,t,e])}}),this},serialize:function(){return O.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?O.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||en.test(this.nodeName)||Qt.test(this.type))}).map(function(e,t){var n=O(this).val();return null==n?null:O.isArray(n)?O.map(n,function(e){return{name:t.name,value:e.replace(Wt,"\r\n")}}):{name:t.name,value:n.replace(Wt,"\r\n")}}).get()}}),O.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){O.fn[t]=function(e){return this.on(t,e)}}),O.each(["get","post"],function(e,n){O[n]=function(e,i,s,r){return O.isFunction(i)&&(r=r||s,s=i,i=t),O.ajax({type:n,url:e,data:i,success:s,dataType:r})}}),O.extend({getScript:function(e,n){return O.get(e,t,n,"script")},getJSON:function(e,t,n){return O.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?x(e,O.ajaxSettings):(t=e,e=O.ajaxSettings),x(e,t),e},ajaxSettings:{url:Ft,isLocal:Xt.test($t[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":hn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":O.parseJSON,"text xml":O.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:w(on),ajaxTransport:w(an),ajax:function(e,n){function i(e,n,i,o){if(2!==x){x=2,h&&clearTimeout(h),a=t,r=o||"",V.readyState=e>0?4:0;var l,c,y,w,b,_=n,C=i?S(d,V,i):t;if(e>=200&&300>e||304===e)if(d.ifModified&&((w=V.getResponseHeader("Last-Modified"))&&(O.lastModified[s]=w),(b=V.getResponseHeader("Etag"))&&(O.etag[s]=b)),304===e)_="notmodified",l=!0;else try{c=D(d,C),_="success",l=!0}catch(A){_="parsererror",y=A}else y=_,(!_||e)&&(_="error",0>e&&(e=0));V.status=e,V.statusText=""+(n||_),l?g.resolveWith(p,[c,_,V]):g.rejectWith(p,[V,_,y]),V.statusCode(v),v=t,u&&f.trigger("ajax"+(l?"Success":"Error"),[V,d,l?c:y]),m.fireWith(p,[V,_]),u&&(f.trigger("ajaxComplete",[V,d]),--O.active||O.event.trigger("ajaxStop"))}}"object"==typeof e&&(n=e,e=t),n=n||{};var s,r,o,a,h,l,u,c,d=O.ajaxSetup({},n),p=d.context||d,f=p!==d&&(p.nodeType||p instanceof O)?O(p):O.event,g=O.Deferred(),m=O.Callbacks("once memory"),v=d.statusCode||{},y={},w={},x=0,V={readyState:0,setRequestHeader:function(e,t){if(!x){var n=e.toLowerCase();e=w[n]=w[n]||e,y[e]=t}return this},getAllResponseHeaders:function(){return 2===x?r:null},getResponseHeader:function(e){var n;if(2===x){if(!o)for(o={};n=Ut.exec(r);)o[n[1].toLowerCase()]=n[2];n=o[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){return x||(d.mimeType=e),this},abort:function(e){return e=e||"abort",a&&a.abort(e),i(0,e),this}};if(g.promise(V),V.success=V.done,V.error=V.fail,V.complete=m.add,V.statusCode=function(e){if(e){var t;if(2>x)for(t in e)v[t]=[v[t],e[t]];else t=e[V.status],V.then(t,t)}return this},d.url=((e||d.url)+"").replace(qt,"").replace(Jt,$t[1]+"//"),d.dataTypes=O.trim(d.dataType||"*").toLowerCase().split(tn),null==d.crossDomain&&(l=sn.exec(d.url.toLowerCase()),d.crossDomain=!(!l||l[1]==$t[1]&&l[2]==$t[2]&&(l[3]||("http:"===l[1]?80:443))==($t[3]||("http:"===$t[1]?80:443)))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=O.param(d.data,d.traditional)),b(on,d,n,V),2===x)return!1;if(u=d.global,d.type=d.type.toUpperCase(),d.hasContent=!Yt.test(d.type),u&&0===O.active++&&O.event.trigger("ajaxStart"),!d.hasContent&&(d.data&&(d.url+=(Zt.test(d.url)?"&":"?")+d.data,delete d.data),s=d.url,d.cache===!1)){var _=O.now(),C=d.url.replace(nn,"$1_="+_);d.url=C+(C===d.url?(Zt.test(d.url)?"&":"?")+"_="+_:"")}(d.data&&d.hasContent&&d.contentType!==!1||n.contentType)&&V.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(s=s||d.url,O.lastModified[s]&&V.setRequestHeader("If-Modified-Since",O.lastModified[s]),O.etag[s]&&V.setRequestHeader("If-None-Match",O.etag[s])),V.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+hn+"; q=0.01":""):d.accepts["*"]);for(c in d.headers)V.setRequestHeader(c,d.headers[c]);if(d.beforeSend&&(d.beforeSend.call(p,V,d)===!1||2===x))return V.abort(),!1;for(c in{success:1,error:1,complete:1})V[c](d[c]);if(a=b(an,d,n,V)){V.readyState=1,u&&f.trigger("ajaxSend",[V,d]),d.async&&d.timeout>0&&(h=setTimeout(function(){V.abort("timeout")},d.timeout));try{x=1,a.send(y,i)}catch(A){if(!(2>x))throw A;i(-1,A)}}else i(-1,"No Transport");return V},param:function(e,n){var i=[],s=function(e,t){t=O.isFunction(t)?t():t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=O.ajaxSettings.traditional),O.isArray(e)||e.jquery&&!O.isPlainObject(e))O.each(e,function(){s(this.name,this.value)});else for(var r in e)V(r,e[r],n,s);return i.join("&").replace(zt,"+")}}),O.extend({active:0,lastModified:{},etag:{}});var un=O.now(),cn=/(\=)\?(&|$)|\?\?/i;O.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return O.expando+"_"+un++}}),O.ajaxPrefilter("json jsonp",function(t,n,i){var s="string"==typeof t.data&&/^application\/x\-www\-form\-urlencoded/.test(t.contentType);if("jsonp"===t.dataTypes[0]||t.jsonp!==!1&&(cn.test(t.url)||s&&cn.test(t.data))){var r,o=t.jsonpCallback=O.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a=e[o],h=t.url,l=t.data,u="$1"+o+"$2";return t.jsonp!==!1&&(h=h.replace(cn,u),t.url===h&&(s&&(l=l.replace(cn,u)),t.data===l&&(h+=(/\?/.test(h)?"&":"?")+t.jsonp+"="+o))),t.url=h,t.data=l,e[o]=function(e){r=[e]},i.always(function(){e[o]=a,r&&O.isFunction(a)&&e[o](r[0])}),t.converters["script json"]=function(){return r||O.error(o+" was not called"),r[0]},t.dataTypes[0]="json","script"}}),O.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return O.globalEval(e),e}}}),O.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),O.ajaxTransport("script",function(e){if(e.crossDomain){var n,i=k.head||k.getElementsByTagName("head")[0]||k.documentElement;return{send:function(s,r){n=k.createElement("script"),n.async="async",e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,s){(s||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,i&&n.parentNode&&i.removeChild(n),n=t,s||r(200,"success"))},i.insertBefore(n,i.firstChild)},abort:function(){n&&n.onload(0,1)}}}});var dn,pn=e.ActiveXObject?function(){for(var e in dn)dn[e](0,1)}:!1,fn=0;O.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&_()||C()}:_,function(e){O.extend(O.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(O.ajaxSettings.xhr()),O.support.ajax&&O.ajaxTransport(function(n){if(!n.crossDomain||O.support.cors){var i;return{send:function(s,r){var o,a,h=n.xhr();if(n.username?h.open(n.type,n.url,n.async,n.username,n.password):h.open(n.type,n.url,n.async),n.xhrFields)for(a in n.xhrFields)h[a]=n.xhrFields[a];n.mimeType&&h.overrideMimeType&&h.overrideMimeType(n.mimeType),n.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");try{for(a in s)h.setRequestHeader(a,s[a])}catch(l){}h.send(n.hasContent&&n.data||null),i=function(e,s){var a,l,u,c,d;try{if(i&&(s||4===h.readyState))if(i=t,o&&(h.onreadystatechange=O.noop,pn&&delete dn[o]),s)4!==h.readyState&&h.abort();else{a=h.status,u=h.getAllResponseHeaders(),c={},d=h.responseXML,d&&d.documentElement&&(c.xml=d);try{c.text=h.responseText}catch(e){}try{l=h.statusText}catch(p){l=""}a||!n.isLocal||n.crossDomain?1223===a&&(a=204):a=c.text?200:404}}catch(f){s||r(-1,f)}c&&r(a,l,c,u)},n.async&&4!==h.readyState?(o=++fn,pn&&(dn||(dn={},O(e).unload(pn)),dn[o]=i),h.onreadystatechange=i):i()},abort:function(){i&&i(0,1)}}}});var gn,mn,vn,yn,wn={},bn=/^(?:toggle|show|hide)$/,xn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,Vn=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];O.fn.extend({show:function(e,t,n){var i,s;if(e||0===e)return this.animate(P("show",3),e,t,n);for(var r=0,o=this.length;o>r;r++)i=this[r],i.style&&(s=i.style.display,O._data(i,"olddisplay")||"none"!==s||(s=i.style.display=""),(""===s&&"none"===O.css(i,"display")||!O.contains(i.ownerDocument.documentElement,i))&&O._data(i,"olddisplay",E(i.nodeName)));for(r=0;o>r;r++)i=this[r],i.style&&(s=i.style.display,(""===s||"none"===s)&&(i.style.display=O._data(i,"olddisplay")||""));return this},hide:function(e,t,n){if(e||0===e)return this.animate(P("hide",3),e,t,n);for(var i,s,r=0,o=this.length;o>r;r++)i=this[r],i.style&&(s=O.css(i,"display"),"none"===s||O._data(i,"olddisplay")||O._data(i,"olddisplay",s));for(r=0;o>r;r++)this[r].style&&(this[r].style.display="none");return this},_toggle:O.fn.toggle,toggle:function(e,t,n){var i="boolean"==typeof e;return O.isFunction(e)&&O.isFunction(t)?this._toggle.apply(this,arguments):null==e||i?this.each(function(){var t=i?e:O(this).is(":hidden");O(this)[t?"show":"hide"]()}):this.animate(P("toggle",3),e,t,n),this},fadeTo:function(e,t,n,i){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){function s(){r.queue===!1&&O._mark(this);var t,n,i,s,o,a,h,l,u,c,d,p=O.extend({},r),f=1===this.nodeType,g=f&&O(this).is(":hidden");p.animatedProperties={};for(i in e)if(t=O.camelCase(i),i!==t&&(e[t]=e[i],delete e[i]),(o=O.cssHooks[t])&&"expand"in o){a=o.expand(e[t]),delete e[t];for(i in a)i in e||(e[i]=a[i])}for(t in e){if(n=e[t],O.isArray(n)?(p.animatedProperties[t]=n[1],n=e[t]=n[0]):p.animatedProperties[t]=p.specialEasing&&p.specialEasing[t]||p.easing||"swing","hide"===n&&g||"show"===n&&!g)return p.complete.call(this);!f||"height"!==t&&"width"!==t||(p.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===O.css(this,"display")&&"none"===O.css(this,"float")&&(O.support.inlineBlockNeedsLayout&&"inline"!==E(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=p.overflow&&(this.style.overflow="hidden");for(i in e)s=new O.fx(this,p,i),n=e[i],bn.test(n)?(d=O._data(this,"toggle"+i)||("toggle"===n?g?"show":"hide":0),d?(O._data(this,"toggle"+i,"show"===d?"hide":"show"),s[d]()):s[n]()):(h=xn.exec(n),l=s.cur(),h?(u=parseFloat(h[2]),c=h[3]||(O.cssNumber[i]?"":"px"),"px"!==c&&(O.style(this,i,(u||1)+c),l=(u||1)/s.cur()*l,O.style(this,i,l+c)),h[1]&&(u=("-="===h[1]?-1:1)*u+l),s.custom(l,u,c)):s.custom(l,n,""));return!0}var r=O.speed(t,n,i);return O.isEmptyObject(e)?this.each(r.complete,[!1]):(e=O.extend({},e),r.queue===!1?this.each(s):this.queue(r.queue,s))},stop:function(e,n,i){return"string"!=typeof e&&(i=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){function t(e,t,n){var s=t[n];O.removeData(e,n,!0),s.stop(i)}var n,s=!1,r=O.timers,o=O._data(this);if(i||O._unmark(!0,this),null==e)for(n in o)o[n]&&o[n].stop&&n.indexOf(".run")===n.length-4&&t(this,o,n);else o[n=e+".run"]&&o[n].stop&&t(this,o,n);for(n=r.length;n--;)r[n].elem!==this||null!=e&&r[n].queue!==e||(i?r[n](!0):r[n].saveState(),s=!0,r.splice(n,1));i&&s||O.dequeue(this,e)})}}),O.each({slideDown:P("show",1),slideUp:P("hide",1),slideToggle:P("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){O.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),O.extend({speed:function(e,t,n){var i=e&&"object"==typeof e?O.extend({},e):{complete:n||!n&&t||O.isFunction(e)&&e,duration:e,easing:n&&t||t&&!O.isFunction(t)&&t};return i.duration=O.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in O.fx.speeds?O.fx.speeds[i.duration]:O.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(e){O.isFunction(i.old)&&i.old.call(this),i.queue?O.dequeue(this,i.queue):e!==!1&&O._unmark(this)},i},easing:{linear:function(e){return e},swing:function(e){return-Math.cos(e*Math.PI)/2+.5}},timers:[],fx:function(e,t,n){this.options=t,this.elem=e,this.prop=n,t.orig=t.orig||{}}}),O.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(O.fx.step[this.prop]||O.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var e,t=O.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?t&&"auto"!==t?t:0:e},custom:function(e,n,i){function s(e){return r.step(e)}var r=this,o=O.fx;this.startTime=yn||A(),this.end=n,this.now=this.start=e,this.pos=this.state=0,this.unit=i||this.unit||(O.cssNumber[this.prop]?"":"px"),s.queue=this.options.queue,s.elem=this.elem,s.saveState=function(){O._data(r.elem,"fxshow"+r.prop)===t&&(r.options.hide?O._data(r.elem,"fxshow"+r.prop,r.start):r.options.show&&O._data(r.elem,"fxshow"+r.prop,r.end))},s()&&O.timers.push(s)&&!vn&&(vn=setInterval(o.tick,o.interval))},show:function(){var e=O._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||O.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),O(this.elem).show()},hide:function(){this.options.orig[this.prop]=O._data(this.elem,"fxshow"+this.prop)||O.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,n,i,s=yn||A(),r=!0,o=this.elem,a=this.options;if(e||s>=a.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0;for(t in a.animatedProperties)a.animatedProperties[t]!==!0&&(r=!1);if(r){if(null==a.overflow||O.support.shrinkWrapBlocks||O.each(["","X","Y"],function(e,t){o.style["overflow"+t]=a.overflow[e]}),a.hide&&O(o).hide(),a.hide||a.show)for(t in a.animatedProperties)O.style(o,t,a.orig[t]),O.removeData(o,"fxshow"+t,!0),O.removeData(o,"toggle"+t,!0);i=a.complete,i&&(a.complete=!1,i.call(o))}return!1}return 1/0==a.duration?this.now=s:(n=s-this.startTime,this.state=n/a.duration,this.pos=O.easing[a.animatedProperties[this.prop]](this.state,n,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},O.extend(O.fx,{tick:function(){for(var e,t=O.timers,n=0;n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||O.fx.stop()},interval:13,stop:function(){clearInterval(vn),vn=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){O.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&null!=e.elem.style[e.prop]?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),O.each(Vn.concat.apply([],Vn),function(e,t){t.indexOf("margin")&&(O.fx.step[t]=function(e){O.style(e.elem,t,Math.max(0,e.now)+e.unit)})}),O.expr&&O.expr.filters&&(O.expr.filters.animated=function(e){return O.grep(O.timers,function(t){return e===t.elem}).length});var Sn,Dn=/^t(?:able|d|h)$/i,_n=/^(?:body|html)$/i;Sn="getBoundingClientRect"in k.documentElement?function(e,t,n,i){try{i=e.getBoundingClientRect()}catch(s){}if(!i||!O.contains(n,e))return i?{top:i.top,left:i.left}:{top:0,left:0};var r=t.body,o=N(t),a=n.clientTop||r.clientTop||0,h=n.clientLeft||r.clientLeft||0,l=o.pageYOffset||O.support.boxModel&&n.scrollTop||r.scrollTop,u=o.pageXOffset||O.support.boxModel&&n.scrollLeft||r.scrollLeft,c=i.top+l-a,d=i.left+u-h;return{top:c,left:d}}:function(e,t,n){for(var i,s=e.offsetParent,r=e,o=t.body,a=t.defaultView,h=a?a.getComputedStyle(e,null):e.currentStyle,l=e.offsetTop,u=e.offsetLeft;(e=e.parentNode)&&e!==o&&e!==n&&(!O.support.fixedPosition||"fixed"!==h.position);)i=a?a.getComputedStyle(e,null):e.currentStyle,l-=e.scrollTop,u-=e.scrollLeft,e===s&&(l+=e.offsetTop,u+=e.offsetLeft,!O.support.doesNotAddBorder||O.support.doesAddBorderForTableAndCells&&Dn.test(e.nodeName)||(l+=parseFloat(i.borderTopWidth)||0,u+=parseFloat(i.borderLeftWidth)||0),r=s,s=e.offsetParent),O.support.subtractsBorderForOverflowNotVisible&&"visible"!==i.overflow&&(l+=parseFloat(i.borderTopWidth)||0,u+=parseFloat(i.borderLeftWidth)||0),h=i;return("relative"===h.position||"static"===h.position)&&(l+=o.offsetTop,u+=o.offsetLeft),O.support.fixedPosition&&"fixed"===h.position&&(l+=Math.max(n.scrollTop,o.scrollTop),u+=Math.max(n.scrollLeft,o.scrollLeft)),{top:l,left:u}},O.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){O.offset.setOffset(this,e,t)});var n=this[0],i=n&&n.ownerDocument;return i?n===i.body?O.offset.bodyOffset(n):Sn(n,i,i.documentElement):null},O.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return O.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(O.css(e,"marginTop"))||0,n+=parseFloat(O.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var i=O.css(e,"position");"static"===i&&(e.style.position="relative");var s,r,o=O(e),a=o.offset(),h=O.css(e,"top"),l=O.css(e,"left"),u=("absolute"===i||"fixed"===i)&&O.inArray("auto",[h,l])>-1,c={},d={};u?(d=o.position(),s=d.top,r=d.left):(s=parseFloat(h)||0,r=parseFloat(l)||0),O.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(c.top=t.top-a.top+s),null!=t.left&&(c.left=t.left-a.left+r),"using"in t?t.using.call(e,c):o.css(c)}},O.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),n=this.offset(),i=_n.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(O.css(e,"marginTop"))||0,n.left-=parseFloat(O.css(e,"marginLeft"))||0,i.top+=parseFloat(O.css(t[0],"borderTopWidth"))||0,i.left+=parseFloat(O.css(t[0],"borderLeftWidth"))||0,{top:n.top-i.top,left:n.left-i.left}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||k.body;e&&!_n.test(e.nodeName)&&"static"===O.css(e,"position");)e=e.offsetParent;return e})}}),O.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var i=/Y/.test(n);O.fn[e]=function(s){return O.access(this,function(e,s,r){var o=N(e);return r===t?o?n in o?o[n]:O.support.boxModel&&o.document.documentElement[s]||o.document.body[s]:e[s]:(o?o.scrollTo(i?O(o).scrollLeft():r,i?r:O(o).scrollTop()):e[s]=r,void 0)},e,s,arguments.length,null)}}),O.each({Height:"height",Width:"width"},function(e,n){var i="client"+e,s="scroll"+e,r="offset"+e;O.fn["inner"+e]=function(){var e=this[0];return e?e.style?parseFloat(O.css(e,n,"padding")):this[n]():null},O.fn["outer"+e]=function(e){var t=this[0];return t?t.style?parseFloat(O.css(t,n,e?"margin":"border")):this[n]():null},O.fn[n]=function(e){return O.access(this,function(e,n,o){var a,h,l,u;return O.isWindow(e)?(a=e.document,h=a.documentElement[i],O.support.boxModel&&h||a.body&&a.body[i]||h):9===e.nodeType?(a=e.documentElement,a[i]>=a[s]?a[i]:Math.max(e.body[s],a[s],e.body[r],a[r])):o===t?(l=O.css(e,n),u=parseFloat(l),O.isNumeric(u)?u:l):(O(e).css(n,o),void 0)},n,e,arguments.length,null)}}),e.jQuery=e.$=O,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return O})}(window),jQuery.ui||function(e){e.ui={version:"1.8.1",plugin:{add:function(t,n,i){t=e.ui[t].prototype;for(var s in i)t.plugins[s]=t.plugins[s]||[],t.plugins[s].push([n,i[s]])},call:function(e,t,n){if((t=e.plugins[t])&&e.element[0].parentNode)for(var i=0;i<t.length;i++)e.options[t[i][0]]&&t[i][1].apply(e.element,n)}},contains:function(e,t){return document.compareDocumentPosition?16&e.compareDocumentPosition(t):e!==t&&e.contains(t)},hasScroll:function(t,n){if("hidden"==e(t).css("overflow"))return!1;n=n&&"left"==n?"scrollLeft":"scrollTop";var i=!1;return t[n]>0?!0:(t[n]=1,i=t[n]>0,t[n]=0,i)},isOverAxis:function(e,t,n){return e>t&&t+n>e},isOver:function(t,n,i,s,r,o){return e.ui.isOverAxis(t,i,r)&&e.ui.isOverAxis(n,s,o)},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}},e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return"number"==typeof t?this.each(function(){var i=this;setTimeout(function(){e(i).focus(),n&&n.call(i)},t)}):this._focus.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none")},scrollParent:function(){var t;return t=e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length){t=e(this[0]);for(var n;t.length&&t[0]!==document;){if(n=t.css("position"),("absolute"==n||"relative"==n||"fixed"==n)&&(n=parseInt(t.css("zIndex")),!isNaN(n)&&0!=n))return n;
t=t.parent()}}return 0}}),e.extend(e.expr[":"],{data:function(t,n,i){return!!e.data(t,i[3])},focusable:function(t){var n=t.nodeName.toLowerCase(),i=e.attr(t,"tabindex");return(/input|select|textarea|button|object/.test(n)?!t.disabled:"a"==n||"area"==n?t.href||!isNaN(i):!isNaN(i))&&!e(t)["area"==n?"parents":"closest"](":hidden").length},tabbable:function(t){var n=e.attr(t,"tabindex");return(isNaN(n)||n>=0)&&e(t).is(":focusable")}})}(jQuery),function(e){var t=e.fn.remove;e.fn.remove=function(n,i){return this.each(function(){return i||(!n||e.filter(n,[this]).length)&&e("*",this).add(this).each(function(){e(this).triggerHandler("remove")}),t.call(e(this),n,i)})},e.widget=function(t,n,i){var s,r=t.split(".")[0];t=t.split(".")[1],s=r+"-"+t,i||(i=n,n=e.Widget),e.expr[":"][s]=function(n){return!!e.data(n,t)},e[r]=e[r]||{},e[r][t]=function(e,t){arguments.length&&this._createWidget(e,t)},n=new n,n.options=e.extend({},n.options),e[r][t].prototype=e.extend(!0,n,{namespace:r,widgetName:t,widgetEventPrefix:e[r][t].prototype.widgetEventPrefix||t,widgetBaseClass:s},i),e.widget.bridge(t,e[r][t])},e.widget.bridge=function(t,n){e.fn[t]=function(i){var s="string"==typeof i,r=Array.prototype.slice.call(arguments,1),o=this;return i=!s&&r.length?e.extend.apply(null,[!0,i].concat(r)):i,s&&"_"===i.substring(0,1)?o:(s?this.each(function(){var n=e.data(this,t),s=n&&e.isFunction(n[i])?n[i].apply(n,r):n;return s!==n&&void 0!==s?(o=s,!1):void 0}):this.each(function(){var s=e.data(this,t);s?(i&&s.option(i),s._init()):e.data(this,t,new n(i,this))}),o)}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,n){this.element=e(n).data(this.widgetName,this),this.options=e.extend(!0,{},this.options,e.metadata&&e.metadata.get(n)[this.widgetName],t);var i=this;this.element.bind("remove."+this.widgetName,function(){i.destroy()}),this._create(),this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(t,n){var i=t,s=this;if(0===arguments.length)return e.extend({},s.options);if("string"==typeof t){if(void 0===n)return this.options[t];i={},i[t]=n}return e.each(i,function(e,t){s._setOption(e,t)}),s},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,n,i){var s=this.options[t];if(n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i=i||{},n.originalEvent){t=e.event.props.length;for(var r;t;)r=e.event.props[--t],n[r]=n.originalEvent[r]}return this.element.trigger(n,i),!(e.isFunction(s)&&s.call(this.element[0],n,i)===!1||n.isDefaultPrevented())}}}(jQuery),function(e){e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(t){return e._preventClickEvent?(e._preventClickEvent=!1,t.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(t){if(t.originalEvent=t.originalEvent||{},!t.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,i=1==t.which,s="string"==typeof this.options.cancel?e(t.target).parents().add(t.target).filter(this.options.cancel).length:!1;return i&&!s&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.browser.safari||t.preventDefault(),t.originalEvent.mouseHandled=!0)):!0}},_mouseMove:function(t){return e.browser.msie&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&((this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1)?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,this._preventClickEvent=t.target==this._mouseDownEvent.target,this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){e.ui=e.ui||{};var t=/left|center|right/,n=/top|center|bottom/,i=e.fn.position,s=e.fn.offset;e.fn.position=function(s){if(!s||!s.of)return i.apply(this,arguments);s=e.extend({},s);var r,o,a,h=e(s.of),l=(s.collision||"flip").split(" "),u=s.offset?s.offset.split(" "):[0,0];return 9===s.of.nodeType?(r=h.width(),o=h.height(),a={top:0,left:0}):s.of.scrollTo&&s.of.document?(r=h.width(),o=h.height(),a={top:h.scrollTop(),left:h.scrollLeft()}):s.of.preventDefault?(s.at="left top",r=o=0,a={top:s.of.pageY,left:s.of.pageX}):(r=h.outerWidth(),o=h.outerHeight(),a=h.offset()),e.each(["my","at"],function(){var e=(s[this]||"").split(" ");1===e.length&&(e=t.test(e[0])?e.concat(["center"]):n.test(e[0])?["center"].concat(e):["center","center"]),e[0]=t.test(e[0])?e[0]:"center",e[1]=n.test(e[1])?e[1]:"center",s[this]=e}),1===l.length&&(l[1]=l[0]),u[0]=parseInt(u[0],10)||0,1===u.length&&(u[1]=u[0]),u[1]=parseInt(u[1],10)||0,"right"===s.at[0]?a.left+=r:"center"===s.at[0]&&(a.left+=r/2),"bottom"===s.at[1]?a.top+=o:"center"===s.at[1]&&(a.top+=o/2),a.left+=u[0],a.top+=u[1],this.each(function(){var t=e(this),n=t.outerWidth(),i=t.outerHeight(),h=e.extend({},a);"right"===s.my[0]?h.left-=n:"center"===s.my[0]&&(h.left-=n/2),"bottom"===s.my[1]?h.top-=i:"center"===s.my[1]&&(h.top-=i/2),h.left=parseInt(h.left),h.top=parseInt(h.top),e.each(["left","top"],function(t,a){e.ui.position[l[t]]&&e.ui.position[l[t]][a](h,{targetWidth:r,targetHeight:o,elemWidth:n,elemHeight:i,offset:u,my:s.my,at:s.at})}),e.fn.bgiframe&&t.bgiframe(),t.offset(e.extend(h,{using:s.using}))})},e.ui.position={fit:{left:function(t,n){var i=e(window);n=t.left+n.elemWidth-i.width()-i.scrollLeft(),t.left=n>0?t.left-n:Math.max(0,t.left)},top:function(t,n){var i=e(window);n=t.top+n.elemHeight-i.height()-i.scrollTop(),t.top=n>0?t.top-n:Math.max(0,t.top)}},flip:{left:function(t,n){if("center"!==n.at[0]){var i=e(window);i=t.left+n.elemWidth-i.width()-i.scrollLeft();var s="left"===n.my[0]?-n.elemWidth:"right"===n.my[0]?n.elemWidth:0,r=-2*n.offset[0];t.left+=t.left<0?s+n.targetWidth+r:i>0?s-n.targetWidth+r:0}},top:function(t,n){if("center"!==n.at[1]){var i=e(window);i=t.top+n.elemHeight-i.height()-i.scrollTop();var s="top"===n.my[1]?-n.elemHeight:"bottom"===n.my[1]?n.elemHeight:0,r="top"===n.at[1]?n.targetHeight:-n.targetHeight,o=-2*n.offset[1];t.top+=t.top<0?s+n.targetHeight+o:i>0?s+r+o:0}}}},e.offset.setOffset||(e.offset.setOffset=function(t,n){/static/.test(e.curCSS(t,"position"))&&(t.style.position="relative");var i=e(t),s=i.offset(),r=parseInt(e.curCSS(t,"top",!0),10)||0,o=parseInt(e.curCSS(t,"left",!0),10)||0;s={top:n.top-s.top+r,left:n.left-s.left+o},"using"in n?n.using.call(t,s):i.css(s)},e.fn.offset=function(t){var n=this[0];return n&&n.ownerDocument?t?this.each(function(){e.offset.setOffset(this,t)}):s.call(this):null})}(jQuery),function(e){e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t=this,n=this.options;if(this._mouseSliding=this._keySliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),n.disabled&&this.element.addClass("ui-slider-disabled ui-disabled"),this.range=e([]),n.range&&(n.range===!0?(this.range=e("<div></div>"),n.values||(n.values=[this._valueMin(),this._valueMin()]),n.values.length&&2!==n.values.length&&(n.values=[n.values[0],n.values[0]])):this.range=e("<div></div>"),this.range.appendTo(this.element).addClass("ui-slider-range"),("min"===n.range||"max"===n.range)&&this.range.addClass("ui-slider-range-"+n.range),this.range.addClass("ui-widget-header")),0===e(".ui-slider-handle",this.element).length&&e("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle"),n.values&&n.values.length)for(;e(".ui-slider-handle",this.element).length<n.values.length;)e("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");this.handles=e(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all"),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){n.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){n.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(n){var i,s,r,o=!0,a=e(this).data("index.ui-slider-handle");if(!t.options.disabled){switch(n.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(o=!1,!t._keySliding&&(t._keySliding=!0,e(this).addClass("ui-state-active"),i=t._start(n,a),i===!1))return}switch(r=t.options.step,i=s=t.options.values&&t.options.values.length?t.values(a):t.value(),n.keyCode){case e.ui.keyCode.HOME:s=t._valueMin();break;case e.ui.keyCode.END:s=t._valueMax();break;case e.ui.keyCode.PAGE_UP:s=i+(t._valueMax()-t._valueMin())/5;break;case e.ui.keyCode.PAGE_DOWN:s=i-(t._valueMax()-t._valueMin())/5;break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===t._valueMax())return;s=i+r;break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===t._valueMin())return;s=i-r}return t._slide(n,a,s),o}}).keyup(function(n){var i=e(this).data("index.ui-slider-handle");t._keySliding&&(t._keySliding=!1,t._stop(n,i),t._change(n,i),e(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(t){var n,i,s,r,o,a,h=this.options;return h.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(n),s=this._valueMax()-this._valueMin()+1,o=this,this.handles.each(function(t){var n=Math.abs(i-o.values(t));s>n&&(s=n,r=e(this),a=t)}),h.range===!0&&this.values(1)===h.min&&(a+=1,r=e(this.handles[a])),this._start(t,a)===!1?!1:(this._mouseSliding=!0,o._handleIndex=a,r.addClass("ui-state-active").focus(),h=r.offset(),this._clickOffset=e(t.target).parents().andSelf().is(".ui-slider-handle")?{left:t.pageX-h.left-r.width()/2,top:t.pageY-h.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)}:{left:0,top:0},i=this._normValueFromMouse(n),this._slide(t,a,i),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t=this._normValueFromMouse({x:e.pageX,y:e.pageY});return this._slide(e,this._handleIndex,t),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._clickOffset=this._handleIndex=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t;return"horizontal"===this.orientation?(t=this.elementSize.width,e=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,e=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),t=e/t,t>1&&(t=1),0>t&&(t=0),"vertical"===this.orientation&&(t=1-t),e=this._valueMax()-this._valueMin(),this._trimAlignValue(this._valueMin()+t*e)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var i;this.options.values&&this.options.values.length?(i=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&n>i||1===t&&i>n)&&(n=i),n!==this.values(t)&&(i=this.values(),i[t]=n,e=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),this.values(t?0:1),e!==!1&&this.values(t,n,!0))):n!==this.value()&&(e=this._trigger("slide",e,{handle:this.handles[t],value:n}),e!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){return arguments.length&&(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0)),this._value()},values:function(t,n){var i,s,r;if(arguments.length>1&&(this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t)),!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(i=this.options.values,s=arguments[0],r=0;r<i.length;r+=1)i[r]=this._trimAlignValue(s[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,n){var i,s=0;switch(e.isArray(this.options.values)&&(s=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.attr("disabled","disabled"),this.element.addClass("ui-disabled")):(this.handles.removeAttr("disabled"),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),i=0;s>i;i+=1)this._change(null,i);this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(t=this.options.values.slice(),n=0;n<t.length;n+=1)t[n]=this._trimAlignValue(t[n]);return t},_trimAlignValue:function(e){if(e<this._valueMin())return this._valueMin();if(e>this._valueMax())return this._valueMax();var t=this.options.step,n=e%t;return e-=n,n>=t/2&&(e+=t),parseFloat(e.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,i,s,r,o=this.options.range,a=this.options,h=this,l=this._animateOff?!1:a.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(i){t=100*((h.values(i)-h._valueMin())/(h._valueMax()-h._valueMin())),u["horizontal"===h.orientation?"left":"bottom"]=t+"%",e(this).stop(1,1)[l?"animate":"css"](u,a.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===i&&h.range.stop(1,1)[l?"animate":"css"]({left:t+"%"},a.animate),1===i&&h.range[l?"animate":"css"]({width:t-n+"%"},{queue:!1,duration:a.animate})):(0===i&&h.range.stop(1,1)[l?"animate":"css"]({bottom:t+"%"},a.animate),1===i&&h.range[l?"animate":"css"]({height:t-n+"%"},{queue:!1,duration:a.animate}))),n=t}):(i=this.value(),s=this._valueMin(),r=this._valueMax(),t=r!==s?100*((i-s)/(r-s)):0,u["horizontal"===h.orientation?"left":"bottom"]=t+"%",this.handle.stop(1,1)[l?"animate":"css"](u,a.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:t+"%"},a.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-t+"%"},{queue:!1,duration:a.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:t+"%"},a.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-t+"%"},{queue:!1,duration:a.animate}))}}),e.extend(e.ui.slider,{version:"1.8.1"})}(jQuery),jQuery.effects||function(e){function t(t){var n;return t&&t.constructor==Array&&3==t.length?t:(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10)]:(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3])]:(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(t)?a.transparent:a[e.trim(t).toLowerCase()]}function n(n,i){var s;do{if(s=e.curCSS(n,i),""!=s&&"transparent"!=s||e.nodeName(n,"body"))break;i="backgroundColor"}while(n=n.parentNode);return t(s)}function i(){var e,t,n=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,i={};if(n&&n.length&&n[0]&&n[n[0]])for(var s=n.length;s--;)e=n[s],"string"==typeof n[e]&&(t=e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),i[t]=n[e]);else for(e in n)"string"==typeof n[e]&&(i[e]=n[e]);return i}function s(t){var n,i;for(n in t)i=t[n],(null==i||e.isFunction(i)||n in l||/scrollbar/.test(n)||!/color/i.test(n)&&isNaN(parseFloat(i)))&&delete t[n];return t}function r(e,t){var n,i={_:0};for(n in t)e[n]!=t[n]&&(i[n]=t[n]);return i}function o(t,n,i,s){return"object"==typeof t&&(s=n,i=null,n=t,t=n.effect),e.isFunction(n)&&(s=n,i=null,n={}),e.isFunction(i)&&(s=i,i=null),("number"==typeof n||e.fx.speeds[n])&&(s=i,i=n,n={}),n=n||{},i=i||n.duration,i=e.fx.off?0:"number"==typeof i?i:e.fx.speeds[i]||e.fx.speeds._default,s=s||n.complete,[t,n,i,s]}e.effects={},e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(i,s){e.fx.step[s]=function(e){e.colorInit||(e.start=n(e.elem,s),e.end=t(e.end),e.colorInit=!0),e.elem.style[s]="rgb("+Math.max(Math.min(parseInt(e.pos*(e.end[0]-e.start[0])+e.start[0],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[1]-e.start[1])+e.start[1],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[2]-e.start[2])+e.start[2],10),255),0)+")"}});var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},h=["add","remove","toggle"],l={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.effects.animateClass=function(t,n,o,a){return e.isFunction(o)&&(a=o,o=null),this.each(function(){var l,u=e(this),c=u.attr("style")||" ",d=s(i.call(this)),p=u.attr("className");e.each(h,function(e,n){t[n]&&u[n+"Class"](t[n])}),l=s(i.call(this)),u.attr("className",p),u.animate(r(d,l),n,o,function(){e.each(h,function(e,n){t[n]&&u[n+"Class"](t[n])}),"object"==typeof u.attr("style")?(u.attr("style").cssText="",u.attr("style").cssText=c):u.attr("style",c),a&&a.apply(this,arguments)})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,i,s){return n?e.effects.animateClass.apply(this,[{add:t},n,i,s]):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,i,s){return n?e.effects.animateClass.apply(this,[{remove:t},n,i,s]):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(t,n,i,s,r){return"boolean"==typeof n||void 0===n?i?e.effects.animateClass.apply(this,[n?{add:t}:{remove:t},i,s,r]):this._toggleClass(t,n):e.effects.animateClass.apply(this,[{toggle:t},n,i,s])},switchClass:function(t,n,i,s,r){return e.effects.animateClass.apply(this,[{add:n,remove:t},i,s,r])}}),e.extend(e.effects,{version:"1.8.1",save:function(e,t){for(var n=0;n<t.length;n++)null!==t[n]&&e.data("ec.storage."+t[n],e[0].style[t[n]])},restore:function(e,t){for(var n=0;n<t.length;n++)null!==t[n]&&e.css(t[n],e.data("ec.storage."+t[n]))},setMode:function(e,t){return"toggle"==t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":e=0;break;case"center":e=.5;break;case"right":e=1;break;default:e=e[1]/t.width}return{x:e,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},i=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});return t.wrap(i),i=t.parent(),"static"==t.css("position")?(i.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,i){n[i]=t.css(i),isNaN(parseInt(n[i],10))&&(n[i]="auto")}),t.css({position:"relative",top:0,left:0})),i.css(n).show()},removeWrapper:function(e){return e.parent().is(".ui-effects-wrapper")?e.parent().replaceWith(e):e},setTransition:function(t,n,i,s){return s=s||{},e.each(n,function(e,n){unit=t.cssUnit(n),unit[0]>0&&(s[n]=unit[0]*i+unit[1])}),s}}),e.fn.extend({effect:function(t){var n=o.apply(this,arguments);n={options:n[1],duration:n[2],callback:n[3]};var i=e.effects[t];return i&&!e.fx.off?i.call(this,n):this},_show:e.fn.show,show:function(t){if(!t||"number"==typeof t||e.fx.speeds[t])return this._show.apply(this,arguments);var n=o.apply(this,arguments);return n[1].mode="show",this.effect.apply(this,n)},_hide:e.fn.hide,hide:function(t){if(!t||"number"==typeof t||e.fx.speeds[t])return this._hide.apply(this,arguments);var n=o.apply(this,arguments);return n[1].mode="hide",this.effect.apply(this,n)},__toggle:e.fn.toggle,toggle:function(t){if(!t||"number"==typeof t||e.fx.speeds[t]||"boolean"==typeof t||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=o.apply(this,arguments);return n[1].mode="toggle",this.effect.apply(this,n)},cssUnit:function(t){var n=this.css(t),i=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(i=[parseFloat(n),t])}),i}}),e.easing.jswing=e.easing.swing,e.extend(e.easing,{def:"easeOutQuad",swing:function(t,n,i,s,r){return e.easing[e.easing.def](t,n,i,s,r)},easeInQuad:function(e,t,n,i,s){return i*(t/=s)*t+n},easeOutQuad:function(e,t,n,i,s){return-i*(t/=s)*(t-2)+n},easeInOutQuad:function(e,t,n,i,s){return(t/=s/2)<1?i/2*t*t+n:-i/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,i,s){return i*(t/=s)*t*t+n},easeOutCubic:function(e,t,n,i,s){return i*((t=t/s-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,i,s){return(t/=s/2)<1?i/2*t*t*t+n:i/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,i,s){return i*(t/=s)*t*t*t+n},easeOutQuart:function(e,t,n,i,s){return-i*((t=t/s-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,i,s){return(t/=s/2)<1?i/2*t*t*t*t+n:-i/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,i,s){return i*(t/=s)*t*t*t*t+n},easeOutQuint:function(e,t,n,i,s){return i*((t=t/s-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,i,s){return(t/=s/2)<1?i/2*t*t*t*t*t+n:i/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,i,s){return-i*Math.cos(t/s*(Math.PI/2))+i+n},easeOutSine:function(e,t,n,i,s){return i*Math.sin(t/s*(Math.PI/2))+n},easeInOutSine:function(e,t,n,i,s){return-i/2*(Math.cos(Math.PI*t/s)-1)+n},easeInExpo:function(e,t,n,i,s){return 0==t?n:i*Math.pow(2,10*(t/s-1))+n},easeOutExpo:function(e,t,n,i,s){return t==s?n+i:i*(-Math.pow(2,-10*t/s)+1)+n},easeInOutExpo:function(e,t,n,i,s){return 0==t?n:t==s?n+i:(t/=s/2)<1?i/2*Math.pow(2,10*(t-1))+n:i/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,i,s){return-i*(Math.sqrt(1-(t/=s)*t)-1)+n},easeOutCirc:function(e,t,n,i,s){return i*Math.sqrt(1-(t=t/s-1)*t)+n},easeInOutCirc:function(e,t,n,i,s){return(t/=s/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+n:i/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,i,s){e=1.70158;var r=0,o=i;return 0==t?n:1==(t/=s)?n+i:(r||(r=.3*s),o<Math.abs(i)?(o=i,e=r/4):e=r/(2*Math.PI)*Math.asin(i/o),-(o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*s-e)*Math.PI/r))+n)},easeOutElastic:function(e,t,n,i,s){e=1.70158;var r=0,o=i;return 0==t?n:1==(t/=s)?n+i:(r||(r=.3*s),o<Math.abs(i)?(o=i,e=r/4):e=r/(2*Math.PI)*Math.asin(i/o),o*Math.pow(2,-10*t)*Math.sin(2*(t*s-e)*Math.PI/r)+i+n)},easeInOutElastic:function(e,t,n,i,s){e=1.70158;var r=0,o=i;return 0==t?n:2==(t/=s/2)?n+i:(r||(r=1.5*.3*s),o<Math.abs(i)?(o=i,e=r/4):e=r/(2*Math.PI)*Math.asin(i/o),1>t?-.5*o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*s-e)*Math.PI/r)+n:.5*o*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*s-e)*Math.PI/r)+i+n)},easeInBack:function(e,t,n,i,s,r){return void 0==r&&(r=1.70158),i*(t/=s)*t*((r+1)*t-r)+n},easeOutBack:function(e,t,n,i,s,r){return void 0==r&&(r=1.70158),i*((t=t/s-1)*t*((r+1)*t+r)+1)+n},easeInOutBack:function(e,t,n,i,s,r){return void 0==r&&(r=1.70158),(t/=s/2)<1?i/2*t*t*(((r*=1.525)+1)*t-r)+n:i/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+n},easeInBounce:function(t,n,i,s,r){return s-e.easing.easeOutBounce(t,r-n,0,s,r)+i},easeOutBounce:function(e,t,n,i,s){return(t/=s)<1/2.75?7.5625*i*t*t+n:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+n:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+n:i*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(t,n,i,s,r){return r/2>n?.5*e.easing.easeInBounce(t,2*n,0,s,r)+i:.5*e.easing.easeOutBounce(t,2*n-r,0,s,r)+.5*s+i}})}(jQuery),function(e){e.effects.blind=function(t){return this.queue(function(){var n=e(this),i=["position","top","left"],s=e.effects.setMode(n,t.options.mode||"hide"),r=t.options.direction||"vertical";e.effects.save(n,i),n.show();var o=e.effects.createWrapper(n).css({overflow:"hidden"}),a="vertical"==r?"height":"width";r="vertical"==r?o.height():o.width(),"show"==s&&o.css(a,0);var h={};h[a]="show"==s?r:0,o.animate(h,t.duration,t.options.easing,function(){"hide"==s&&n.hide(),e.effects.restore(n,i),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery),function(){var e=this,t=e._,n={},i=Array.prototype,s=Object.prototype,r=Function.prototype,o=i.push,a=i.slice,h=i.concat,l=s.toString,u=s.hasOwnProperty,c=i.forEach,d=i.map,p=i.reduce,f=i.reduceRight,g=i.filter,m=i.every,v=i.some,y=i.indexOf,w=i.lastIndexOf,b=Array.isArray,x=Object.keys,V=r.bind,S=function(e){return e instanceof S?e:this instanceof S?(this._wrapped=e,void 0):new S(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=S),exports._=S):e._=S,S.VERSION="1.5.2";var D=S.each=S.forEach=function(e,t,i){if(null!=e)if(c&&e.forEach===c)e.forEach(t,i);else if(e.length===+e.length){for(var s=0,r=e.length;r>s;s++)if(t.call(i,e[s],s,e)===n)return}else for(var o=S.keys(e),s=0,r=o.length;r>s;s++)if(t.call(i,e[o[s]],o[s],e)===n)return};S.map=S.collect=function(e,t,n){var i=[];return null==e?i:d&&e.map===d?e.map(t,n):(D(e,function(e,s,r){i.push(t.call(n,e,s,r))}),i)};var _="Reduce of empty array with no initial value";S.reduce=S.foldl=S.inject=function(e,t,n,i){var s=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return i&&(t=S.bind(t,i)),s?e.reduce(t,n):e.reduce(t);if(D(e,function(e,r,o){s?n=t.call(i,n,e,r,o):(n=e,s=!0)}),!s)throw new TypeError(_);return n},S.reduceRight=S.foldr=function(e,t,n,i){var s=arguments.length>2;if(null==e&&(e=[]),f&&e.reduceRight===f)return i&&(t=S.bind(t,i)),s?e.reduceRight(t,n):e.reduceRight(t);var r=e.length;if(r!==+r){var o=S.keys(e);r=o.length}if(D(e,function(a,h,l){h=o?o[--r]:--r,s?n=t.call(i,n,e[h],h,l):(n=e[h],s=!0)}),!s)throw new TypeError(_);return n},S.find=S.detect=function(e,t,n){var i;return C(e,function(e,s,r){return t.call(n,e,s,r)?(i=e,!0):void 0}),i},S.filter=S.select=function(e,t,n){var i=[];return null==e?i:g&&e.filter===g?e.filter(t,n):(D(e,function(e,s,r){t.call(n,e,s,r)&&i.push(e)}),i)},S.reject=function(e,t,n){return S.filter(e,function(e,i,s){return!t.call(n,e,i,s)},n)},S.every=S.all=function(e,t,i){t||(t=S.identity);var s=!0;return null==e?s:m&&e.every===m?e.every(t,i):(D(e,function(e,r,o){return(s=s&&t.call(i,e,r,o))?void 0:n}),!!s)};var C=S.some=S.any=function(e,t,i){t||(t=S.identity);var s=!1;return null==e?s:v&&e.some===v?e.some(t,i):(D(e,function(e,r,o){return s||(s=t.call(i,e,r,o))?n:void 0}),!!s)};S.contains=S.include=function(e,t){return null==e?!1:y&&e.indexOf===y?-1!=e.indexOf(t):C(e,function(e){return e===t})},S.invoke=function(e,t){var n=a.call(arguments,2),i=S.isFunction(t);return S.map(e,function(e){return(i?t:e[t]).apply(e,n)})},S.pluck=function(e,t){return S.map(e,function(e){return e[t]})},S.where=function(e,t,n){return S.isEmpty(t)?n?void 0:[]:S[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},S.findWhere=function(e,t){return S.where(e,t,!0)},S.max=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&S.isEmpty(e))return-1/0;var i={computed:-1/0,value:-1/0};return D(e,function(e,s,r){var o=t?t.call(n,e,s,r):e;o>i.computed&&(i={value:e,computed:o})}),i.value},S.min=function(e,t,n){if(!t&&S.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&S.isEmpty(e))return 1/0;var i={computed:1/0,value:1/0};return D(e,function(e,s,r){var o=t?t.call(n,e,s,r):e;o<i.computed&&(i={value:e,computed:o})}),i.value},S.shuffle=function(e){var t,n=0,i=[];return D(e,function(e){t=S.random(n++),i[n-1]=i[t],i[t]=e}),i},S.sample=function(e,t,n){return arguments.length<2||n?e[S.random(e.length-1)]:S.shuffle(e).slice(0,Math.max(0,t))};var A=function(e){return S.isFunction(e)?e:function(t){return t[e]
}};S.sortBy=function(e,t,n){var i=A(t);return S.pluck(S.map(e,function(e,t,s){return{value:e,index:t,criteria:i.call(n,e,t,s)}}).sort(function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return e.index-t.index}),"value")};var T=function(e){return function(t,n,i){var s={},r=null==n?S.identity:A(n);return D(t,function(n,o){var a=r.call(i,n,o,t);e(s,a,n)}),s}};S.groupBy=T(function(e,t,n){(S.has(e,t)?e[t]:e[t]=[]).push(n)}),S.indexBy=T(function(e,t,n){e[t]=n}),S.countBy=T(function(e,t){S.has(e,t)?e[t]++:e[t]=1}),S.sortedIndex=function(e,t,n,i){n=null==n?S.identity:A(n);for(var s=n.call(i,t),r=0,o=e.length;o>r;){var a=r+o>>>1;n.call(i,e[a])<s?r=a+1:o=a}return r},S.toArray=function(e){return e?S.isArray(e)?a.call(e):e.length===+e.length?S.map(e,S.identity):S.values(e):[]},S.size=function(e){return null==e?0:e.length===+e.length?e.length:S.keys(e).length},S.first=S.head=S.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:a.call(e,0,t)},S.initial=function(e,t,n){return a.call(e,0,e.length-(null==t||n?1:t))},S.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:a.call(e,Math.max(e.length-t,0))},S.rest=S.tail=S.drop=function(e,t,n){return a.call(e,null==t||n?1:t)},S.compact=function(e){return S.filter(e,S.identity)};var P=function(e,t,n){return t&&S.every(e,S.isArray)?h.apply(n,e):(D(e,function(e){S.isArray(e)||S.isArguments(e)?t?o.apply(n,e):P(e,t,n):n.push(e)}),n)};S.flatten=function(e,t){return P(e,t,[])},S.without=function(e){return S.difference(e,a.call(arguments,1))},S.uniq=S.unique=function(e,t,n,i){S.isFunction(t)&&(i=n,n=t,t=!1);var s=n?S.map(e,n,i):e,r=[],o=[];return D(s,function(n,i){(t?i&&o[o.length-1]===n:S.contains(o,n))||(o.push(n),r.push(e[i]))}),r},S.union=function(){return S.uniq(S.flatten(arguments,!0))},S.intersection=function(e){var t=a.call(arguments,1);return S.filter(S.uniq(e),function(e){return S.every(t,function(t){return S.indexOf(t,e)>=0})})},S.difference=function(e){var t=h.apply(i,a.call(arguments,1));return S.filter(e,function(e){return!S.contains(t,e)})},S.zip=function(){for(var e=S.max(S.pluck(arguments,"length").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=S.pluck(arguments,""+n);return t},S.object=function(e,t){if(null==e)return{};for(var n={},i=0,s=e.length;s>i;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n},S.indexOf=function(e,t,n){if(null==e)return-1;var i=0,s=e.length;if(n){if("number"!=typeof n)return i=S.sortedIndex(e,t),e[i]===t?i:-1;i=0>n?Math.max(0,s+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;s>i;i++)if(e[i]===t)return i;return-1},S.lastIndexOf=function(e,t,n){if(null==e)return-1;var i=null!=n;if(w&&e.lastIndexOf===w)return i?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var s=i?n:e.length;s--;)if(e[s]===t)return s;return-1},S.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((t-e)/n),0),s=0,r=new Array(i);i>s;)r[s++]=e,e+=n;return r};var E=function(){};S.bind=function(e,t){var n,i;if(V&&e.bind===V)return V.apply(e,a.call(arguments,1));if(!S.isFunction(e))throw new TypeError;return n=a.call(arguments,2),i=function(){if(!(this instanceof i))return e.apply(t,n.concat(a.call(arguments)));E.prototype=e.prototype;var s=new E;E.prototype=null;var r=e.apply(s,n.concat(a.call(arguments)));return Object(r)===r?r:s}},S.partial=function(e){var t=a.call(arguments,1);return function(){return e.apply(this,t.concat(a.call(arguments)))}},S.bindAll=function(e){var t=a.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return D(t,function(t){e[t]=S.bind(e[t],e)}),e},S.memoize=function(e,t){var n={};return t||(t=S.identity),function(){var i=t.apply(this,arguments);return S.has(n,i)?n[i]:n[i]=e.apply(this,arguments)}},S.delay=function(e,t){var n=a.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},S.defer=function(e){return S.delay.apply(S,[e,1].concat(a.call(arguments,1)))},S.throttle=function(e,t,n){var i,s,r,o=null,a=0;n||(n={});var h=function(){a=n.leading===!1?0:new Date,o=null,r=e.apply(i,s)};return function(){var l=new Date;a||n.leading!==!1||(a=l);var u=t-(l-a);return i=this,s=arguments,0>=u?(clearTimeout(o),o=null,a=l,r=e.apply(i,s)):o||n.trailing===!1||(o=setTimeout(h,u)),r}},S.debounce=function(e,t,n){var i,s,r,o,a;return function(){r=this,s=arguments,o=new Date;var h=function(){var l=new Date-o;t>l?i=setTimeout(h,t-l):(i=null,n||(a=e.apply(r,s)))},l=n&&!i;return i||(i=setTimeout(h,t)),l&&(a=e.apply(r,s)),a}},S.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},S.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},S.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},S.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},S.keys=x||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)S.has(e,n)&&t.push(n);return t},S.values=function(e){for(var t=S.keys(e),n=t.length,i=new Array(n),s=0;n>s;s++)i[s]=e[t[s]];return i},S.pairs=function(e){for(var t=S.keys(e),n=t.length,i=new Array(n),s=0;n>s;s++)i[s]=[t[s],e[t[s]]];return i},S.invert=function(e){for(var t={},n=S.keys(e),i=0,s=n.length;s>i;i++)t[e[n[i]]]=n[i];return t},S.functions=S.methods=function(e){var t=[];for(var n in e)S.isFunction(e[n])&&t.push(n);return t.sort()},S.extend=function(e){return D(a.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},S.pick=function(e){var t={},n=h.apply(i,a.call(arguments,1));return D(n,function(n){n in e&&(t[n]=e[n])}),t},S.omit=function(e){var t={},n=h.apply(i,a.call(arguments,1));for(var s in e)S.contains(n,s)||(t[s]=e[s]);return t},S.defaults=function(e){return D(a.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e};var N=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof S&&(e=e._wrapped),t instanceof S&&(t=t._wrapped);var s=l.call(e);if(s!=l.call(t))return!1;switch(s){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var r=n.length;r--;)if(n[r]==e)return i[r]==t;var o=e.constructor,a=t.constructor;if(o!==a&&!(S.isFunction(o)&&o instanceof o&&S.isFunction(a)&&a instanceof a))return!1;n.push(e),i.push(t);var h=0,u=!0;if("[object Array]"==s){if(h=e.length,u=h==t.length)for(;h--&&(u=N(e[h],t[h],n,i)););}else{for(var c in e)if(S.has(e,c)&&(h++,!(u=S.has(t,c)&&N(e[c],t[c],n,i))))break;if(u){for(c in t)if(S.has(t,c)&&!h--)break;u=!h}}return n.pop(),i.pop(),u};S.isEqual=function(e,t){return N(e,t,[],[])},S.isEmpty=function(e){if(null==e)return!0;if(S.isArray(e)||S.isString(e))return 0===e.length;for(var t in e)if(S.has(e,t))return!1;return!0},S.isElement=function(e){return!(!e||1!==e.nodeType)},S.isArray=b||function(e){return"[object Array]"==l.call(e)},S.isObject=function(e){return e===Object(e)},D(["Arguments","Function","String","Number","Date","RegExp"],function(e){S["is"+e]=function(t){return l.call(t)=="[object "+e+"]"}}),S.isArguments(arguments)||(S.isArguments=function(e){return!(!e||!S.has(e,"callee"))}),"function"!=typeof/./&&(S.isFunction=function(e){return"function"==typeof e}),S.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},S.isNaN=function(e){return S.isNumber(e)&&e!=+e},S.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==l.call(e)},S.isNull=function(e){return null===e},S.isUndefined=function(e){return void 0===e},S.has=function(e,t){return u.call(e,t)},S.noConflict=function(){return e._=t,this},S.identity=function(e){return e},S.times=function(e,t,n){for(var i=Array(Math.max(0,e)),s=0;e>s;s++)i[s]=t.call(n,s);return i},S.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var k={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};k.unescape=S.invert(k.escape);var G={escape:new RegExp("["+S.keys(k.escape).join("")+"]","g"),unescape:new RegExp("("+S.keys(k.unescape).join("|")+")","g")};S.each(["escape","unescape"],function(e){S[e]=function(t){return null==t?"":(""+t).replace(G[e],function(t){return k[e][t]})}}),S.result=function(e,t){if(null==e)return void 0;var n=e[t];return S.isFunction(n)?n.call(e):n},S.mixin=function(e){D(S.functions(e),function(t){var n=S[t]=e[t];S.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),L.call(this,n.apply(S,e))}})};var I=0;S.uniqueId=function(e){var t=++I+"";return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;S.template=function(e,t,n){var i;n=S.defaults({},n,S.templateSettings);var s=new RegExp([(n.escape||O).source,(n.interpolate||O).source,(n.evaluate||O).source].join("|")+"|$","g"),r=0,o="__p+='";e.replace(s,function(t,n,i,s,a){return o+=e.slice(r,a).replace(j,function(e){return"\\"+M[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(o+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),s&&(o+="';\n"+s+"\n__p+='"),r=a+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{i=new Function(n.variable||"obj","_",o)}catch(a){throw a.source=o,a}if(t)return i(t,S);var h=function(e){return i.call(this,e,S)};return h.source="function("+(n.variable||"obj")+"){\n"+o+"}",h},S.chain=function(e){return S(e).chain()};var L=function(e){return this._chain?S(e).chain():e};S.mixin(S),D(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=i[e];S.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!=e&&"splice"!=e||0!==n.length||delete n[0],L.call(this,n)}}),D(["concat","join","slice"],function(e){var t=i[e];S.prototype[e]=function(){return L.call(this,t.apply(this._wrapped,arguments))}}),S.extend(S.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){var e,t=this,n=t.Backbone,i=[],s=i.push,r=i.slice,o=i.splice;e="undefined"!=typeof exports?exports:t.Backbone={},e.VERSION="1.0.0";var a=t._;a||"undefined"==typeof require||(a=require("underscore")),e.$=t.jQuery||t.Zepto||t.ender||t.$,e.noConflict=function(){return t.Backbone=n,this},e.emulateHTTP=!1,e.emulateJSON=!1;var h=e.Events={on:function(e,t,n){if(!u(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var i=this._events[e]||(this._events[e]=[]);return i.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,n){if(!u(this,"once",e,[t,n])||!t)return this;var i=this,s=a.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,n)},off:function(e,t,n){var i,s,r,o,h,l,c,d;if(!this._events||!u(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events={},this;for(o=e?[e]:a.keys(this._events),h=0,l=o.length;l>h;h++)if(e=o[h],r=this._events[e]){if(this._events[e]=i=[],t||n)for(c=0,d=r.length;d>c;c++)s=r[c],(t&&t!==s.callback&&t!==s.callback._callback||n&&n!==s.context)&&i.push(s);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=r.call(arguments,1);if(!u(this,"trigger",e,t))return this;var n=this._events[e],i=this._events.all;return n&&c(n,t),i&&c(i,arguments),this},stopListening:function(e,t,n){var i=this._listeners;if(!i)return this;var s=!t&&!n;"object"==typeof t&&(n=this),e&&((i={})[e._listenerId]=e);for(var r in i)i[r].off(t,n,this),s&&delete this._listeners[r];return this}},l=/\s+/,u=function(e,t,n,i){if(!n)return!0;if("object"==typeof n){for(var s in n)e[t].apply(e,[s,n[s]].concat(i));return!1}if(l.test(n)){for(var r=n.split(l),o=0,a=r.length;a>o;o++)e[t].apply(e,[r[o]].concat(i));return!1}return!0},c=function(e,t){var n,i=-1,s=e.length,r=t[0],o=t[1],a=t[2];switch(t.length){case 0:for(;++i<s;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<s;)(n=e[i]).callback.call(n.ctx,r);return;case 2:for(;++i<s;)(n=e[i]).callback.call(n.ctx,r,o);return;case 3:for(;++i<s;)(n=e[i]).callback.call(n.ctx,r,o,a);return;default:for(;++i<s;)(n=e[i]).callback.apply(n.ctx,t)}},d={listenTo:"on",listenToOnce:"once"};a.each(d,function(e,t){h[t]=function(t,n,i){var s=this._listeners||(this._listeners={}),r=t._listenerId||(t._listenerId=a.uniqueId("l"));return s[r]=t,"object"==typeof n&&(i=this),t[e](n,i,this),this}}),h.bind=h.on,h.unbind=h.off,a.extend(e,h);var p=e.Model=function(e,t){var n,i=e||{};t||(t={}),this.cid=a.uniqueId("c"),this.attributes={},a.extend(this,a.pick(t,f)),t.parse&&(i=this.parse(i,t)||{}),(n=a.result(this,"defaults"))&&(i=a.defaults({},i,n)),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)},f=["url","urlRoot","collection"];a.extend(p.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return a.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return a.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,n){var i,s,r,o,h,l,u,c;if(null==e)return this;if("object"==typeof e?(s=e,n=t):(s={})[e]=t,n||(n={}),!this._validate(s,n))return!1;r=n.unset,h=n.silent,o=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=a.clone(this.attributes),this.changed={}),c=this.attributes,u=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)t=s[i],a.isEqual(c[i],t)||o.push(i),a.isEqual(u[i],t)?delete this.changed[i]:this.changed[i]=t,r?delete c[i]:c[i]=t;if(!h){o.length&&(this._pending=!0);for(var d=0,p=o.length;p>d;d++)this.trigger("change:"+o[d],this,c[o[d]],n)}if(l)return this;if(!h)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,a.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,a.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!a.isEmpty(this.changed):a.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?a.clone(this.changed):!1;var t,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e)a.isEqual(i[s],t=e[s])||((n||(n={}))[s]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return a.clone(this._previousAttributes)},fetch:function(e){e=e?a.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(i){return t.set(t.parse(i,e),e)?(n&&n(t,i,e),t.trigger("sync",t,i,e),void 0):!1},j(this,e),this.sync("read",this,e)},save:function(e,t,n){var i,s,r,o=this.attributes;if(null==e||"object"==typeof e?(i=e,n=t):(i={})[e]=t,!(!i||n&&n.wait||this.set(i,n)))return!1;if(n=a.extend({validate:!0},n),!this._validate(i,n))return!1;i&&n.wait&&(this.attributes=a.extend({},o,i)),void 0===n.parse&&(n.parse=!0);var h=this,l=n.success;return n.success=function(e){h.attributes=o;var t=h.parse(e,n);return n.wait&&(t=a.extend(i||{},t)),a.isObject(t)&&!h.set(t,n)?!1:(l&&l(h,e,n),h.trigger("sync",h,e,n),void 0)},j(this,n),s=this.isNew()?"create":n.patch?"patch":"update","patch"===s&&(n.attrs=i),r=this.sync(s,this,n),i&&n.wait&&(this.attributes=o),r},destroy:function(e){e=e?a.clone(e):{};var t=this,n=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(s){(e.wait||t.isNew())&&i(),n&&n(t,s,e),t.isNew()||t.trigger("sync",t,s,e)},this.isNew())return e.success(),!1;j(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=a.result(this,"urlRoot")||a.result(this.collection,"url")||M();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},a.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=a.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return n?(this.trigger("invalid",this,n,a.extend(t||{},{validationError:n})),!1):!0}});var g=["keys","values","pairs","invert","pick","omit"];a.each(g,function(e){p.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.attributes),a[e].apply(a,t)}});var m=e.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,a.extend({silent:!0},t))},v={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};a.extend(m.prototype,h,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return e.sync.apply(this,arguments)},add:function(e,t){return this.set(e,a.defaults(t||{},y))},remove:function(e,t){e=a.isArray(e)?e.slice():[e],t||(t={});var n,i,s,r;for(n=0,i=e.length;i>n;n++)r=this.get(e[n]),r&&(delete this._byId[r.id],delete this._byId[r.cid],s=this.indexOf(r),this.models.splice(s,1),this.length--,t.silent||(t.index=s,r.trigger("remove",r,this,t)),this._removeReference(r));return this},set:function(e,t){t=a.defaults(t||{},v),t.parse&&(e=this.parse(e,t)),a.isArray(e)||(e=e?[e]:[]);var n,i,r,h,l,u=t.at,c=this.comparator&&null==u&&t.sort!==!1,d=a.isString(this.comparator)?this.comparator:null,p=[],f=[],g={};for(n=0,i=e.length;i>n;n++)(r=this._prepareModel(e[n],t))&&((h=this.get(r))?(t.remove&&(g[h.cid]=!0),t.merge&&(h.set(r.attributes,t),c&&!l&&h.hasChanged(d)&&(l=!0))):t.add&&(p.push(r),r.on("all",this._onModelEvent,this),this._byId[r.cid]=r,null!=r.id&&(this._byId[r.id]=r)));if(t.remove){for(n=0,i=this.length;i>n;++n)g[(r=this.models[n]).cid]||f.push(r);f.length&&this.remove(f,t)}if(p.length&&(c&&(l=!0),this.length+=p.length,null!=u?o.apply(this.models,[u,0].concat(p)):s.apply(this.models,p)),l&&this.sort({silent:!0}),t.silent)return this;for(n=0,i=p.length;i>n;n++)(r=p[n]).trigger("add",r,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var n=0,i=this.models.length;i>n;n++)this._removeReference(this.models[n]);return t.previousModels=this.models,this._reset(),this.add(e,a.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,a.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,a.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return null==e?void 0:this._byId[null!=e.id?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return a.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),a.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(a.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,n){t||(t=this.comparator);var i=a.isFunction(t)?t:function(e){return e.get(t)};return a.sortedIndex(this.models,e,i,n)},pluck:function(e){return a.invoke(this.models,"get",e)},fetch:function(e){e=e?a.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(i){var s=e.reset?"reset":"set";n[s](i,e),t&&t(n,i,e),n.trigger("sync",n,i,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?a.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,i=t.success;return t.success=function(s){t.wait&&n.add(e,t),i&&i(e,s,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var n=new this.model(e,t);return n._validate(e,t)?n:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){("add"!==e&&"remove"!==e||n===this)&&("destroy"===e&&this.remove(t,i),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var w=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];a.each(w,function(e){m.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.models),a[e].apply(a,t)}});var b=["groupBy","countBy","sortBy"];a.each(b,function(e){m.prototype[e]=function(t,n){var i=a.isFunction(t)?t:function(e){return e.get(t)};return a[e](this.models,i,n)}});var x=e.View=function(e){this.cid=a.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},V=/^(\S+)\s*(.*)$/,S=["model","collection","el","id","attributes","className","tagName","events"];a.extend(x.prototype,h,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=a.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];if(a.isFunction(n)||(n=this[e[t]]),n){var i=t.match(V),s=i[1],r=i[2];n=a.bind(n,this),s+=".delegateEvents"+this.cid,""===r?this.$el.on(s,n):this.$el.on(s,r,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=a.extend({},a.result(this,"options"),e)),a.extend(this,a.pick(e,S)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(a.result(this,"el"),!1);else{var t=a.extend({},a.result(this,"attributes"));this.id&&(t.id=a.result(this,"id")),this.className&&(t["class"]=a.result(this,"className"));var n=e.$("<"+a.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,i){var s=D[t];a.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var r={type:s,dataType:"json"};if(i.url||(r.url=a.result(n,"url")||M()),null!=i.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(r.contentType="application/json",r.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),i.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){r.type="POST",i.emulateJSON&&(r.data._method=s);var o=i.beforeSend;i.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",s),o?o.apply(this,arguments):void 0}}"GET"===r.type||i.emulateJSON||(r.processData=!1),"PATCH"!==r.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var h=i.xhr=e.ajax(a.extend(r,i));return n.trigger("request",n,h,i),h};var D={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var _=e.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,T=/\*\w+/g,P=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(_.prototype,h,{initialize:function(){},route:function(t,n,i){a.isRegExp(t)||(t=this._routeToRegExp(t)),a.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var s=this;return e.history.route(t,function(r){var o=s._extractParameters(t,r);i&&i.apply(s,o),s.trigger.apply(s,["route:"+n].concat(o)),s.trigger("route",n,o),e.history.trigger("route",s,n,o)}),this},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=a.result(this,"routes");for(var e,t=a.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(P,"\\$&").replace(C,"(?:$1)?").replace(A,function(e,t){return t?e:"([^/]+)"}).replace(T,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return a.map(n,function(e){return e?decodeURIComponent(e):null})}});var E=e.History=function(){this.handlers=[],a.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},N=/^[#\/]|\s+$/g,k=/^\/+|\/+$/g,G=/msie [\w.]+/,I=/\/$/;E.started=!1,a.extend(E.prototype,h,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var n=this.root.replace(I,"");e.indexOf(n)||(e=e.substr(n.length))}else e=this.getHash();return e.replace(N,"")},start:function(t){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,this.options=a.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),i=document.documentMode,s=G.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);this.root=("/"+this.root+"/").replace(k,"/"),s&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var r=this.location,o=r.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!o?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&o&&r.hash&&(this.fragment=this.getHash().replace(N,""),this.history.replaceState({},document.title,this.root+this.fragment+r.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),E.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),this.loadUrl()||this.loadUrl(this.getHash()),void 0)},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=a.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0});return n},navigate:function(e,t){if(!E.started)return!1;if(t&&t!==!0||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var n=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),e.history=new E;var O=function(e,t){var n,i=this;n=e&&a.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},a.extend(n,i,t);var s=function(){this.constructor=n};return s.prototype=i.prototype,n.prototype=new s,e&&a.extend(n.prototype,e),n.__super__=i.prototype,n};p.extend=m.extend=_.extend=x.extend=E.extend=O;var M=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var n=t.error;t.error=function(i){n&&n(e,i,t),e.trigger("error",e,i,t)}}}.call(this),function(e){e.fn.placeholder=function(t){var n={message:"...",className:"placeholder",clearClassName:"show_cancel_search"},i=e.extend({},n,t),s=function(e){e.val(e.attr("placeholder")||i.message),e.addClass(i.className)};return this.each(function(){var t=e(this);"search"!=t.attr("type")&&(t.bind("blur",function(){""==t.val()&&s(t)}).bind("focus",function(){t.val()==(t.attr("placeholder")||i.message)&&t.val(""),t.removeClass(i.className)}).bind("keyup",function(){var e=t.val();""!=e&&e!=i.message?t.parent().addClass(i.clearClassName):t.parent().removeClass(i.clearClassName)}),_.defer(function(){t.keyup().blur()}))})}}(jQuery),!function(){if(this.SVG=function(e){return SVG.supported?new SVG.Doc(e):void 0},SVG.ns="http://www.w3.org/2000/svg",SVG.xlink="http://www.w3.org/1999/xlink",SVG.did=1e3,SVG.eid=function(e){return"Svgjs"+e.charAt(0).toUpperCase()+e.slice(1)+SVG.did++},SVG.create=function(e){var t=document.createElementNS(this.ns,e);return t.setAttribute("id",this.eid(e)),t},SVG.extend=function(){var e,t,n,i;for(e=[].slice.call(arguments),t=e.pop(),i=e.length-1;i>=0;i--)if(e[i])for(n in t)e[i].prototype[n]=t[n];SVG.Set&&SVG.Set.inherit&&SVG.Set.inherit()},SVG.get=function(e){var t=document.getElementById(e);return t?t.instance:void 0},SVG.supported=function(){return!!document.createElementNS&&!!document.createElementNS(SVG.ns,"svg").createSVGRect}(),!SVG.supported)return!1;SVG.regex={test:function(e,t){return this[t].test(e)},unit:/^(-?[\d\.]+)([a-z%]{0,2})$/,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isStyle:/^font|text|leading|cursor/,isBlank:/^(\s+)?$/,isNumber:/^-?[\d\.]+$/,isPercent:/^-?[\d\.]+%$/},SVG.defaults={matrix:"1 0 0 1 0 0",attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000"},trans:function(){return{x:0,y:0,scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0,matrix:this.matrix,a:1,b:0,c:0,d:1,e:0,f:0}}},SVG.Color=function(e){var t;this.r=0,this.g=0,this.b=0,"string"==typeof e?SVG.regex.isRgb.test(e)?(t=SVG.regex.rgb.exec(e.replace(/\s/g,"")),this.r=parseInt(t[1]),this.g=parseInt(t[2]),this.b=parseInt(t[3])):SVG.regex.isHex.test(e)&&(t=SVG.regex.hex.exec(this._fullHex(e)),this.r=parseInt(t[1],16),this.g=parseInt(t[2],16),this.b=parseInt(t[3],16)):"object"==typeof e&&(this.r=e.r,this.g=e.g,this.b=e.b)},SVG.extend(SVG.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+this._compToHex(this.r)+this._compToHex(this.g)+this._compToHex(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return.3*(this.r/255)+.59*(this.g/255)+.11*(this.b/255)
},_fullHex:function(e){return 4==e.length?["#",e.substring(1,2),e.substring(1,2),e.substring(2,3),e.substring(2,3),e.substring(3,4),e.substring(3,4)].join(""):e},_compToHex:function(e){var t=e.toString(16);return 1==t.length?"0"+t:t}}),SVG.Color.test=function(e){return e+="",SVG.regex.isHex.test(e)||SVG.regex.isRgb.test(e)},SVG.Color.isRgb=function(e){return e&&"number"==typeof e.r},SVG.Array=function(e,t){e=(e||[]).valueOf(),0==e.length&&t&&(e=t.valueOf()),this.value=this.parse(e)},SVG.extend(SVG.Array,{morph:function(e){if(this.destination=this.parse(e),this.value.length!=this.destination.length){for(var t=this.value[this.value.length-1],n=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(n);for(;this.value.length<this.destination.length;)this.value.push(t)}return this},settle:function(){var e,t=[];for(e=this.value.length-1;e>=0;e--)-1==t.indexOf(this.value[e])&&t.push(this.value[e]);return this.value=t},at:function(e){if(!this.destination)return this;for(var t=0,n=this.value.length,i=[];n>t;t++)i.push(this.value[t]+(this.destination[t]-this.value[t])*e);return new SVG.Array(i)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(e){return e=e.valueOf(),Array.isArray(e)?e:this.split(e)},split:function(e){return e.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"").split(" ")}}),SVG.PointArray=function(){this.constructor.apply(this,arguments)},SVG.PointArray.prototype=new SVG.Array,SVG.extend(SVG.PointArray,{toString:function(){for(var e=0,t=this.value.length,n=[];t>e;e++)n.push(this.value[e].join(","));return n.join(" ")},at:function(e){if(!this.destination)return this;for(var t=0,n=this.value.length,i=[];n>t;t++)i.push([this.value[t][0]+(this.destination[t][0]-this.value[t][0])*e,this.value[t][1]+(this.destination[t][1]-this.value[t][1])*e]);return new SVG.PointArray(i)},parse:function(e){if(e=e.valueOf(),Array.isArray(e))return e;e=this.split(e);for(var t,n=0,i=e.length,s=[];i>n;n++)t=e[n].split(","),s.push([parseFloat(t[0]),parseFloat(t[1])]);return s},move:function(e,t){var n=this.bbox();e-=n.x,t-=n.y;for(var i=this.value.length-1;i>=0;i--)this.value[i]=[this.value[i][0]+e,this.value[i][1]+t];return this},size:function(e,t){var n,i=this.bbox();for(n=this.value.length-1;n>=0;n--)this.value[n][0]=(this.value[n][0]-i.x)*e/i.width+i.x,this.value[n][1]=(this.value[n][1]-i.y)*t/i.height+i.x;return this},bbox:function(){if(0==this.value.length)return{x:0,y:0,width:0,height:0};var e,t=this.value[0][0],n=this.value[0][1],i={x:t,y:n};for(e=this.value.length-1;e>=0;e--)this.value[e][0]<i.x&&(i.x=this.value[e][0]),this.value[e][1]<i.y&&(i.y=this.value[e][1]),this.value[e][0]>t&&(t=this.value[e][0]),this.value[e][1]>n&&(n=this.value[e][1]);return i.width=t-i.x,i.height=n-i.y,i}}),SVG.Number=function(e){switch(this.value=0,this.unit="",typeof e){case"number":this.value=isNaN(e)?0:isFinite(e)?e:0>e?-3.4e38:3.4e38;break;case"string":var t=e.match(SVG.regex.unit);t&&(this.value=parseFloat(t[1]),"%"==t[2]&&(this.value/=100),this.unit=t[2]);break;default:e instanceof SVG.Number&&(this.value=e.value,this.unit=e.unit)}},SVG.extend(SVG.Number,{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:this.value)+this.unit},valueOf:function(){return this.value},to:function(e){return"string"==typeof e&&(this.unit=e),this},plus:function(e){return this.value=this+new SVG.Number(e),this},minus:function(e){return this.plus(-new SVG.Number(e))},times:function(e){return this.value=this*new SVG.Number(e),this},divide:function(e){return this.value=this/new SVG.Number(e),this}}),SVG.ViewBox=function(e){var t,n,i,s,r=e.bbox(),o=(e.attr("viewBox")||"").match(/-?[\d\.]+/g);this.x=r.x,this.y=r.y,this.width=e.node.clientWidth||e.node.getBoundingClientRect().width,this.height=e.node.clientHeight||e.node.getBoundingClientRect().height,o&&(t=parseFloat(o[0]),n=parseFloat(o[1]),i=parseFloat(o[2]),s=parseFloat(o[3]),this.zoom=this.width/this.height>i/s?this.height/s:this.width/i,this.x=t,this.y=n,this.width=i,this.height=s),this.zoom=this.zoom||1},SVG.extend(SVG.ViewBox,{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height}}),SVG.BBox=function(e){var t;if(this.x=0,this.y=0,this.width=0,this.height=0,e){try{t=e.node.getBBox()}catch(n){t={x:e.node.clientLeft,y:e.node.clientTop,width:e.node.clientWidth,height:e.node.clientHeight}}this.x=t.x+e.trans.x,this.y=t.y+e.trans.y,this.width=t.width*e.trans.scaleX,this.height=t.height*e.trans.scaleY}this.cx=this.x+this.width/2,this.cy=this.y+this.height/2},SVG.extend(SVG.BBox,{merge:function(e){var t=new SVG.BBox;return t.x=Math.min(this.x,e.x),t.y=Math.min(this.y,e.y),t.width=Math.max(this.x+this.width,e.x+e.width)-t.x,t.height=Math.max(this.y+this.height,e.y+e.height)-t.y,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2,t}}),SVG.RBox=function(e){var t,n,i={};if(this.x=0,this.y=0,this.width=0,this.height=0,e){for(t=e.doc().parent,n=e.doc().viewbox().zoom,i=e.node.getBoundingClientRect(),this.x=i.left,this.y=i.top,this.x-=t.offsetLeft,this.y-=t.offsetTop;t=t.offsetParent;)this.x-=t.offsetLeft,this.y-=t.offsetTop;for(t=e;t=t.parent;)"svg"==t.type&&t.viewbox&&(n*=t.viewbox().zoom,this.x-=t.x()||0,this.y-=t.y()||0)}this.x/=n,this.y/=n,this.width=i.width/=n,this.height=i.height/=n,this.cx=this.x+this.width/2,this.cy=this.y+this.height/2},SVG.extend(SVG.RBox,{merge:function(e){var t=new SVG.RBox;return t.x=Math.min(this.x,e.x),t.y=Math.min(this.y,e.y),t.width=Math.max(this.x+this.width,e.x+e.width)-t.x,t.height=Math.max(this.y+this.height,e.y+e.height)-t.y,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2,t}}),SVG.Element=function(e){this._stroke=SVG.defaults.attrs.stroke,this.styles={},this.trans=SVG.defaults.trans(),(this.node=e)&&(this.type=e.nodeName,this.node.instance=this)},SVG.extend(SVG.Element,{x:function(e){return e&&(e=new SVG.Number(e),e.value/=this.trans.scaleX),this.attr("x",e)},y:function(e){return e&&(e=new SVG.Number(e),e.value/=this.trans.scaleY),this.attr("y",e)},cx:function(e){return null==e?this.bbox().cx:this.x(e-this.bbox().width/2)},cy:function(e){return null==e?this.bbox().cy:this.y(e-this.bbox().height/2)},move:function(e,t){return this.x(e).y(t)},center:function(e,t){return this.cx(e).cy(t)},size:function(e,t){return this.attr({width:new SVG.Number(e),height:new SVG.Number(t)})},clone:function(){var e,t,n=this.type;return e="rect"==n||"ellipse"==n?this.parent[n](0,0):"line"==n?this.parent[n](0,0,0,0):"image"==n?this.parent[n](this.src):"text"==n?this.parent[n](this.content):"path"==n?this.parent[n](this.attr("d")):"polyline"==n||"polygon"==n?this.parent[n](this.attr("points")):"g"==n?this.parent.group():this.parent[n](),t=this.attr(),delete t.id,e.attr(t),e.trans=this.trans,e.transform({})},remove:function(){return this.parent&&this.parent.removeElement(this),this},doc:function(e){return this._parent(e||SVG.Doc)},attr:function(e,t,n){if(null==e){for(e={},t=this.node.attributes,n=t.length-1;n>=0;n--)e[t[n].nodeName]=SVG.regex.test(t[n].nodeValue,"isNumber")?parseFloat(t[n].nodeValue):t[n].nodeValue;return e}if("object"==typeof e)for(t in e)this.attr(t,e[t]);else if(null===t)this.node.removeAttribute(e);else{if(null==t)return this._isStyle(e)?"text"==e?this.content:"leading"==e&&this.leading?this.leading():this.style(e):(t=this.node.getAttribute(e),null==t?SVG.defaults.attrs[e]:SVG.regex.test(t,"isNumber")?parseFloat(t):t);if("style"==e)return this.style(t);if("x"==e&&Array.isArray(this.lines))for(n=this.lines.length-1;n>=0;n--)this.lines[n].attr(e,t);"stroke-width"==e?this.attr("stroke",parseFloat(t)>0?this._stroke:null):"stroke"==e&&(this._stroke=t),SVG.Color.test(t)||SVG.Color.isRgb(t)?t=new SVG.Color(t):"number"==typeof t?t=new SVG.Number(t):Array.isArray(t)&&(t=new SVG.Array(t)),null!=n?this.node.setAttributeNS(n,e,t.toString()):this.node.setAttribute(e,t.toString()),this._isStyle(e)&&("text"==e?this.text(t):"leading"==e&&this.leading?this.leading(t):this.style(e,t),this.rebuild&&this.rebuild(e,t))}return this},transform:function(e,t){if(0==arguments.length)return this.trans;if("string"==typeof e){if(arguments.length<2)return this.trans[e];var n={};return n[e]=t,this.transform(n)}var n=[];e=this._parseMatrix(e);for(t in e)null!=e[t]&&(this.trans[t]=e[t]);return this.trans.matrix=this.trans.a+" "+this.trans.b+" "+this.trans.c+" "+this.trans.d+" "+this.trans.e+" "+this.trans.f,e=this.trans,e.matrix!=SVG.defaults.matrix&&n.push("matrix("+e.matrix+")"),0!=e.rotation&&n.push("rotate("+e.rotation+" "+(null==e.cx?this.bbox().cx:e.cx)+" "+(null==e.cy?this.bbox().cy:e.cy)+")"),(1!=e.scaleX||1!=e.scaleY)&&n.push("scale("+e.scaleX+" "+e.scaleY+")"),0!=e.skewX&&n.push("skewX("+e.skewX+")"),0!=e.skewY&&n.push("skewY("+e.skewY+")"),(0!=e.x||0!=e.y)&&n.push("translate("+new SVG.Number(e.x/e.scaleX)+" "+new SVG.Number(e.y/e.scaleY)+")"),this._offset&&0!=this._offset.x&&0!=this._offset.y&&n.push("translate("+-this._offset.x+" "+-this._offset.y+")"),0==n.length?this.node.removeAttribute("transform"):this.node.setAttribute("transform",n.join(" ")),this},style:function(e,t){if(0==arguments.length)return this.attr("style")||"";if(arguments.length<2)if("object"==typeof e)for(t in e)this.style(t,e[t]);else{if(!SVG.regex.isCss.test(e))return this.styles[e];e=e.split(";");for(var n=0;n<e.length;n++)t=e[n].split(":"),2==t.length&&this.style(t[0].replace(/\s+/g,""),t[1].replace(/^\s+/,"").replace(/\s+$/,""))}else null===t||SVG.regex.test(t,"isBlank")?delete this.styles[e]:this.styles[e]=t;e="";for(t in this.styles)e+=t+":"+this.styles[t]+";";return""==e?this.node.removeAttribute("style"):this.node.setAttribute("style",e),this},data:function(e,t,n){if(arguments.length<2)try{return JSON.parse(this.attr("data-"+e))}catch(i){return this.attr("data-"+e)}else this.attr("data-"+e,null===t?null:n===!0||"string"==typeof t||"number"==typeof t?t:JSON.stringify(t));return this},bbox:function(){return new SVG.BBox(this)},rbox:function(){return new SVG.RBox(this)},inside:function(e,t){var n=this.bbox();return e>n.x&&t>n.y&&e<n.x+n.width&&t<n.y+n.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},_parent:function(e){for(var t=this;null!=t&&!(t instanceof e);)t=t.parent;return t},_isStyle:function(e){return"string"==typeof e?SVG.regex.test(e,"isStyle"):!1},_parseMatrix:function(e){if(e.matrix){var t=e.matrix.replace(/\s/g,"").split(",");6==t.length&&(e.a=parseFloat(t[0]),e.b=parseFloat(t[1]),e.c=parseFloat(t[2]),e.d=parseFloat(t[3]),e.e=parseFloat(t[4]),e.f=parseFloat(t[5]))}return e}}),SVG.Parent=function(e){this.constructor.call(this,e)},SVG.Parent.prototype=new SVG.Element,SVG.extend(SVG.Parent,{children:function(){return this._children||(this._children=[])},add:function(e,t){if(!this.has(e)){if(t=null==t?this.children().length:t,e.parent){var n=e.parent.children().indexOf(e);e.parent.children().splice(n,1)}this.children().splice(t,0,e),this.node.insertBefore(e.node,this.node.childNodes[t]||null),e.parent=this}return this._defs&&(this.node.removeChild(this._defs.node),this.node.appendChild(this._defs.node)),this},put:function(e,t){return this.add(e,t),e},has:function(e){return this.children().indexOf(e)>=0},get:function(e){return this.children()[e]},first:function(){return this.children()[0]},last:function(){return this.children()[this.children().length-1]},each:function(e,t){var n,i,s=this.children();for(n=0,i=s.length;i>n;n++)s[n]instanceof SVG.Element&&e.apply(s[n],[n,s]),t&&s[n]instanceof SVG.Container&&s[n].each(e,t);return this},removeElement:function(e){var t=this.children().indexOf(e);return this.children().splice(t,1),this.node.removeChild(e.node),e.parent=null,this},clear:function(){for(var e=this.children().length-1;e>=0;e--)this.removeElement(this.children()[e]);return this._defs&&this._defs.clear(),this},defs:function(){return this.doc().defs()}}),SVG.Container=function(e){this.constructor.call(this,e)},SVG.Container.prototype=new SVG.Parent,SVG.extend(SVG.Container,{viewbox:function(e){return 0==arguments.length?new SVG.ViewBox(this):(e=1==arguments.length?[e.x,e.y,e.width,e.height]:[].slice.call(arguments),this.attr("viewBox",e))}}),SVG.FX=function(e){this.target=e},SVG.extend(SVG.FX,{animate:function(e,t,n){var i,s,r,o,a=this.target,h=this;return"object"==typeof e&&(n=e.delay,t=e.ease,e=e.duration),e=null==e?1e3:e,t=t||"<>",h.to=function(e){var n;if(e=0>e?0:e>1?1:e,null==i){i=[];for(o in h.attrs)i.push(o);if(a.morphArray){var l,u=new a.morphArray(h._plot||a.points.toString());h._size&&u.size(h._size.width.to,h._size.height.to),l=u.bbox(),h._x?u.move(h._x.to,l.y):h._cx&&u.move(h._cx.to-l.width/2,l.y),l=u.bbox(),h._y?u.move(l.x,h._y.to):h._cy&&u.move(l.x,h._cy.to-l.height/2),delete h._x,delete h._y,delete h._cx,delete h._cy,delete h._size,h._plot=a.points.morph(u)}}if(null==s){s=[];for(o in h.trans)s.push(o)}if(null==r){r=[];for(o in h.styles)r.push(o)}for(e="<>"==t?-Math.cos(e*Math.PI)/2+.5:">"==t?Math.sin(e*Math.PI/2):"<"==t?-Math.cos(e*Math.PI/2)+1:"-"==t?e:"function"==typeof t?t(e):e,h._x?a.x(h._at(h._x,e)):h._cx&&a.cx(h._at(h._cx,e)),h._y?a.y(h._at(h._y,e)):h._cy&&a.cy(h._at(h._cy,e)),h._size&&a.size(h._at(h._size.width,e),h._at(h._size.height,e)),h._plot&&a.plot(h._plot.at(e)),h._viewbox&&a.viewbox(h._at(h._viewbox.x,e),h._at(h._viewbox.y,e),h._at(h._viewbox.width,e),h._at(h._viewbox.height,e)),n=i.length-1;n>=0;n--)a.attr(i[n],h._at(h.attrs[i[n]],e));for(n=s.length-1;n>=0;n--)a.transform(s[n],h._at(h.trans[s[n]],e));for(n=r.length-1;n>=0;n--)a.style(r[n],h._at(h.styles[r[n]],e));h._during&&h._during.call(a,e,function(t,n){return h._at({from:t,to:n},e)})},"number"==typeof e&&(this.timeout=setTimeout(function(){var t=1e3/60,n=(new Date).getTime(),i=n+e;h.interval=setInterval(function(){var t=(new Date).getTime(),s=t>i?1:(t-n)/e;h.to(s),t>i&&(h._plot&&a.plot(new SVG.PointArray(h._plot.destination).settle()),clearInterval(h.interval),h._after?h._after.apply(a,[h]):h.stop())},e>t?t:e)},n||0)),this},bbox:function(){return this.target.bbox()},attr:function(e,t){if("object"==typeof e)for(var n in e)this.attr(n,e[n]);else this.attrs[e]={from:this.target.attr(e),to:t};return this},transform:function(e,t){if(1==arguments.length){e=this.target._parseMatrix(e),delete e.matrix;for(t in e)this.trans[t]={from:this.target.trans[t],to:e[t]}}else{var n={};n[e]=t,this.transform(n)}return this},style:function(e,t){if("object"==typeof e)for(var n in e)this.style(n,e[n]);else this.styles[e]={from:this.target.style(e),to:t};return this},x:function(e){return this._x={from:this.target.x(),to:e},this},y:function(e){return this._y={from:this.target.y(),to:e},this},cx:function(e){return this._cx={from:this.target.cx(),to:e},this},cy:function(e){return this._cy={from:this.target.cy(),to:e},this},move:function(e,t){return this.x(e).y(t)},center:function(e,t){return this.cx(e).cy(t)},size:function(e,t){if(this.target instanceof SVG.Text)this.attr("font-size",e);else{var n=this.target.bbox();this._size={width:{from:n.width,to:e},height:{from:n.height,to:t}}}return this},plot:function(e){return this._plot=e,this},viewbox:function(e,t,n,i){if(this.target instanceof SVG.Container){var s=this.target.viewbox();this._viewbox={x:{from:s.x,to:e},y:{from:s.y,to:t},width:{from:s.width,to:n},height:{from:s.height,to:i}}}return this},update:function(e){return this.target instanceof SVG.Stop&&(null!=e.opacity&&this.attr("stop-opacity",e.opacity),null!=e.color&&this.attr("stop-color",e.color),null!=e.offset&&this.attr("offset",new SVG.Number(e.offset))),this},during:function(e){return this._during=e,this},after:function(e){return this._after=e,this},stop:function(){return clearTimeout(this.timeout),clearInterval(this.interval),this.attrs={},this.trans={},this.styles={},delete this._x,delete this._y,delete this._cx,delete this._cy,delete this._size,delete this._plot,delete this._after,delete this._during,delete this._viewbox,this},_at:function(e,t){return"number"==typeof e.from?e.from+(e.to-e.from)*t:SVG.regex.unit.test(e.to)?new SVG.Number(e.to).minus(new SVG.Number(e.from)).times(t).plus(new SVG.Number(e.from)):e.to&&(e.to.r||SVG.Color.test(e.to))?this._color(e,t):1>t?e.from:e.to},_color:function(e,t){var n,i;return t=0>t?0:t>1?1:t,n=new SVG.Color(e.from),i=new SVG.Color(e.to),new SVG.Color({r:~~(n.r+(i.r-n.r)*t),g:~~(n.g+(i.g-n.g)*t),b:~~(n.b+(i.b-n.b)*t)}).toHex()}}),SVG.extend(SVG.Element,{animate:function(e,t,n){return(this.fx||(this.fx=new SVG.FX(this))).stop().animate(e,t,n)},stop:function(){return this.fx&&this.fx.stop(),this}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave"].forEach(function(e){SVG.Element.prototype[e]=function(t){var n=this;return this.node["on"+e]="function"==typeof t?function(){return t.apply(n,arguments)}:null,this}}),SVG.on=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},SVG.off=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},SVG.extend(SVG.Element,{on:function(e,t){return SVG.on(this.node,e,t),this},off:function(e,t){return SVG.off(this.node,e,t),this}}),SVG.Defs=function(){this.constructor.call(this,SVG.create("defs"))},SVG.Defs.prototype=new SVG.Container,SVG.G=function(){this.constructor.call(this,SVG.create("g"))},SVG.G.prototype=new SVG.Container,SVG.extend(SVG.G,{x:function(e){return null==e?this.trans.x:this.transform("x",e)},y:function(e){return null==e?this.trans.y:this.transform("y",e)}}),SVG.extend(SVG.Container,{group:function(){return this.put(new SVG.G)}}),SVG.extend(SVG.Element,{siblings:function(){return this.parent.children()},position:function(){var e=this.siblings();return e.indexOf(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var e=this.position();return this.parent.removeElement(this).put(this,e+1)},backward:function(){var e=this.position();return e>0&&this.parent.removeElement(this).add(this,e-1),this},front:function(){return this.parent.removeElement(this).put(this)},back:function(){return this.position()>0&&this.parent.removeElement(this).add(this,0),this},before:function(e){e.remove();var t=this.position();return this.parent.add(e,t),this},after:function(e){e.remove();var t=this.position();return this.parent.add(e,t+1),this}}),SVG.Mask=function(){this.constructor.call(this,SVG.create("mask")),this.targets=[]},SVG.Mask.prototype=new SVG.Container,SVG.extend(SVG.Mask,{remove:function(){for(var e=this.targets.length-1;e>=0;e--)this.targets[e]&&this.targets[e].unmask();return delete this.targets,this.parent.removeElement(this),this}}),SVG.extend(SVG.Element,{maskWith:function(e){return this.masker=e instanceof SVG.Mask?e:this.parent.mask().add(e),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),SVG.extend(SVG.Container,{mask:function(){return this.defs().put(new SVG.Mask)}}),SVG.Clip=function(){this.constructor.call(this,SVG.create("clipPath")),this.targets=[]},SVG.Clip.prototype=new SVG.Container,SVG.extend(SVG.Clip,{remove:function(){for(var e=this.targets.length-1;e>=0;e--)this.targets[e]&&this.targets[e].unclip();return delete this.targets,this.parent.removeElement(this),this}}),SVG.extend(SVG.Element,{clipWith:function(e){return this.clipper=e instanceof SVG.Clip?e:this.parent.clip().add(e),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),SVG.extend(SVG.Container,{clip:function(){return this.defs().put(new SVG.Clip)}}),SVG.Gradient=function(e){this.constructor.call(this,SVG.create(e+"Gradient")),this.type=e},SVG.Gradient.prototype=new SVG.Container,SVG.extend(SVG.Gradient,{from:function(e,t){return"radial"==this.type?this.attr({fx:new SVG.Number(e),fy:new SVG.Number(t)}):this.attr({x1:new SVG.Number(e),y1:new SVG.Number(t)})},to:function(e,t){return"radial"==this.type?this.attr({cx:new SVG.Number(e),cy:new SVG.Number(t)}):this.attr({x2:new SVG.Number(e),y2:new SVG.Number(t)})},radius:function(e){return"radial"==this.type?this.attr({r:new SVG.Number(e)}):this},at:function(e){return this.put(new SVG.Stop(e))},update:function(e){return this.clear(),e(this),this},fill:function(){return"url(#"+this.attr("id")+")"},toString:function(){return this.fill()}}),SVG.extend(SVG.Defs,{gradient:function(e,t){var n=this.put(new SVG.Gradient(e));return t(n),n}}),SVG.extend(SVG.Container,{gradient:function(e,t){return this.defs().gradient(e,t)}}),SVG.Stop=function(e){this.constructor.call(this,SVG.create("stop")),this.update(e)},SVG.Stop.prototype=new SVG.Element,SVG.extend(SVG.Stop,{update:function(e){return null!=e.opacity&&this.attr("stop-opacity",e.opacity),null!=e.color&&this.attr("stop-color",e.color),null!=e.offset&&this.attr("offset",new SVG.Number(e.offset)),this}}),SVG.Doc=function(e){this.parent="string"==typeof e?document.getElementById(e):e,this.constructor.call(this,"svg"==this.parent.nodeName?this.parent:SVG.create("svg")),this.attr({xmlns:SVG.ns,version:"1.1",width:"100%",height:"100%"}).attr("xlink",SVG.xlink,SVG.ns),this._defs=new SVG.Defs,this.node.appendChild(this._defs.node),"svg"!=this.parent.nodeName&&this.stage()},SVG.Doc.prototype=new SVG.Container,SVG.extend(SVG.Doc,{stage:function(){var e,t=this,n=document.createElement("div");return n.style.cssText="position:relative;height:100%;",t.parent.appendChild(n),n.appendChild(t.node),e=function(){"complete"===document.readyState?(t.style("position:absolute;"),setTimeout(function(){t.style("position:relative;overflow:hidden;"),t.parent.removeChild(t.node.parentNode),t.node.parentNode.removeChild(t.node),t.parent.appendChild(t.node),t.fixSubPixelOffset(),SVG.on(window,"resize",function(){t.fixSubPixelOffset()})},5)):setTimeout(e,10)},e(),this},defs:function(){return this._defs},fixSubPixelOffset:function(){var e=this.node.getScreenCTM();this.style("left",-e.e%1+"px").style("top",-e.f%1+"px")}}),SVG.Shape=function(e){this.constructor.call(this,e)},SVG.Shape.prototype=new SVG.Element,SVG.Use=function(){this.constructor.call(this,SVG.create("use"))},SVG.Use.prototype=new SVG.Shape,SVG.extend(SVG.Use,{element:function(e){return this.target=e,this.attr("href","#"+e,SVG.xlink)}}),SVG.extend(SVG.Container,{use:function(e){return this.put(new SVG.Use).element(e)}}),SVG.Rect=function(){this.constructor.call(this,SVG.create("rect"))},SVG.Rect.prototype=new SVG.Shape,SVG.extend(SVG.Container,{rect:function(e,t){return this.put((new SVG.Rect).size(e,t))}}),SVG.Ellipse=function(){this.constructor.call(this,SVG.create("ellipse"))},SVG.Ellipse.prototype=new SVG.Shape,SVG.extend(SVG.Ellipse,{x:function(e){return null==e?this.cx()-this.attr("rx"):this.cx(e+this.attr("rx"))},y:function(e){return null==e?this.cy()-this.attr("ry"):this.cy(e+this.attr("ry"))},cx:function(e){return null==e?this.attr("cx"):this.attr("cx",new SVG.Number(e).divide(this.trans.scaleX))},cy:function(e){return null==e?this.attr("cy"):this.attr("cy",new SVG.Number(e).divide(this.trans.scaleY))},size:function(e,t){return this.attr({rx:new SVG.Number(e).divide(2),ry:new SVG.Number(t).divide(2)})}}),SVG.extend(SVG.Container,{circle:function(e){return this.ellipse(e,e)},ellipse:function(e,t){return this.put(new SVG.Ellipse).size(e,t).move(0,0)}}),SVG.Line=function(){this.constructor.call(this,SVG.create("line"))},SVG.Line.prototype=new SVG.Shape,SVG.extend(SVG.Line,{x:function(e){var t=this.bbox();return null==e?t.x:this.attr({x1:this.attr("x1")-t.x+e,x2:this.attr("x2")-t.x+e})},y:function(e){var t=this.bbox();return null==e?t.y:this.attr({y1:this.attr("y1")-t.y+e,y2:this.attr("y2")-t.y+e})},cx:function(e){var t=this.bbox().width/2;return null==e?this.x()+t:this.x(e-t)},cy:function(e){var t=this.bbox().height/2;return null==e?this.y()+t:this.y(e-t)},size:function(e,t){var n=this.bbox();return this.attr(this.attr("x1")<this.attr("x2")?"x2":"x1",n.x+e).attr(this.attr("y1")<this.attr("y2")?"y2":"y1",n.y+t)},plot:function(e,t,n,i){return this.attr({x1:e,y1:t,x2:n,y2:i})}}),SVG.extend(SVG.Container,{line:function(e,t,n,i){return this.put((new SVG.Line).plot(e,t,n,i))}}),SVG.Polyline=function(){this.constructor.call(this,SVG.create("polyline"))},SVG.Polyline.prototype=new SVG.Shape,SVG.Polygon=function(){this.constructor.call(this,SVG.create("polygon"))},SVG.Polygon.prototype=new SVG.Shape,SVG.extend(SVG.Polyline,SVG.Polygon,{morphArray:SVG.PointArray,plot:function(e){return this.attr("points",this.points=new SVG.PointArray(e,[[0,0]]))},move:function(e,t){return this.attr("points",this.points.move(e,t))},x:function(e){return null==e?this.bbox().x:this.move(e,this.bbox().y)},y:function(e){return null==e?this.bbox().y:this.move(this.bbox().x,e)},size:function(e,t){return this.attr("points",this.points.size(e,t))}}),SVG.extend(SVG.Container,{polyline:function(e){return this.put(new SVG.Polyline).plot(e)},polygon:function(e){return this.put(new SVG.Polygon).plot(e)}}),SVG.Path=function(e){this.constructor.call(this,SVG.create("path")),this.unbiased=!!e},SVG.Path.prototype=new SVG.Shape,SVG.extend(SVG.Path,{_plot:function(e){return this.attr("d",e||"M0,0")}}),SVG.extend(SVG.Container,{path:function(e,t){return this.put(new SVG.Path(t)).plot(e)}}),SVG.extend(SVG.Path,{x:function(e){return null==e?this.bbox().x:this.transform("x",e)},y:function(e){return null==e?this.bbox().y:this.transform("y",e)},size:function(e,t){var n=e/this._offset.width;return this.transform({scaleX:n,scaleY:null!=t?t/this._offset.height:n})},plot:function(e){var t=this.trans.scaleX,n=this.trans.scaleY;return this._plot(e),this._offset=this.transform({scaleX:1,scaleY:1}).bbox(),this.unbiased?this._offset.x=this._offset.y=0:(this._offset.x-=this.trans.x,this._offset.y-=this.trans.y),this.transform({scaleX:t,scaleY:n})}}),SVG.Image=function(){this.constructor.call(this,SVG.create("image"))},SVG.Image.prototype=new SVG.Shape,SVG.extend(SVG.Image,{load:function(e){return e?this.attr("href",this.src=e,SVG.xlink):this}}),SVG.extend(SVG.Container,{image:function(e,t,n){return t=null!=t?t:100,this.put((new SVG.Image).load(e).size(t,null!=n?n:t))}});var e="size family weight stretch variant style".split(" ");SVG.Text=function(){this.constructor.call(this,SVG.create("text")),this.styles={"font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"},this._leading=new SVG.Number("1.2em"),this._rebuild=!0},SVG.Text.prototype=new SVG.Shape,SVG.extend(SVG.Text,{x:function(e,t){return null==e?t?this.attr("x"):this.bbox().x:(t||(t=this.style("text-anchor"),e="start"==t?e:"end"==t?e+this.bbox().width:e+this.bbox().width/2),this.textPath||this.lines.each(function(){this.newLined&&this.x(e)}),this.attr("x",e))},cx:function(e){return null==e?this.bbox().cx:this.x(e-this.bbox().width/2)},cy:function(e,t){return null==e?this.bbox().cy:this.y(t?e:e-this.bbox().height/2)},move:function(e,t,n){return this.x(e,n).y(t)},center:function(e,t,n){return this.cx(e,n).cy(t,n)},text:function(e){if(null==e)return this.content;if(this.clear(),"function"==typeof e)this._rebuild=!1,e(this);else{this._rebuild=!0,e=SVG.regex.isBlank.test(e)?"text":e;var t,n,i=e.split("\n");for(t=0,n=i.length;n>t;t++)this.tspan(i[t]).newLine();this.rebuild()}return this},tspan:function(e){var t=this.textPath?this.textPath.node:this.node,n=(new SVG.TSpan).text(e),i=this.style();return t.appendChild(n.node),this.lines.add(n),SVG.regex.isBlank.test(i)||n.style(i),this.content+=e,n.parent=this,n},size:function(e){return this.attr("font-size",e)},leading:function(e){return null==e?this._leading:(e=new SVG.Number(e),this._leading=e,this.lines.each(function(){this.newLined&&this.attr("dy",e)}),this)},rebuild:function(){return this._rebuild&&this.lines.attr({x:this.attr("x"),dy:this._leading,style:this.style()}),this},clear:function(){for(var e=this.textPath?this.textPath.node:this.node;e.hasChildNodes();)e.removeChild(e.lastChild);return delete this.lines,this.lines=new SVG.Set,this.content="",this}}),SVG.extend(SVG.Container,{text:function(e){return this.put(new SVG.Text).text(e)}}),SVG.TSpan=function(){this.constructor.call(this,SVG.create("tspan"))},SVG.TSpan.prototype=new SVG.Shape,SVG.extend(SVG.TSpan,{text:function(e){return this.node.appendChild(document.createTextNode(e)),this},dx:function(e){return this.attr("dx",e)},dy:function(e){return this.attr("dy",e)},newLine:function(){return this.newLined=!0,this.parent.content+="\n",this.dy(this.parent._leading),this.attr("x",this.parent.x())}}),SVG.TextPath=function(){this.constructor.call(this,SVG.create("textPath"))},SVG.TextPath.prototype=new SVG.Element,SVG.extend(SVG.Text,{path:function(e){for(this.textPath=new SVG.TextPath;this.node.hasChildNodes();)this.textPath.node.appendChild(this.node.firstChild);return this.node.appendChild(this.textPath.node),this.track=this.doc().defs().path(e,!0),this.textPath.parent=this,this.textPath.attr("href","#"+this.track,SVG.xlink),this},plot:function(e){return this.track&&this.track.plot(e),this}}),SVG.Nested=function(){this.constructor.call(this,SVG.create("svg")),this.style("overflow","visible")},SVG.Nested.prototype=new SVG.Container,SVG.extend(SVG.Container,{nested:function(){return this.put(new SVG.Nested)}}),SVG._stroke=["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],SVG._fill=["color","opacity","rule"];var t=function(e,t){return"color"==t?e:e+"-"+t};["fill","stroke"].forEach(function(e){var n={};n[e]=function(n){if("string"==typeof n||SVG.Color.isRgb(n)||n&&"function"==typeof n.fill)this.attr(e,n);else for(index=SVG["_"+e].length-1;index>=0;index--)null!=n[SVG["_"+e][index]]&&this.attr(t(e,SVG["_"+e][index]),n[SVG["_"+e][index]]);return this},SVG.extend(SVG.Element,SVG.FX,n)}),SVG.extend(SVG.Element,SVG.FX,{rotate:function(e,t,n){return this.transform({rotation:e||0,cx:t,cy:n})},skew:function(e,t){return this.transform({skewX:e||0,skewY:t||0})},scale:function(e,t){return this.transform({scaleX:e,scaleY:null==t?e:t})},translate:function(e,t){return this.transform({x:e,y:t})},matrix:function(e){return this.transform({matrix:e})},opacity:function(e){return this.attr("opacity",e)}}),SVG.Text&&SVG.extend(SVG.Text,SVG.FX,{font:function(t){for(var n in t)"anchor"==n?this.attr("text-anchor",t[n]):e.indexOf(n)>-1?this.attr("font-"+n,t[n]):this.attr(n,t[n]);return this}}),SVG.Set=function(){this.clear()},SVG.SetFX=function(e){this.set=e},SVG.extend(SVG.Set,{add:function(){var e,t,n=[].slice.call(arguments);for(e=0,t=n.length;t>e;e++)this.members.push(n[e]);return this},remove:function(e){var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this},each:function(e){for(var t=0,n=this.members.length;n>t;t++)e.apply(this.members[t],[t,this.members]);return this},clear:function(){return this.members=[],this},valueOf:function(){return this.members}}),SVG.Set.inherit=function(){var e,t=[];for(var e in SVG.Shape.prototype)"function"==typeof SVG.Shape.prototype[e]&&"function"!=typeof SVG.Set.prototype[e]&&t.push(e);t.forEach(function(e){SVG.Set.prototype[e]=function(){for(var t=0,n=this.members.length;n>t;t++)this.members[t]&&"function"==typeof this.members[t][e]&&this.members[t][e].apply(this.members[t],arguments);return"animate"==e?this.fx||(this.fx=new SVG.SetFX(this)):this}}),t=[];for(var e in SVG.FX.prototype)"function"==typeof SVG.FX.prototype[e]&&"function"!=typeof SVG.SetFX.prototype[e]&&t.push(e);t.forEach(function(e){SVG.SetFX.prototype[e]=function(){for(var t=0,n=this.set.members.length;n>t;t++)this.set.members[t].fx[e].apply(this.set.members[t].fx,arguments);return this}})},SVG.extend(SVG.Container,{set:function(){return new SVG.Set}}),SVG.extend(SVG.Element,{remember:function(e,t){if("object"==typeof arguments[0])for(var t in e)this.remember(t,e[t]);else{if(1==arguments.length)return this.memory()[e];this.memory()[e]=t}return this},forget:function(){if(0==arguments.length)this._memory={};
else for(var e=arguments.length-1;e>=0;e--)delete this.memory()[arguments[e]];return this},memory:function(){return this._memory||(this._memory={})}}),"function"==typeof define&&define.amd?define(function(){return SVG}):"undefined"!=typeof exports&&(exports.SVG=SVG)}.call(this);var APDate=function(e){if(this.defaults={year:null,month:null,day:null},this.monthAbbreviations={0:"Jan.",1:"Feb.",7:"Aug.",8:"Sept.",9:"Oct.",10:"Nov.",11:"Dec."},this.months={0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},"string"==typeof e)this.date=new Date(e),this.opts={month:this.date.getMonth(),day:this.date.getDate(),year:this.date.getFullYear()};else{this.opts=this.extendDefaults(this.defaults,e);var t=new Date;if(this.opts.year&&this.opts.month&&this.opts.day&&(this.date=new Date(this.opts.year,this.opts.month-1,this.opts.day)),this.opts.year&&this.opts.month&&!this.opts.day&&(this.date=new Date(this.opts.year,this.opts.month-1)),!this.opts.month||this.opts.year||this.opts.day||(this.date=new Date(t.getFullYear(),this.opts.month-1)),this.opts.month&&this.opts.day&&!this.opts.year&&(this.date=new Date(t.getFullYear(),this.opts.month-1,this.opts.day)),!this.opts.month)throw"At minimum, must specify month for AP date"}return this};APDate.prototype.extendDefaults=function(e,t){var n={};for(var i in e)n[i]=t[i]?t[i]:e[i];return n},APDate.prototype.getMonthAbbreviation=function(){var e=this.monthAbbreviations[this.date.getUTCMonth()];return"undefined"==typeof e?this.months[this.date.getUTCMonth()]:e},APDate.prototype.getMonthFull=function(){return this.months[this.date.getUTCMonth()]},APDate.prototype.ap=function(){return this.opts.year&&this.opts.month&&this.opts.day?this.getMonthAbbreviation()+" "+this.date.getDate()+", "+this.date.getFullYear():this.opts.year&&this.opts.month&&!this.opts.day?this.getMonthAbbreviation()+" "+this.date.getFullYear():this.opts.month&&this.opts.day&&!this.opts.year?this.getMonthAbbreviation()+" "+this.date.getDate():!this.opts.month||this.opts.day||this.opts.year?void 0:this.getMonthFull()},window.console||(window.console={}),console.log||(console.log=_.identity),window.DV=window.DV||{},DV.jQuery=jQuery.noConflict(),DV.viewers=DV.viewers||{},DV.model=DV.model||{},DV.Annotation=function(e){this.position={top:e.top,left:e.left},this.dimensions={width:e.width,height:e.height},this.page=e.page,this.pageEl=e.pageEl,this.annotationContainerEl=e.annotationContainerEl,this.viewer=this.page.set.viewer,this.annotationEl=null,this.renderedHTML=e.renderedHTML,this.type=e.type,this.id=e.id,this.model=this.viewer.models.annotations.getAnnotation(this.id),this.state="collapsed",this.active=!1,this.remove(),this.add(),e.active&&(this.viewer.helpers.setActiveAnnotationLimits(this),this.viewer.events.resetTracker(),this.active=null,this.show(),e.showEdit&&this.showEdit())},DV.Annotation.prototype.add=function(){if("page"===this.type)this.annotationEl=this.renderedHTML.insertBefore(this.annotationContainerEl);else if(this.page.annotations.length>0)for(var e=0,t=this.page.annotations.length;t>e;e++){if(this.page.annotations[e].id===this.id)return!1;this.annotationEl=this.renderedHTML.appendTo(this.annotationContainerEl)}else this.annotationEl=this.renderedHTML.appendTo(this.annotationContainerEl)},DV.Annotation.prototype.next=function(){this.hide.preventRemovalOfCoverClass=!0;var e=this.viewer.models.annotations.getNextAnnotation(this.id);e&&this.page.set.showAnnotation({index:e.index,id:e.id,top:e.top})},DV.Annotation.prototype.previous=function(){this.hide.preventRemovalOfCoverClass=!0;var e=this.viewer.models.annotations.getPreviousAnnotation(this.id);e&&this.page.set.showAnnotation({index:e.index,id:e.id,top:e.top})},DV.Annotation.prototype.show=function(e){this.viewer.activeAnnotation&&this.viewer.activeAnnotation.id!=this.id&&this.viewer.activeAnnotation.hide(),this.viewer.annotationToLoadId=null,this.viewer.elements.window.addClass("DV-coverVisible"),this.annotationEl.find("div.DV-annotationBG").css({display:"block",opacity:1}),this.annotationEl.addClass("DV-activeAnnotation"),this.viewer.activeAnnotation=this,this.viewer.helpers.addObserver("trackAnnotation"),this.viewer.helpers.setActiveAnnotationInNav(this.id),this.active=!0,this.pageEl.parent(".DV-set").addClass("DV-activePage"),e&&e.edit&&this.showEdit()},DV.Annotation.prototype.hide=function(e){parseInt(this.viewer.elements.currentPage.text(),10),"page"!==this.type&&this.annotationEl.find("div.DV-annotationBG").css({opacity:0,display:"none"});var t=this.annotationEl.hasClass("DV-editing");this.annotationEl.removeClass("DV-editing DV-activeAnnotation"),e===!0&&this.viewer.elements.window.removeClass("DV-coverVisible"),this.hide.preventRemovalOfCoverClass!==!1&&this.hide.preventRemovalOfCoverClass||(this.viewer.elements.window.removeClass("DV-coverVisible"),this.hide.preventRemovalOfCoverClass=!1),this.viewer.activeAnnotation=null,this.viewer.events.trackAnnotation.h=null,this.viewer.events.trackAnnotation.id=null,this.viewer.events.trackAnnotation.combined=null,this.active=!1,this.viewer.pageSet.setActiveAnnotation(null),this.viewer.helpers.removeObserver("trackAnnotation"),this.viewer.helpers.setActiveAnnotationInNav(),this.pageEl.parent(".DV-set").removeClass("DV-activePage"),this.removeConnector(!0),t&&this.viewer.helpers.saveAnnotation({target:this.annotationEl},"onlyIfText")},DV.Annotation.prototype.toggle=function(){this.viewer.activeAnnotation&&this.viewer.activeAnnotation!=this&&this.viewer.activeAnnotation.hide(),"page"!==this.type&&(this.annotationEl.toggleClass("DV-activeAnnotation"),1==this.active?this.hide(!0):this.show())},DV.Annotation.prototype.drawConnector=function(){1!=this.active&&(this.viewer.elements.window.addClass("DV-annotationActivated"),this.annotationEl.addClass("DV-annotationHover"))},DV.Annotation.prototype.removeConnector=function(){1!=this.active&&(this.viewer.elements.window.removeClass("DV-annotationActivated"),this.annotationEl.removeClass("DV-annotationHover"))},DV.Annotation.prototype.showEdit=function(){this.annotationEl.addClass("DV-editing"),this.viewer.$(".DV-annotationTitleInput",this.annotationEl).focus()},DV.Annotation.prototype.remove=function(){DV.jQuery("#DV-annotation-"+this.id).remove()},DV.DragReporter=function(e,t,n,i){this.viewer=e,this.dragClassName="DV-dragging",this.sensitivityY=1,this.sensitivityX=1,this.oldPageY=0,_.extend(this,i),this.dispatcher=n,this.toWatch=this.viewer.$(t),this.boundReporter=_.bind(this.mouseMoveReporter,this),this.boundMouseUpReporter=_.bind(this.mouseUpReporter,this),this.boundMouseDownReporter=_.bind(this.mouseDownReporter,this),this.setBinding()},DV.DragReporter.prototype.shouldIgnore=function(e){if(!this.ignoreSelector)return!1;var t=this.viewer.$(e.target);return t.parents().is(this.ignoreSelector)||t.is(this.ignoreSelector)},DV.DragReporter.prototype.mouseUpReporter=function(e){return this.shouldIgnore(e)?!0:(e.preventDefault(),clearInterval(this.updateTimer),this.stop(),void 0)},DV.DragReporter.prototype.oldPositionUpdater=function(){this.oldPageY=this.pageY},DV.DragReporter.prototype.stop=function(){this.toWatch.removeClass(this.dragClassName),this.toWatch.unbind("mousemove")},DV.DragReporter.prototype.setBinding=function(){this.toWatch.mouseup(this.boundMouseUpReporter),this.toWatch.mousedown(this.boundMouseDownReporter)},DV.DragReporter.prototype.unBind=function(){this.toWatch.unbind("mouseup",this.boundMouseUpReporter),this.toWatch.unbind("mousedown",this.boundMouseDownReporter)},DV.DragReporter.prototype.destroy=function(){this.unBind(),this.toWatch=null},DV.DragReporter.prototype.mouseDownReporter=function(e){return this.shouldIgnore(e)?!0:(e.preventDefault(),this.pageY=e.pageY,this.pageX=e.pageX,this.oldPageY=e.pageY,this.updateTimer=setInterval(_.bind(this.oldPositionUpdater,this),1200),this.toWatch.addClass(this.dragClassName),this.toWatch.mousemove(this.boundReporter),void 0)},DV.DragReporter.prototype.mouseMoveReporter=function(e){if(this.shouldIgnore(e))return!0;e.preventDefault();var t=Math.round(this.sensitivityX*(this.pageX-e.pageX)),n=Math.round(this.sensitivityY*(this.pageY-e.pageY)),i=t>0?"right":"left",s=n>0?"down":"up";this.pageY=e.pageY,this.pageX=e.pageX,(0!==n||0!==t)&&this.dispatcher({event:e,deltaX:t,deltaY:n,directionX:i,directionY:s})},DV.Elements=function(e){this._viewer=e;for(var t=DV.Schema.elements,n=0,i=t.length;i>n;n++)this.getElement(t[n])},DV.Elements.prototype.getElement=function(e){this[e.name]=this._viewer.$(e.query)},DV.History=Backbone.History.extend({constructor:function(e){this.viewer=e,Backbone.History.apply(this,arguments)},register:function(e,t){this.route(e,t)},loadUrl:function(e){var t=this.fragment=this.getFragment(e),n=_.any(this.handlers,function(e){if(e.route.test(t)){var n=e.route.exec(t);return e.callback.apply(null,n.slice(1)),!0}});return n}}),DV.Page=function(e,t){this.viewer=e,this.index=t.index;for(var n in t)this[n]=t[n];this.el=this.viewer.$(this.el),this.parent=this.el.parent(),this.pageNumberEl=this.el.find("span.DV-pageNumber"),this.pageInsertEl=this.el.find(".DV-pageNoteInsert"),this.removedOverlayEl=this.el.find(".DV-overlay"),this.pageImageEl=this.getPageImage(),this.pageEl=this.el.find("div.DV-page"),this.annotationContainerEl=this.el.find("div.DV-annotations"),this.coverEl=this.el.find("div.DV-cover"),this.loadTimer=null,this.hasLayerPage=!1,this.hasLayerRegional=!1,this.imgSource=null,this.offset=null,this.pageNumber=null,this.zoom=1,this.annotations=[];var i=this.viewer.models;this.model_document=i.document,this.model_pages=i.pages,this.model_annotations=i.annotations,this.model_chapters=i.chapters},DV.Page.prototype.setPageImage=function(){this.pageImageEl=this.getPageImage()},DV.Page.prototype.getPageImage=function(){return this.el.find("img.DV-pageImage")},DV.Page.prototype.getOffset=function(){return this.model_document.offsets[this.index]},DV.Page.prototype.getPageNoteHeight=function(){return this.model_pages.pageNoteHeights[this.index]},DV.Page.prototype.draw=function(e){if(this.index!==e.index||e.force||this.imgSource!=this.model_pages.imageURL(this.index)){this.index=e.force===!0?this.index:e.index;var t=this.model_pages.imageURL(this.index);if(this.el[0].className=this.el[0].className.replace(/\s*DV-page-\d+/,"")+" DV-page-"+(this.index+1),this.viewer.options.ads&&e.force&&this.pageNumber!=this.index+1&&0===(this.index+1)%this.viewer.options.ads.interval&&(this.el.find(".advert").length||(this.el.append('<div class="advert" data-ad-type="cube"></div>'),this.viewer.options.ads.args?this.el.find(".advert").ad(this.viewer.options.ads.args):this.el.find(".advert").ad())),this.imgSource!=t&&(this.imgSource=t,this.loadImage()),this.sizeImage(),this.position(),this.pageNumber!=this.index+1||e.forceAnnotationRedraw===!0){for(var n=0;n<this.annotations.length;n++)this.annotations[n].remove(),delete this.annotations[n],this.hasLayerRegional=!1,this.hasLayerPage=!1;this.annotations=[];var i=this.model_annotations.byPage[this.index];if(i)for(var n=0;n<i.length;n++){var s=i[n];if(s.id===this.viewer.annotationToLoadId){var r=!0;s.id===this.viewer.annotationToLoadEdit&&(e.edit=!0),this.viewer.openingAnnotationFromHash&&(this.viewer.helpers.jump(this.index,(s.top||0)-37),this.viewer.openingAnnotationFromHash=!1)}else var r=!1;"page"==s.type?this.hasLayerPage=!0:"regional"==s.type&&(this.hasLayerRegional=!0);var o=this.viewer.$(".DV-allAnnotations .DV-annotation[rel=aid-"+s.id+"]").clone();o.attr("id","DV-annotation-"+s.id),o.find(".DV-img").each(function(){var e=DV.jQuery(this);e.attr("src",e.attr("data-src"))});var a=new DV.Annotation({renderedHTML:o,id:s.id,page:this,pageEl:this.pageEl,annotationContainerEl:this.annotationContainerEl,pageNumber:this.pageNumber,state:"collapsed",top:s.y1,left:s.x1,width:s.x1+s.x2,height:s.y1+s.y2,active:r,showEdit:e.edit,type:s.type});this.annotations.push(a)}this.pageInsertEl.toggleClass("visible",!this.hasLayerPage),this.renderMeta({pageNumber:this.index+1}),this.drawRemoveOverlay()}this.setPageType()}},DV.Page.prototype.drawRemoveOverlay=function(){this.removedOverlayEl.toggleClass("visible",!!this.viewer.models.removedPages[this.index+1])},DV.Page.prototype.setPageType=function(){this.annotations.length>0?(this.hasLayerPage===!0&&this.el.addClass("DV-layer-page"),this.hasLayerRegional===!0&&this.el.addClass("DV-layer-page")):this.el.removeClass("DV-layer-page DV-layer-regional")},DV.Page.prototype.position=function(){this.el.css({top:this.model_document.offsets[this.index]}),this.offset=this.getOffset()},DV.Page.prototype.renderMeta=function(e){this.pageNumberEl.text("p. "+e.pageNumber),this.pageNumber=e.pageNumber},DV.Page.prototype.loadImage=function(){this.loadTimer&&(clearTimeout(this.loadTimer),delete this.loadTimer),this.el.removeClass("DV-loaded").addClass("DV-loading");var e=this.model_pages,t=DV.jQuery(new Image),n=this,i=function(){n.loadTimer&&(clearTimeout(n.loadTimer),delete n.loadTimer),t.bind("load readystatechange",function(i){if(this.complete||"complete"==this.readyState&&"readystatechange"==i.type){if(t!=n._currentLoader)return;e.updateHeight(t[0],n.index),n.drawImage(t[0].src),clearTimeout(n.loadTimer),delete n.loadTimer}});var i=n.model_pages.imageURL(n.index);n._currentLoader=t,t[0].src=i};this.loadTimer=setTimeout(i,150),this.viewer.pageSet.redraw()},DV.Page.prototype.sizeImage=function(){var e=this.model_pages.width,t=this.model_pages.getPageHeight(this.index);this.coverEl.css({width:e,height:t}),this.pageImageEl.css({width:e,height:t}),this.el.css({height:t,width:e}),this.pageEl.css({height:t,width:e})},DV.Page.prototype.drawImage=function(e){var t=this.model_pages.getPageHeight(this.index);return e==this.pageImageEl.attr("src")&&t==this.pageImageEl.attr("height")?(this.el.addClass("DV-loaded").removeClass("DV-loading"),void 0):(this.pageImageEl.replaceWith('<img width="'+this.model_pages.width+'" height="'+t+'" class="DV-pageImage" src="'+e+'" />'),this.setPageImage(),this.sizeImage(),this.el.addClass("DV-loaded").removeClass("DV-loading"),this.el.find(".DV-page").css({"background-image":"url("+e+")","background-size":"100% auto","background-repeat":"none"}),this.el,_.each(this.viewer.onPageLoadedCallbacks,_.bind(function(e){e(this)},this)),this.showEditionSectionLabel(),void 0)},DV.Page.prototype.showEditionSectionLabel=function(){var e=this;if(e.pageNumber!==this.index+1)return!1;if(1==e.pageNumber)return!1;e.el.find(".DV-edition-section-label").remove();var t=_.find(this.viewer.schema.data.sections,function(t){return t.page==e.pageNumber?t:void 0});if(t&&""!==t.title){var n=$("<div />");t.edition&&t.section?n.addClass("DV-edition-section-label").append("<h3>"+t.section+" section from "+t.title+' regional edition <a href="/faq"><i class="icon-question-sign"></i></a></h3>'):t.edition&&!t.section&&n.addClass("DV-edition-section-label").append("<h3>From "+t.title+' regional edition <a href="/faq"><i class="icon-question-sign"></i></a></h3>'),$(this.el).prepend(n)}},DV.PageSet=function(e){this.currentPage=null,this.pages={},this.viewer=e,this.zoomText()},DV.PageSet.prototype.execute=function(e,t){this.pages.each(function(n){n[e].apply(n,t)})},DV.PageSet.prototype.buildPages=function(e){e=e||{};for(var t=this.getPages(),n=0;n<t.length;n++){var i=t[n];i.set=this,i.index=n,this.pages[i.label]=new DV.Page(this.viewer,i),1==i.currentPage&&(this.currentPage=this.pages[i.label])}this.viewer.models.annotations.renderAnnotations()},DV.PageSet.prototype.getPages=function(){var e=[];return this.viewer.elements.sets.each(_.bind(function(t,n){var i=$(n).hasClass("DV-page-"+this.viewer.api.currentPage());e.push({label:"p"+t,el:n,index:t,pageNumber:t+1,currentPage:i})},this)),e},DV.PageSet.prototype.getCurrentPage=function(){var e=this.getPages();return _.find(e,function(e){return e.currentPage?e:void 0})},DV.PageSet.prototype.reflowPages=function(){this.viewer.models.pages.resize(),this.viewer.helpers.setActiveAnnotationLimits(),this.redraw(!1,!0)},DV.PageSet.prototype.simpleReflowPages=function(){this.viewer.helpers.setActiveAnnotationLimits(),this.redraw(!1,!1)},DV.PageSet.prototype.cleanUp=function(){this.viewer.activeAnnotation&&this.viewer.activeAnnotation.hide(!0)},DV.PageSet.prototype.zoom=function(e){if(this.viewer.models.document.zoomLevel!==e.zoomLevel){var t=this.viewer.models.document.currentIndex(),n=this.viewer.models.document.offsets[t],i=1*this.viewer.models.document.zoomLevel,s=e.zoomLevel/i,r=this.viewer.elements.window.scrollTop();this.viewer.models.document.zoom(e.zoomLevel);var o=parseInt(r,10)>parseInt(n,10)?r-n:n-r,a=o/this.viewer.models.pages.height;if(this.reflowPages(),this.zoomText(),"ViewThumbnails"===this.viewer.state&&(this.viewer.thumbnails.setZoom(e.zoomLevel),this.viewer.thumbnails.lazyloadThumbnails()),"ViewDocument"===this.viewer.state&&this.viewer.$(".DV-annotationRegion.DV-accessRedact").each(function(){var e=DV.jQuery(this);e.css({top:Math.round(e.position().top*s),left:Math.round(e.position().left*s),width:Math.round(e.width()*s),height:Math.round(e.height()*s)})}),null!=this.viewer.activeAnnotation){var h={index:this.viewer.models.document.currentIndex(),top:this.viewer.activeAnnotation.top,id:this.viewer.activeAnnotation.id};this.viewer.activeAnnotation=null,this.showAnnotation(h),this.viewer.helpers.setActiveAnnotationLimits(this.viewer.activeAnnotation)}else{var l=Math.round(this.viewer.models.pages.height*a);this.viewer.helpers.jump(this.viewer.models.document.currentIndex(),l)}}},DV.PageSet.prototype.zoomText=function(){var e=this.viewer.models.pages.getPadding(),t=this.viewer.models.pages.zoomLevel;this.viewer.$(".DV-textPage").width(t),this.viewer.elements.collection.css({width:t+e})},DV.PageSet.prototype.draw=function(e){for(var t=0,n=e.length;n>t;t++){var i=this.pages[e[t].label];i&&i.draw({index:e[t].index,pageNumber:e[t].index+1})}},DV.PageSet.prototype.redraw=function(e,t){this.pages.p0&&this.pages.p0.draw({force:!0,forceAnnotationRedraw:t}),this.pages.p1&&this.pages.p1.draw({force:!0,forceAnnotationRedraw:t}),this.pages.p2&&this.pages.p2.draw({force:!0,forceAnnotationRedraw:t}),t&&this.viewer.activeAnnotation&&this.viewer.helpers.jump(this.viewer.activeAnnotation.page.index,this.viewer.activeAnnotation.position.top-37)},DV.PageSet.prototype.setActiveAnnotation=function(e,t){this.viewer.annotationToLoadId=e,this.viewer.annotationToLoadEdit=t?e:null},DV.PageSet.prototype.showAnnotation=function(e,t){if(t=t||{},"ViewAnnotation"===this.viewer.state){var n=this.viewer.$(".DV-allAnnotations div[rel=aid-"+e.id+"]")[0].offsetTop;return this.viewer.elements.window.scrollTop(n+10,"fast"),this.viewer.helpers.setActiveAnnotationInNav(e.id),this.viewer.activeAnnotationId=e.id,void 0}this.viewer.helpers.removeObserver("trackAnnotation"),this.viewer.activeAnnotationId=null,null!=this.viewer.activeAnnotation&&this.viewer.activeAnnotation.hide(),this.setActiveAnnotation(e.id,t.edit);for(var i="page"==this.viewer.models.annotations.byId[e.id].type,s=i?-7:36,n=e.top-s,r=0;2>=r;r++)if(this.pages["p"+r])for(var o=0;o<this.pages["p"+r].annotations.length;o++)if(this.pages["p"+r].annotations[o].id===e.id)return this.viewer.helpers.jump(e.index,n),this.pages["p"+r].annotations[o].show(t),void 0;this.viewer.helpers.jump(e.index,n)},DV.Thumbnails=function(e){this.currentIndex=0,this.zoomLevel=null,this.scrollTimer=null,this.imageUrl=e.schema.document.resources.page.image.replace(/\{size\}/,"small"),this.pageCount=e.schema.document.pages,this.viewer=e,this.resizeId=_.uniqueId(),this.sizes={},this.BASE_WIDTH=60,this.BASE_HEIGHT=75,_.each(_.range(this.viewer.models.document.ZOOM_RANGES.length+1),_.bind(function(e){var t,n;0===e?(t=this.BASE_WIDTH,n=this.BASE_HEIGHT):(t=this.BASE_WIDTH+30*e,n=this.BASE_HEIGHT+40*e),this.sizes[String(e)]={w:t,h:n}},this)),_.bindAll(this,"lazyloadThumbnails","loadThumbnails")},DV.Thumbnails.prototype.render=function(){this.el=this.viewer.$(".DV-thumbnails"),this.getCurrentIndex(),this.getZoom(),this.viewer.schema.data.sections.length>0?_.each(this.viewer.schema.data.sections,_.bind(function(e){this.buildThumbnails(e.page,e.endPage)},this)):this.buildThumbnails(1,this.pageCount),this.setZoom(),this.viewer.elements.window.unbind("scroll.thumbnails").bind("scroll.thumbnails",this.lazyloadThumbnails);var e="resize.thumbnails-"+this.resizeId;DV.jQuery(window).unbind(e).bind(e,this.lazyloadThumbnails)},DV.Thumbnails.prototype.buildThumbnails=function(e,t){1==e&&this.el.empty();var n,i=null,s=null;this.viewer.schema.data.sections.length>0&&(n=_.find(this.viewer.schema.data.sections,function(t){return t.page==e?t:void 0}),i=n.section,s=n.edition);var r=JST.thumbnails({page:e,endPage:t,zoom:this.zoomLevel,imageUrl:this.imageUrl,section:i,edition:s});this.el.html(this.el.html()+r),this.highlightCurrentPage(),_.defer(this.loadThumbnails)},DV.Thumbnails.prototype.getCurrentIndex=function(){this.currentIndex=this.viewer.models.document.currentIndex()},DV.Thumbnails.prototype.highlightCurrentPage=function(){this.currentIndex=this.viewer.models.document.currentIndex(),this.viewer.$(".DV-thumbnail.DV-selected").removeClass("DV-selected");var e=this.viewer.$(".DV-thumbnail:eq("+this.currentIndex+")");if(e.length){e.addClass("DV-selected");var t=this.viewer.$(".DV-pages");t.scrollTop(t.scrollTop()+e.position().top-12)}},DV.Thumbnails.prototype.setZoom=function(e){this.getZoom(e);var t=this.sizes[this.zoomLevel];this.viewer.$(".DV-hasHeight").each(function(){var e=t.w/this.width;DV.jQuery(this).css({height:this.height*e})}),this.viewer.$(".DV-hasWidth").each(function(){var e=t.h/this.height,n=DV.jQuery(this);n.add(n.prev(".DV-thumbnail-shadow")).css({width:this.width*e})}),this.el[0].className=this.el[0].className.replace(/DV-zoom-\d\s*/,""),this.el.addClass("DV-zoom-"+this.zoomLevel)},DV.Thumbnails.prototype.getZoom=function(e){return this.zoomLevel=null!==e&&"undefined"!=typeof e?_.indexOf(this.viewer.models.document.ZOOM_RANGES,e):_.indexOf(this.viewer.models.document.ZOOM_RANGES,this.viewer.models.document.zoomLevel)},DV.Thumbnails.prototype.setImageSize=function(e,t){var n=this.sizes[this.zoomLevel],i=n.w/e.width,s=e.height*i;if(Math.abs(n.h-s)>10||/DV-has/.test(t[0].className))if(s<n.h)t.addClass("DV-hasHeight").css({height:s});else{var r=s/n.h,o=n.w/r;t.add(t.prev(".DV-thumbnail-shadow")).addClass("DV-hasWidth").css({width:o})}t.attr({src:e.src})},DV.Thumbnails.prototype.lazyloadThumbnails=function(){"ViewThumbnails"==this.viewer.state&&(this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(this.loadThumbnails,100))},DV.Thumbnails.prototype.loadThumbnails=function(){var e=this.viewer,t=e.$(".DV-thumbnails").width(),n=e.elements.window.height(),i=e.elements.window.scrollTop(),s=i+n,r=e.$(".DV-thumbnail:first-child"),o=r.outerHeight(!0),a=r.outerWidth(!0),h=Math.floor(t/a),l=Math.floor(i/o*h),u=Math.ceil(s/o*h);l-=l%h+1,u+=h-u%h,this.loadImages(l,u)},DV.Thumbnails.prototype.loadImages=function(e,t){var n=this,i=this.viewer,s=e>0?":gt("+e+")":"",r=t<=this.pageCount?":lt("+t+")":"";i.$(".DV-thumbnail"+r+s).each(function(){var e=i.$(this);if(!e.attr("src")){var t=i.$(".DV-thumbnail-image",e),s=new Image;DV.jQuery(s).bind("load",_.bind(n.setImageSize,n,s,t)).attr({src:t.attr("data-src")})}})},DV.Schema=function(){this.models={},this.views={},this.states={},this.helpers={},this.events={},this.elements={},this.text={},this.data={zoomLevel:700,pageWidthPadding:40,additionalPaddingOnPage:30,state:{page:{previous:0,current:0,next:1}}}},DV.Schema.prototype.importCanonicalDocument=function(e){_.uniqueId(),e.sections=_.sortBy(e.sections||[],function(e){return e.page}),e.annotations=e.annotations||[],e.canonicalURL=e.canonical_url,this.document=DV.jQuery.extend(!0,{},e),this.data.title=e.title,this.data.totalPages=e.pages,this.data.totalAnnotations=e.annotations.length,this.data.sections=e.sections,this.data.chapters=[],this.data.annotationsById={},this.data.annotationsByPage={},_.each(e.annotations,DV.jQuery.proxy(this.loadAnnotation,this))},DV.Schema.prototype.loadAnnotation=function(e){e.id&&(e.server_id=e.id);var t=e.page-1;if(e.id=e.id||_.uniqueId(),e.title=e.title||"Untitled Note",e.text=e.content||"",e.access=e.access||"public",e.type=e.location&&e.location.image?"region":"page","region"===e.type){var n=DV.jQuery.map(e.location.image.split(","),function(e){return parseInt(e,10)});e.y1=n[0],e.x2=n[1],e.y2=n[2],e.x1=n[3]}else"page"===e.type&&(e.y1=0,e.x2=0,e.y2=0,e.x1=0);this.data.annotationsById[e.id]=e;var i=this.data.annotationsByPage[t]=this.data.annotationsByPage[t]||[],s=_.sortedIndex(i,e,function(e){return e.y1});return i.splice(s,0,e),e},DV.Schema.elements=[{name:"browserDocument",query:document},{name:"browserWindow",query:window},{name:"header",query:"div.DV-header"},{name:"viewer",query:"div.DV-docViewer"},{name:"window",query:"div.DV-pages"},{name:"sets",query:"div.DV-set"},{name:"pages",query:"div.DV-page"},{name:"metas",query:"div.DV-pageMeta"},{name:"bar",query:"div.DV-bar"},{name:"currentPage",query:"span.DV-currentPage"},{name:"well",query:"div.DV-well"},{name:"collection",query:"div.DV-pageCollection"},{name:"annotations",query:"div.DV-allAnnotations"},{name:"navigation",query:"div.DV-navigation"},{name:"chaptersContainer",query:"div.DV-chaptersContainer"},{name:"searchInput",query:"input.DV-searchInput"},{name:"textCurrentPage",query:"span.DV-textCurrentPage"},{name:"coverPages",query:"div.DV-cover"},{name:"fullscreen",query:"div.DV-fullscreen"},{name:"footer",query:"div.DV-footer"},{name:"text",query:".DV-textContents"},{name:"articleText",query:"div.DV-articleTextContents"}],DV.model.Annotations=function(e){this.LEFT_MARGIN=25,this.PAGE_NOTE_FUDGE=window.dc&&dc.account&&(dc.account.isOwner||dc.account.isReviewer)?46:26,this.viewer=e,this.offsetsAdjustments=[],this.offsetAdjustmentSum=0,this.saveCallbacks=[],this.deleteCallbacks=[],this.byId=this.viewer.schema.data.annotationsById,this.byPage=this.viewer.schema.data.annotationsByPage,this.bySortOrder=this.sortAnnotations()},DV.model.Annotations.prototype={render:function(e){this.viewer.models.document;var t,n,i,s,r=this.viewer.models.pages,o=r.zoomFactor(),a=e;"page"===a.type?(t=n=i=s=0,a.top=0):(i=Math.round(a.y1*o),s=Math.round(a.y2*o),t<this.LEFT_MARGIN&&(t=this.LEFT_MARGIN),t=Math.round(a.x1*o),n=Math.round(a.x2*o),a.top=i-5),a.owns_note=a.owns_note||!1,a.width=r.width,a.pageNumber=a.page,a.author=a.author||"",a.author_organization=a.author_organization||"",a.bgWidth=a.width,a.bWidth=a.width-16,a.excerptWidth=n-t-8,a.excerptMarginLeft=t-3,a.excerptHeight=s-i,a.index=a.page-1,a.image=r.imageURL(a.index),a.imageTop=i+1,a.tabTop=(35>i?35-i:0)+8,a.imageWidth=r.width,a.imageHeight=Math.round(r.height*o),a.regionLeft=t,a.regionWidth=n-t,a.regionHeight=s-i,a.excerptDSHeight=a.excerptHeight-6,a.DSOffset=3,"public"==a.access?a.accessClass="DV-accessPublic":"exclusive"==a.access?a.accessClass="DV-accessExclusive":"private"==a.access&&(a.accessClass="DV-accessPrivate"),a.orderClass="",a.options=this.viewer.options,1==a.position&&(a.orderClass+=" DV-firstAnnotation"),a.position==this.bySortOrder.length&&(a.orderClass+=" DV-lastAnnotation");var h="page"===a.type?"pageAnnotation":"annotation";return JST[h](a)},sortAnnotations:function(){return this.bySortOrder=_.sortBy(_.values(this.byId),function(e){return 1e4*e.page+e.y1})},renderAnnotations:function(){if(this.viewer.options.showAnnotations!==!1){for(var e=0;e<this.bySortOrder.length;e++){var t=this.bySortOrder[e];t.of=_.indexOf(this.byPage[t.page-1],t),t.position=e+1,t.html=this.render(t)}this.renderAnnotationsByIndex()}},renderAnnotationsByIndex:function(){var e=_.map(this.bySortOrder,function(e){return e.html}),t=e.join("").replace(/id="DV-annotation-(\d+)"/g,function(e,t){return'id="DV-listAnnotation-'+t+'" rel="aid-'+t+'"'});this.viewer.$("div.DV-allAnnotations").html(t),this.renderAnnotationsByIndex.rendered=!0,this.renderAnnotationsByIndex.zoomLevel=this.zoomLevel,this.updateAnnotationOffsets(),_.defer(_.bind(this.updateAnnotationOffsets,this))},refreshAnnotation:function(e){this.viewer,e.html=this.render(e),DV.jQuery.$("#DV-annotation-"+e.id).replaceWith(e.html)},removeAnnotation:function(e){delete this.byId[e.id];var t=e.page-1;this.byPage[t]=_.without(this.byPage[t],e),this.sortAnnotations(),DV.jQuery("#DV-annotation-"+e.id+", #DV-listAnnotation-"+e.id).remove(),this.viewer.api.redraw(!0),_.isEmpty(this.byId)&&this.viewer.open("ViewDocument")},updateAnnotationOffsets:function(){this.offsetsAdjustments=[],this.offsetAdjustmentSum=0;var e=this.viewer.models.document,t=this.viewer.$("div.DV-allAnnotations"),n=t.find(".DV-pageNote"),i=this.viewer.models.pages.pageNoteHeights;0==this.viewer.$("div.DV-docViewer").hasClass("DV-viewAnnotations")&&t.addClass("DV-getHeights");var s=[];_.each(_.select(this.bySortOrder,function(e){return"page"==e.type}),function(e,t){e.el=n[t],s[e.pageNumber]=e});for(var r=0,o=e.totalPages;o>=r;r++){if(i[r]=0,s[r]){var a=this.viewer.$(s[r].el).height()+this.PAGE_NOTE_FUDGE;i[r-1]=a,this.offsetAdjustmentSum+=a}this.offsetsAdjustments[r]=this.offsetAdjustmentSum}t.removeClass("DV-getHeights")},fireSaveCallbacks:function(e){_.each(this.saveCallbacks,function(t){t(e)})},fireDeleteCallbacks:function(e){_.each(this.deleteCallbacks,function(t){t(e)})},getAnnotations:function(e){return this.byPage[e]},getFirstAnnotation:function(){return _.first(this.bySortOrder)},getNextAnnotation:function(e){var t=this.byId[e];return this.bySortOrder[_.indexOf(this.bySortOrder,t)+1]},getPreviousAnnotation:function(e){var t=this.byId[e];return this.bySortOrder[_.indexOf(this.bySortOrder,t)-1]},getAnnotation:function(e){if(e.id)return this.byId[e.id];if(e.index&&!e.id)throw new Error("looked up an annotation without an id");return this.byId[e]}},DV.model.Articles=function(e){this.viewer=e,this.loadedPages={},this.pendingPages={},this.events=_.extend({pageArticlesLoaded:function(e){return this.trigger("pageArticlesLoaded",e)}},Backbone.Events),e.options.articles?(this.options=e.options.articles,this.init()):this.options=null},DV.model.Articles.prototype={pageUrl:function(e){var t=this.options.page.url;return t=t.replace(/\{\s*?page\s*?\}/,e)},articleImageUrl:function(e,t,n){var i=this.options.image.url;return i=i.replace(/\{\s*?page\s*?\}/,e),i=i.replace(/\{\s*?slug\s*?\}/,t),i=i.replace(/\{\s*?size\s*?\}/,n)},getPageElement:function(e){return"undefined"==typeof e&&(e=this.viewer.api.currentPage()),this.viewer.elements.pages[(e-1)%3]},render:function(e,t){var n=$(this.getPageElement(t));this.viewer.models.document.zoomLevel;var i=1,s=e.articles,r="ontouchstart"in window;if(SVG.supported){var o=n.data("canvas"),a=n.data("page-num");if(o&&a==t)return;o||(o=SVG(n[0]),o.size("100%","100%").style("z-index",99999999999).attr("class","PAGECANVASBAM").attr("viewBox","0 0 "+e.size.width+" "+e.size.height),n.data("canvas",o)),n.data("page-num",t),o.clear(),_.each(s,_.bind(function(e){if(t==n.data("page-num")){var s=e.body;this.viewer.options.ads&&(s='<div class="advert" data-ad-type="cube"></div>'+s);var a=o.group();if(a.attr("class","article-"+e.slug),_.each(e.coords,function(e){var t=[];_.each(e,function(e){t.push([e[0]*i,e[1]*i])}),a.polyline(t).fill({color:"orange",opacity:.5})}),e.slug==this.activeArticleSlug?a.opacity(.5):a.opacity(0),r||(a.on("mouseover",function(){a.opacity(.2+a.opacity())}),a.on("mouseout",function(){var e=a.opacity()-.2;0>e?a.opacity(0):a.opacity(e)})),r)var h="touchstart",l="touchmove",u="touchend";else var h="mousedown",l="mousemove",u="mouseup";var c,d=0,p=0;a.on(h,function(){c=!1}).on(l,function(){c=!0}).on(u,_.bind(function(){c||(p>0?(this.moveToArticle(t,e.slug,!0),clearTimeout(d)):(this.markRegionActive(e.slug),this.showOptions(t,e.slug),this.viewer.history.navigate("page/"+e.start_page+"/article/"+e.slug,{trigger:!1})),p+=1,d=setTimeout(function(){p=0},500))},this))}},this))}this.events.pageArticlesLoaded(t)},moveToArticle:function(e,t,n){var i=this.loadedPages[e];if("undefined"==typeof i)return!1;var s,r,o,a=($(this.getPageElement(e)),this.viewer.models.document.ZOOM_RANGES),h=this.viewer.models.pages.zoomLevel,l=this.viewer.elements.window,u=_.find(i.articles,function(e){return e.slug==t
}),c=function(e){return e[0]},d=function(e){return e[1]},p=function(e){return e[0]},f=_.flatten(u.coords,!0),g=_.min(f,c),m=_.min(f,d),v=_.max(f,p),y=_.max(f,d);if(n){for(var w=a.length;w-->0;)if(s=a[w]/i.size.width,r=(v[0]-g[0])*s,o=(y[1]-m[1])*s,r<=l.width()){newZoomLevel=a[w];break}this.viewer.pageSet.zoom({zoomLevel:newZoomLevel})}else s=h/i.size.width,r=(v[0]-g[0])*s,o=(y[1]-m[1])*s;var b=($(window).width()-r)/2,x=g[0]*s-b,V=m[1]*s+this.viewer.models.document.getOffset(e-1);return 0>x&&(x=0),l.scrollLeft(x),l.scrollTop(V),this.markRegionActive(u.slug),this.showOptions(e,u.slug),this.viewer.history.navigate("page/"+u.start_page+"/article/"+u.slug,{trigger:!1}),!1},showOptions:function(e,t){this.cleanUp();var n,i=!1;article=_.find(this.loadedPages[e].articles,function(e){return e.slug===t}),article.continuations&&article.continuations.length>1&&(n=article.continuations.sort(),i=n[n.indexOf(Number(e))+1]?n[n.indexOf(Number(e))+1]:n[0]);var s=$(JST.articleOptions({next:i}));article.legible?s.find(".DV-read-full-text").show().click(_.bind(function(){return this.savePosition(),this.viewer.open("ViewArticleText",e,t),!1},this)):s.find(".DV-read-full-text").remove(),this.viewer.helpers.setupShareLinks(s.find(".dropdown-menu"),"article"),type=article.type_rollup.match(/image/gi)?"image":article.type_rollup.match(/article/gi)?"article":article.type_rollup.match(/comic/gi)?"comic":article.type_rollup.match(/advertisement/gi)?"advertisement":"content",s.find(".DV-share-content .content-type").text(type),s.find(".DV-share-content").show(),i&&s.find(".DV-jump-to-continuation").click(_.bind(function(){this.cleanUp(),this.viewer.helpers.jump(i-1),this.pendingPages[i].done(_.bind(function(){this.markRegionActive(t),this.showOptions(i,t)},this))},this)).show(),s.find(".DV-back-to-paper").remove(),this.viewer.elements.footer.prepend(s),s.show()},showBackToPaper:function(e,t){this.cleanUp();var n=$(JST.articleOptions({next:!1}));n.find(".DV-back-to-paper").show().click(_.bind(function(){this.cleanUp(),this.viewer.open("ViewDocument");var n=Math.round(this.viewer.models.pages.baseWidth*this.viewer.models.pages.zoomFactor());this.viewer.elements.collection.css({width:n+this.viewer.models.pages.getPadding()}),this.restorePosition(),this.markRegionActive(t),this.showOptions(e,t)},this)),n.find(".DV-read-full-text, .DV-share-content").remove(),this.viewer.elements.footer.prepend(n),n.show()},getData:function(){var e=this.viewer.api.currentPage();isNaN(e)||(this.drawArticlesForPage(e),this.drawArticlesForPage(e+1))},drawArticlesForPage:function(e){return"undefined"!=typeof this.loadedPages[e]?this.render(this.loadedPages[e],e):(_.keys(this.pendingPages).length>0&&_.each(_.keys(this.pendingPages),_.bind(function(t){var n=t!=String(e)&&t!=String(e+1)&&t!=String(e-1);n&&this.pendingPages[t].abort()},this)),-1==_.keys(this.pendingPages).indexOf(String(e))&&(this.pendingPages[e]=$.getJSON(this.pageUrl(e),_.bind(function(t){this.loadedPages[e]=t,this.render(t,e)},this))),void 0)},markRegionActive:function(e){$(".article-"+this.activeArticleSlug).each(function(){this.instance.opacity(0)}),this.activeArticleSlug=e,$(".article-"+this.activeArticleSlug).each(function(){this.instance.opacity(.5)})},cleanUp:function(){$(".DV-options").remove()},savePosition:function(){this.position={top:$(".DV-pages").scrollTop(),left:$(".DV-pages").scrollLeft()}},restorePosition:function(){$(".DV-pages").scrollTop(this.position.top),$(".DV-pages").scrollLeft(this.position.left)},init:function(){var e=_.bind(function(t){var n=this.viewer.pageSet.getCurrentPage(),i=t.el;$(n.el).data().id==$(i).data().id&&(this.getData(),this.viewer.onPageLoadedCallbacks.splice(this.viewer.onPageLoadedCallbacks.indexOf(e),1)),this.viewer.api.onPageChange(_.bind(this.getData,this))},this);this.viewer.api.onPageLoaded(e)}},DV.model.Chapters=function(e){this.viewer=e,this.loadChapters()},DV.model.Chapters.prototype={loadChapters:function(){var e=this.viewer.schema.data.sections,t=this.chapters=this.viewer.schema.data.chapters=[];_.each(e,function(e){e.id||(e.id=_.uniqueId())});for(var n=0,i=0,s=this.viewer.schema.data.totalPages;s>i;i++){var r=e[n],o=e[n+1];o&&i>=o.page-1&&(n+=1,r=o),!r||r.page>i+1||(t[i]=r.id)}},getChapterId:function(e){return this.chapters[e]},getChapterPosition:function(e){for(var t=0,n=this.chapters.length;n>t;t++)if(this.chapters[t]===e)return t}},DV.model.Document=function(e){this.viewer=e,this.currentPageIndex=0,this.offsets=[],this.baseHeightsPortion=[],this.baseHeightsPortionOffsets=[],this.paddedOffsets=[],this.originalPageText={},this.totalDocumentHeight=0,this.totalPages=0,this.additionalPaddingOnPage=0,this.ZOOM_RANGES=[400,700,850,1e3,1200,1400,1600,1800,2200,2600];var t=this.viewer.schema.data;this.state=t.state,this.baseImageURL=t.baseImageURL,this.canonicalURL=t.canonicalURL,this.additionalPaddingOnPage=t.additionalPaddingOnPage,this.pageWidthPadding=t.pageWidthPadding,this.totalPages=t.totalPages,this.onPageChangeCallbacks=[],this.onComputeOffsetsCallbacks=[];var n=this.zoomLevel=this.viewer.options.zoom||t.zoomLevel;"auto"==n&&(this.zoomLevel=t.zoomLevel);var i=_.last(this.ZOOM_RANGES);this.zoomLevel>i&&(this.zoomLevel=i)},DV.model.Document.prototype={setPageIndex:function(e){return this.currentPageIndex!==e&&this.viewer.elements.sets.find(".DV-page").css("background-image","none"),this.currentPageIndex=e,this.viewer.elements.currentPage.text(this.currentPage()),this.viewer.helpers.setActiveChapter(this.viewer.models.chapters.getChapterId(e)),_.each(this.onPageChangeCallbacks,function(e){e()}),e},currentPage:function(){return this.currentPageIndex+1},currentIndex:function(){return this.currentPageIndex},nextPage:function(){var e=this.currentIndex()+1;return e>=this.totalPages?this.currentIndex():this.setPageIndex(e)},previousPage:function(){var e=this.currentIndex()-1;return 0>e?this.currentIndex():this.setPageIndex(e)},zoom:function(e,t){(this.zoomLevel!=e||t===!0)&&(this.zoomLevel=e,this.viewer.models.pages.resize(this.zoomLevel),this.viewer.models.annotations.renderAnnotations(),this.computeOffsets(),0==this.ZOOM_RANGES.indexOf(this.zoomLevel)?(this.viewer.$(".DV-zoomBox .dec").attr("disabled",!0),this.viewer.$(".DV-zoomBox .inc").attr("disabled",!1)):this.ZOOM_RANGES.indexOf(this.zoomLevel)>=this.ZOOM_RANGES.length-1?(this.viewer.$(".DV-zoomBox .inc").attr("disabled",!0),this.viewer.$(".DV-zoomBox .dec").attr("disabled",!1)):(this.viewer.$(".DV-zoomBox .inc").attr("disabled",!1),this.viewer.$(".DV-zoomBox .dec").attr("disabled",!1)))},computeOffsets:function(){for(var e=this.viewer.models.annotations,t=0,n=0,i=this.totalPages,s=0,r=this.viewer.elements.window[0].scrollTop,o=250,a=0;i>a;a++){e.offsetsAdjustments[a]&&(n=e.offsetsAdjustments[a]),this.viewer.options.ads&&a>0&&0===a%this.viewer.options.ads.interval&&(n+=o),this.viewer.schema.data.sections.length>0&&a>0&&this.viewer.models.pages.isSectionStart(a-1)&&(n+=$(".DV-edition-section-label").outerHeight());var h=this.viewer.models.pages.getPageHeight(a),l=this.offsets[a]||0,u=this.offsets[a]=n+t;if(l!==u&&r>u){var c=u-l-s;r+=c,s+=c}this.baseHeightsPortion[a]=Math.round((h+this.additionalPaddingOnPage)/3),this.baseHeightsPortionOffsets[a]=0==a?0:u-this.baseHeightsPortion[a],t+=h+this.additionalPaddingOnPage}t+=n,t!=this.totalDocumentHeight&&(s=0!=this.totalDocumentHeight?s:t-this.totalDocumentHeight,this.viewer.helpers.setDocHeight(t,s),this.totalDocumentHeight=t),_.each(this.onComputeOffsetsCallbacks,function(e){e()})},getOffset:function(e){return this.offsets[e]},resetRemovedPages:function(){this.viewer.models.removedPages={}},addPageToRemovedPages:function(e){this.viewer.models.removedPages[e]=!0},removePageFromRemovedPages:function(e){this.viewer.models.removedPages[e]=!1},redrawPages:function(){_.each(this.viewer.pageSet.pages,function(e){e.drawRemoveOverlay()}),this.viewer.thumbnails&&this.viewer.thumbnails.render()},redrawReorderedPages:function(){this.viewer.thumbnails&&this.viewer.thumbnails.render()}},DV.model.Pages=function(e){this.viewer=e,this.averageHeight=0,this.pageHeights=[],this.pageNoteHeights=[],this.BASE_HEIGHT=1900,this.widths={xsmall:320,small:600,normal:1200,large:1800,xlarge:2200,xxlarge:2600},this.BASE_WIDTH=this.widths.normal,this.DEFAULT_PADDING=100,this.REDUCED_PADDING=38,this.MINI_PADDING=18,this.zoomLevel=this.viewer.models.document.zoomLevel,this.baseWidth=this.BASE_WIDTH,this.baseHeight=this.BASE_HEIGHT,this.width=this.zoomLevel,this.height=this.baseHeight*this.zoomFactor(),this.numPagesLoaded=0},DV.model.Pages.prototype={imageURL:function(e){var t=this.viewer.schema.document.resources.page.image,n=this.zoomLevel>this.BASE_WIDTH?"large":"normal";_.each(this.widths,_.bind(function(e,t){this.zoomLevel==e&&(n=t)},this));var i=e+1;return this.viewer.schema.document.resources.page.zeropad&&(i=this.zeroPad(i,5)),t=t.replace(/\{size\}/,n),t=t.replace(/\{page\}/,i)},zeroPad:function(e,t){for(var n=e.toString();n.length<t;)n="0"+n;return n},getPadding:function(){return this.viewer.options.mini?this.MINI_PADDING:"auto"==this.viewer.options.zoom?this.REDUCED_PADDING:this.DEFAULT_PADDING},zoomFactor:function(){return this.zoomLevel/this.BASE_WIDTH},resize:function(e){var t=this.viewer.models.pages.DEFAULT_PADDING;if(e){if(e==this.zoomLevel)return;var n=this.zoomFactor();this.zoomLevel=e||this.zoomLevel;var i=this.zoomFactor()/n;this.width=Math.round(this.baseWidth*this.zoomFactor()),this.height=Math.round(this.height*i),this.averageHeight=Math.round(this.averageHeight*i)}this.viewer.elements.sets.width(this.zoomLevel),this.viewer.elements.collection.css({width:this.width+t}),this.viewer.$(".DV-textContents").css({"font-size":.02*this.zoomLevel+"px"})},updateHeight:function(e,t){var n=this.getPageHeight(t),i=e.height*(this.zoomLevel>this.BASE_WIDTH?this.BASE_WIDTH/e.width:1);if(e.width<this.baseWidth&&(i*=this.baseWidth/e.width),this.setPageHeight(t,i),this.averageHeight=(this.averageHeight*this.numPagesLoaded+i)/(this.numPagesLoaded+1),this.numPagesLoaded+=1,n!==i&&(this.viewer.models.document.computeOffsets(),this.viewer.pageSet.simpleReflowPages(),!this.viewer.activeAnnotation&&t<this.viewer.models.document.currentIndex())){var s=Math.round(i*this.zoomFactor()-n);this.viewer.elements.window[0].scrollTop+=s}},setPageHeight:function(e,t){this.pageHeights[e]=Math.round(t)},getPageHeight:function(e){var t=this.pageHeights[e];return Math.round(t?t*this.zoomFactor():this.height)},isSectionStart:function(e){var t=_.find(this.viewer.schema.data.sections,function(t){return t.page==e+1?t:void 0});return t?!0:!1}},DV.Schema.events={zoom:function(e){var t=this.viewer,n=function(){var n=t.models.document,i=t.elements.window,s=t.models.pages,r=n.currentPageIndex,o=(i.scrollTop()+i.height()/2-n.offsets[r])/s.getPageHeight(r),a=t.elements.collection.width()>i.width()?(i.scrollLeft()+i.width()/2-n.pageWidthPadding)/s.width:.5;t.pageSet.zoom({zoomLevel:e});var h=o*s.getPageHeight(r)+n.offsets[r]-i.height()/2,l=a*s.width+n.pageWidthPadding-i.width()/2;i.scrollTop(h),l>0&&i.scrollLeft(l);var u=t.models.document.ZOOM_RANGES;return t.dragReporter.sensitivity=u[u.length-1]==e?1.5:1,t.notifyChangedState(),!0};t.confirmStateChange?t.confirmStateChange(n):n()},drawPages:function(){if("ViewDocument"==this.viewer.state){var e=this.models.document,t=this.elements.window[0],n=e.baseHeightsPortionOffsets,i=this.viewer.scrollPosition=t.scrollTop,s=i+this.viewer.$(t).height()/3,r=_.sortedIndex(n,i),o=_.sortedIndex(n,s);n[r]==i&&r++&&o++;var a=this.helpers.sortPages(o-1);e.totalPages,e.currentPage()!=r&&e.setPageIndex(r-1),this.drawPageAt(a,o-1)}},drawPageAt:function(e,t){var n=0==t,i=t==this.models.document.totalPages-1;n&&(t+=1);var s=[{label:e[0],index:t-1},{label:e[1],index:t},{label:e[2],index:t+1}];i&&s.pop(),s[n?0:s.length-1].currentPage=!0,this.viewer.pageSet.draw(s)},check:function(){var e=this.viewer;if(e.busy===!1){e.busy=!0;for(var t=0;t<this.viewer.observers.length;t++)this[e.observers[t]].call(this);e.busy=!1}},loadText:function(e,t){e=e?parseInt(e,10):this.models.document.currentIndex(),this._previousTextIndex=e;var n=this,i=function(i){var s=parseInt(e,10)+1;n.viewer.$(".DV-textContents").replaceWith('<pre class="DV-textContents">'+i+"</pre>"),n.elements.currentPage.text(s),n.elements.textCurrentPage.text("p. "+s),n.models.document.setPageIndex(e),n.helpers.setActiveChapter(n.models.chapters.getChapterId(e)),"editText"!=n.viewer.openEditor||s in n.models.document.originalPageText||(n.models.document.originalPageText[s]=i),"editText"==n.viewer.openEditor&&n.viewer.$(".DV-textContents").attr("contentEditable",!0).addClass("DV-editing"),t&&t.call(n.helpers)};if(n.viewer.schema.text[e])return i(n.viewer.schema.text[e]);var s=DV.jQuery.proxy(function(t){i(n.viewer.schema.text[e]=t)},this);this.viewer.$(".DV-textContents").text("");var r=n.viewer.schema.document.resources.page.text.replace("{page}",e+1),o=this.helpers.isCrossDomain(r);o&&(r+="?callback=?"),DV.jQuery[o?"getJSON":"get"](r,{},s)},resetTracker:function(){this.viewer.activeAnnotation=null,this.trackAnnotation.combined=null,this.trackAnnotation.h=null},trackAnnotation:function(){var e=this.viewer,t=this.helpers,n=this.elements.window[0].scrollTop;if(e.activeAnnotation){var i=e.activeAnnotation,s=this.trackAnnotation;s.id!=i.id&&(s.id=i.id,t.setActiveAnnotationLimits(i)),!e.activeAnnotation.annotationEl.hasClass("DV-editing")&&(n>s.h||n<s.combined)&&(i.hide(!0),e.pageSet.setActiveAnnotation(null),e.activeAnnotation=null,s.h=null,s.id=null,s.combined=null)}else e.pageSet.setActiveAnnotation(null),e.activeAnnotation=null,s.h=null,s.id=null,s.combined=null,t.removeObserver("trackAnnotation")}},DV.Schema.events.ViewAnnotation={next:function(){var e=this.viewer,t=e.activeAnnotationId,n=this.models.annotations,i=null===t?n.getFirstAnnotation():n.getNextAnnotation(t);return i?(e.pageSet.showAnnotation(i),this.helpers.setAnnotationPosition(i.position),void 0):!1},previous:function(){var e=this.viewer,t=e.activeAnnotationId,n=this.models.annotations,i=t?n.getPreviousAnnotation(t):n.getFirstAnnotation();return i?(e.pageSet.showAnnotation(i),this.helpers.setAnnotationPosition(i.position),void 0):!1},search:function(e){return e.preventDefault(),this.viewer.open("ViewSearch"),!1}},DV.Schema.events.ViewDocument={next:function(){var e=this.models.document.nextPage();this.helpers.jump(e)},previous:function(){var e=this.models.document.previousPage();this.helpers.jump(e)},search:function(e){return e.preventDefault(),this.viewer.open("ViewSearch"),!1}},DV.Schema.events.ViewSearch={next:function(){var e=this.models.document.nextPage();this.loadText(e),this.viewer.open("ViewText")},previous:function(){var e=this.models.document.previousPage();this.loadText(e),this.viewer.open("ViewText")},search:function(e){return e.preventDefault(),this.helpers.getSearchResponse(this.elements.searchInput.val()),!1}},DV.Schema.events.ViewText={next:function(){var e=this.models.document.nextPage();this.loadText(e)},previous:function(){var e=this.models.document.previousPage();this.loadText(e)},search:function(e){return e.preventDefault(),this.viewer.open("ViewSearch"),!1}},DV.Schema.events.ViewThumbnails={next:function(){var e=this.models.document.nextPage();this.helpers.jump(e)},previous:function(){var e=this.models.document.previousPage();this.helpers.jump(e)},search:function(e){return e.preventDefault(),this.viewer.open("ViewSearch"),!1}},_.extend(DV.Schema.events,{handleHashChangeViewDocumentPage:function(e){var t=parseInt(e,10)-1;"ViewDocument"===this.viewer.state?(this.viewer.pageSet.cleanUp(),this.helpers.jump(t)):(this.models.document.setPageIndex(t),this.viewer.open("ViewDocument"))},handleHashChangeViewDocumentAnnotation:function(e,t){var n=parseInt(e,10)-1,t=parseInt(t,10);"ViewDocument"===this.viewer.state?this.viewer.pageSet.showAnnotation(this.viewer.models.annotations.byId[t]):(this.models.document.setPageIndex(n),this.viewer.pageSet.setActiveAnnotation(t),this.viewer.openingAnnotationFromHash=!0,this.viewer.open("ViewDocument"))},handleHashChangeViewAnnotationAnnotation:function(e){var e=parseInt(e,10),t=this.viewer;"ViewAnnotation"===t.state?t.pageSet.showAnnotation(this.viewer.models.annotations.byId[e]):(t.activeAnnotationId=e,this.viewer.open("ViewAnnotation"))},handleHashChangeViewArticle:function(e,t){var n=this.viewer,i=_.bind(function(n){n==e&&(this.moveToArticle(e,t),this.showOptions(e,t),this.events.off("pageArticlesLoaded",i))},n.models.articles);n.models.articles.events.on("pageArticlesLoaded",i),this.handleHashChangeViewDocumentPage(e)},handleHashChangeDefault:function(){this.viewer.pageSet.cleanUp(),this.models.document.setPageIndex(0),"ViewDocument"===this.viewer.state?this.helpers.jump(0):this.viewer.open("ViewDocument")},handleHashChangeViewText:function(e){var t=parseInt(e,10)-1;"ViewText"===this.viewer.state?this.events.loadText(t):(this.models.document.setPageIndex(t),this.viewer.open("ViewText"))},handleHashChangeViewPages:function(){"ViewThumbnails"!=this.viewer.state&&this.viewer.open("ViewThumbnails")},handleHashChangeViewSearchRequest:function(e,t){var n=parseInt(e,10)-1;this.elements.searchInput.val(decodeURIComponent(t)),"ViewSearch"!==this.viewer.state&&this.models.document.setPageIndex(n),this.viewer.open("ViewSearch")},handleHashChangeViewEntity:function(e,t,n,i){e=parseInt(e,10)-1,t=decodeURIComponent(t),this.elements.searchInput.val(t),this.models.document.setPageIndex(e),this.states.ViewEntity(t,parseInt(n,10),parseInt(i,10))}}),_.extend(DV.Schema.events,{handleNavigation:function(e){var t=this.viewer.$(e.target),n=t.closest(".DV-trigger"),i=t.closest(".DV-annotationMarker"),s=t.closest(".DV-chapter");if(n.length){if(t.hasClass("DV-expander"))return s.toggleClass("DV-collapsed");if(i.length){var r=i[0].id.replace("DV-annotationMarker-",""),o=this.models.annotations.getAnnotation(r);parseInt(o.index,10)+1,"ViewText"===this.viewer.state?this.loadText(o.index):("ViewThumbnails"===this.viewer.state&&this.viewer.open("ViewDocument"),this.viewer.pageSet.showAnnotation(o))}else{if(!s.length)return!1;s.removeClass("DV-collapsed");var a=parseInt(s[0].id.replace("DV-chapter-",""),10),h=parseInt(this.models.chapters.getChapterPosition(a),10);if(parseInt(h,10)+1,"ViewText"===this.viewer.state)this.loadText(h);else{if("ViewDocument"!==this.viewer.state&&"ViewThumbnails"!==this.viewer.state)return!1;this.helpers.jump(h),"ViewThumbnails"===this.viewer.state&&this.viewer.open("ViewDocument")}}}}}),DV.Schema.helpers={HOST_EXTRACTOR:/https?:\/\/([^\/]+)\//,annotationClassName:".DV-annotation",bindEvents:function(e){var t=this.events.compile("zoom"),n=e.models.document;_.indexOf(n.ZOOM_RANGES,n.zoomLevel);var i=this.viewer;i.zoomControls=i.$(".DV-zoomBox").html(JST.zoomControls),i.$(".DV-zoomBox").delegate(".inc","click",function(){var e=_.indexOf(n.ZOOM_RANGES,n.zoomLevel)+1;n.ZOOM_RANGES[parseInt(e,10)]&&e>=0&&t(n.ZOOM_RANGES[parseInt(e,10)])}),i.$(".DV-zoomBox").delegate(".dec","click",function(){var e=_.indexOf(n.ZOOM_RANGES,n.zoomLevel)-1;n.ZOOM_RANGES[parseInt(e,10)]&&e>=0&&t(n.ZOOM_RANGES[parseInt(e,10)])}),i.$(".DV-zoomBox").delegate(".resize","click",function(){i.helpers.autoZoomPage()}),i.history;var s=i.compiled;s.next=this.events.compile("next"),s.previous=this.events.compile("previous"),e.states,i.$(".DV-navControls").delegate("span.DV-next","click",s.next),i.$(".DV-navControls").delegate("span.DV-previous","click",s.previous),i.$(".DV-annotationView").delegate(".DV-trigger","click",function(t){t.preventDefault(),e.open("ViewAnnotation")}),i.$(".DV-documentView").delegate(".DV-trigger","click",function(){e.open("ViewDocument")}),i.$(".DV-thumbnailsView").delegate(".DV-trigger","click",function(){e.open("ViewThumbnails")}),i.$(".DV-textView").delegate(".DV-trigger","click",function(){e.open("ViewText")}),i.$(".DV-allAnnotations").delegate(".DV-annotationGoto .DV-trigger","click",DV.jQuery.proxy(this.gotoPage,this)),i.$("form.DV-searchDocument").submit(this.events.compile("search")),i.$(".DV-searchBar").delegate(".DV-closeSearch","click",function(t){t.preventDefault(),e.open("ViewText")}),i.$(".DV-searchBox").delegate(".DV-searchInput-cancel","click",DV.jQuery.proxy(this.clearSearch,this)),i.$(".DV-searchResults").delegate("span.DV-resultPrevious","click",DV.jQuery.proxy(this.highlightPreviousMatch,this)),i.$(".DV-searchResults").delegate("span.DV-resultNext","click",DV.jQuery.proxy(this.highlightNextMatch,this)),i.$(".DV-trigger").bind("selectstart",function(){return!1}),this.elements.viewer.delegate(".DV-fullscreen","click",_.bind(this.openFullScreen,this));var r=DV.jQuery.proxy(this.annotationBridgeToggle,this),o=this.elements.collection;o.delegate(".DV-annotationTab","click",r),o.delegate(".DV-annotationRegion","click",DV.jQuery.proxy(this.annotationBridgeShow,this)),o.delegate(".DV-annotationNext","click",DV.jQuery.proxy(this.annotationBridgeNext,this)),o.delegate(".DV-annotationPrevious","click",DV.jQuery.proxy(this.annotationBridgePrevious,this)),o.delegate(".DV-showEdit","click",DV.jQuery.proxy(this.showAnnotationEdit,this)),o.delegate(".DV-cancelEdit","click",DV.jQuery.proxy(this.cancelAnnotationEdit,this)),o.delegate(".DV-saveAnnotation","click",DV.jQuery.proxy(this.saveAnnotation,this)),o.delegate(".DV-saveAnnotationDraft","click",DV.jQuery.proxy(this.saveAnnotation,this)),o.delegate(".DV-deleteAnnotation","click",DV.jQuery.proxy(this.deleteAnnotation,this)),o.delegate(".DV-pageNumber","click",_.bind(this.permalinkPage,this,"document")),o.delegate(".DV-textCurrentPage","click",_.bind(this.permalinkPage,this,"text")),o.delegate(".DV-annotationTitle","click",_.bind(this.permalinkAnnotation,this)),o.delegate(".DV-permalink","click",_.bind(this.permalinkAnnotation,this)),i.$(".DV-thumbnails").delegate(".DV-thumbnail-page","click",function(e){var t=i.$(e.currentTarget);if(!i.openEditor){var n=t.closest(".DV-thumbnail").attr("data-pageNumber");i.helpers.autoZoomPage(),i.history.navigate("page/"+n,{trigger:!0})}}),i.$(".DV-descriptionToggle").live("click",function(e){e.preventDefault(),e.stopPropagation(),i.$(".DV-descriptionText").toggle(),i.$(".DV-descriptionToggle").toggleClass("DV-showDescription")});var a=DV.jQuery.proxy(i.pageSet.cleanUp,this);this.elements.window.live("mousedown",function(t){var n=i.$(t.target);return n.parents().is(".DV-annotation")||n.is(".DV-annotation")?!0:(e.elements.window.hasClass("DV-coverVisible")&&n.width()-parseInt(t.clientX,10)>=15&&a(),void 0)});var h=i.schema.document.id;1==DV.jQuery.browser.msie?(this.elements.browserDocument.bind("focus."+h,DV.jQuery.proxy(this.focusWindow,this)),this.elements.browserDocument.bind("focusout."+h,DV.jQuery.proxy(this.focusOut,this))):(this.elements.browserWindow.bind("focus."+h,DV.jQuery.proxy(this.focusWindow,this)),this.elements.browserWindow.bind("blur."+h,DV.jQuery.proxy(this.blurWindow,this))),this.elements.window.bind("scroll."+h,DV.jQuery.proxy(this.focusWindow,this)),this.elements.coverPages.live("mousedown",a),this.setupShareLinks(".DV-shareTools .dropdown-menu")},unbindEvents:function(){var e=this.viewer,t=e.schema.document.id;1==DV.jQuery.browser.msie?(this.elements.browserDocument.unbind("focus."+t),this.elements.browserDocument.unbind("focusout."+t)):(e.helpers.elements.browserWindow.unbind("focus."+t),e.helpers.elements.browserWindow.unbind("blur."+t)),e.helpers.elements.browserWindow.unbind("scroll."+t),_.each(e.observers,function(t){e.helpers.removeObserver(t)})},ensureAnnotationImages:function(){this.viewer.$(".DV-img[data-src]").each(function(){var e=DV.jQuery(this);e.attr("src",e.attr("data-src"))})},startCheckTimer:function(){var e=this.viewer,t=function(){e.events.check()};this.viewer.checkTimer=setInterval(t,100)},stopCheckTimer:function(){clearInterval(this.viewer.checkTimer)},blurWindow:function(){this.viewer.isFocus===!0&&(this.viewer.isFocus=!1,this.stopCheckTimer())},focusOut:function(){return this.viewer.activeElement==document.activeElement?(this.viewer.isFocus=!1,this.viewer.helpers.stopCheckTimer(),void 0):(this.viewer.activeElement=document.activeElement,this.viewer.isFocus=!0,void 0)},focusWindow:function(){this.viewer.isFocus!==!0&&(this.viewer.isFocus=!0,this.startCheckTimer())},permalinkPage:function(e,t){if("text"==e)var n=this.viewer.models.document.currentPage();else{var i=this.viewer.$(t.target).closest(".DV-set").attr("data-id"),s=this.viewer.pageSet.pages[i],n=s.pageNumber;this.jump(s.index)}this.viewer.history.save(e+"/p"+n)},permalinkAnnotation:function(e){var t=this.viewer.$(e.target).closest(".DV-annotation").attr("data-id"),n=this.viewer.models.annotations.getAnnotation(t),i=n.server_id||n.id;"ViewDocument"==this.viewer.state?(this.viewer.pageSet.showAnnotation(n),this.viewer.history.save("document/p"+n.pageNumber+"/a"+i)):this.viewer.history.save("annotation/a"+i)},setDocHeight:function(e,t){this.elements.bar.css("height",e),this.elements.window[0].scrollTop+=t},getWindowDimensions:function(){var e={height:window.innerHeight?window.innerHeight:this.elements.browserWindow.height(),width:this.elements.browserWindow.width()};return e},isCrossDomain:function(e){var t=e.match(this.HOST_EXTRACTOR);return t&&t[1]!=window.location.host},resetScrollState:function(){this.elements.window.scrollTop(0)},gotoPage:function(e){e.preventDefault();var t=this.viewer.$(e.target).parents(".DV-annotation").attr("rel").replace("aid-",""),n=this.models.annotations.getAnnotation(t),i=this.viewer;"ViewDocument"!==i.state&&(this.models.document.setPageIndex(n.index),i.open("ViewDocument"))},openFullScreen:function(){var e=this.viewer.schema.document,t=e.canonicalURL.replace(/#\S+$/,""),n=this.models.document.currentPage();switch(this.viewer.state){case"ViewAnnotation":t+="#annotation/a"+this.viewer.activeAnnotationId;break;case"ViewDocument":t+="#document/p"+n;break;case"ViewSearch":t+="#search/p"+n+"/"+encodeURIComponent(this.elements.searchInput.val());break;case"ViewText":t+="#text/p"+n;break;case"ViewThumbnails":t+="#pages/p"+n}window.open(t,"documentviewer","toolbar=no,resizable=yes,scrollbars=no,status=no")},sortPages:function(e){return 0==e||1==e%3?["p0","p1","p2"]:2==e%3?["p1","p2","p0"]:0==e%3?["p2","p0","p1"]:void 0},addObserver:function(e){this.removeObserver(e),this.viewer.observers.push(e)},removeObserver:function(e){for(var t=this.viewer.observers,n=0,i=t.length;i>n;n++)e===t[n]&&t.splice(n,1)},toggleContent:function(e){this.elements.viewer.removeClass("DV-viewArticleText DV-viewText DV-viewSearch DV-viewDocument DV-viewAnnotations DV-viewThumbnails").addClass("DV-"+e)},jump:function(e,t,n){t=t?parseInt(t,10):0;var i=this.models.document.getOffset(parseInt(e,10))+t;this.elements.window[0].scrollTop=i,this.models.document.setPageIndex(e),n&&this.viewer.pageSet.redraw(!0),"ViewThumbnails"===this.viewer.state&&this.viewer.thumbnails.highlightCurrentPage()},shift:function(e){var t=this.elements.window,n=t.scrollTop()+e.deltaY,i=t.scrollLeft()+e.deltaX;t.scrollTop(n),t.scrollLeft(i)},getAppState:function(){var e=this.models.document,t=0==e.currentIndex()?1:e.currentPage();return{page:t,zoom:e.zoomLevel,view:this.viewer.state}},constructPages:function(){for(var e=[],t=this.viewer.schema.data.totalPages<3?this.viewer.schema.data.totalPages:3,n=this.models.pages.height,i=0;t>i;i++)e.push(JST.pages({pageNumber:i+1,pageIndex:i,pageImageSource:null,baseHeight:n}));return e.join("")},positionViewer:function(){var e=this.elements.viewer.position();this.elements.viewer.css({position:"absolute",top:e.top,bottom:0,left:0,right:0})},unsupportedBrowser:function(){var e=DV.jQuery.browser;return e.msie&&parseFloat(e.version,10)<=6?(DV.jQuery(this.viewer.options.container).html(JST.unsupported({viewer:this.viewer})),!0):!1},registerHashChangeEvents:function(){var e=this.events,t=this.viewer.history;t.defaultCallback=_.bind(e.handleHashChangeDefault,this.events),t.register(/document\/p(\d*)$/,_.bind(e.handleHashChangeViewDocumentPage,this.events)),t.register(/document\/p(\d*)\/a(\d*)$/,_.bind(e.handleHashChangeViewDocumentAnnotation,this.events)),t.register(/annotation\/a(\d*)$/,_.bind(e.handleHashChangeViewAnnotationAnnotation,this.events)),t.register(/pages$/,_.bind(e.handleHashChangeViewPages,e)),t.register(/page\/(\d*)\/?$/,_.bind(e.handleHashChangeViewDocumentPage,this.events)),t.register(/page\/(\d*)\/article\/([\d\w\-]+)\/?$/,_.bind(e.handleHashChangeViewArticle,this.events)),t.register(/text\/p(\d*)$/,_.bind(e.handleHashChangeViewText,this.events)),t.register(/entity\/p(\d*)\/(.*)\/(\d+):(\d+)$/,_.bind(e.handleHashChangeViewEntity,this.events)),t.register(/search\/p(\d*)\/(.*)$/,_.bind(e.handleHashChangeViewSearchRequest,this.events))},autoZoomPage:function(){var e,t=this.elements.window.outerWidth(!0);e="auto"==this.viewer.options.zoom?t-2*this.viewer.models.pages.getPadding():this.viewer.options.zoom;var n,i,s=[];500>=e?(n=(e+700)/2,s=[e,n,700,850,1e3,1200,1400,1600,1800,2200,2600]):750>=e?(n=100+e,i=200+e,s=[.66*e,e,n,i,1e3,1200,1400,1600,1800,2200,2600]):e>750&&850>=e?(n=(1e3-e)/2+e,s=[.66*e,700,e,n,1e3,1200,1400,1600,1800,2200,2600]):e>850&&1e3>e?(n=(e-700)/2+700,s=[.66*e,700,n,e,1e3,1200,1400,1600,1800,2200,2600]):e>1e3&&1200>=e?(e=850,s=this.viewer.models.document.ZOOM_RANGES):e>1200&&1400>=e?(e=1200,s=this.viewer.models.document.ZOOM_RANGES):e>1400&&1600>=e?(e=1400,s=this.viewer.models.document.ZOOM_RANGES):e>1600&&1800>=e?(e=1600,s=this.viewer.models.document.ZOOM_RANGES):e>1800&&2200>=e?(e=1800,s=this.viewer.models.document.ZOOM_RANGES):e>=2200&&(e=2200,s=this.viewer.models.document.ZOOM_RANGES),this.viewer.models.document.ZOOM_RANGES=s,this.viewer.pageSet.zoom({zoomLevel:e})},handleInitialState:function(){var e=this.viewer.history.loadUrl();if(!e){var t=this.viewer.options;this.viewer.open("ViewDocument"),t.note?this.viewer.pageSet.showAnnotation(this.viewer.models.annotations.byId[t.note]):t.page&&this.jump(t.page-1)}if(this.viewer.options.ads){var n=this.viewer;n.api.onPageChange(function(){n.api.currentPage()>n.options.ads.interval&&0===n.api.currentPage()%n.options.ads.interval&&n.pageSet.pages.p2.el.find(".advert").ad("refresh")})}},setupShareLinks:function(e,t){var n=this.viewer,i=n.$(e),s=_.defaults({Facebook:"http://www.facebook.com/sharer/sharer.php?u=<%= url %>",Twitter:"https://twitter.com/share?url=<%= url %>&text=<%= text %>",Tumblr:"http://www.tumblr.com/share"},n.options.socialServices);_.each(s,function(e,t){var s=_.template('<li><a target="_blank" href="<%= href %>"><%= name %></a></li>',{href:e,name:t}),r=_.template(s,{url:encodeURIComponent(window.location.origin+n.history.root),text:encodeURIComponent(n.schema.document.description+" "+n.schema.document.title)});i.append(r)}),i.delegate(".DV-show-embed-code","click",_.bind(this.showEmbedCode,this,t)),i.append('<li><a class="DV-show-embed-code" href="#">Embed</a></li>')},showEmbedCode:function(e){var t=this.viewer,n=window.location.origin+t.history.root+"?embed=true";"article"==e&&(n=window.location.href);var i=$(JST.embedModal({embed_url:n}));return i.modal(),i.on("hidden",function(){$(this).remove()}),i.on("shown",function(){i.find("textarea")[0].select()}),i.find(".embed-size-select button").on("click",function(){$(this).siblings().removeClass("active"),$(this).addClass("active");var e={width:null,height:null,embed_url:n},t=_.template('<iframe src="<%= embed_url %>" width="<%= width %>" height="<%= height %>" scrolling="no" frameborder="0"></iframe>');$(this).hasClass("small-embed")?(e.width=300,e.height=600):$(this).hasClass("medium-embed")?(e.width=650,e.height=600):$(this).hasClass("large-embed")&&(e.width=900,e.height=700),i.find("textarea").text(t(e)),i.find("textarea")[0].select()}),!1}},_.extend(DV.Schema.helpers,{getAnnotationModel:function(e){var t=parseInt(e.attr("rel").match(/\d+/),10);return this.models.annotations.getAnnotation(t)},getAnnotationObject:function(e){for(var e=this.viewer.$(e),t=e.attr("id").replace(/DV\-annotation\-|DV\-listAnnotation\-/,""),n=e.closest("div.DV-set").attr("data-id"),i=0;annotationObject=this.viewer.pageSet.pages[n].annotations[i];i++)if(annotationObject.id==t)return e=null,annotationObject;
return!1},annotationBridgeToggle:function(e){e.preventDefault();var t=this.getAnnotationObject(this.viewer.$(e.target).closest(this.annotationClassName));t.toggle()},annotationBridgeShow:function(e){e.preventDefault();var t=this.getAnnotationObject(this.viewer.$(e.target).closest(this.annotationClassName));t.show()},annotationBridgeHide:function(e){e.preventDefault();var t=this.getAnnotationObject(this.viewer.$(e.target).closest(this.annotationClassName));t.hide(!0)},annotationBridgeNext:function(e){e.preventDefault();var t=this.getAnnotationObject(this.viewer.$(e.target).closest(this.annotationClassName));t.next()},annotationBridgePrevious:function(e){e.preventDefault();var t=this.getAnnotationObject(this.viewer.$(e.target).closest(this.annotationClassName));t.previous()},setAnnotationPosition:function(e){this.elements.currentPage.text(e)},setActiveAnnotationLimits:function(e){var e=e?e:this.viewer.activeAnnotation;if(e&&null!=e){var t=this.elements,n=e.page,i=e.annotationEl,s=e.position.top*this.models.pages.zoomFactor(),r=this.events.trackAnnotation;"page"===e.type?(r.h=i.outerHeight()+n.getOffset(),r.combined=n.getOffset()-t.window.height()):(r.h=i.height()+s-20+n.getOffset()+n.getPageNoteHeight(),r.combined=s-20+n.getOffset()+n.getPageNoteHeight()-t.window.height())}}}),_.extend(DV.Schema.helpers,{showAnnotations:function(){return this.viewer.options.showAnnotations===!1?!1:_.size(this.models.annotations.byId)>0},renderViewer:function(){var e=this.viewer.schema.document,t=this.constructPages(),n=e.description?e.description:null,i=e.resources.related_article,s=JST.header({options:this.viewer.options,id:e.id,story_url:i,title:e.title||""}),r=JST.footer({options:this.viewer.options}),o=e.resources.pdf;o=o&&this.viewer.options.pdf!==!1?'<a target="_blank" href="'+o+'">Original Document (PDF) &raquo;</a>':"";var a=e.contributor&&e.contributor_organization&&""+e.contributor+", "+e.contributor_organization,h=this.showAnnotations(),l=h&&e.resources.print_annotations,u={options:this.viewer.options,pages:t,header:s,footer:r,pdf_url:o,contributors:a,story_url:i,print_notes_url:l,descriptionContainer:JST.descriptionContainer({description:n}),autoZoom:"auto"==this.viewer.options.zoom,mini:!1},c=this.viewer.options.width,d=this.viewer.options.height;c&&d&&(500>c&&(this.viewer.options.mini=!0,u.mini=!0),DV.jQuery(this.viewer.options.container).css({position:"relative",width:this.viewer.options.width,height:this.viewer.options.height}));var p=this.viewer.options.container,f=DV.jQuery(p);if(!f.length)throw"Document Viewer container element not found: "+p;f.html(JST.viewer(u))},displayNavigation:function(){var e=this.viewer.schema.document,t=!e.description&&!_.size(this.viewer.schema.data.annotationsById)&&!this.viewer.schema.data.sections.length;this.viewer.$(".DV-supplemental").toggleClass("DV-noNavigation",t)},renderSpecificPageCss:function(){for(var e=[],t=1,n=this.models.document.totalPages;n>=t;t++)e.push(".DV-page-"+t+" .DV-pageSpecific-"+t);var i=e.join(", ")+" { display: block; }",s='<style type="text/css" media="all">\n'+i+"\n</style>";DV.jQuery("head").append(s)},renderNavigation:function(){var e=this,t=[],n=JST.navigationExpander({}),i=[],s=[],r=this.viewer.models.boldsId||(this.viewer.models.boldsId=_.uniqueId()),o=function(e,t){for(var n=[],r=e,o=t;o>r;r++)s[r]&&(n.push(s[r]),i[r]="");return n.join("")},a=function(e){var n="#DV-selectedChapter-"+e.id+" #DV-chapter-"+e.id;return t.push(n+" .DV-navChapterTitle"),JST.chapterNav(e)},h=function(n){for(var i=[],s=e.viewer.schema.data.annotationsByPage[n],r=0;r<s.length;r++){var o=s[r];i.push(JST.annotationNav(o)),t.push("#DV-selectedAnnotation-"+o.id+" #DV-annotationMarker-"+o.id+" .DV-navAnnotationTitle")}return i.join("")};if(this.showAnnotations())for(var l=0,u=this.models.document.totalPages;u>l;l++)this.viewer.schema.data.annotationsByPage[l]&&(i[l]=h(l),s[l]=i[l]);var c=this.viewer.schema.data.sections;if(c.length)for(var l=0;l<c.length;l++){var d=c[l],p=c[l+1];d.id=d.id||_.uniqueId(),d.pageNumber=d.page,d.endPage=p?p.page-1:this.viewer.schema.data.totalPages;var f=o(d.pageNumber-1,d.endPage);""!=f?(d.navigationExpander=n,d.navigationExpanderClass="DV-hasChildren",d.noteViews=f,i[d.pageNumber-1]=a(d)):(d.navigationExpanderClass="DV-noChildren",d.noteViews="",d.navigationExpander="",i[d.pageNumber-1]=a(d))}var g=i.join(""),m=this.viewer.$("div.DV-chaptersContainer");m.html(g),m.unbind("click").bind("click",this.events.compile("handleNavigation")),this.viewer.schema.data.sections.length||_.size(this.viewer.schema.data.annotationsById)?m.show():m.hide(),this.displayNavigation(),DV.jQuery("#DV-navigationBolds-"+r,DV.jQuery("head")).remove();var v=t.join(", ")+" { font-weight:bold; color:#000 !important; }",y='<style id="DV-navigationBolds-'+r+'" type="text/css" media="screen,print">\n'+v+"\n</style>";DV.jQuery("head").append(y),m=null},renderComponents:function(){var e=DV.jQuery(this.viewer.options.container),t=e.css("position");"relative"==t||"absolute"==t||this.viewer.options.fixedSize||(DV.jQuery("html, body").css({overflow:"hidden"}),0==e.offset().top&&this.viewer.elements.viewer.css({border:0}));var n=this.showAnnotations(),i=this.models.document.totalPages>1,s=this.viewer.options.search!==!1&&this.viewer.options.text!==!1&&(!this.viewer.options.width||this.viewer.options.width>=540),r=!(n||i||s||this.viewer.options.sidebar),o=this.viewer.$(".DV-annotationView");if(o[n?"show":"hide"](),s?(this.elements.viewer.addClass("DV-searchable"),this.viewer.$("input.DV-searchInput",e).placeholder({message:"Search",clearClassName:"DV-searchInput-show-search-cancel"})):this.viewer.$(".DV-textView").hide(),i||this.viewer.$(".DV-thumbnailsView").hide(),n||i||s||this.viewer.$(".DV-views").hide(),this.viewer.api.roundTabCorners(),this.models.chapters.chapters.length>0,this.viewer.$(".DV-navControls").remove(),i||this.viewer.options.sidebar){var a=JST.navControls({totalPages:this.viewer.schema.data.totalPages,totalAnnotations:this.viewer.schema.data.totalAnnotations});this.viewer.$(".DV-navControlsContainer").html(a)}if(this.viewer.$(".DV-fullscreenControl").remove(),this.viewer.schema.document.canonicalURL){var h=JST.fullscreenControl({});r?(this.viewer.$(".DV-collapsibleControls").prepend(h),this.elements.viewer.addClass("DV-hideFooter")):this.viewer.$(".DV-fullscreenContainer").html(h)}this.viewer.options.sidebar&&this.viewer.$(".DV-sidebar").show(),_.defer(_.bind(function(){this.elements.viewer.width()<=700&&(n||i||s)&&this.viewer.$(".DV-controls").addClass("DV-narrowControls")},this)),this.elements.currentPage=this.viewer.$("span.DV-currentPage"),this.models.document.setPageIndex(this.models.document.currentIndex())},reset:function(){this.models.articles.cleanUp(),this.resetNavigationState(),this.cleanUpSearch(),this.viewer.pageSet.cleanUp(),this.removeObserver("drawPages"),this.viewer.dragReporter.unBind(),this.elements.window.scrollTop(0)}}),_.extend(DV.Schema.helpers,{showAnnotationEdit:function(e){var t=this.viewer.$(e.target).closest(this.annotationClassName),n=this.viewer.$(".DV-annotationTextArea",t);t.addClass("DV-editing"),n.focus()},cancelAnnotationEdit:function(e){var t=this.viewer.$(e.target).closest(this.annotationClassName),n=this.getAnnotationModel(t);this.viewer.$(".DV-annotationTitleInput",t).val(n.title),this.viewer.$(".DV-annotationTextArea",t).val(n.text),n.unsaved?this.models.annotations.removeAnnotation(n):t.removeClass("DV-editing")},saveAnnotation:function(e,t){var n=this.viewer.$(e.target),i=n.closest(this.annotationClassName),s=this.getAnnotationModel(i);if(s){if(s.title=this.viewer.$(".DV-annotationTitleInput",i).val(),s.text=this.viewer.$(".DV-annotationTextArea",i).val(),s.owns_note=s.unsaved?!0:s.owns_note,s.owns_note&&(s.author=s.author||dc.account.name,s.author_organization=s.author_organization||dc.account.isReal&&dc.account.organization.name),n.hasClass("DV-saveAnnotationDraft")?s.access="exclusive":i.hasClass("DV-accessExclusive")&&(s.access="public"),!("onlyIfText"!=t||s.title&&"Untitled Note"!=s.title||s.text||s.server_id))return this.models.annotations.removeAnnotation(s);i.removeClass("DV-editing"),this.models.annotations.fireSaveCallbacks(s),this.viewer.api.redraw(!0),this.viewer.activeAnnotation&&this.viewer.pageSet.showAnnotation(s)}},deleteAnnotation:function(e){var t=this.viewer.$(e.target).closest(this.annotationClassName),n=this.getAnnotationModel(t);this.models.annotations.removeAnnotation(n),this.models.annotations.fireDeleteCallbacks(n)}}),_.extend(DV.Schema.helpers,{resetNavigationState:function(){var e=this.elements;e.chaptersContainer.length&&(e.chaptersContainer[0].id=""),e.navigation.length&&(e.navigation[0].id="")},setActiveChapter:function(e){e&&this.elements.chaptersContainer.attr("id","DV-selectedChapter-"+e)},setActiveAnnotationInNav:function(e){null!=e?this.elements.navigation.attr("id","DV-selectedAnnotation-"+e):this.elements.navigation.attr("id","")}}),_.extend(DV.Schema.helpers,{getSearchResponse:function(e){var t=DV.jQuery.proxy(function(e){this.viewer.searchResponse=e;var t=e.results.length>0?!0:!1,n=t?"of "+e.results.length+" ":" ";if(this.viewer.$("span.DV-totalSearchResult").text(n),this.viewer.$("span.DV-searchQuery").text(e.query),t){var i=this.viewer.models.document.currentPage(),s=_.include(e.results,i)?i:e.results[0];this.events.loadText(s-1,this.highlightSearchResponses)}else this.highlightSearchResponses()},this),n=function(){this.viewer.$(".DV-currentSearchResult").text("Search is not available at this time"),this.viewer.$("span.DV-searchQuery").text(e),this.viewer.$(".DV-searchResults").addClass("DV-noResults")},i=this.viewer.schema.document.resources.search.replace("{query}",encodeURIComponent(e));this.viewer.helpers.isCrossDomain(i)&&(i+="&callback=?"),DV.jQuery.ajax({url:i,dataType:"json",success:t,error:n})},acceptInputCallBack:function(){var e=parseInt(this.elements.currentPage.text(),10)-1;e=""===e?0:e,e=0>e?0:e,e=e+1>this.models.document.totalPages?this.models.document.totalPages-1:e;var t=e+1;this.elements.currentPage.text(t),this.viewer.$(".DV-pageNumberContainer input").val(t),"ViewDocument"===this.viewer.state||"ViewThumbnails"===this.viewer.state?this.jump(e):"ViewText"===this.viewer.state&&this.events.loadText(e)},highlightSearchResponses:function(){var e=this.viewer,t=e.searchResponse;if(!t)return!1;var n=t.results,i=this.viewer.$(".DV-currentSearchResult");0==n.length?(i.text("No Results"),this.viewer.$(".DV-searchResults").addClass("DV-noResults")):this.viewer.$(".DV-searchResults").removeClass("DV-noResults");for(var s=0;s<t.results.length;s++)if(this.models.document.currentPage()===t.results[s]){i.text("Page "+(s+1)+" ");break}var r="(\\b|\\B)",o=r+"("+t.query.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&").replace(/\s+/g,"\\s+")+")"+r,a=this.viewer.$(".DV-textContents"),h=a.text(),l=new RegExp(o,"ig"),u=h.replace(l,'$1<span class="DV-searchMatch">$2</span>$3');a.html(u);var c=e.toHighLight?e.toHighLight:0;this.highlightMatch(c),i=null,a=null},highlightEntity:function(e,t){this.viewer.$(".DV-searchResults").addClass("DV-noResults");var n=this.viewer.$(".DV-textContents"),i=n.text(),s=i.substr(0,e),r=i.substr(e,t),o=i.substr(e+t);i=[s,'<span class="DV-searchMatch">',r,"</span>",o].join(""),n.html(i),this.highlightMatch(0)},highlightMatch:function(e){var t=this.viewer.$(".DV-textContents span.DV-searchMatch");if(0==t.length)return!1;var n=this.getCurrentSearchPageIndex(),i=this.viewer.toHighLight;i&&(i!==!1&&(e="last"===i?t.length-1:"first"===i?0:i),i=!1);var s=this.viewer.searchResponse;if(s){if(e===t.length){if(s.results.length===n+1)return;return i="first",this.events.loadText(s.results[n+1]-1,this.highlightSearchResponses),void 0}if(-1===e)return 0>n-1?!1:(i="last",this.events.loadText(s.results[n-1]-1,this.highlightSearchResponses),void 0);t.removeClass("DV-highlightedMatch")}var r=this.viewer.$(".DV-textContents span.DV-searchMatch:eq("+e+")");r.addClass("DV-highlightedMatch"),this.elements.window[0].scrollTop=r.position().top-50,s&&(s.highlighted=e),t=null,r=null},getCurrentSearchPageIndex:function(){var e=this.viewer.searchResponse;if(!e)return!1;for(var t=this.models.document,n=0,i=e.results.length;i>n;n++)if(e.results[n]===t.currentPage())return n},highlightPreviousMatch:function(e){e.preventDefault(),this.highlightMatch(this.viewer.searchResponse.highlighted-1)},highlightNextMatch:function(e){e.preventDefault(e),this.highlightMatch(this.viewer.searchResponse.highlighted+1)},clearSearch:function(){this.elements.searchInput.val("").keyup().focus()},showEntity:function(e,t,n){this.viewer.$("span.DV-totalSearchResult").text(""),this.viewer.$("span.DV-searchQuery").text(e),this.viewer.$("span.DV-currentSearchResult").text("Searching"),this.events.loadText(this.models.document.currentIndex(),_.bind(this.viewer.helpers.highlightEntity,this.viewer.helpers,t,n))},cleanUpSearch:function(){var e=this.viewer;e.searchResponse=null,e.toHighLight=null,this.elements&&this.elements.searchInput.keyup().blur()}}),DV.Schema.states={InitialLoad:function(){this.helpers.unsupportedBrowser()||(this.helpers.renderViewer(),this.events.elements=this.helpers.elements=this.elements=new DV.Elements(this),this.helpers.renderComponents(),this.helpers.renderNavigation(),this.helpers.renderSpecificPageCss(),this.pageSet=new DV.PageSet(this),this.pageSet.buildPages(),this.helpers.bindEvents(this),this.helpers.positionViewer(),this.models.document.computeOffsets(),this.helpers.addObserver("drawPages"),this.helpers.registerHashChangeEvents(),this.dragReporter=new DV.DragReporter(this,".DV-pageCollection",DV.jQuery.proxy(this.helpers.shift,this),{ignoreSelector:".DV-annotationContent"}),this.helpers.startCheckTimer(),this.helpers.handleInitialState(),_.defer(_.bind(this.helpers.autoZoomPage,this.helpers)))},ViewAnnotation:function(){return this.helpers.reset(),this.helpers.ensureAnnotationImages(),this.activeAnnotationId=null,DV.jQuery.browser.msie&&(this.elements.annotations.css({zoom:0}),this.elements.annotations.css({zoom:1})),this.helpers.toggleContent("viewAnnotations"),this.compiled.next(),!0},ViewDocument:function(){return this.helpers.reset(),this.helpers.addObserver("drawPages"),this.dragReporter.setBinding(),this.elements.window.mouseleave(DV.jQuery.proxy(this.dragReporter.stop,this.dragReporter)),this.helpers.toggleContent("viewDocument"),this.helpers.setActiveChapter(this.models.chapters.getChapterId(this.models.document.currentIndex())),this.helpers.jump(this.models.document.currentIndex()),!0},ViewEntity:function(e,t,n){this.helpers.reset(),this.helpers.toggleContent("viewSearch"),this.helpers.showEntity(e,t,n)},ViewArticleText:function(e,t,n){var i,s;$(JST.articleOptions({next:!1})),i=this.models.articles.loadedPages[t],s=_.find(i.articles,function(e){return e.slug==n}),this.helpers.reset(),this.models.articles.showBackToPaper(t,n),this.elements.collection.width("100%"),this.$(".DV-textPage").width("auto"),this.helpers.toggleContent("viewArticleText"),this.$(".DV-articleTextContents").text(""),$(".DV-pages").scrollTop(0);var r=t-1,o=s.body;return this.$(".DV-articleTextContents").html(o),this.elements.currentPage.text(t),this.models.document.setPageIndex(r),this.options.ads&&(this.$(".DV-articleTextContents > p:first-child").after('<div class="advert" data-ad-type="cube"></div>'),this.$(".DV-articleTextContents").find(".advert").css({"float":"right",margin:"0 0 10px 10px"}),jQuery(this.$(".DV-articleTextContents").find(".advert")[0]).ad()),!0},ViewSearch:function(){if(this.helpers.reset(),""==this.elements.searchInput.val())this.elements.searchInput.val(e);else var e=this.elements.searchInput.val();return this.helpers.getSearchResponse(e),this.helpers.toggleContent("viewSearch"),!0},ViewText:function(){return this.helpers.reset(),this.pageSet.zoomText(),this.helpers.toggleContent("viewText"),this.events.loadText(),!0},ViewThumbnails:function(){return this.helpers.reset(),this.helpers.toggleContent("viewThumbnails"),this.thumbnails=new DV.Thumbnails(this),this.thumbnails.render(),!0}},DV.Api=function(e){this.viewer=e},DV.Api.prototype={currentPage:function(){return this.viewer.models.document.currentPage()},setCurrentPage:function(e){this.viewer.helpers.jump(e-1)},onPageChange:function(e){this.viewer.models.document.onPageChangeCallbacks.push(e)},onComputeOffsets:function(e){this.viewer.models.document.onComputeOffsetsCallbacks.push(e)},onPageLoaded:function(e){this.viewer.onPageLoadedCallbacks.push(e)},getPageNumberForId:function(e){var t=this.viewer.pageSet.pages[e];return t.index+1},getSchema:function(){return this.viewer.schema.document},getId:function(){return this.viewer.schema.document.id},getModelId:function(){return parseInt(this.getId(),10)},currentZoom:function(){var e=this.viewer.models.document;return e.zoomLevel/e.ZOOM_RANGES[1]},relativeZoom:function(){var e=this.viewer.models,t=this.currentZoom();return t*(e.document.ZOOM_RANGES[1]/e.pages.BASE_WIDTH)},numberOfPages:function(){return this.viewer.models.document.totalPages},getContributor:function(){return this.viewer.schema.document.contributor},getContributorOrganization:function(){return this.viewer.schema.document.contributor_organization},setSections:function(e){e=_.sortBy(e,function(e){return e.page}),this.viewer.schema.data.sections=e,this.viewer.models.chapters.loadChapters(),this.redraw()},getSections:function(){return _.clone(this.viewer.schema.data.sections||[])},getDescription:function(){return this.viewer.schema.document.description},setDescription:function(e){this.viewer.schema.document.description=e,this.viewer.$(".DV-description").remove(),this.viewer.$(".DV-navigation").prepend(JST.descriptionContainer({description:e})),this.viewer.helpers.displayNavigation()},getRelatedArticle:function(){return this.viewer.schema.document.resources.related_article},setRelatedArticle:function(e){this.viewer.schema.document.resources.related_article=e,this.viewer.$(".DV-storyLink a").attr({href:e}),this.viewer.$(".DV-storyLink").toggle(!!e)},getPublishedUrl:function(){return this.viewer.schema.document.resources.published_url},setPublishedUrl:function(e){this.viewer.schema.document.resources.published_url=e},getTitle:function(){return this.viewer.schema.document.title},setTitle:function(e){this.viewer.schema.document.title=e,document.title=e},getSource:function(){return this.viewer.schema.document.source},setSource:function(e){this.viewer.schema.document.source=e},getPageText:function(e){return this.viewer.schema.text[e-1]},setPageText:function(e,t){this.viewer.schema.text[t-1]=e},resetPageText:function(e){var t=this,n=this.viewer.schema.text;e?this.viewer.models.document.originalPageText={}:_.each(this.viewer.models.document.originalPageText,function(e,i){i=parseInt(i,10),e!=n[i-1]&&(t.setPageText(e,i),i==t.currentPage()&&t.viewer.events.loadText())}),"editText"==this.viewer.openEditor&&this.viewer.$(".DV-textContents").attr("contentEditable",!0).addClass("DV-editing")},redraw:function(e){e&&(this.viewer.models.annotations.renderAnnotations(),this.viewer.models.document.computeOffsets()),this.viewer.helpers.renderNavigation(),this.viewer.helpers.renderComponents(),e&&(this.viewer.elements.window.removeClass("DV-coverVisible"),this.viewer.pageSet.buildPages({noNotes:!0}),this.viewer.pageSet.reflowPages())},getAnnotationsBySortOrder:function(){return this.viewer.models.annotations.sortAnnotations()},getAnnotationsByPageIndex:function(e){return this.viewer.models.annotations.getAnnotations(e)},getAnnotation:function(e){return this.viewer.models.annotations.getAnnotation(e)},addAnnotation:function(e){return e=this.viewer.schema.loadAnnotation(e),this.viewer.models.annotations.sortAnnotations(),this.redraw(!0),this.viewer.pageSet.showAnnotation(e,{active:!0,edit:!0}),e},onAnnotationSave:function(e){this.viewer.models.annotations.saveCallbacks.push(e)},onAnnotationDelete:function(e){this.viewer.models.annotations.deleteCallbacks.push(e)},setConfirmStateChange:function(e){this.viewer.confirmStateChange=e},onChangeState:function(e){this.viewer.onStateChangeCallbacks.push(e)},getState:function(){return this.viewer.state},setState:function(e){this.viewer.open(e)},resetRemovedPages:function(){this.viewer.models.document.resetRemovedPages()},addPageToRemovedPages:function(e){this.viewer.models.document.addPageToRemovedPages(e)},removePageFromRemovedPages:function(e){this.viewer.models.document.removePageFromRemovedPages(e)},resetReorderedPages:function(){this.viewer.models.document.redrawReorderedPages()},reorderPages:function(e,t){var n=this.getModelId();this.viewer.models.document.reorderPages(n,e,t)},loadJS:function(e,t){DV.jQuery.getScript(e,t)},roundTabCorners:function(){var e=this.viewer.$(".DV-views > div:visible");e.first().addClass("DV-first"),e.last().addClass("DV-last")},registerHashListener:function(e,t){this.viewer.history.register(e,t)},clearHashListeners:function(){this.viewer.history.defaultCallback=null,this.viewer.history.handlers=[]},unload:function(){this.viewer.helpers.unbindEvents(),DV.jQuery(".DV-docViewer",this.viewer.options.container).remove(),this.viewer.helpers.stopCheckTimer(),delete DV.viewers[this.viewer.schema.document.id]},enterRemovePagesMode:function(){this.viewer.openEditor="removePages"},leaveRemovePagesMode:function(){this.viewer.openEditor=null},enterAddPagesMode:function(){this.viewer.openEditor="addPages"},leaveAddPagesMode:function(){this.viewer.openEditor=null},enterReplacePagesMode:function(){this.viewer.openEditor="replacePages"},leaveReplacePagesMode:function(){this.viewer.openEditor=null},enterReorderPagesMode:function(){this.viewer.openEditor="reorderPages",this.viewer.elements.viewer.addClass("DV-reorderPages")},leaveReorderPagesMode:function(){this.resetReorderedPages(),this.viewer.openEditor=null,this.viewer.elements.viewer.removeClass("DV-reorderPages")},enterEditPageTextMode:function(){this.viewer.openEditor="editText",this.viewer.events.loadText()},leaveEditPageTextMode:function(){this.viewer.openEditor=null,this.resetPageText()}},DV.DocumentViewer=function(e){this.options=e,this.window=window,this.$=this.jQuery,this.schema=new DV.Schema,this.api=new DV.Api(this),this.history=new DV.History(this),e.history?this.history.start(e.history):this.history.start(),this.models=this.schema.models,this.events=_.extend({},DV.Schema.events),this.helpers=_.extend({},DV.Schema.helpers),this.states=_.extend({},DV.Schema.states),this.isFocus=!0,this.openEditor=null,this.confirmStateChange=null,this.activeElement=null,this.observers=[],this.windowDimensions={},this.scrollPosition=null,this.checkTimer={},this.busy=!1,this.annotationToLoadId=null,this.dragReporter=null,this.compiled={},this.tracker={},this.onStateChangeCallbacks=[],this.onPageLoadedCallbacks=[],this.events=_.extend(this.events,{viewer:this,states:this.states,elements:this.elements,helpers:this.helpers,models:this.models,compile:function(){var e=this.viewer,t=arguments[0];return function(){e.events[e.state][t]?e.events[e.state][t].apply(e.events,arguments):e.events[t].apply(e.events,arguments)}}}),this.helpers=_.extend(this.helpers,{viewer:this,states:this.states,elements:this.elements,events:this.events,models:this.models}),this.states=_.extend(this.states,{viewer:this,helpers:this.helpers,elements:this.elements,events:this.events,models:this.models})},DV.DocumentViewer.prototype.loadModels=function(){this.models.chapters=new DV.model.Chapters(this),this.models.document=new DV.model.Document(this),this.models.pages=new DV.model.Pages(this),this.models.annotations=new DV.model.Annotations(this),this.models.articles=new DV.model.Articles(this),this.models.removedPages={}},DV.DocumentViewer.prototype.open=function(e){var t=arguments;if(this.state!=e){var n=_.bind(function(){return this.state=e,this.states[e].apply(this,t),this.slapIE(),this.notifyChangedState(),!0},this);this.confirmStateChange?this.confirmStateChange(n):n()}},DV.DocumentViewer.prototype.slapIE=function(){DV.jQuery(this.options.container).css({zoom:.99}).css({zoom:1})},DV.DocumentViewer.prototype.notifyChangedState=function(){_.each(this.onStateChangeCallbacks,function(e){e()})},DV.DocumentViewer.prototype.recordHit=function(e){var t=window.location,n=t.protocol+"//"+t.host+t.pathname;if(n.match(/^file:/))return!1;n=n.replace(/[\/]+$/,"");var i=parseInt(this.api.getId(),10),s=encodeURIComponent("document:"+i+":"+n);DV.jQuery(document.body).append('<img alt="" width="1" height="1" src="'+e+"?key="+s+'" />')},DV.DocumentViewer.prototype.jQuery=function(e,t){return t=t||this.options.container,DV.jQuery.call(DV.jQuery,e,t)},DV.load=function(e,t){t=t||{};var n=e.id||e.match(/([^\/]+)(\.js|\.json)$/)[1];"showSidebar"in t&&(t.sidebar=t.showSidebar);var i={container:document.body,zoom:"auto",sidebar:!0};t=_.extend({},i,t),t.fixedSize=!(!t.width&&!t.height);var s=new DV.DocumentViewer(t);DV.viewers[n]=s;var r=DV.loadJSON=function(e){var n=DV.viewers[e.id];n.schema.importCanonicalDocument(e),n.loadModels(),DV.jQuery(function(){n.open("InitialLoad"),t.afterLoad&&t.afterLoad(n),DV.afterLoad&&DV.afterLoad(n),DV.recordHit&&n.recordHit(DV.recordHit)})},o=function(){if(_.isString(e))if(e.match(/\.js$/))DV.jQuery.getScript(e);else{var t=s.helpers.isCrossDomain(e);t&&(e+="?callback=?"),DV.jQuery.getJSON(e,r)}else r(e)};return t.templates?DV.jQuery.getScript(t.templates,o):o(),s},DV.onload&&_.defer(DV.onload);