!function(t,e){function i(t){var e,i,n=O[t]={};for(t=t.split(/\s+/),e=0,i=t.length;i>e;e++)n[t[e]]=!0;return n}function n(t,i,n){if(n===e&&1===t.nodeType){var s="data-"+i.replace(L,"-$1").toLowerCase();if(n=t.getAttribute(s),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:$.isNumeric(n)?+n:j.test(n)?$.parseJSON(n):n}catch(r){}$.data(t,i,n)}else n=e}return n}function s(t){for(var e in t)if(("data"!==e||!$.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function r(t,e,i){var n=e+"defer",s=e+"queue",r=e+"mark",o=$._data(t,n);!o||"queue"!==i&&$._data(t,s)||"mark"!==i&&$._data(t,r)||setTimeout(function(){$._data(t,s)||$._data(t,r)||($.removeData(t,n,!0),o.fire())},0)}function o(){return!1}function a(){return!0}function h(t){return!t||!t.parentNode||11===t.parentNode.nodeType}function l(t,e,i){if(e=e||0,$.isFunction(e))return $.grep(t,function(t,n){var s=!!e.call(t,n,t);return s===i});if(e.nodeType)return $.grep(t,function(t){return t===e===i});if("string"==typeof e){var n=$.grep(t,function(t){return 1===t.nodeType});if(ue.test(e))return $.filter(e,n,!i);e=$.filter(e,n)}return $.grep(t,function(t){return $.inArray(t,e)>=0===i})}function u(t){var e=fe.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}function c(t){return $.nodeName(t,"table")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function d(t,e){if(1===e.nodeType&&$.hasData(t)){var i,n,s,r=$._data(t),o=$._data(e,r),a=r.events;if(a){delete o.handle,o.events={};for(i in a)for(n=0,s=a[i].length;s>n;n++)$.event.add(e,i,a[i][n])}o.data&&(o.data=$.extend({},o.data))}}function p(t,e){var i;1===e.nodeType&&(e.clearAttributes&&e.clearAttributes(),e.mergeAttributes&&e.mergeAttributes(t),i=e.nodeName.toLowerCase(),"object"===i?e.outerHTML=t.outerHTML:"input"!==i||"checkbox"!==t.type&&"radio"!==t.type?"option"===i?e.selected=t.defaultSelected:"input"===i||"textarea"===i?e.defaultValue=t.defaultValue:"script"===i&&e.text!==t.text&&(e.text=t.text):(t.checked&&(e.defaultChecked=e.checked=t.checked),e.value!==t.value&&(e.value=t.value)),e.removeAttribute($.expando),e.removeAttribute("_submit_attached"),e.removeAttribute("_change_attached"))}function f(t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName("*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll("*"):[]}function g(t){("checkbox"===t.type||"radio"===t.type)&&(t.defaultChecked=t.checked)}function m(t){var e=(t.nodeName||"").toLowerCase();"input"===e?g(t):"script"!==e&&"undefined"!=typeof t.getElementsByTagName&&$.grep(t.getElementsByTagName("input"),g)}function v(t){var e=N.createElement("div");return Ae.appendChild(e),e.innerHTML=t.outerHTML,e.firstChild}function y(t,e,i){var n="width"===e?t.offsetWidth:t.offsetHeight,s="width"===e?1:0,r=4;if(n>0){if("border"!==i)for(;r>s;s+=2)i||(n-=parseFloat($.css(t,"padding"+He[s]))||0),"margin"===i?n+=parseFloat($.css(t,i+He[s]))||0:n-=parseFloat($.css(t,"border"+He[s]+"Width"))||0;return n+"px"}if(n=ke(t,e),(0>n||null==n)&&(n=t.style[e]),Oe.test(n))return n;if(n=parseFloat(n)||0,i)for(;r>s;s+=2)n+=parseFloat($.css(t,"padding"+He[s]))||0,"padding"!==i&&(n+=parseFloat($.css(t,"border"+He[s]+"Width"))||0),"margin"===i&&(n+=parseFloat($.css(t,i+He[s]))||0);return n+"px"}function w(t){return function(e,i){if("string"!=typeof e&&(i=e,e="*"),$.isFunction(i))for(var n,s,r,o=e.toLowerCase().split(ei),a=0,h=o.length;h>a;a++)n=o[a],r=/^\+/.test(n),r&&(n=n.substr(1)||"*"),s=t[n]=t[n]||[],s[r?"unshift":"push"](i)}}function b(t,i,n,s,r,o){r=r||i.dataTypes[0],o=o||{},o[r]=!0;for(var a,h=t[r],l=0,u=h?h.length:0,c=t===ri;u>l&&(c||!a);l++)a=h[l](i,n,s),"string"==typeof a&&(!c||o[a]?a=e:(i.dataTypes.unshift(a),a=b(t,i,n,s,a,o)));return!c&&a||o["*"]||(a=b(t,i,n,s,"*",o)),a}function x(t,i){var n,s,r=$.ajaxSettings.flatOptions||{};for(n in i)i[n]!==e&&((r[n]?t:s||(s={}))[n]=i[n]);s&&$.extend(!0,t,s)}function V(t,e,i,n){if($.isArray(e))$.each(e,function(e,s){i||Be.test(t)?n(t,s):V(t+"["+("object"==typeof s?e:"")+"]",s,i,n)});else if(i||"object"!==$.type(e))n(t,e);else for(var s in e)V(t+"["+s+"]",e[s],i,n)}function S(t,i,n){var s,r,o,a,h=t.contents,l=t.dataTypes,u=t.responseFields;for(r in u)r in n&&(i[u[r]]=n[r]);for(;"*"===l[0];)l.shift(),s===e&&(s=t.mimeType||i.getResponseHeader("content-type"));if(s)for(r in h)if(h[r]&&h[r].test(s)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function D(t,i){t.dataFilter&&(i=t.dataFilter(i,t.dataType));var n,s,r,o,a,h,l,u,c=t.dataTypes,d={},p=c.length,f=c[0];for(n=1;p>n;n++){if(1===n)for(s in t.converters)"string"==typeof s&&(d[s.toLowerCase()]=t.converters[s]);if(o=f,f=c[n],"*"===f)f=o;else if("*"!==o&&o!==f){if(a=o+" "+f,h=d[a]||d["* "+f],!h){u=e;for(l in d)if(r=l.split(" "),(r[0]===o||"*"===r[0])&&(u=d[r[1]+" "+f])){l=d[l],l===!0?h=u:u===!0&&(h=l);break}}h||u||$.error("No conversion from "+a.replace(" "," to ")),h!==!0&&(i=h?h(i):u(l(i)))}}return i}function C(){try{return new t.XMLHttpRequest}catch(e){}}function _(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function T(){return setTimeout(A,0),vi=$.now()}function A(){vi=e}function k(t,e){var i={};return $.each(xi.concat.apply([],xi.slice(0,e)),function(){i[this]=t}),i}function P(t){if(!yi[t]){var e=N.body,i=$("<"+t+">").appendTo(e),n=i.css("display");i.remove(),("none"===n||""===n)&&(fi||(fi=N.createElement("iframe"),fi.frameBorder=fi.width=fi.height=0),e.appendChild(fi),gi&&fi.createElement||(gi=(fi.contentWindow||fi.contentDocument).document,gi.write(($.support.boxModel?"<!doctype html>":"")+"<html><body>"),gi.close()),i=gi.createElement(t),gi.body.appendChild(i),n=$.css(i,"display"),e.removeChild(fi)),yi[t]=n}return yi[t]}function E(t){return $.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var N=t.document,G=t.navigator,I=t.location,$=function(){function i(){if(!a.isReady){try{N.documentElement.doScroll("left")}catch(t){return void setTimeout(i,1)}a.ready()}}var n,s,r,o,a=function(t,e){return new a.fn.init(t,e,n)},h=t.jQuery,l=t.$,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,c=/\S/,d=/^\s+/,p=/\s+$/,f=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,g=/^[\],:{}\s]*$/,m=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,v=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,y=/(?:^|:|,)(?:\s*\[)+/g,w=/(webkit)[ \/]([\w.]+)/,b=/(opera)(?:.*version)?[ \/]([\w.]+)/,x=/(msie) ([\w.]+)/,V=/(mozilla)(?:.*? rv:([\w.]+))?/,S=/-([a-z]|[0-9])/gi,D=/^-ms-/,C=function(t,e){return(e+"").toUpperCase()},_=G.userAgent,T=Object.prototype.toString,A=Object.prototype.hasOwnProperty,k=Array.prototype.push,P=Array.prototype.slice,E=String.prototype.trim,I=Array.prototype.indexOf,$={};return a.fn=a.prototype={constructor:a,init:function(t,i,n){var s,r,o,h;if(!t)return this;if(t.nodeType)return this.context=this[0]=t,this.length=1,this;if("body"===t&&!i&&N.body)return this.context=N,this[0]=N.body,this.selector=t,this.length=1,this;if("string"==typeof t){if(s="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:u.exec(t),!s||!s[1]&&i)return!i||i.jquery?(i||n).find(t):this.constructor(i).find(t);if(s[1])return i=i instanceof a?i[0]:i,h=i?i.ownerDocument||i:N,o=f.exec(t),o?a.isPlainObject(i)?(t=[N.createElement(o[1])],a.fn.attr.call(t,i,!0)):t=[h.createElement(o[1])]:(o=a.buildFragment([s[1]],[h]),t=(o.cacheable?a.clone(o.fragment):o.fragment).childNodes),a.merge(this,t);if(r=N.getElementById(s[2]),r&&r.parentNode){if(r.id!==s[2])return n.find(t);this.length=1,this[0]=r}return this.context=N,this.selector=t,this}return a.isFunction(t)?n.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),a.makeArray(t,this))},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return P.call(this,0)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t,e,i){var n=this.constructor();return a.isArray(t)?k.apply(n,t):a.merge(n,t),n.prevObject=this,n.context=this.context,"find"===e?n.selector=this.selector+(this.selector?" ":"")+i:e&&(n.selector=this.selector+"."+e+"("+i+")"),n},each:function(t,e){return a.each(this,t,e)},ready:function(t){return a.bindReady(),r.add(t),this},eq:function(t){return t=+t,-1===t?this.slice(t):this.slice(t,t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(P.apply(this,arguments),"slice",P.call(arguments).join(","))},map:function(t){return this.pushStack(a.map(this,function(e,i){return t.call(e,i,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:k,sort:[].sort,splice:[].splice},a.fn.init.prototype=a.fn,a.extend=a.fn.extend=function(){var t,i,n,s,r,o,h=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof h&&(c=h,h=arguments[1]||{},l=2),"object"==typeof h||a.isFunction(h)||(h={}),u===l&&(h=this,--l);u>l;l++)if(null!=(t=arguments[l]))for(i in t)n=h[i],s=t[i],h!==s&&(c&&s&&(a.isPlainObject(s)||(r=a.isArray(s)))?(r?(r=!1,o=n&&a.isArray(n)?n:[]):o=n&&a.isPlainObject(n)?n:{},h[i]=a.extend(c,o,s)):s!==e&&(h[i]=s));return h},a.extend({noConflict:function(e){return t.$===a&&(t.$=l),e&&t.jQuery===a&&(t.jQuery=h),a},isReady:!1,readyWait:1,holdReady:function(t){t?a.readyWait++:a.ready(!0)},ready:function(t){if(t===!0&&!--a.readyWait||t!==!0&&!a.isReady){if(!N.body)return setTimeout(a.ready,1);if(a.isReady=!0,t!==!0&&--a.readyWait>0)return;r.fireWith(N,[a]),a.fn.trigger&&a(N).trigger("ready").off("ready")}},bindReady:function(){if(!r){if(r=a.Callbacks("once memory"),"complete"===N.readyState)return setTimeout(a.ready,1);if(N.addEventListener)N.addEventListener("DOMContentLoaded",o,!1),t.addEventListener("load",a.ready,!1);else if(N.attachEvent){N.attachEvent("onreadystatechange",o),t.attachEvent("onload",a.ready);var e=!1;try{e=null==t.frameElement}catch(n){}N.documentElement.doScroll&&e&&i()}}},isFunction:function(t){return"function"===a.type(t)},isArray:Array.isArray||function(t){return"array"===a.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?String(t):$[T.call(t)]||"object"},isPlainObject:function(t){if(!t||"object"!==a.type(t)||t.nodeType||a.isWindow(t))return!1;try{if(t.constructor&&!A.call(t,"constructor")&&!A.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}var n;for(n in t);return n===e||A.call(t,n)},isEmptyObject:function(t){for(var e in t)return!1;return!0},error:function(t){throw new Error(t)},parseJSON:function(e){return"string"==typeof e&&e?(e=a.trim(e),t.JSON&&t.JSON.parse?t.JSON.parse(e):g.test(e.replace(m,"@").replace(v,"]").replace(y,""))?new Function("return "+e)():void a.error("Invalid JSON: "+e)):null},parseXML:function(i){if("string"!=typeof i||!i)return null;var n,s;try{t.DOMParser?(s=new DOMParser,n=s.parseFromString(i,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(i))}catch(r){n=e}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||a.error("Invalid XML: "+i),n},noop:function(){},globalEval:function(e){e&&c.test(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(D,"ms-").replace(S,C)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toUpperCase()===e.toUpperCase()},each:function(t,i,n){var s,r=0,o=t.length,h=o===e||a.isFunction(t);if(n)if(h){for(s in t)if(i.apply(t[s],n)===!1)break}else for(;o>r&&i.apply(t[r++],n)!==!1;);else if(h){for(s in t)if(i.call(t[s],s,t[s])===!1)break}else for(;o>r&&i.call(t[r],r,t[r++])!==!1;);return t},trim:E?function(t){return null==t?"":E.call(t)}:function(t){return null==t?"":t.toString().replace(d,"").replace(p,"")},makeArray:function(t,e){var i=e||[];if(null!=t){var n=a.type(t);null==t.length||"string"===n||"function"===n||"regexp"===n||a.isWindow(t)?k.call(i,t):a.merge(i,t)}return i},inArray:function(t,e,i){var n;if(e){if(I)return I.call(e,t,i);for(n=e.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,i){var n=t.length,s=0;if("number"==typeof i.length)for(var r=i.length;r>s;s++)t[n++]=i[s];else for(;i[s]!==e;)t[n++]=i[s++];return t.length=n,t},grep:function(t,e,i){var n,s=[];i=!!i;for(var r=0,o=t.length;o>r;r++)n=!!e(t[r],r),i!==n&&s.push(t[r]);return s},map:function(t,i,n){var s,r,o=[],h=0,l=t.length,u=t instanceof a||l!==e&&"number"==typeof l&&(l>0&&t[0]&&t[l-1]||0===l||a.isArray(t));if(u)for(;l>h;h++)s=i(t[h],h,n),null!=s&&(o[o.length]=s);else for(r in t)s=i(t[r],r,n),null!=s&&(o[o.length]=s);return o.concat.apply([],o)},guid:1,proxy:function(t,i){if("string"==typeof i){var n=t[i];i=t,t=n}if(!a.isFunction(t))return e;var s=P.call(arguments,2),r=function(){return t.apply(i,s.concat(P.call(arguments)))};return r.guid=t.guid=t.guid||r.guid||a.guid++,r},access:function(t,i,n,s,r,o,h){var l,u=null==n,c=0,d=t.length;if(n&&"object"==typeof n){for(c in n)a.access(t,i,c,n[c],1,o,s);r=1}else if(s!==e){if(l=h===e&&a.isFunction(s),u&&(l?(l=i,i=function(t,e,i){return l.call(a(t),i)}):(i.call(t,s),i=null)),i)for(;d>c;c++)i(t[c],n,l?s.call(t[c],c,i(t[c],n)):s,h);r=1}return r?t:u?i.call(t):d?i(t[0],n):o},now:function(){return(new Date).getTime()},uaMatch:function(t){t=t.toLowerCase();var e=w.exec(t)||b.exec(t)||x.exec(t)||t.indexOf("compatible")<0&&V.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}},sub:function(){function t(e,i){return new t.fn.init(e,i)}a.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function(i,n){return n&&n instanceof a&&!(n instanceof t)&&(n=t(n)),a.fn.init.call(this,i,n,e)},t.fn.init.prototype=t.fn;var e=t(N);return t},browser:{}}),a.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(t,e){$["[object "+e+"]"]=e.toLowerCase()}),s=a.uaMatch(_),s.browser&&(a.browser[s.browser]=!0,a.browser.version=s.version),a.browser.webkit&&(a.browser.safari=!0),c.test("Â ")&&(d=/^[\s\xA0]+/,p=/[\s\xA0]+$/),n=a(N),N.addEventListener?o=function(){N.removeEventListener("DOMContentLoaded",o,!1),a.ready()}:N.attachEvent&&(o=function(){"complete"===N.readyState&&(N.detachEvent("onreadystatechange",o),a.ready())}),a}(),O={};$.Callbacks=function(t){t=t?O[t]||i(t):{};var n,s,r,o,a,h,l=[],u=[],c=function(e){var i,n,s,r;for(i=0,n=e.length;n>i;i++)s=e[i],r=$.type(s),"array"===r?c(s):"function"===r&&(t.unique&&p.has(s)||l.push(s))},d=function(e,i){for(i=i||[],n=!t.memory||[e,i],s=!0,r=!0,h=o||0,o=0,a=l.length;l&&a>h;h++)if(l[h].apply(e,i)===!1&&t.stopOnFalse){n=!0;break}r=!1,l&&(t.once?n===!0?p.disable():l=[]:u&&u.length&&(n=u.shift(),p.fireWith(n[0],n[1])))},p={add:function(){if(l){var t=l.length;c(arguments),r?a=l.length:n&&n!==!0&&(o=t,d(n[0],n[1]))}return this},remove:function(){if(l)for(var e=arguments,i=0,n=e.length;n>i;i++)for(var s=0;s<l.length&&(e[i]!==l[s]||(r&&a>=s&&(a--,h>=s&&h--),l.splice(s--,1),!t.unique));s++);return this},has:function(t){if(l)for(var e=0,i=l.length;i>e;e++)if(t===l[e])return!0;return!1},empty:function(){return l=[],this},disable:function(){return l=u=n=e,this},disabled:function(){return!l},lock:function(){return u=e,n&&n!==!0||p.disable(),this},locked:function(){return!u},fireWith:function(e,i){return u&&(r?t.once||u.push([e,i]):t.once&&n||d(e,i)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!s}};return p};var M=[].slice;$.extend({Deferred:function(t){var e,i=$.Callbacks("once memory"),n=$.Callbacks("once memory"),s=$.Callbacks("memory"),r="pending",o={resolve:i,reject:n,notify:s},a={done:i.add,fail:n.add,progress:s.add,state:function(){return r},isResolved:i.fired,isRejected:n.fired,then:function(t,e,i){return h.done(t).fail(e).progress(i),this},always:function(){return h.done.apply(h,arguments).fail.apply(h,arguments),this},pipe:function(t,e,i){return $.Deferred(function(n){$.each({done:[t,"resolve"],fail:[e,"reject"],progress:[i,"notify"]},function(t,e){var i,s=e[0],r=e[1];h[t]($.isFunction(s)?function(){i=s.apply(this,arguments),i&&$.isFunction(i.promise)?i.promise().then(n.resolve,n.reject,n.notify):n[r+"With"](this===h?n:this,[i])}:n[r])})}).promise()},promise:function(t){if(null==t)t=a;else for(var e in a)t[e]=a[e];return t}},h=a.promise({});for(e in o)h[e]=o[e].fire,h[e+"With"]=o[e].fireWith;return h.done(function(){r="resolved"},n.disable,s.lock).fail(function(){r="rejected"},i.disable,s.lock),t&&t.call(h,h),h},when:function(t){function e(t){return function(e){n[t]=arguments.length>1?M.call(arguments,0):e,--a||h.resolveWith(h,n)}}function i(t){return function(e){o[t]=arguments.length>1?M.call(arguments,0):e,h.notifyWith(l,o)}}var n=M.call(arguments,0),s=0,r=n.length,o=new Array(r),a=r,h=1>=r&&t&&$.isFunction(t.promise)?t:$.Deferred(),l=h.promise();if(r>1){for(;r>s;s++)n[s]&&n[s].promise&&$.isFunction(n[s].promise)?n[s].promise().then(e(s),h.reject,i(s)):--a;a||h.resolveWith(h,n)}else h!==t&&h.resolveWith(h,r?[t]:[]);return l}}),$.support=function(){{var e,i,n,s,r,o,a,h,l,u,c,d=N.createElement("div");N.documentElement}if(d.setAttribute("className","t"),d.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",i=d.getElementsByTagName("*"),n=d.getElementsByTagName("a")[0],!i||!i.length||!n)return{};s=N.createElement("select"),r=s.appendChild(N.createElement("option")),o=d.getElementsByTagName("input")[0],e={leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(n.getAttribute("style")),hrefNormalized:"/a"===n.getAttribute("href"),opacity:/^0.55/.test(n.style.opacity),cssFloat:!!n.style.cssFloat,checkOn:"on"===o.value,optSelected:r.selected,getSetAttribute:"t"!==d.className,enctype:!!N.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==N.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},$.boxModel=e.boxModel="CSS1Compat"===N.compatMode,o.checked=!0,e.noCloneChecked=o.cloneNode(!0).checked,s.disabled=!0,e.optDisabled=!r.disabled;try{delete d.test}catch(p){e.deleteExpando=!1}if(!d.addEventListener&&d.attachEvent&&d.fireEvent&&(d.attachEvent("onclick",function(){e.noCloneEvent=!1}),d.cloneNode(!0).fireEvent("onclick")),o=N.createElement("input"),o.value="t",o.setAttribute("type","radio"),e.radioValue="t"===o.value,o.setAttribute("checked","checked"),o.setAttribute("name","t"),d.appendChild(o),a=N.createDocumentFragment(),a.appendChild(d.lastChild),e.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,e.appendChecked=o.checked,a.removeChild(o),a.appendChild(d),d.attachEvent)for(u in{submit:1,change:1,focusin:1})l="on"+u,c=l in d,c||(d.setAttribute(l,"return;"),c="function"==typeof d[l]),e[u+"Bubbles"]=c;return a.removeChild(d),a=s=r=d=o=null,$(function(){var i,n,s,r,o,a,l,u,p,f,g,m,v=N.getElementsByTagName("body")[0];v&&(l=1,m="padding:0;margin:0;border:",f="position:absolute;top:0;left:0;width:1px;height:1px;",g=m+"0;visibility:hidden;",u="style='"+f+m+"5px solid #000;",p="<div "+u+"display:block;'><div style='"+m+"0;display:block;overflow:hidden;'></div></div><table "+u+"' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",i=N.createElement("div"),i.style.cssText=g+"width:0;height:0;position:static;top:0;margin-top:"+l+"px",v.insertBefore(i,v.firstChild),d=N.createElement("div"),i.appendChild(d),d.innerHTML="<table><tr><td style='"+m+"0;display:none'></td><td>t</td></tr></table>",h=d.getElementsByTagName("td"),c=0===h[0].offsetHeight,h[0].style.display="",h[1].style.display="none",e.reliableHiddenOffsets=c&&0===h[0].offsetHeight,t.getComputedStyle&&(d.innerHTML="",a=N.createElement("div"),a.style.width="0",a.style.marginRight="0",d.style.width="2px",d.appendChild(a),e.reliableMarginRight=0===(parseInt((t.getComputedStyle(a,null)||{marginRight:0}).marginRight,10)||0)),"undefined"!=typeof d.style.zoom&&(d.innerHTML="",d.style.width=d.style.padding="1px",d.style.border=0,d.style.overflow="hidden",d.style.display="inline",d.style.zoom=1,e.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div style='width:5px;'></div>",e.shrinkWrapBlocks=3!==d.offsetWidth),d.style.cssText=f+g,d.innerHTML=p,n=d.firstChild,s=n.firstChild,r=n.nextSibling.firstChild.firstChild,o={doesNotAddBorder:5!==s.offsetTop,doesAddBorderForTableAndCells:5===r.offsetTop},s.style.position="fixed",s.style.top="20px",o.fixedPosition=20===s.offsetTop||15===s.offsetTop,s.style.position=s.style.top="",n.style.overflow="hidden",n.style.position="relative",o.subtractsBorderForOverflowNotVisible=-5===s.offsetTop,o.doesNotIncludeMarginInBodyOffset=v.offsetTop!==l,t.getComputedStyle&&(d.style.marginTop="1%",e.pixelMargin="1%"!==(t.getComputedStyle(d,null)||{marginTop:0}).marginTop),"undefined"!=typeof i.style.zoom&&(i.style.zoom=1),v.removeChild(i),a=d=i=null,$.extend(e,o))}),e}();var j=/^(?:\{.*\}|\[.*\])$/,L=/([A-Z])/g;$.extend({cache:{},uuid:0,expando:"jQuery"+($.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(t){return t=t.nodeType?$.cache[t[$.expando]]:t[$.expando],!!t&&!s(t)},data:function(t,i,n,s){if($.acceptData(t)){var r,o,a,h=$.expando,l="string"==typeof i,u=t.nodeType,c=u?$.cache:t,d=u?t[h]:t[h]&&h,p="events"===i;if(d&&c[d]&&(p||s||c[d].data)||!l||n!==e)return d||(u?t[h]=d=++$.uuid:d=h),c[d]||(c[d]={},u||(c[d].toJSON=$.noop)),("object"==typeof i||"function"==typeof i)&&(s?c[d]=$.extend(c[d],i):c[d].data=$.extend(c[d].data,i)),r=o=c[d],s||(o.data||(o.data={}),o=o.data),n!==e&&(o[$.camelCase(i)]=n),p&&!o[i]?r.events:(l?(a=o[i],null==a&&(a=o[$.camelCase(i)])):a=o,a)}},removeData:function(t,e,i){if($.acceptData(t)){var n,r,o,a=$.expando,h=t.nodeType,l=h?$.cache:t,u=h?t[a]:a;if(l[u]){if(e&&(n=i?l[u]:l[u].data)){$.isArray(e)||(e in n?e=[e]:(e=$.camelCase(e),e=e in n?[e]:e.split(" ")));for(r=0,o=e.length;o>r;r++)delete n[e[r]];if(!(i?s:$.isEmptyObject)(n))return}(i||(delete l[u].data,s(l[u])))&&($.support.deleteExpando||!l.setInterval?delete l[u]:l[u]=null,h&&($.support.deleteExpando?delete t[a]:t.removeAttribute?t.removeAttribute(a):t[a]=null))}}},_data:function(t,e,i){return $.data(t,e,i,!0)},acceptData:function(t){if(t.nodeName){var e=$.noData[t.nodeName.toLowerCase()];if(e)return!(e===!0||t.getAttribute("classid")!==e)}return!0}}),$.fn.extend({data:function(t,i){var s,r,o,a,h,l=this[0],u=0,c=null;if(t===e){if(this.length&&(c=$.data(l),1===l.nodeType&&!$._data(l,"parsedAttrs"))){for(o=l.attributes,h=o.length;h>u;u++)a=o[u].name,0===a.indexOf("data-")&&(a=$.camelCase(a.substring(5)),n(l,a,c[a]));$._data(l,"parsedAttrs",!0)}return c}return"object"==typeof t?this.each(function(){$.data(this,t)}):(s=t.split(".",2),s[1]=s[1]?"."+s[1]:"",r=s[1]+"!",$.access(this,function(i){return i===e?(c=this.triggerHandler("getData"+r,[s[0]]),c===e&&l&&(c=$.data(l,t),c=n(l,t,c)),c===e&&s[1]?this.data(s[0]):c):(s[1]=i,void this.each(function(){var e=$(this);e.triggerHandler("setData"+r,s),$.data(this,t,i),e.triggerHandler("changeData"+r,s)}))},null,i,arguments.length>1,null,!1))},removeData:function(t){return this.each(function(){$.removeData(this,t)})}}),$.extend({_mark:function(t,e){t&&(e=(e||"fx")+"mark",$._data(t,e,($._data(t,e)||0)+1))},_unmark:function(t,e,i){if(t!==!0&&(i=e,e=t,t=!1),e){i=i||"fx";var n=i+"mark",s=t?0:($._data(e,n)||1)-1;s?$._data(e,n,s):($.removeData(e,n,!0),r(e,i,"mark"))}},queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=$._data(t,e),i&&(!n||$.isArray(i)?n=$._data(t,e,$.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=$.queue(t,e),n=i.shift(),s={};"inprogress"===n&&(n=i.shift()),n&&("fx"===e&&i.unshift("inprogress"),$._data(t,e+".run",s),n.call(t,function(){$.dequeue(t,e)},s)),i.length||($.removeData(t,e+"queue "+e+".run",!0),r(t,e,"queue"))}}),$.fn.extend({queue:function(t,i){var n=2;return"string"!=typeof t&&(i=t,t="fx",n--),arguments.length<n?$.queue(this[0],t):i===e?this:this.each(function(){var e=$.queue(this,t,i);"fx"===t&&"inprogress"!==e[0]&&$.dequeue(this,t)})},dequeue:function(t){return this.each(function(){$.dequeue(this,t)})},delay:function(t,e){return t=$.fx?$.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,i){function n(){--h||r.resolveWith(o,[o])}"string"!=typeof t&&(i=t,t=e),t=t||"fx";for(var s,r=$.Deferred(),o=this,a=o.length,h=1,l=t+"defer",u=t+"queue",c=t+"mark";a--;)(s=$.data(o[a],l,e,!0)||($.data(o[a],u,e,!0)||$.data(o[a],c,e,!0))&&$.data(o[a],l,$.Callbacks("once memory"),!0))&&(h++,s.add(n));return n(),r.promise(i)}});var H,R,F,z=/[\n\t\r]/g,B=/\s+/,W=/\r/g,q=/^(?:button|input)$/i,U=/^(?:button|input|object|select|textarea)$/i,Q=/^a(?:rea)?$/i,X=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Y=$.support.getSetAttribute;$.fn.extend({attr:function(t,e){return $.access(this,$.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){$.removeAttr(this,t)})},prop:function(t,e){return $.access(this,$.prop,t,e,arguments.length>1)},removeProp:function(t){return t=$.propFix[t]||t,this.each(function(){try{this[t]=e,delete this[t]}catch(i){}})},addClass:function(t){var e,i,n,s,r,o,a;if($.isFunction(t))return this.each(function(e){$(this).addClass(t.call(this,e,this.className))});if(t&&"string"==typeof t)for(e=t.split(B),i=0,n=this.length;n>i;i++)if(s=this[i],1===s.nodeType)if(s.className||1!==e.length){for(r=" "+s.className+" ",o=0,a=e.length;a>o;o++)~r.indexOf(" "+e[o]+" ")||(r+=e[o]+" ");s.className=$.trim(r)}else s.className=t;return this},removeClass:function(t){var i,n,s,r,o,a,h;if($.isFunction(t))return this.each(function(e){$(this).removeClass(t.call(this,e,this.className))});if(t&&"string"==typeof t||t===e)for(i=(t||"").split(B),n=0,s=this.length;s>n;n++)if(r=this[n],1===r.nodeType&&r.className)if(t){for(o=(" "+r.className+" ").replace(z," "),a=0,h=i.length;h>a;a++)o=o.replace(" "+i[a]+" "," ");r.className=$.trim(o)}else r.className="";return this},toggleClass:function(t,e){var i=typeof t,n="boolean"==typeof e;return this.each($.isFunction(t)?function(i){$(this).toggleClass(t.call(this,i,this.className,e),e)}:function(){if("string"===i)for(var s,r=0,o=$(this),a=e,h=t.split(B);s=h[r++];)a=n?a:!o.hasClass(s),o[a?"addClass":"removeClass"](s);else("undefined"===i||"boolean"===i)&&(this.className&&$._data(this,"__className__",this.className),this.className=this.className||t===!1?"":$._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(z," ").indexOf(e)>-1)return!0;return!1},val:function(t){var i,n,s,r=this[0];{if(arguments.length)return s=$.isFunction(t),this.each(function(n){var r,o=$(this);1===this.nodeType&&(r=s?t.call(this,n,o.val()):t,null==r?r="":"number"==typeof r?r+="":$.isArray(r)&&(r=$.map(r,function(t){return null==t?"":t+""})),i=$.valHooks[this.type]||$.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,r,"value")!==e||(this.value=r))});if(r)return i=$.valHooks[r.type]||$.valHooks[r.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(r,"value"))!==e?n:(n=r.value,"string"==typeof n?n.replace(W,""):null==n?"":n)}}}),$.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){var e,i,n,s,r=t.selectedIndex,o=[],a=t.options,h="select-one"===t.type;if(0>r)return null;for(i=h?r:0,n=h?r+1:a.length;n>i;i++)if(s=a[i],!(!s.selected||($.support.optDisabled?s.disabled:null!==s.getAttribute("disabled"))||s.parentNode.disabled&&$.nodeName(s.parentNode,"optgroup"))){if(e=$(s).val(),h)return e;o.push(e)}return h&&!o.length&&a.length?$(a[r]).val():o},set:function(t,e){var i=$.makeArray(e);return $(t).find("option").each(function(){this.selected=$.inArray($(this).val(),i)>=0}),i.length||(t.selectedIndex=-1),i}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(t,i,n,s){var r,o,a,h=t.nodeType;if(t&&3!==h&&8!==h&&2!==h)return s&&i in $.attrFn?$(t)[i](n):"undefined"==typeof t.getAttribute?$.prop(t,i,n):(a=1!==h||!$.isXMLDoc(t),a&&(i=i.toLowerCase(),o=$.attrHooks[i]||(X.test(i)?R:H)),n!==e?null===n?void $.removeAttr(t,i):o&&"set"in o&&a&&(r=o.set(t,n,i))!==e?r:(t.setAttribute(i,""+n),n):o&&"get"in o&&a&&null!==(r=o.get(t,i))?r:(r=t.getAttribute(i),null===r?e:r))},removeAttr:function(t,e){var i,n,s,r,o,a=0;if(e&&1===t.nodeType)for(n=e.toLowerCase().split(B),r=n.length;r>a;a++)s=n[a],s&&(i=$.propFix[s]||s,o=X.test(s),o||$.attr(t,s,""),t.removeAttribute(Y?s:i),o&&i in t&&(t[i]=!1))},attrHooks:{type:{set:function(t,e){if(q.test(t.nodeName)&&t.parentNode)$.error("type property can't be changed");else if(!$.support.radioValue&&"radio"===e&&$.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}},value:{get:function(t,e){return H&&$.nodeName(t,"button")?H.get(t,e):e in t?t.value:null},set:function(t,e,i){return H&&$.nodeName(t,"button")?H.set(t,e,i):void(t.value=e)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(t,i,n){var s,r,o,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return o=1!==a||!$.isXMLDoc(t),o&&(i=$.propFix[i]||i,r=$.propHooks[i]),n!==e?r&&"set"in r&&(s=r.set(t,n,i))!==e?s:t[i]=n:r&&"get"in r&&null!==(s=r.get(t,i))?s:t[i]},propHooks:{tabIndex:{get:function(t){var i=t.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):U.test(t.nodeName)||Q.test(t.nodeName)&&t.href?0:e}}}}),$.attrHooks.tabindex=$.propHooks.tabIndex,R={get:function(t,i){var n,s=$.prop(t,i);return s===!0||"boolean"!=typeof s&&(n=t.getAttributeNode(i))&&n.nodeValue!==!1?i.toLowerCase():e},set:function(t,e,i){var n;return e===!1?$.removeAttr(t,i):(n=$.propFix[i]||i,n in t&&(t[n]=!0),t.setAttribute(i,i.toLowerCase())),i}},Y||(F={name:!0,id:!0,coords:!0},H=$.valHooks.button={get:function(t,i){var n;return n=t.getAttributeNode(i),n&&(F[i]?""!==n.nodeValue:n.specified)?n.nodeValue:e},set:function(t,e,i){var n=t.getAttributeNode(i);return n||(n=N.createAttribute(i),t.setAttributeNode(n)),n.nodeValue=e+""}},$.attrHooks.tabindex.set=H.set,$.each(["width","height"],function(t,e){$.attrHooks[e]=$.extend($.attrHooks[e],{set:function(t,i){return""===i?(t.setAttribute(e,"auto"),i):void 0}})}),$.attrHooks.contenteditable={get:H.get,set:function(t,e,i){""===e&&(e="false"),H.set(t,e,i)}}),$.support.hrefNormalized||$.each(["href","src","width","height"],function(t,i){$.attrHooks[i]=$.extend($.attrHooks[i],{get:function(t){var n=t.getAttribute(i,2);return null===n?e:n}})}),$.support.style||($.attrHooks.style={get:function(t){return t.style.cssText.toLowerCase()||e},set:function(t,e){return t.style.cssText=""+e}}),$.support.optSelected||($.propHooks.selected=$.extend($.propHooks.selected,{get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}})),$.support.enctype||($.propFix.enctype="encoding"),$.support.checkOn||$.each(["radio","checkbox"],function(){$.valHooks[this]={get:function(t){return null===t.getAttribute("value")?"on":t.value}}}),$.each(["radio","checkbox"],function(){$.valHooks[this]=$.extend($.valHooks[this],{set:function(t,e){return $.isArray(e)?t.checked=$.inArray($(t).val(),e)>=0:void 0}})});var J=/^(?:textarea|input|select)$/i,Z=/^([^\.]*)?(?:\.(.+))?$/,K=/(?:^|\s)hover(\.\S+)?\b/,te=/^key/,ee=/^(?:mouse|contextmenu)|click/,ie=/^(?:focusinfocus|focusoutblur)$/,ne=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,se=function(t){var e=ne.exec(t);
return e&&(e[1]=(e[1]||"").toLowerCase(),e[3]=e[3]&&new RegExp("(?:^|\\s)"+e[3]+"(?:\\s|$)")),e},re=function(t,e){var i=t.attributes||{};return!(e[1]&&t.nodeName.toLowerCase()!==e[1]||e[2]&&(i.id||{}).value!==e[2]||e[3]&&!e[3].test((i["class"]||{}).value))},oe=function(t){return $.event.special.hover?t:t.replace(K,"mouseenter$1 mouseleave$1")};$.event={add:function(t,i,n,s,r){var o,a,h,l,u,c,d,p,f,g,m;if(3!==t.nodeType&&8!==t.nodeType&&i&&n&&(o=$._data(t))){for(n.handler&&(f=n,n=f.handler,r=f.selector),n.guid||(n.guid=$.guid++),h=o.events,h||(o.events=h={}),a=o.handle,a||(o.handle=a=function(t){return"undefined"==typeof $||t&&$.event.triggered===t.type?e:$.event.dispatch.apply(a.elem,arguments)},a.elem=t),i=$.trim(oe(i)).split(" "),l=0;l<i.length;l++)u=Z.exec(i[l])||[],c=u[1],d=(u[2]||"").split(".").sort(),m=$.event.special[c]||{},c=(r?m.delegateType:m.bindType)||c,m=$.event.special[c]||{},p=$.extend({type:c,origType:u[1],data:s,handler:n,guid:n.guid,selector:r,quick:r&&se(r),namespace:d.join(".")},f),g=h[c],g||(g=h[c]=[],g.delegateCount=0,m.setup&&m.setup.call(t,s,d,a)!==!1||(t.addEventListener?t.addEventListener(c,a,!1):t.attachEvent&&t.attachEvent("on"+c,a))),m.add&&(m.add.call(t,p),p.handler.guid||(p.handler.guid=n.guid)),r?g.splice(g.delegateCount++,0,p):g.push(p),$.event.global[c]=!0;t=null}},global:{},remove:function(t,e,i,n,s){var r,o,a,h,l,u,c,d,p,f,g,m,v=$.hasData(t)&&$._data(t);if(v&&(d=v.events)){for(e=$.trim(oe(e||"")).split(" "),r=0;r<e.length;r++)if(o=Z.exec(e[r])||[],a=h=o[1],l=o[2],a){for(p=$.event.special[a]||{},a=(n?p.delegateType:p.bindType)||a,g=d[a]||[],u=g.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,c=0;c<g.length;c++)m=g[c],!s&&h!==m.origType||i&&i.guid!==m.guid||l&&!l.test(m.namespace)||n&&n!==m.selector&&("**"!==n||!m.selector)||(g.splice(c--,1),m.selector&&g.delegateCount--,p.remove&&p.remove.call(t,m));0===g.length&&u!==g.length&&(p.teardown&&p.teardown.call(t,l)!==!1||$.removeEvent(t,a,v.handle),delete d[a])}else for(a in d)$.event.remove(t,a+e[r],i,n,!0);$.isEmptyObject(d)&&(f=v.handle,f&&(f.elem=null),$.removeData(t,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(i,n,s,r){if(!s||3!==s.nodeType&&8!==s.nodeType){var o,a,h,l,u,c,d,p,f,g,m=i.type||i,v=[];if(!ie.test(m+$.event.triggered)&&(m.indexOf("!")>=0&&(m=m.slice(0,-1),a=!0),m.indexOf(".")>=0&&(v=m.split("."),m=v.shift(),v.sort()),s&&!$.event.customEvent[m]||$.event.global[m]))if(i="object"==typeof i?i[$.expando]?i:new $.Event(m,i):new $.Event(m),i.type=m,i.isTrigger=!0,i.exclusive=a,i.namespace=v.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,c=m.indexOf(":")<0?"on"+m:"",s){if(i.result=e,i.target||(i.target=s),n=null!=n?$.makeArray(n):[],n.unshift(i),d=$.event.special[m]||{},!d.trigger||d.trigger.apply(s,n)!==!1){if(f=[[s,d.bindType||m]],!r&&!d.noBubble&&!$.isWindow(s)){for(g=d.delegateType||m,l=ie.test(g+m)?s:s.parentNode,u=null;l;l=l.parentNode)f.push([l,g]),u=l;u&&u===s.ownerDocument&&f.push([u.defaultView||u.parentWindow||t,g])}for(h=0;h<f.length&&!i.isPropagationStopped();h++)l=f[h][0],i.type=f[h][1],p=($._data(l,"events")||{})[i.type]&&$._data(l,"handle"),p&&p.apply(l,n),p=c&&l[c],p&&$.acceptData(l)&&p.apply(l,n)===!1&&i.preventDefault();return i.type=m,r||i.isDefaultPrevented()||d._default&&d._default.apply(s.ownerDocument,n)!==!1||"click"===m&&$.nodeName(s,"a")||!$.acceptData(s)||c&&s[m]&&("focus"!==m&&"blur"!==m||0!==i.target.offsetWidth)&&!$.isWindow(s)&&(u=s[c],u&&(s[c]=null),$.event.triggered=m,s[m](),$.event.triggered=e,u&&(s[c]=u)),i.result}}else{o=$.cache;for(h in o)o[h].events&&o[h].events[m]&&$.event.trigger(i,n,o[h].handle.elem,!0)}}},dispatch:function(i){i=$.event.fix(i||t.event);var n,s,r,o,a,h,l,u,c,d,p=($._data(this,"events")||{})[i.type]||[],f=p.delegateCount,g=[].slice.call(arguments,0),m=!i.exclusive&&!i.namespace,v=$.event.special[i.type]||{},y=[];if(g[0]=i,i.delegateTarget=this,!v.preDispatch||v.preDispatch.call(this,i)!==!1){if(f&&(!i.button||"click"!==i.type))for(o=$(this),o.context=this.ownerDocument||this,r=i.target;r!=this;r=r.parentNode||this)if(r.disabled!==!0){for(h={},u=[],o[0]=r,n=0;f>n;n++)c=p[n],d=c.selector,h[d]===e&&(h[d]=c.quick?re(r,c.quick):o.is(d)),h[d]&&u.push(c);u.length&&y.push({elem:r,matches:u})}for(p.length>f&&y.push({elem:this,matches:p.slice(f)}),n=0;n<y.length&&!i.isPropagationStopped();n++)for(l=y[n],i.currentTarget=l.elem,s=0;s<l.matches.length&&!i.isImmediatePropagationStopped();s++)c=l.matches[s],(m||!i.namespace&&!c.namespace||i.namespace_re&&i.namespace_re.test(c.namespace))&&(i.data=c.data,i.handleObj=c,a=(($.event.special[c.origType]||{}).handle||c.handler).apply(l.elem,g),a!==e&&(i.result=a,a===!1&&(i.preventDefault(),i.stopPropagation())));return v.postDispatch&&v.postDispatch.call(this,i),i.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,i){var n,s,r,o=i.button,a=i.fromElement;return null==t.pageX&&null!=i.clientX&&(n=t.target.ownerDocument||N,s=n.documentElement,r=n.body,t.pageX=i.clientX+(s&&s.scrollLeft||r&&r.scrollLeft||0)-(s&&s.clientLeft||r&&r.clientLeft||0),t.pageY=i.clientY+(s&&s.scrollTop||r&&r.scrollTop||0)-(s&&s.clientTop||r&&r.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?i.toElement:a),t.which||o===e||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[$.expando])return t;var i,n,s=t,r=$.event.fixHooks[t.type]||{},o=r.props?this.props.concat(r.props):this.props;for(t=$.Event(s),i=o.length;i;)n=o[--i],t[n]=s[n];return t.target||(t.target=s.srcElement||N),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey===e&&(t.metaKey=t.ctrlKey),r.filter?r.filter(t,s):t},special:{ready:{setup:$.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(t,e,i){$.isWindow(this)&&(this.onbeforeunload=i)},teardown:function(t,e){this.onbeforeunload===e&&(this.onbeforeunload=null)}}},simulate:function(t,e,i,n){var s=$.extend(new $.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?$.event.trigger(s,null,e):$.event.dispatch.call(e,s),s.isDefaultPrevented()&&i.preventDefault()}},$.event.handle=$.event.dispatch,$.removeEvent=N.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)}:function(t,e,i){t.detachEvent&&t.detachEvent("on"+e,i)},$.Event=function(t,e){return this instanceof $.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.returnValue===!1||t.getPreventDefault&&t.getPreventDefault()?a:o):this.type=t,e&&$.extend(this,e),this.timeStamp=t&&t.timeStamp||$.now(),void(this[$.expando]=!0)):new $.Event(t,e)},$.Event.prototype={preventDefault:function(){this.isDefaultPrevented=a;var t=this.originalEvent;t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=a;var t=this.originalEvent;t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()},isDefaultPrevented:o,isPropagationStopped:o,isImmediatePropagationStopped:o},$.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){$.event.special[t]={delegateType:e,bindType:e,handle:function(t){{var i,n=this,s=t.relatedTarget,r=t.handleObj;r.selector}return(!s||s!==n&&!$.contains(n,s))&&(t.type=r.origType,i=r.handler.apply(this,arguments),t.type=e),i}}}),$.support.submitBubbles||($.event.special.submit={setup:function(){return $.nodeName(this,"form")?!1:void $.event.add(this,"click._submit keypress._submit",function(t){var i=t.target,n=$.nodeName(i,"input")||$.nodeName(i,"button")?i.form:e;n&&!n._submit_attached&&($.event.add(n,"submit._submit",function(t){t._submit_bubble=!0}),n._submit_attached=!0)})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&$.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return $.nodeName(this,"form")?!1:void $.event.remove(this,"._submit")}}),$.support.changeBubbles||($.event.special.change={setup:function(){return J.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&($.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),$.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1,$.event.simulate("change",this,t,!0))})),!1):void $.event.add(this,"beforeactivate._change",function(t){var e=t.target;J.test(e.nodeName)&&!e._change_attached&&($.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||$.event.simulate("change",this.parentNode,t,!0)}),e._change_attached=!0)})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return $.event.remove(this,"._change"),J.test(this.nodeName)}}),$.support.focusinBubbles||$.each({focus:"focusin",blur:"focusout"},function(t,e){var i=0,n=function(t){$.event.simulate(e,t.target,$.event.fix(t),!0)};$.event.special[e]={setup:function(){0===i++&&N.addEventListener(t,n,!0)},teardown:function(){0===--i&&N.removeEventListener(t,n,!0)}}}),$.fn.extend({on:function(t,i,n,s,r){var a,h;if("object"==typeof t){"string"!=typeof i&&(n=n||i,i=e);for(h in t)this.on(h,i,n,t[h],r);return this}if(null==n&&null==s?(s=i,n=i=e):null==s&&("string"==typeof i?(s=n,n=e):(s=n,n=i,i=e)),s===!1)s=o;else if(!s)return this;return 1===r&&(a=s,s=function(t){return $().off(t),a.apply(this,arguments)},s.guid=a.guid||(a.guid=$.guid++)),this.each(function(){$.event.add(this,t,s,n,i)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,i,n){if(t&&t.preventDefault&&t.handleObj){var s=t.handleObj;return $(t.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this}if("object"==typeof t){for(var r in t)this.off(r,i,t[r]);return this}return(i===!1||"function"==typeof i)&&(n=i,i=e),n===!1&&(n=o),this.each(function(){$.event.remove(this,t,n,i)})},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},live:function(t,e,i){return $(this.context).on(t,this.selector,e,i),this},die:function(t,e){return $(this.context).off(t,this.selector||"**",e),this},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1==arguments.length?this.off(t,"**"):this.off(e,t,i)},trigger:function(t,e){return this.each(function(){$.event.trigger(t,e,this)})},triggerHandler:function(t,e){return this[0]?$.event.trigger(t,e,this[0],!0):void 0},toggle:function(t){var e=arguments,i=t.guid||$.guid++,n=0,s=function(i){var s=($._data(this,"lastToggle"+t.guid)||0)%n;return $._data(this,"lastToggle"+t.guid,s+1),i.preventDefault(),e[s].apply(this,arguments)||!1};for(s.guid=i;n<e.length;)e[n++].guid=i;return this.click(s)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),$.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){$.fn[e]=function(t,i){return null==i&&(i=t,t=null),arguments.length>0?this.on(e,null,t,i):this.trigger(e)},$.attrFn&&($.attrFn[e]=!0),te.test(e)&&($.event.fixHooks[e]=$.event.keyHooks),ee.test(e)&&($.event.fixHooks[e]=$.event.mouseHooks)}),function(){function t(t,e,i,n,r,o){for(var a=0,h=n.length;h>a;a++){var l=n[a];if(l){var u=!1;for(l=l[t];l;){if(l[s]===i){u=n[l.sizset];break}if(1!==l.nodeType||o||(l[s]=i,l.sizset=a),l.nodeName.toLowerCase()===e){u=l;break}l=l[t]}n[a]=u}}}function i(t,e,i,n,r,o){for(var a=0,h=n.length;h>a;a++){var l=n[a];if(l){var u=!1;for(l=l[t];l;){if(l[s]===i){u=n[l.sizset];break}if(1===l.nodeType)if(o||(l[s]=i,l.sizset=a),"string"!=typeof e){if(l===e){u=!0;break}}else if(d.filter(e,[l]).length>0){u=l;break}l=l[t]}n[a]=u}}}var n=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,s="sizcache"+(Math.random()+"").replace(".",""),r=0,o=Object.prototype.toString,a=!1,h=!0,l=/\\/g,u=/\r\n/g,c=/\W/;[0,0].sort(function(){return h=!1,0});var d=function(t,e,i,s){i=i||[],e=e||N;var r=e;if(1!==e.nodeType&&9!==e.nodeType)return[];if(!t||"string"!=typeof t)return i;var a,h,l,u,c,p,m,v,w=!0,b=d.isXML(e),x=[],S=t;do if(n.exec(""),a=n.exec(S),a&&(S=a[3],x.push(a[1]),a[2])){u=a[3];break}while(a);if(x.length>1&&g.exec(t))if(2===x.length&&f.relative[x[0]])h=V(x[0]+x[1],e,s);else for(h=f.relative[x[0]]?[e]:d(x.shift(),e);x.length;)t=x.shift(),f.relative[t]&&(t+=x.shift()),h=V(t,h,s);else if(!s&&x.length>1&&9===e.nodeType&&!b&&f.match.ID.test(x[0])&&!f.match.ID.test(x[x.length-1])&&(c=d.find(x.shift(),e,b),e=c.expr?d.filter(c.expr,c.set)[0]:c.set[0]),e)for(c=s?{expr:x.pop(),set:y(s)}:d.find(x.pop(),1!==x.length||"~"!==x[0]&&"+"!==x[0]||!e.parentNode?e:e.parentNode,b),h=c.expr?d.filter(c.expr,c.set):c.set,x.length>0?l=y(h):w=!1;x.length;)p=x.pop(),m=p,f.relative[p]?m=x.pop():p="",null==m&&(m=e),f.relative[p](l,m,b);else l=x=[];if(l||(l=h),l||d.error(p||t),"[object Array]"===o.call(l))if(w)if(e&&1===e.nodeType)for(v=0;null!=l[v];v++)l[v]&&(l[v]===!0||1===l[v].nodeType&&d.contains(e,l[v]))&&i.push(h[v]);else for(v=0;null!=l[v];v++)l[v]&&1===l[v].nodeType&&i.push(h[v]);else i.push.apply(i,l);else y(l,i);return u&&(d(u,r,i,s),d.uniqueSort(i)),i};d.uniqueSort=function(t){if(b&&(a=h,t.sort(b),a))for(var e=1;e<t.length;e++)t[e]===t[e-1]&&t.splice(e--,1);return t},d.matches=function(t,e){return d(t,null,null,e)},d.matchesSelector=function(t,e){return d(e,null,null,[t]).length>0},d.find=function(t,e,i){var n,s,r,o,a,h;if(!t)return[];for(s=0,r=f.order.length;r>s;s++)if(a=f.order[s],(o=f.leftMatch[a].exec(t))&&(h=o[1],o.splice(1,1),"\\"!==h.substr(h.length-1)&&(o[1]=(o[1]||"").replace(l,""),n=f.find[a](o,e,i),null!=n))){t=t.replace(f.match[a],"");break}return n||(n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName("*"):[]),{set:n,expr:t}},d.filter=function(t,i,n,s){for(var r,o,a,h,l,u,c,p,g,m=t,v=[],y=i,w=i&&i[0]&&d.isXML(i[0]);t&&i.length;){for(a in f.filter)if(null!=(r=f.leftMatch[a].exec(t))&&r[2]){if(u=f.filter[a],c=r[1],o=!1,r.splice(1,1),"\\"===c.substr(c.length-1))continue;if(y===v&&(v=[]),f.preFilter[a])if(r=f.preFilter[a](r,y,n,v,s,w)){if(r===!0)continue}else o=h=!0;if(r)for(p=0;null!=(l=y[p]);p++)l&&(h=u(l,r,p,y),g=s^h,n&&null!=h?g?o=!0:y[p]=!1:g&&(v.push(l),o=!0));if(h!==e){if(n||(y=v),t=t.replace(f.match[a],""),!o)return[];break}}if(t===m){if(null!=o)break;d.error(t)}m=t}return y},d.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)};var p=d.getText=function(t){var e,i,n=t.nodeType,s="";if(n){if(1===n||9===n||11===n){if("string"==typeof t.textContent)return t.textContent;if("string"==typeof t.innerText)return t.innerText.replace(u,"");for(t=t.firstChild;t;t=t.nextSibling)s+=p(t)}else if(3===n||4===n)return t.nodeValue}else for(e=0;i=t[e];e++)8!==i.nodeType&&(s+=p(i));return s},f=d.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(t){return t.getAttribute("href")},type:function(t){return t.getAttribute("type")}},relative:{"+":function(t,e){var i="string"==typeof e,n=i&&!c.test(e),s=i&&!n;n&&(e=e.toLowerCase());for(var r,o=0,a=t.length;a>o;o++)if(r=t[o]){for(;(r=r.previousSibling)&&1!==r.nodeType;);t[o]=s||r&&r.nodeName.toLowerCase()===e?r||!1:r===e}s&&d.filter(e,t,!0)},">":function(t,e){var i,n="string"==typeof e,s=0,r=t.length;if(n&&!c.test(e)){for(e=e.toLowerCase();r>s;s++)if(i=t[s]){var o=i.parentNode;t[s]=o.nodeName.toLowerCase()===e?o:!1}}else{for(;r>s;s++)i=t[s],i&&(t[s]=n?i.parentNode:i.parentNode===e);n&&d.filter(e,t,!0)}},"":function(e,n,s){var o,a=r++,h=i;"string"!=typeof n||c.test(n)||(n=n.toLowerCase(),o=n,h=t),h("parentNode",n,a,e,o,s)},"~":function(e,n,s){var o,a=r++,h=i;"string"!=typeof n||c.test(n)||(n=n.toLowerCase(),o=n,h=t),h("previousSibling",n,a,e,o,s)}},find:{ID:function(t,e,i){if("undefined"!=typeof e.getElementById&&!i){var n=e.getElementById(t[1]);return n&&n.parentNode?[n]:[]}},NAME:function(t,e){if("undefined"!=typeof e.getElementsByName){for(var i=[],n=e.getElementsByName(t[1]),s=0,r=n.length;r>s;s++)n[s].getAttribute("name")===t[1]&&i.push(n[s]);return 0===i.length?null:i}},TAG:function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t[1]):void 0}},preFilter:{CLASS:function(t,e,i,n,s,r){if(t=" "+t[1].replace(l,"")+" ",r)return t;for(var o,a=0;null!=(o=e[a]);a++)o&&(s^(o.className&&(" "+o.className+" ").replace(/[\t\n\r]/g," ").indexOf(t)>=0)?i||n.push(o):i&&(e[a]=!1));return!1},ID:function(t){return t[1].replace(l,"")},TAG:function(t){return t[1].replace(l,"").toLowerCase()},CHILD:function(t){if("nth"===t[1]){t[2]||d.error(t[0]),t[2]=t[2].replace(/^\+|\s*/g,"");var e=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===t[2]&&"2n"||"odd"===t[2]&&"2n+1"||!/\D/.test(t[2])&&"0n+"+t[2]||t[2]);t[2]=e[1]+(e[2]||1)-0,t[3]=e[3]-0}else t[2]&&d.error(t[0]);return t[0]=r++,t},ATTR:function(t,e,i,n,s,r){var o=t[1]=t[1].replace(l,"");return!r&&f.attrMap[o]&&(t[1]=f.attrMap[o]),t[4]=(t[4]||t[5]||"").replace(l,""),"~="===t[2]&&(t[4]=" "+t[4]+" "),t},PSEUDO:function(t,e,i,s,r){if("not"===t[1]){if(!((n.exec(t[3])||"").length>1||/^\w/.test(t[3]))){var o=d.filter(t[3],e,i,!0^r);return i||s.push.apply(s,o),!1}t[3]=d(t[3],null,null,e)}else if(f.match.POS.test(t[0])||f.match.CHILD.test(t[0]))return!0;return t},POS:function(t){return t.unshift(!0),t}},filters:{enabled:function(t){return t.disabled===!1&&"hidden"!==t.type},disabled:function(t){return t.disabled===!0},checked:function(t){return t.checked===!0},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},parent:function(t){return!!t.firstChild},empty:function(t){return!t.firstChild},has:function(t,e,i){return!!d(i[3],t).length},header:function(t){return/h\d/i.test(t.nodeName)},text:function(t){var e=t.getAttribute("type"),i=t.type;return"input"===t.nodeName.toLowerCase()&&"text"===i&&(e===i||null===e)},radio:function(t){return"input"===t.nodeName.toLowerCase()&&"radio"===t.type},checkbox:function(t){return"input"===t.nodeName.toLowerCase()&&"checkbox"===t.type},file:function(t){return"input"===t.nodeName.toLowerCase()&&"file"===t.type},password:function(t){return"input"===t.nodeName.toLowerCase()&&"password"===t.type},submit:function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&"submit"===t.type},image:function(t){return"input"===t.nodeName.toLowerCase()&&"image"===t.type},reset:function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&"reset"===t.type},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},input:function(t){return/input|select|textarea|button/i.test(t.nodeName)},focus:function(t){return t===t.ownerDocument.activeElement}},setFilters:{first:function(t,e){return 0===e},last:function(t,e,i,n){return e===n.length-1},even:function(t,e){return e%2===0},odd:function(t,e){return e%2===1},lt:function(t,e,i){return e<i[3]-0},gt:function(t,e,i){return e>i[3]-0},nth:function(t,e,i){return i[3]-0===e},eq:function(t,e,i){return i[3]-0===e}},filter:{PSEUDO:function(t,e,i,n){var s=e[1],r=f.filters[s];if(r)return r(t,i,e,n);if("contains"===s)return(t.textContent||t.innerText||p([t])||"").indexOf(e[3])>=0;if("not"===s){for(var o=e[3],a=0,h=o.length;h>a;a++)if(o[a]===t)return!1;return!0}d.error(s)},CHILD:function(t,e){var i,n,r,o,a,h,l=e[1],u=t;switch(l){case"only":case"first":for(;u=u.previousSibling;)if(1===u.nodeType)return!1;if("first"===l)return!0;u=t;case"last":for(;u=u.nextSibling;)if(1===u.nodeType)return!1;return!0;case"nth":if(i=e[2],n=e[3],1===i&&0===n)return!0;if(r=e[0],o=t.parentNode,o&&(o[s]!==r||!t.nodeIndex)){for(a=0,u=o.firstChild;u;u=u.nextSibling)1===u.nodeType&&(u.nodeIndex=++a);o[s]=r}return h=t.nodeIndex-n,0===i?0===h:h%i===0&&h/i>=0}},ID:function(t,e){return 1===t.nodeType&&t.getAttribute("id")===e},TAG:function(t,e){return"*"===e&&1===t.nodeType||!!t.nodeName&&t.nodeName.toLowerCase()===e},CLASS:function(t,e){return(" "+(t.className||t.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(t,e){var i=e[1],n=d.attr?d.attr(t,i):f.attrHandle[i]?f.attrHandle[i](t):null!=t[i]?t[i]:t.getAttribute(i),s=n+"",r=e[2],o=e[4];return null==n?"!="===r:!r&&d.attr?null!=n:"="===r?s===o:"*="===r?s.indexOf(o)>=0:"~="===r?(" "+s+" ").indexOf(o)>=0:o?"!="===r?s!==o:"^="===r?0===s.indexOf(o):"$="===r?s.substr(s.length-o.length)===o:"|="===r?s===o||s.substr(0,o.length+1)===o+"-":!1:s&&n!==!1},POS:function(t,e,i,n){var s=e[2],r=f.setFilters[s];return r?r(t,i,e,n):void 0}}},g=f.match.POS,m=function(t,e){return"\\"+(e-0+1)};for(var v in f.match)f.match[v]=new RegExp(f.match[v].source+/(?![^\[]*\])(?![^\(]*\))/.source),f.leftMatch[v]=new RegExp(/(^(?:.|\r|\n)*?)/.source+f.match[v].source.replace(/\\(\d+)/g,m));f.match.globalPOS=g;var y=function(t,e){return t=Array.prototype.slice.call(t,0),e?(e.push.apply(e,t),e):t};try{Array.prototype.slice.call(N.documentElement.childNodes,0)[0].nodeType}catch(w){y=function(t,e){var i=0,n=e||[];if("[object Array]"===o.call(t))Array.prototype.push.apply(n,t);else if("number"==typeof t.length)for(var s=t.length;s>i;i++)n.push(t[i]);else for(;t[i];i++)n.push(t[i]);return n}}var b,x;N.documentElement.compareDocumentPosition?b=function(t,e){return t===e?(a=!0,0):t.compareDocumentPosition&&e.compareDocumentPosition?4&t.compareDocumentPosition(e)?-1:1:t.compareDocumentPosition?-1:1}:(b=function(t,e){if(t===e)return a=!0,0;if(t.sourceIndex&&e.sourceIndex)return t.sourceIndex-e.sourceIndex;var i,n,s=[],r=[],o=t.parentNode,h=e.parentNode,l=o;if(o===h)return x(t,e);if(!o)return-1;if(!h)return 1;for(;l;)s.unshift(l),l=l.parentNode;for(l=h;l;)r.unshift(l),l=l.parentNode;i=s.length,n=r.length;for(var u=0;i>u&&n>u;u++)if(s[u]!==r[u])return x(s[u],r[u]);return u===i?x(t,r[u],-1):x(s[u],e,1)},x=function(t,e,i){if(t===e)return i;for(var n=t.nextSibling;n;){if(n===e)return-1;n=n.nextSibling}return 1}),function(){var t=N.createElement("div"),i="script"+(new Date).getTime(),n=N.documentElement;t.innerHTML="<a name='"+i+"'/>",n.insertBefore(t,n.firstChild),N.getElementById(i)&&(f.find.ID=function(t,i,n){if("undefined"!=typeof i.getElementById&&!n){var s=i.getElementById(t[1]);return s?s.id===t[1]||"undefined"!=typeof s.getAttributeNode&&s.getAttributeNode("id").nodeValue===t[1]?[s]:e:[]}},f.filter.ID=function(t,e){var i="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return 1===t.nodeType&&i&&i.nodeValue===e}),n.removeChild(t),n=t=null}(),function(){var t=N.createElement("div");t.appendChild(N.createComment("")),t.getElementsByTagName("*").length>0&&(f.find.TAG=function(t,e){var i=e.getElementsByTagName(t[1]);if("*"===t[1]){for(var n=[],s=0;i[s];s++)1===i[s].nodeType&&n.push(i[s]);i=n}return i}),t.innerHTML="<a href='#'></a>",t.firstChild&&"undefined"!=typeof t.firstChild.getAttribute&&"#"!==t.firstChild.getAttribute("href")&&(f.attrHandle.href=function(t){return t.getAttribute("href",2)}),t=null}(),N.querySelectorAll&&!function(){var t=d,e=N.createElement("div"),i="__sizzle__";if(e.innerHTML="<p class='TEST'></p>",!e.querySelectorAll||0!==e.querySelectorAll(".TEST").length){d=function(e,n,s,r){if(n=n||N,!r&&!d.isXML(n)){var o=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(e);if(o&&(1===n.nodeType||9===n.nodeType)){if(o[1])return y(n.getElementsByTagName(e),s);if(o[2]&&f.find.CLASS&&n.getElementsByClassName)return y(n.getElementsByClassName(o[2]),s)}if(9===n.nodeType){if("body"===e&&n.body)return y([n.body],s);if(o&&o[3]){var a=n.getElementById(o[3]);if(!a||!a.parentNode)return y([],s);if(a.id===o[3])return y([a],s)}try{return y(n.querySelectorAll(e),s)}catch(h){}}else if(1===n.nodeType&&"object"!==n.nodeName.toLowerCase()){var l=n,u=n.getAttribute("id"),c=u||i,p=n.parentNode,g=/^\s*[+~]/.test(e);u?c=c.replace(/'/g,"\\$&"):n.setAttribute("id",c),g&&p&&(n=n.parentNode);try{if(!g||p)return y(n.querySelectorAll("[id='"+c+"'] "+e),s)}catch(m){}finally{u||l.removeAttribute("id")}}}return t(e,n,s,r)};for(var n in t)d[n]=t[n];e=null}}(),function(){var t=N.documentElement,e=t.matchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.msMatchesSelector;if(e){var i=!e.call(N.createElement("div"),"div"),n=!1;try{e.call(N.documentElement,"[test!='']:sizzle")}catch(s){n=!0}d.matchesSelector=function(t,s){if(s=s.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!d.isXML(t))try{if(n||!f.match.PSEUDO.test(s)&&!/!=/.test(s)){var r=e.call(t,s);if(r||!i||t.document&&11!==t.document.nodeType)return r}}catch(o){}return d(s,null,null,[t]).length>0}}}(),function(){var t=N.createElement("div");t.innerHTML="<div class='test e'></div><div class='test'></div>",t.getElementsByClassName&&0!==t.getElementsByClassName("e").length&&(t.lastChild.className="e",1!==t.getElementsByClassName("e").length&&(f.order.splice(1,0,"CLASS"),f.find.CLASS=function(t,e,i){return"undefined"==typeof e.getElementsByClassName||i?void 0:e.getElementsByClassName(t[1])},t=null))}(),d.contains=N.documentElement.contains?function(t,e){return t!==e&&(t.contains?t.contains(e):!0)}:N.documentElement.compareDocumentPosition?function(t,e){return!!(16&t.compareDocumentPosition(e))}:function(){return!1},d.isXML=function(t){var e=(t?t.ownerDocument||t:0).documentElement;return e?"HTML"!==e.nodeName:!1};var V=function(t,e,i){for(var n,s=[],r="",o=e.nodeType?[e]:e;n=f.match.PSEUDO.exec(t);)r+=n[0],t=t.replace(f.match.PSEUDO,"");t=f.relative[t]?t+"*":t;for(var a=0,h=o.length;h>a;a++)d(t,o[a],s,i);return d.filter(r,s)};d.attr=$.attr,d.selectors.attrMap={},$.find=d,$.expr=d.selectors,$.expr[":"]=$.expr.filters,$.unique=d.uniqueSort,$.text=d.getText,$.isXMLDoc=d.isXML,$.contains=d.contains}();var ae=/Until$/,he=/^(?:parents|prevUntil|prevAll)/,le=/,/,ue=/^.[^:#\[\.,]*$/,ce=Array.prototype.slice,de=$.expr.match.globalPOS,pe={children:!0,contents:!0,next:!0,prev:!0};$.fn.extend({find:function(t){var e,i,n=this;if("string"!=typeof t)return $(t).filter(function(){for(e=0,i=n.length;i>e;e++)if($.contains(n[e],this))return!0});var s,r,o,a=this.pushStack("","find",t);for(e=0,i=this.length;i>e;e++)if(s=a.length,$.find(t,this[e],a),e>0)for(r=s;r<a.length;r++)for(o=0;s>o;o++)if(a[o]===a[r]){a.splice(r--,1);break}return a},has:function(t){var e=$(t);return this.filter(function(){for(var t=0,i=e.length;i>t;t++)if($.contains(this,e[t]))return!0})},not:function(t){return this.pushStack(l(this,t,!1),"not",t)},filter:function(t){return this.pushStack(l(this,t,!0),"filter",t)},is:function(t){return!!t&&("string"==typeof t?de.test(t)?$(t,this.context).index(this[0])>=0:$.filter(t,this).length>0:this.filter(t).length>0)},closest:function(t,e){var i,n,s=[],r=this[0];if($.isArray(t)){for(var o=1;r&&r.ownerDocument&&r!==e;){for(i=0;i<t.length;i++)$(r).is(t[i])&&s.push({selector:t[i],elem:r,level:o});r=r.parentNode,o++}return s}var a=de.test(t)||"string"!=typeof t?$(t,e||this.context):0;for(i=0,n=this.length;n>i;i++)for(r=this[i];r;){if(a?a.index(r)>-1:$.find.matchesSelector(r,t)){s.push(r);break}if(r=r.parentNode,!r||!r.ownerDocument||r===e||11===r.nodeType)break}return s=s.length>1?$.unique(s):s,this.pushStack(s,"closest",t)},index:function(t){return t?"string"==typeof t?$.inArray(this[0],$(t)):$.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(t,e){var i="string"==typeof t?$(t,e):$.makeArray(t&&t.nodeType?[t]:t),n=$.merge(this.get(),i);return this.pushStack(h(i[0])||h(n[0])?n:$.unique(n))},andSelf:function(){return this.add(this.prevObject)}}),$.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return $.dir(t,"parentNode")},parentsUntil:function(t,e,i){return $.dir(t,"parentNode",i)},next:function(t){return $.nth(t,2,"nextSibling")},prev:function(t){return $.nth(t,2,"previousSibling")},nextAll:function(t){return $.dir(t,"nextSibling")},prevAll:function(t){return $.dir(t,"previousSibling")},nextUntil:function(t,e,i){return $.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return $.dir(t,"previousSibling",i)},siblings:function(t){return $.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return $.sibling(t.firstChild)},contents:function(t){return $.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:$.makeArray(t.childNodes)}},function(t,e){$.fn[t]=function(i,n){var s=$.map(this,e,i);return ae.test(t)||(n=i),n&&"string"==typeof n&&(s=$.filter(n,s)),s=this.length>1&&!pe[t]?$.unique(s):s,(this.length>1||le.test(n))&&he.test(t)&&(s=s.reverse()),this.pushStack(s,t,ce.call(arguments).join(","))}}),$.extend({filter:function(t,e,i){return i&&(t=":not("+t+")"),1===e.length?$.find.matchesSelector(e[0],t)?[e[0]]:[]:$.find.matches(t,e)},dir:function(t,i,n){for(var s=[],r=t[i];r&&9!==r.nodeType&&(n===e||1!==r.nodeType||!$(r).is(n));)1===r.nodeType&&s.push(r),r=r[i];return s},nth:function(t,e,i){e=e||1;for(var n=0;t&&(1!==t.nodeType||++n!==e);t=t[i]);return t},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}});var fe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ge=/ jQuery\d+="(?:\d+|null)"/g,me=/^\s+/,ve=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ye=/<([\w:]+)/,we=/<tbody/i,be=/<|&#?\w+;/,xe=/<(?:script|style)/i,Ve=/<(?:script|object|embed|option|style)/i,Se=new RegExp("<(?:"+fe+")[\\s/>]","i"),De=/checked\s*(?:[^=]|=\s*.checked.)/i,Ce=/\/(java|ecma)script/i,_e=/^\s*<!(?:\[CDATA\[|\-\-)/,Te={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ae=u(N);Te.optgroup=Te.option,Te.tbody=Te.tfoot=Te.colgroup=Te.caption=Te.thead,Te.th=Te.td,$.support.htmlSerialize||(Te._default=[1,"div<div>","</div>"]),$.fn.extend({text:function(t){return $.access(this,function(t){return t===e?$.text(this):this.empty().append((this[0]&&this[0].ownerDocument||N).createTextNode(t))},null,t,arguments.length)},wrapAll:function(t){if($.isFunction(t))return this.each(function(e){$(this).wrapAll(t.call(this,e))});if(this[0]){var e=$(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return this.each($.isFunction(t)?function(e){$(this).wrapInner(t.call(this,e))}:function(){var e=$(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=$.isFunction(t);return this.each(function(i){$(this).wrapAll(e?t.call(this,i):t)
})},unwrap:function(){return this.parent().each(function(){$.nodeName(this,"body")||$(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(t){1===this.nodeType&&this.appendChild(t)})},prepend:function(){return this.domManip(arguments,!0,function(t){1===this.nodeType&&this.insertBefore(t,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(t){this.parentNode.insertBefore(t,this)});if(arguments.length){var t=$.clean(arguments);return t.push.apply(t,this.toArray()),this.pushStack(t,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(t){this.parentNode.insertBefore(t,this.nextSibling)});if(arguments.length){var t=this.pushStack(this,"after",arguments);return t.push.apply(t,$.clean(arguments)),t}},remove:function(t,e){for(var i,n=0;null!=(i=this[n]);n++)(!t||$.filter(t,[i]).length)&&(e||1!==i.nodeType||($.cleanData(i.getElementsByTagName("*")),$.cleanData([i])),i.parentNode&&i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)for(1===t.nodeType&&$.cleanData(t.getElementsByTagName("*"));t.firstChild;)t.removeChild(t.firstChild);return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return $.clone(this,t,e)})},html:function(t){return $.access(this,function(t){var i=this[0]||{},n=0,s=this.length;if(t===e)return 1===i.nodeType?i.innerHTML.replace(ge,""):null;if(!("string"!=typeof t||xe.test(t)||!$.support.leadingWhitespace&&me.test(t)||Te[(ye.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(ve,"<$1></$2>");try{for(;s>n;n++)i=this[n]||{},1===i.nodeType&&($.cleanData(i.getElementsByTagName("*")),i.innerHTML=t);i=0}catch(r){}}i&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(t){return this[0]&&this[0].parentNode?$.isFunction(t)?this.each(function(e){var i=$(this),n=i.html();i.replaceWith(t.call(this,e,n))}):("string"!=typeof t&&(t=$(t).detach()),this.each(function(){var e=this.nextSibling,i=this.parentNode;$(this).remove(),e?$(e).before(t):$(i).append(t)})):this.length?this.pushStack($($.isFunction(t)?t():t),"replaceWith",t):this},detach:function(t){return this.remove(t,!0)},domManip:function(t,i,n){var s,r,o,a,h=t[0],l=[];if(!$.support.checkClone&&3===arguments.length&&"string"==typeof h&&De.test(h))return this.each(function(){$(this).domManip(t,i,n,!0)});if($.isFunction(h))return this.each(function(s){var r=$(this);t[0]=h.call(this,s,i?r.html():e),r.domManip(t,i,n)});if(this[0]){if(a=h&&h.parentNode,s=$.support.parentNode&&a&&11===a.nodeType&&a.childNodes.length===this.length?{fragment:a}:$.buildFragment(t,this,l),o=s.fragment,r=1===o.childNodes.length?o=o.firstChild:o.firstChild){i=i&&$.nodeName(r,"tr");for(var u=0,d=this.length,p=d-1;d>u;u++)n.call(i?c(this[u],r):this[u],s.cacheable||d>1&&p>u?$.clone(o,!0,!0):o)}l.length&&$.each(l,function(t,e){e.src?$.ajax({type:"GET",global:!1,url:e.src,async:!1,dataType:"script"}):$.globalEval((e.text||e.textContent||e.innerHTML||"").replace(_e,"/*$0*/")),e.parentNode&&e.parentNode.removeChild(e)})}return this}}),$.buildFragment=function(t,e,i){var n,s,r,o,a=t[0];return e&&e[0]&&(o=e[0].ownerDocument||e[0]),o.createDocumentFragment||(o=N),!(1===t.length&&"string"==typeof a&&a.length<512&&o===N&&"<"===a.charAt(0))||Ve.test(a)||!$.support.checkClone&&De.test(a)||!$.support.html5Clone&&Se.test(a)||(s=!0,r=$.fragments[a],r&&1!==r&&(n=r)),n||(n=o.createDocumentFragment(),$.clean(t,o,n,i)),s&&($.fragments[a]=r?n:1),{fragment:n,cacheable:s}},$.fragments={},$.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){$.fn[t]=function(i){var n=[],s=$(i),r=1===this.length&&this[0].parentNode;if(r&&11===r.nodeType&&1===r.childNodes.length&&1===s.length)return s[e](this[0]),this;for(var o=0,a=s.length;a>o;o++){var h=(o>0?this.clone(!0):this).get();$(s[o])[e](h),n=n.concat(h)}return this.pushStack(n,t,s.selector)}}),$.extend({clone:function(t,e,i){var n,s,r,o=$.support.html5Clone||$.isXMLDoc(t)||!Se.test("<"+t.nodeName+">")?t.cloneNode(!0):v(t);if(!($.support.noCloneEvent&&$.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||$.isXMLDoc(t)))for(p(t,o),n=f(t),s=f(o),r=0;n[r];++r)s[r]&&p(n[r],s[r]);if(e&&(d(t,o),i))for(n=f(t),s=f(o),r=0;n[r];++r)d(n[r],s[r]);return n=s=null,o},clean:function(t,e,i,n){var s,r,o,a=[];e=e||N,"undefined"==typeof e.createElement&&(e=e.ownerDocument||e[0]&&e[0].ownerDocument||N);for(var h,l=0;null!=(h=t[l]);l++)if("number"==typeof h&&(h+=""),h){if("string"==typeof h)if(be.test(h)){h=h.replace(ve,"<$1></$2>");var c,d=(ye.exec(h)||["",""])[1].toLowerCase(),p=Te[d]||Te._default,f=p[0],g=e.createElement("div"),v=Ae.childNodes;for(e===N?Ae.appendChild(g):u(e).appendChild(g),g.innerHTML=p[1]+h+p[2];f--;)g=g.lastChild;if(!$.support.tbody){var y=we.test(h),w="table"!==d||y?"<table>"!==p[1]||y?[]:g.childNodes:g.firstChild&&g.firstChild.childNodes;for(o=w.length-1;o>=0;--o)$.nodeName(w[o],"tbody")&&!w[o].childNodes.length&&w[o].parentNode.removeChild(w[o])}!$.support.leadingWhitespace&&me.test(h)&&g.insertBefore(e.createTextNode(me.exec(h)[0]),g.firstChild),h=g.childNodes,g&&(g.parentNode.removeChild(g),v.length>0&&(c=v[v.length-1],c&&c.parentNode&&c.parentNode.removeChild(c)))}else h=e.createTextNode(h);var b;if(!$.support.appendChecked)if(h[0]&&"number"==typeof(b=h.length))for(o=0;b>o;o++)m(h[o]);else m(h);h.nodeType?a.push(h):a=$.merge(a,h)}if(i)for(s=function(t){return!t.type||Ce.test(t.type)},l=0;a[l];l++)if(r=a[l],n&&$.nodeName(r,"script")&&(!r.type||Ce.test(r.type)))n.push(r.parentNode?r.parentNode.removeChild(r):r);else{if(1===r.nodeType){var x=$.grep(r.getElementsByTagName("script"),s);a.splice.apply(a,[l+1,0].concat(x))}i.appendChild(r)}return a},cleanData:function(t){for(var e,i,n,s=$.cache,r=$.event.special,o=$.support.deleteExpando,a=0;null!=(n=t[a]);a++)if((!n.nodeName||!$.noData[n.nodeName.toLowerCase()])&&(i=n[$.expando])){if(e=s[i],e&&e.events){for(var h in e.events)r[h]?$.event.remove(n,h):$.removeEvent(n,h,e.handle);e.handle&&(e.handle.elem=null)}o?delete n[$.expando]:n.removeAttribute&&n.removeAttribute($.expando),delete s[i]}}});var ke,Pe,Ee,Ne=/alpha\([^)]*\)/i,Ge=/opacity=([^)]*)/,Ie=/([A-Z]|^ms)/g,$e=/^[\-+]?(?:\d*\.)?\d+$/i,Oe=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,Me=/^([\-+])=([\-+.\de]+)/,je=/^margin/,Le={position:"absolute",visibility:"hidden",display:"block"},He=["Top","Right","Bottom","Left"];$.fn.css=function(t,i){return $.access(this,function(t,i,n){return n!==e?$.style(t,i,n):$.css(t,i)},t,i,arguments.length>1)},$.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=ke(t,"opacity");return""===i?"1":i}return t.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":$.support.cssFloat?"cssFloat":"styleFloat"},style:function(t,i,n,s){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a=$.camelCase(i),h=t.style,l=$.cssHooks[a];if(i=$.cssProps[a]||a,n===e)return l&&"get"in l&&(r=l.get(t,!1,s))!==e?r:h[i];if(o=typeof n,"string"===o&&(r=Me.exec(n))&&(n=+(r[1]+1)*+r[2]+parseFloat($.css(t,i)),o="number"),!(null==n||"number"===o&&isNaN(n)||("number"!==o||$.cssNumber[a]||(n+="px"),l&&"set"in l&&(n=l.set(t,n))===e)))try{h[i]=n}catch(u){}}},css:function(t,i,n){var s,r;return i=$.camelCase(i),r=$.cssHooks[i],i=$.cssProps[i]||i,"cssFloat"===i&&(i="float"),r&&"get"in r&&(s=r.get(t,!0,n))!==e?s:ke?ke(t,i):void 0},swap:function(t,e,i){var n,s,r={};for(s in e)r[s]=t.style[s],t.style[s]=e[s];n=i.call(t);for(s in e)t.style[s]=r[s];return n}}),$.curCSS=$.css,N.defaultView&&N.defaultView.getComputedStyle&&(Pe=function(t,e){var i,n,s,r,o=t.style;return e=e.replace(Ie,"-$1").toLowerCase(),(n=t.ownerDocument.defaultView)&&(s=n.getComputedStyle(t,null))&&(i=s.getPropertyValue(e),""!==i||$.contains(t.ownerDocument.documentElement,t)||(i=$.style(t,e))),!$.support.pixelMargin&&s&&je.test(e)&&Oe.test(i)&&(r=o.width,o.width=i,i=s.width,o.width=r),i}),N.documentElement.currentStyle&&(Ee=function(t,e){var i,n,s,r=t.currentStyle&&t.currentStyle[e],o=t.style;return null==r&&o&&(s=o[e])&&(r=s),Oe.test(r)&&(i=o.left,n=t.runtimeStyle&&t.runtimeStyle.left,n&&(t.runtimeStyle.left=t.currentStyle.left),o.left="fontSize"===e?"1em":r,r=o.pixelLeft+"px",o.left=i,n&&(t.runtimeStyle.left=n)),""===r?"auto":r}),ke=Pe||Ee,$.each(["height","width"],function(t,e){$.cssHooks[e]={get:function(t,i,n){return i?0!==t.offsetWidth?y(t,e,n):$.swap(t,Le,function(){return y(t,e,n)}):void 0},set:function(t,e){return $e.test(e)?e+"px":e}}}),$.support.opacity||($.cssHooks.opacity={get:function(t,e){return Ge.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,s=$.isNumeric(e)?"alpha(opacity="+100*e+")":"",r=n&&n.filter||i.filter||"";i.zoom=1,e>=1&&""===$.trim(r.replace(Ne,""))&&(i.removeAttribute("filter"),n&&!n.filter)||(i.filter=Ne.test(r)?r.replace(Ne,s):r+" "+s)}}),$(function(){$.support.reliableMarginRight||($.cssHooks.marginRight={get:function(t,e){return $.swap(t,{display:"inline-block"},function(){return e?ke(t,"margin-right"):t.style.marginRight})}})}),$.expr&&$.expr.filters&&($.expr.filters.hidden=function(t){var e=t.offsetWidth,i=t.offsetHeight;return 0===e&&0===i||!$.support.reliableHiddenOffsets&&"none"===(t.style&&t.style.display||$.css(t,"display"))},$.expr.filters.visible=function(t){return!$.expr.filters.hidden(t)}),$.each({margin:"",padding:"",border:"Width"},function(t,e){$.cssHooks[t+e]={expand:function(i){var n,s="string"==typeof i?i.split(" "):[i],r={};for(n=0;4>n;n++)r[t+He[n]+e]=s[n]||s[n-2]||s[0];return r}}});var Re,Fe,ze=/%20/g,Be=/\[\]$/,We=/\r?\n/g,qe=/#.*$/,Ue=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Qe=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Xe=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Ye=/^(?:GET|HEAD)$/,Je=/^\/\//,Ze=/\?/,Ke=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ti=/^(?:select|textarea)/i,ei=/\s+/,ii=/([?&])_=[^&]*/,ni=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,si=$.fn.load,ri={},oi={},ai=["*/"]+["*"];try{Re=I.href}catch(hi){Re=N.createElement("a"),Re.href="",Re=Re.href}Fe=ni.exec(Re.toLowerCase())||[],$.fn.extend({load:function(t,i,n){if("string"!=typeof t&&si)return si.apply(this,arguments);if(!this.length)return this;var s=t.indexOf(" ");if(s>=0){var r=t.slice(s,t.length);t=t.slice(0,s)}var o="GET";i&&($.isFunction(i)?(n=i,i=e):"object"==typeof i&&(i=$.param(i,$.ajaxSettings.traditional),o="POST"));var a=this;return $.ajax({url:t,type:o,dataType:"html",data:i,complete:function(t,e,i){i=t.responseText,t.isResolved()&&(t.done(function(t){i=t}),a.html(r?$("<div>").append(i.replace(Ke,"")).find(r):i)),n&&a.each(n,[i,e,t])}}),this},serialize:function(){return $.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?$.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ti.test(this.nodeName)||Qe.test(this.type))}).map(function(t,e){var i=$(this).val();return null==i?null:$.isArray(i)?$.map(i,function(t){return{name:e.name,value:t.replace(We,"\r\n")}}):{name:e.name,value:i.replace(We,"\r\n")}}).get()}}),$.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(t,e){$.fn[e]=function(t){return this.on(e,t)}}),$.each(["get","post"],function(t,i){$[i]=function(t,n,s,r){return $.isFunction(n)&&(r=r||s,s=n,n=e),$.ajax({type:i,url:t,data:n,success:s,dataType:r})}}),$.extend({getScript:function(t,i){return $.get(t,e,i,"script")},getJSON:function(t,e,i){return $.get(t,e,i,"json")},ajaxSetup:function(t,e){return e?x(t,$.ajaxSettings):(e=t,t=$.ajaxSettings),x(t,e),t},ajaxSettings:{url:Re,isLocal:Xe.test(Fe[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":ai},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":t.String,"text html":!0,"text json":$.parseJSON,"text xml":$.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:w(ri),ajaxTransport:w(oi),ajax:function(t,i){function n(t,i,n,o){if(2!==x){x=2,h&&clearTimeout(h),a=e,r=o||"",V.readyState=t>0?4:0;var l,c,y,w,b,C=i,_=n?S(d,V,n):e;if(t>=200&&300>t||304===t)if(d.ifModified&&((w=V.getResponseHeader("Last-Modified"))&&($.lastModified[s]=w),(b=V.getResponseHeader("Etag"))&&($.etag[s]=b)),304===t)C="notmodified",l=!0;else try{c=D(d,_),C="success",l=!0}catch(T){C="parsererror",y=T}else y=C,(!C||t)&&(C="error",0>t&&(t=0));V.status=t,V.statusText=""+(i||C),l?g.resolveWith(p,[c,C,V]):g.rejectWith(p,[V,C,y]),V.statusCode(v),v=e,u&&f.trigger("ajax"+(l?"Success":"Error"),[V,d,l?c:y]),m.fireWith(p,[V,C]),u&&(f.trigger("ajaxComplete",[V,d]),--$.active||$.event.trigger("ajaxStop"))}}"object"==typeof t&&(i=t,t=e),i=i||{};var s,r,o,a,h,l,u,c,d=$.ajaxSetup({},i),p=d.context||d,f=p!==d&&(p.nodeType||p instanceof $)?$(p):$.event,g=$.Deferred(),m=$.Callbacks("once memory"),v=d.statusCode||{},y={},w={},x=0,V={readyState:0,setRequestHeader:function(t,e){if(!x){var i=t.toLowerCase();t=w[i]=w[i]||t,y[t]=e}return this},getAllResponseHeaders:function(){return 2===x?r:null},getResponseHeader:function(t){var i;if(2===x){if(!o)for(o={};i=Ue.exec(r);)o[i[1].toLowerCase()]=i[2];i=o[t.toLowerCase()]}return i===e?null:i},overrideMimeType:function(t){return x||(d.mimeType=t),this},abort:function(t){return t=t||"abort",a&&a.abort(t),n(0,t),this}};if(g.promise(V),V.success=V.done,V.error=V.fail,V.complete=m.add,V.statusCode=function(t){if(t){var e;if(2>x)for(e in t)v[e]=[v[e],t[e]];else e=t[V.status],V.then(e,e)}return this},d.url=((t||d.url)+"").replace(qe,"").replace(Je,Fe[1]+"//"),d.dataTypes=$.trim(d.dataType||"*").toLowerCase().split(ei),null==d.crossDomain&&(l=ni.exec(d.url.toLowerCase()),d.crossDomain=!(!l||l[1]==Fe[1]&&l[2]==Fe[2]&&(l[3]||("http:"===l[1]?80:443))==(Fe[3]||("http:"===Fe[1]?80:443)))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=$.param(d.data,d.traditional)),b(ri,d,i,V),2===x)return!1;if(u=d.global,d.type=d.type.toUpperCase(),d.hasContent=!Ye.test(d.type),u&&0===$.active++&&$.event.trigger("ajaxStart"),!d.hasContent&&(d.data&&(d.url+=(Ze.test(d.url)?"&":"?")+d.data,delete d.data),s=d.url,d.cache===!1)){var C=$.now(),_=d.url.replace(ii,"$1_="+C);d.url=_+(_===d.url?(Ze.test(d.url)?"&":"?")+"_="+C:"")}(d.data&&d.hasContent&&d.contentType!==!1||i.contentType)&&V.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(s=s||d.url,$.lastModified[s]&&V.setRequestHeader("If-Modified-Since",$.lastModified[s]),$.etag[s]&&V.setRequestHeader("If-None-Match",$.etag[s])),V.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+ai+"; q=0.01":""):d.accepts["*"]);for(c in d.headers)V.setRequestHeader(c,d.headers[c]);if(d.beforeSend&&(d.beforeSend.call(p,V,d)===!1||2===x))return V.abort(),!1;for(c in{success:1,error:1,complete:1})V[c](d[c]);if(a=b(oi,d,i,V)){V.readyState=1,u&&f.trigger("ajaxSend",[V,d]),d.async&&d.timeout>0&&(h=setTimeout(function(){V.abort("timeout")},d.timeout));try{x=1,a.send(y,n)}catch(T){if(!(2>x))throw T;n(-1,T)}}else n(-1,"No Transport");return V},param:function(t,i){var n=[],s=function(t,e){e=$.isFunction(e)?e():e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(i===e&&(i=$.ajaxSettings.traditional),$.isArray(t)||t.jquery&&!$.isPlainObject(t))$.each(t,function(){s(this.name,this.value)});else for(var r in t)V(r,t[r],i,s);return n.join("&").replace(ze,"+")}}),$.extend({active:0,lastModified:{},etag:{}});var li=$.now(),ui=/(\=)\?(&|$)|\?\?/i;$.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return $.expando+"_"+li++}}),$.ajaxPrefilter("json jsonp",function(e,i,n){var s="string"==typeof e.data&&/^application\/x\-www\-form\-urlencoded/.test(e.contentType);if("jsonp"===e.dataTypes[0]||e.jsonp!==!1&&(ui.test(e.url)||s&&ui.test(e.data))){var r,o=e.jsonpCallback=$.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a=t[o],h=e.url,l=e.data,u="$1"+o+"$2";return e.jsonp!==!1&&(h=h.replace(ui,u),e.url===h&&(s&&(l=l.replace(ui,u)),e.data===l&&(h+=(/\?/.test(h)?"&":"?")+e.jsonp+"="+o))),e.url=h,e.data=l,t[o]=function(t){r=[t]},n.always(function(){t[o]=a,r&&$.isFunction(a)&&t[o](r[0])}),e.converters["script json"]=function(){return r||$.error(o+" was not called"),r[0]},e.dataTypes[0]="json","script"}}),$.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(t){return $.globalEval(t),t}}}),$.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),$.ajaxTransport("script",function(t){if(t.crossDomain){var i,n=N.head||N.getElementsByTagName("head")[0]||N.documentElement;return{send:function(s,r){i=N.createElement("script"),i.async="async",t.scriptCharset&&(i.charset=t.scriptCharset),i.src=t.url,i.onload=i.onreadystatechange=function(t,s){(s||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,n&&i.parentNode&&n.removeChild(i),i=e,s||r(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(0,1)}}}});var ci,di=t.ActiveXObject?function(){for(var t in ci)ci[t](0,1)}:!1,pi=0;$.ajaxSettings.xhr=t.ActiveXObject?function(){return!this.isLocal&&C()||_()}:C,function(t){$.extend($.support,{ajax:!!t,cors:!!t&&"withCredentials"in t})}($.ajaxSettings.xhr()),$.support.ajax&&$.ajaxTransport(function(i){if(!i.crossDomain||$.support.cors){var n;return{send:function(s,r){var o,a,h=i.xhr();if(i.username?h.open(i.type,i.url,i.async,i.username,i.password):h.open(i.type,i.url,i.async),i.xhrFields)for(a in i.xhrFields)h[a]=i.xhrFields[a];i.mimeType&&h.overrideMimeType&&h.overrideMimeType(i.mimeType),i.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");try{for(a in s)h.setRequestHeader(a,s[a])}catch(l){}h.send(i.hasContent&&i.data||null),n=function(t,s){var a,l,u,c,d;try{if(n&&(s||4===h.readyState))if(n=e,o&&(h.onreadystatechange=$.noop,di&&delete ci[o]),s)4!==h.readyState&&h.abort();else{a=h.status,u=h.getAllResponseHeaders(),c={},d=h.responseXML,d&&d.documentElement&&(c.xml=d);try{c.text=h.responseText}catch(t){}try{l=h.statusText}catch(p){l=""}a||!i.isLocal||i.crossDomain?1223===a&&(a=204):a=c.text?200:404}}catch(f){s||r(-1,f)}c&&r(a,l,c,u)},i.async&&4!==h.readyState?(o=++pi,di&&(ci||(ci={},$(t).unload(di)),ci[o]=n),h.onreadystatechange=n):n()},abort:function(){n&&n(0,1)}}}});var fi,gi,mi,vi,yi={},wi=/^(?:toggle|show|hide)$/,bi=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,xi=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];$.fn.extend({show:function(t,e,i){var n,s;if(t||0===t)return this.animate(k("show",3),t,e,i);for(var r=0,o=this.length;o>r;r++)n=this[r],n.style&&(s=n.style.display,$._data(n,"olddisplay")||"none"!==s||(s=n.style.display=""),(""===s&&"none"===$.css(n,"display")||!$.contains(n.ownerDocument.documentElement,n))&&$._data(n,"olddisplay",P(n.nodeName)));for(r=0;o>r;r++)n=this[r],n.style&&(s=n.style.display,(""===s||"none"===s)&&(n.style.display=$._data(n,"olddisplay")||""));return this},hide:function(t,e,i){if(t||0===t)return this.animate(k("hide",3),t,e,i);for(var n,s,r=0,o=this.length;o>r;r++)n=this[r],n.style&&(s=$.css(n,"display"),"none"===s||$._data(n,"olddisplay")||$._data(n,"olddisplay",s));for(r=0;o>r;r++)this[r].style&&(this[r].style.display="none");return this},_toggle:$.fn.toggle,toggle:function(t,e,i){var n="boolean"==typeof t;return $.isFunction(t)&&$.isFunction(e)?this._toggle.apply(this,arguments):null==t||n?this.each(function(){var e=n?t:$(this).is(":hidden");$(this)[e?"show":"hide"]()}):this.animate(k("toggle",3),t,e,i),this},fadeTo:function(t,e,i,n){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){function s(){r.queue===!1&&$._mark(this);var e,i,n,s,o,a,h,l,u,c,d,p=$.extend({},r),f=1===this.nodeType,g=f&&$(this).is(":hidden");p.animatedProperties={};for(n in t)if(e=$.camelCase(n),n!==e&&(t[e]=t[n],delete t[n]),(o=$.cssHooks[e])&&"expand"in o){a=o.expand(t[e]),delete t[e];for(n in a)n in t||(t[n]=a[n])}for(e in t){if(i=t[e],$.isArray(i)?(p.animatedProperties[e]=i[1],i=t[e]=i[0]):p.animatedProperties[e]=p.specialEasing&&p.specialEasing[e]||p.easing||"swing","hide"===i&&g||"show"===i&&!g)return p.complete.call(this);!f||"height"!==e&&"width"!==e||(p.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===$.css(this,"display")&&"none"===$.css(this,"float")&&($.support.inlineBlockNeedsLayout&&"inline"!==P(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=p.overflow&&(this.style.overflow="hidden");for(n in t)s=new $.fx(this,p,n),i=t[n],wi.test(i)?(d=$._data(this,"toggle"+n)||("toggle"===i?g?"show":"hide":0),d?($._data(this,"toggle"+n,"show"===d?"hide":"show"),s[d]()):s[i]()):(h=bi.exec(i),l=s.cur(),h?(u=parseFloat(h[2]),c=h[3]||($.cssNumber[n]?"":"px"),"px"!==c&&($.style(this,n,(u||1)+c),l=(u||1)/s.cur()*l,$.style(this,n,l+c)),h[1]&&(u=("-="===h[1]?-1:1)*u+l),s.custom(l,u,c)):s.custom(l,i,""));return!0}var r=$.speed(e,i,n);return $.isEmptyObject(t)?this.each(r.complete,[!1]):(t=$.extend({},t),r.queue===!1?this.each(s):this.queue(r.queue,s))},stop:function(t,i,n){return"string"!=typeof t&&(n=i,i=t,t=e),i&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){function e(t,e,i){var s=e[i];$.removeData(t,i,!0),s.stop(n)}var i,s=!1,r=$.timers,o=$._data(this);if(n||$._unmark(!0,this),null==t)for(i in o)o[i]&&o[i].stop&&i.indexOf(".run")===i.length-4&&e(this,o,i);else o[i=t+".run"]&&o[i].stop&&e(this,o,i);for(i=r.length;i--;)r[i].elem!==this||null!=t&&r[i].queue!==t||(n?r[i](!0):r[i].saveState(),s=!0,r.splice(i,1));n&&s||$.dequeue(this,t)})}}),$.each({slideDown:k("show",1),slideUp:k("hide",1),slideToggle:k("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){$.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),$.extend({speed:function(t,e,i){var n=t&&"object"==typeof t?$.extend({},t):{complete:i||!i&&e||$.isFunction(t)&&t,duration:t,easing:i&&e||e&&!$.isFunction(e)&&e};return n.duration=$.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in $.fx.speeds?$.fx.speeds[n.duration]:$.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(t){$.isFunction(n.old)&&n.old.call(this),n.queue?$.dequeue(this,n.queue):t!==!1&&$._unmark(this)},n},easing:{linear:function(t){return t},swing:function(t){return-Math.cos(t*Math.PI)/2+.5}},timers:[],fx:function(t,e,i){this.options=e,this.elem=t,this.prop=i,e.orig=e.orig||{}}}),$.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),($.fx.step[this.prop]||$.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var t,e=$.css(this.elem,this.prop);return isNaN(t=parseFloat(e))?e&&"auto"!==e?e:0:t},custom:function(t,i,n){function s(t){return r.step(t)}var r=this,o=$.fx;this.startTime=vi||T(),this.end=i,this.now=this.start=t,this.pos=this.state=0,this.unit=n||this.unit||($.cssNumber[this.prop]?"":"px"),s.queue=this.options.queue,s.elem=this.elem,s.saveState=function(){$._data(r.elem,"fxshow"+r.prop)===e&&(r.options.hide?$._data(r.elem,"fxshow"+r.prop,r.start):r.options.show&&$._data(r.elem,"fxshow"+r.prop,r.end))},s()&&$.timers.push(s)&&!mi&&(mi=setInterval(o.tick,o.interval))},show:function(){var t=$._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=t||$.style(this.elem,this.prop),this.options.show=!0,t!==e?this.custom(this.cur(),t):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),$(this.elem).show()},hide:function(){this.options.orig[this.prop]=$._data(this.elem,"fxshow"+this.prop)||$.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(t){var e,i,n,s=vi||T(),r=!0,o=this.elem,a=this.options;if(t||s>=a.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0;for(e in a.animatedProperties)a.animatedProperties[e]!==!0&&(r=!1);if(r){if(null==a.overflow||$.support.shrinkWrapBlocks||$.each(["","X","Y"],function(t,e){o.style["overflow"+e]=a.overflow[t]}),a.hide&&$(o).hide(),a.hide||a.show)for(e in a.animatedProperties)$.style(o,e,a.orig[e]),$.removeData(o,"fxshow"+e,!0),$.removeData(o,"toggle"+e,!0);n=a.complete,n&&(a.complete=!1,n.call(o))}return!1}return 1/0==a.duration?this.now=s:(i=s-this.startTime,this.state=i/a.duration,this.pos=$.easing[a.animatedProperties[this.prop]](this.state,i,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},$.extend($.fx,{tick:function(){for(var t,e=$.timers,i=0;i<e.length;i++)t=e[i],t()||e[i]!==t||e.splice(i--,1);e.length||$.fx.stop()},interval:13,stop:function(){clearInterval(mi),mi=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(t){$.style(t.elem,"opacity",t.now)},_default:function(t){t.elem.style&&null!=t.elem.style[t.prop]?t.elem.style[t.prop]=t.now+t.unit:t.elem[t.prop]=t.now}}}),$.each(xi.concat.apply([],xi),function(t,e){e.indexOf("margin")&&($.fx.step[e]=function(t){$.style(t.elem,e,Math.max(0,t.now)+t.unit)})}),$.expr&&$.expr.filters&&($.expr.filters.animated=function(t){return $.grep($.timers,function(e){return t===e.elem}).length});var Vi,Si=/^t(?:able|d|h)$/i,Di=/^(?:body|html)$/i;Vi="getBoundingClientRect"in N.documentElement?function(t,e,i,n){try{n=t.getBoundingClientRect()}catch(s){}if(!n||!$.contains(i,t))return n?{top:n.top,left:n.left}:{top:0,left:0};var r=e.body,o=E(e),a=i.clientTop||r.clientTop||0,h=i.clientLeft||r.clientLeft||0,l=o.pageYOffset||$.support.boxModel&&i.scrollTop||r.scrollTop,u=o.pageXOffset||$.support.boxModel&&i.scrollLeft||r.scrollLeft,c=n.top+l-a,d=n.left+u-h;return{top:c,left:d}}:function(t,e,i){for(var n,s=t.offsetParent,r=t,o=e.body,a=e.defaultView,h=a?a.getComputedStyle(t,null):t.currentStyle,l=t.offsetTop,u=t.offsetLeft;(t=t.parentNode)&&t!==o&&t!==i&&(!$.support.fixedPosition||"fixed"!==h.position);)n=a?a.getComputedStyle(t,null):t.currentStyle,l-=t.scrollTop,u-=t.scrollLeft,t===s&&(l+=t.offsetTop,u+=t.offsetLeft,!$.support.doesNotAddBorder||$.support.doesAddBorderForTableAndCells&&Si.test(t.nodeName)||(l+=parseFloat(n.borderTopWidth)||0,u+=parseFloat(n.borderLeftWidth)||0),r=s,s=t.offsetParent),$.support.subtractsBorderForOverflowNotVisible&&"visible"!==n.overflow&&(l+=parseFloat(n.borderTopWidth)||0,u+=parseFloat(n.borderLeftWidth)||0),h=n;return("relative"===h.position||"static"===h.position)&&(l+=o.offsetTop,u+=o.offsetLeft),$.support.fixedPosition&&"fixed"===h.position&&(l+=Math.max(i.scrollTop,o.scrollTop),u+=Math.max(i.scrollLeft,o.scrollLeft)),{top:l,left:u}},$.fn.offset=function(t){if(arguments.length)return t===e?this:this.each(function(e){$.offset.setOffset(this,t,e)});var i=this[0],n=i&&i.ownerDocument;return n?i===n.body?$.offset.bodyOffset(i):Vi(i,n,n.documentElement):null},$.offset={bodyOffset:function(t){var e=t.offsetTop,i=t.offsetLeft;return $.support.doesNotIncludeMarginInBodyOffset&&(e+=parseFloat($.css(t,"marginTop"))||0,i+=parseFloat($.css(t,"marginLeft"))||0),{top:e,left:i}},setOffset:function(t,e,i){var n=$.css(t,"position");"static"===n&&(t.style.position="relative");var s,r,o=$(t),a=o.offset(),h=$.css(t,"top"),l=$.css(t,"left"),u=("absolute"===n||"fixed"===n)&&$.inArray("auto",[h,l])>-1,c={},d={};u?(d=o.position(),s=d.top,r=d.left):(s=parseFloat(h)||0,r=parseFloat(l)||0),$.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(c.top=e.top-a.top+s),null!=e.left&&(c.left=e.left-a.left+r),"using"in e?e.using.call(t,c):o.css(c)}},$.fn.extend({position:function(){if(!this[0])return null;var t=this[0],e=this.offsetParent(),i=this.offset(),n=Di.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat($.css(t,"marginTop"))||0,i.left-=parseFloat($.css(t,"marginLeft"))||0,n.top+=parseFloat($.css(e[0],"borderTopWidth"))||0,n.left+=parseFloat($.css(e[0],"borderLeftWidth"))||0,{top:i.top-n.top,left:i.left-n.left}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||N.body;t&&!Di.test(t.nodeName)&&"static"===$.css(t,"position");)t=t.offsetParent;return t})}}),$.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var n=/Y/.test(i);$.fn[t]=function(s){return $.access(this,function(t,s,r){var o=E(t);return r===e?o?i in o?o[i]:$.support.boxModel&&o.document.documentElement[s]||o.document.body[s]:t[s]:void(o?o.scrollTo(n?$(o).scrollLeft():r,n?r:$(o).scrollTop()):t[s]=r)},t,s,arguments.length,null)}}),$.each({Height:"height",Width:"width"},function(t,i){var n="client"+t,s="scroll"+t,r="offset"+t;$.fn["inner"+t]=function(){var t=this[0];return t?t.style?parseFloat($.css(t,i,"padding")):this[i]():null},$.fn["outer"+t]=function(t){var e=this[0];return e?e.style?parseFloat($.css(e,i,t?"margin":"border")):this[i]():null},$.fn[i]=function(t){return $.access(this,function(t,i,o){var a,h,l,u;return $.isWindow(t)?(a=t.document,h=a.documentElement[n],$.support.boxModel&&h||a.body&&a.body[n]||h):9===t.nodeType?(a=t.documentElement,a[n]>=a[s]?a[n]:Math.max(t.body[s],a[s],t.body[r],a[r])):o===e?(l=$.css(t,i),u=parseFloat(l),$.isNumeric(u)?u:l):void $(t).css(i,o)},i,t,arguments.length,null)}}),t.jQuery=t.$=$,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return $})}(window),!function(t){"use strict";t(function(){t.support.transition=function(){var t=function(){var t,e=document.createElement("bootstrap"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(t in i)if(void 0!==e.style[t])return i[t]}();return t&&{end:t}}()})}(window.jQuery),!function(t){"use strict";var e='[data-dismiss="alert"]',i=function(i){t(i).on("click",e,this.close)};i.prototype.close=function(e){function i(){n.trigger("closed").remove()}var n,s=t(this),r=s.attr("data-target");r||(r=s.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),n=t(r),e&&e.preventDefault(),n.length||(n=s.hasClass("alert")?s:s.parent()),n.trigger(e=t.Event("close")),e.isDefaultPrevented()||(n.removeClass("in"),t.support.transition&&n.hasClass("fade")?n.on(t.support.transition.end,i):i())};var n=t.fn.alert;t.fn.alert=function(e){return this.each(function(){var n=t(this),s=n.data("alert");s||n.data("alert",s=new i(this)),"string"==typeof e&&s[e].call(n)})},t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=n,this},t(document).on("click.alert.data-api",e,i.prototype.close)}(window.jQuery),!function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.button.defaults,i)};e.prototype.setState=function(t){var e="disabled",i=this.$element,n=i.data(),s=i.is("input")?"val":"html";t+="Text",n.resetText||i.data("resetText",i[s]()),i[s](n[t]||this.options[t]),setTimeout(function(){"loadingText"==t?i.addClass(e).attr(e,e):i.removeClass(e).removeAttr(e)},0)},e.prototype.toggle=function(){var t=this.$element.closest('[data-toggle="buttons-radio"]');t&&t.find(".active").removeClass("active"),this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=function(i){return this.each(function(){var n=t(this),s=n.data("button"),r="object"==typeof i&&i;s||n.data("button",s=new e(this,r)),"toggle"==i?s.toggle():i&&s.setState(i)})},t.fn.button.defaults={loadingText:"loading..."},t.fn.button.Constructor=e,t.fn.button.noConflict=function(){return t.fn.button=i,this
},t(document).on("click.button.data-api","[data-toggle^=button]",function(e){var i=t(e.target);i.hasClass("btn")||(i=i.closest(".btn")),i.button("toggle")})}(window.jQuery),!function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=i,"hover"==this.options.pause&&this.$element.on("mouseenter",t.proxy(this.pause,this)).on("mouseleave",t.proxy(this.cycle,this))};e.prototype={cycle:function(e){return e||(this.paused=!1),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},to:function(e){var i=this.$element.find(".item.active"),n=i.parent().children(),s=n.index(i),r=this;if(!(e>n.length-1||0>e))return this.sliding?this.$element.one("slid",function(){r.to(e)}):s==e?this.pause().cycle():this.slide(e>s?"next":"prev",t(n[e]))},pause:function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition.end&&(this.$element.trigger(t.support.transition.end),this.cycle()),clearInterval(this.interval),this.interval=null,this},next:function(){return this.sliding?void 0:this.slide("next")},prev:function(){return this.sliding?void 0:this.slide("prev")},slide:function(e,i){var n,s=this.$element.find(".item.active"),r=i||s[e](),o=this.interval,a="next"==e?"left":"right",h="next"==e?"first":"last",l=this;if(this.sliding=!0,o&&this.pause(),r=r.length?r:this.$element.find(".item")[h](),n=t.Event("slide",{relatedTarget:r[0]}),!r.hasClass("active")){if(t.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(n),n.isDefaultPrevented())return;r.addClass(e),r[0].offsetWidth,s.addClass(a),r.addClass(a),this.$element.one(t.support.transition.end,function(){r.removeClass([e,a].join(" ")).addClass("active"),s.removeClass(["active",a].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger("slid")},0)})}else{if(this.$element.trigger(n),n.isDefaultPrevented())return;s.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return o&&this.cycle(),this}}};var i=t.fn.carousel;t.fn.carousel=function(i){return this.each(function(){var n=t(this),s=n.data("carousel"),r=t.extend({},t.fn.carousel.defaults,"object"==typeof i&&i),o="string"==typeof i?i:r.slide;s||n.data("carousel",s=new e(this,r)),"number"==typeof i?s.to(i):o?s[o]():r.interval&&s.cycle()})},t.fn.carousel.defaults={interval:5e3,pause:"hover"},t.fn.carousel.Constructor=e,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this},t(document).on("click.carousel.data-api","[data-slide]",function(e){var i,n=t(this),s=t(n.attr("data-target")||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")),r=t.extend({},s.data(),n.data());s.carousel(r),e.preventDefault()})}(window.jQuery),!function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.collapse.defaults,i),this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};e.prototype={constructor:e,dimension:function(){var t=this.$element.hasClass("width");return t?"width":"height"},show:function(){var e,i,n,s;if(!this.transitioning){if(e=this.dimension(),i=t.camelCase(["scroll",e].join("-")),n=this.$parent&&this.$parent.find("> .accordion-group > .in"),n&&n.length){if(s=n.data("collapse"),s&&s.transitioning)return;n.collapse("hide"),s||n.data("collapse",null)}this.$element[e](0),this.transition("addClass",t.Event("show"),"shown"),t.support.transition&&this.$element[e](this.$element[0][i])}},hide:function(){var e;this.transitioning||(e=this.dimension(),this.reset(this.$element[e]()),this.transition("removeClass",t.Event("hide"),"hidden"),this.$element[e](0))},reset:function(t){var e=this.dimension();return this.$element.removeClass("collapse")[e](t||"auto")[0].offsetWidth,this.$element[null!==t?"addClass":"removeClass"]("collapse"),this},transition:function(e,i,n){var s=this,r=function(){"show"==i.type&&s.reset(),s.transitioning=0,s.$element.trigger(n)};this.$element.trigger(i),i.isDefaultPrevented()||(this.transitioning=1,this.$element[e]("in"),t.support.transition&&this.$element.hasClass("collapse")?this.$element.one(t.support.transition.end,r):r())},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var i=t.fn.collapse;t.fn.collapse=function(i){return this.each(function(){var n=t(this),s=n.data("collapse"),r="object"==typeof i&&i;s||n.data("collapse",s=new e(this,r)),"string"==typeof i&&s[i]()})},t.fn.collapse.defaults={toggle:!0},t.fn.collapse.Constructor=e,t.fn.collapse.noConflict=function(){return t.fn.collapse=i,this},t(document).on("click.collapse.data-api","[data-toggle=collapse]",function(e){var i,n=t(this),s=n.attr("data-target")||e.preventDefault()||(i=n.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),r=t(s).data("collapse")?"toggle":n.data();n[t(s).hasClass("in")?"addClass":"removeClass"]("collapsed"),t(s).collapse(r)})}(window.jQuery),!function(t){"use strict";function e(){t(n).each(function(){i(t(this)).removeClass("open")})}function i(e){var i,n=e.attr("data-target");return n||(n=e.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),i=t(n),i.length||(i=e.parent()),i}var n="[data-toggle=dropdown]",s=function(e){var i=t(e).on("click.dropdown.data-api",this.toggle);t("html").on("click.dropdown.data-api",function(){i.parent().removeClass("open")})};s.prototype={constructor:s,toggle:function(){var n,s,r=t(this);if(!r.is(".disabled, :disabled"))return n=i(r),s=n.hasClass("open"),e(),s||n.toggleClass("open"),r.focus(),!1},keydown:function(e){var n,s,r,o,a;if(/(38|40|27)/.test(e.keyCode)&&(n=t(this),e.preventDefault(),e.stopPropagation(),!n.is(".disabled, :disabled"))){if(r=i(n),o=r.hasClass("open"),!o||o&&27==e.keyCode)return n.click();s=t("[role=menu] li:not(.divider):visible a",r),s.length&&(a=s.index(s.filter(":focus")),38==e.keyCode&&a>0&&a--,40==e.keyCode&&a<s.length-1&&a++,~a||(a=0),s.eq(a).focus())}}};var r=t.fn.dropdown;t.fn.dropdown=function(e){return this.each(function(){var i=t(this),n=i.data("dropdown");n||i.data("dropdown",n=new s(this)),"string"==typeof e&&n[e].call(i)})},t.fn.dropdown.Constructor=s,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.dropdown.data-api touchstart.dropdown.data-api",e).on("click.dropdown touchstart.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("touchstart.dropdown.data-api",".dropdown-menu",function(t){t.stopPropagation()}).on("click.dropdown.data-api touchstart.dropdown.data-api",n,s.prototype.toggle).on("keydown.dropdown.data-api touchstart.dropdown.data-api",n+", [role=menu]",s.prototype.keydown)}(window.jQuery),!function(t){"use strict";var e=function(e,i){this.options=i,this.$element=t(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",t.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};e.prototype={constructor:e,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var e=this,i=t.Event("show");this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.backdrop(function(){var i=t.support.transition&&e.$element.hasClass("fade");e.$element.parent().length||e.$element.appendTo(document.body),e.$element.show(),i&&e.$element[0].offsetWidth,e.$element.addClass("in").attr("aria-hidden",!1),e.enforceFocus(),i?e.$element.one(t.support.transition.end,function(){e.$element.focus().trigger("shown")}):e.$element.focus().trigger("shown")}))},hide:function(e){e&&e.preventDefault();e=t.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),t(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),t.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var e=this;t(document).on("focusin.modal",function(t){e.$element[0]===t.target||e.$element.has(t.target).length||e.$element.focus()})},escape:function(){var t=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var e=this,i=setTimeout(function(){e.$element.off(t.support.transition.end),e.hideModal()},500);this.$element.one(t.support.transition.end,function(){clearTimeout(i),e.hideModal()})},hideModal:function(){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(e){var i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=t.support.transition&&i;this.$backdrop=t('<div class="modal-backdrop '+i+'" />').appendTo(document.body),this.$backdrop.click("static"==this.options.backdrop?t.proxy(this.$element[0].focus,this.$element[0]):t.proxy(this.hide,this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),n?this.$backdrop.one(t.support.transition.end,e):e()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(t.support.transition.end,t.proxy(this.removeBackdrop,this)):this.removeBackdrop()):e&&e()}};var i=t.fn.modal;t.fn.modal=function(i){return this.each(function(){var n=t(this),s=n.data("modal"),r=t.extend({},t.fn.modal.defaults,n.data(),"object"==typeof i&&i);s||n.data("modal",s=new e(this,r)),"string"==typeof i?s[i]():r.show&&s.show()})},t.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},t.fn.modal.Constructor=e,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var i=t(this),n=i.attr("href"),s=t(i.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),r=s.data("modal")?"toggle":t.extend({remote:!/#/.test(n)&&n},s.data(),i.data());e.preventDefault(),s.modal(r).one("hide",function(){i.focus()})})}(window.jQuery),!function(t){"use strict";var e=function(t,e){this.init("tooltip",t,e)};e.prototype={constructor:e,init:function(e,i,n){var s,r;this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.enabled=!0,"click"==this.options.trigger?this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this)):"manual"!=this.options.trigger&&(s="hover"==this.options.trigger?"mouseenter":"focus",r="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.leave,this))),this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(e){return e=t.extend({},t.fn[this.type].defaults,e,this.$element.data()),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},enter:function(e){var i=t(e.currentTarget)[this.type](this._options).data(this.type);return i.options.delay&&i.options.delay.show?(clearTimeout(this.timeout),i.hoverState="in",void(this.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show))):i.show()},leave:function(e){var i=t(e.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),i.options.delay&&i.options.delay.hide?(i.hoverState="out",void(this.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide))):i.hide()},show:function(){var t,e,i,n,s,r,o;if(this.hasContent()&&this.enabled){switch(t=this.tip(),this.setContent(),this.options.animation&&t.addClass("fade"),r="function"==typeof this.options.placement?this.options.placement.call(this,t[0],this.$element[0]):this.options.placement,e=/in/.test(r),t.detach().css({top:0,left:0,display:"block"}).insertAfter(this.$element),i=this.getPosition(e),n=t[0].offsetWidth,s=t[0].offsetHeight,e?r.split(" ")[1]:r){case"bottom":o={top:i.top+i.height,left:i.left+i.width/2-n/2};break;case"top":o={top:i.top-s,left:i.left+i.width/2-n/2};break;case"left":o={top:i.top+i.height/2-s/2,left:i.left-n};break;case"right":o={top:i.top+i.height/2-s/2,left:i.left+i.width}}t.offset(o).addClass(r).addClass("in")}},setContent:function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},hide:function(){function e(){var e=setTimeout(function(){i.off(t.support.transition.end).detach()},500);i.one(t.support.transition.end,function(){clearTimeout(e),i.detach()})}var i=this.tip();return i.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?e():i.detach(),this},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(e){return t.extend({},e?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},tip:function(){return this.$tip=this.$tip||t(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var i=t(e.currentTarget)[this.type](this._options).data(this.type);i[i.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var i=t.fn.tooltip;t.fn.tooltip=function(i){return this.each(function(){var n=t(this),s=n.data("tooltip"),r="object"==typeof i&&i;s||n.data("tooltip",s=new e(this,r)),"string"==typeof i&&s[i]()})},t.fn.tooltip.Constructor=e,t.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!1},t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(window.jQuery),!function(t){"use strict";var e=function(t,e){this.init("popover",t,e)};e.prototype=t.extend({},t.fn.tooltip.Constructor.prototype,{constructor:e,setContent:function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content")[this.options.html?"html":"text"](i),t.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var t,e=this.$element,i=this.options;return t=e.attr("data-content")||("function"==typeof i.content?i.content.call(e[0]):i.content)},tip:function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var i=t.fn.popover;t.fn.popover=function(i){return this.each(function(){var n=t(this),s=n.data("popover"),r="object"==typeof i&&i;s||n.data("popover",s=new e(this,r)),"string"==typeof i&&s[i]()})},t.fn.popover.Constructor=e,t.fn.popover.defaults=t.extend({},t.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"></div></div></div>'}),t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(window.jQuery),!function(t){"use strict";function e(e,i){var n,s=t.proxy(this.process,this),r=t(t(e).is("body")?window:e);this.options=t.extend({},t.fn.scrollspy.defaults,i),this.$scrollElement=r.on("scroll.scroll-spy.data-api",s),this.selector=(this.options.target||(n=t(e).attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=t("body"),this.refresh(),this.process()}e.prototype={constructor:e,refresh:function(){var e,i=this;this.offsets=t([]),this.targets=t([]),e=this.$body.find(this.selector).map(function(){var e=t(this),n=e.data("target")||e.attr("href"),s=/^#\w/.test(n)&&t(n);return s&&s.length&&[[s.position().top+i.$scrollElement.scrollTop(),n]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},process:function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,n=i-this.$scrollElement.height(),s=this.offsets,r=this.targets,o=this.activeTarget;if(e>=n)return o!=(t=r.last()[0])&&this.activate(t);for(t=s.length;t--;)o!=r[t]&&e>=s[t]&&(!s[t+1]||e<=s[t+1])&&this.activate(r[t])},activate:function(e){var i,n;this.activeTarget=e,t(this.selector).parent(".active").removeClass("active"),n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(n).parent("li").addClass("active"),i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate")}};var i=t.fn.scrollspy;t.fn.scrollspy=function(i){return this.each(function(){var n=t(this),s=n.data("scrollspy"),r="object"==typeof i&&i;s||n.data("scrollspy",s=new e(this,r)),"string"==typeof i&&s[i]()})},t.fn.scrollspy.Constructor=e,t.fn.scrollspy.defaults={offset:10},t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this},t(window).on("load",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);e.scrollspy(e.data())})})}(window.jQuery),!function(t){"use strict";var e=function(e){this.element=t(e)};e.prototype={constructor:e,show:function(){var e,i,n,s=this.element,r=s.closest("ul:not(.dropdown-menu)"),o=s.attr("data-target");o||(o=s.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,"")),s.parent("li").hasClass("active")||(e=r.find(".active:last a")[0],n=t.Event("show",{relatedTarget:e}),s.trigger(n),n.isDefaultPrevented()||(i=t(o),this.activate(s.parent("li"),r),this.activate(i,i.parent(),function(){s.trigger({type:"shown",relatedTarget:e})})))},activate:function(e,i,n){function s(){r.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),o?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),n&&n()}var r=i.find("> .active"),o=n&&t.support.transition&&r.hasClass("fade");o?r.one(t.support.transition.end,s):s(),r.removeClass("in")}};var i=t.fn.tab;t.fn.tab=function(i){return this.each(function(){var n=t(this),s=n.data("tab");s||n.data("tab",s=new e(this)),"string"==typeof i&&s[i]()})},t.fn.tab.Constructor=e,t.fn.tab.noConflict=function(){return t.fn.tab=i,this},t(document).on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault(),t(this).tab("show")})}(window.jQuery),!function(t){"use strict";var e=function(e,i){this.$element=t(e),this.options=t.extend({},t.fn.typeahead.defaults,i),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=t(this.options.menu),this.shown=!1,this.listen()};e.prototype={constructor:e,select:function(){var t=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(t)).change(),this.hide()},updater:function(t){return t},show:function(){var e=t.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return this.$menu.insertAfter(this.$element).css({top:e.top+e.height,left:e.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var e;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(e=t.isFunction(this.source)?this.source(this.query,t.proxy(this.process,this)):this.source,e?this.process(e):this)},process:function(e){var i=this;return e=t.grep(e,function(t){return i.matcher(t)}),e=this.sorter(e),e.length?this.render(e.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(t){return~t.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(t){for(var e,i=[],n=[],s=[];e=t.shift();)e.toLowerCase().indexOf(this.query.toLowerCase())?~e.indexOf(this.query)?n.push(e):s.push(e):i.push(e);return i.concat(n,s)},highlighter:function(t){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return t.replace(new RegExp("("+e+")","ig"),function(t,e){return"<strong>"+e+"</strong>"})},render:function(e){var i=this;return e=t(e).map(function(e,n){return e=t(i.options.item).attr("data-value",n),e.find("a").html(i.highlighter(n)),e[0]}),e.first().addClass("active"),this.$menu.html(e),this},next:function(){var e=this.$menu.find(".active").removeClass("active"),i=e.next();i.length||(i=t(this.$menu.find("li")[0])),i.addClass("active")},prev:function(){var t=this.$menu.find(".active").removeClass("active"),e=t.prev();e.length||(e=this.$menu.find("li").last()),e.addClass("active")},listen:function(){this.$element.on("blur",t.proxy(this.blur,this)).on("keypress",t.proxy(this.keypress,this)).on("keyup",t.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",t.proxy(this.keydown,this)),this.$menu.on("click",t.proxy(this.click,this)).on("mouseenter","li",t.proxy(this.mouseenter,this))},eventSupported:function(t){var e=t in this.$element;return e||(this.$element.setAttribute(t,"return;"),e="function"==typeof this.$element[t]),e},move:function(t){if(this.shown){switch(t.keyCode){case 9:case 13:case 27:t.preventDefault();break;case 38:t.preventDefault(),this.prev();break;case 40:t.preventDefault(),this.next()}t.stopPropagation()}},keydown:function(e){this.suppressKeyPressRepeat=~t.inArray(e.keyCode,[40,38,9,13,27]),this.move(e)},keypress:function(t){this.suppressKeyPressRepeat||this.move(t)},keyup:function(t){switch(t.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}t.stopPropagation(),t.preventDefault()},blur:function(){var t=this;setTimeout(function(){t.hide()},150)},click:function(t){t.stopPropagation(),t.preventDefault(),this.select()},mouseenter:function(e){this.$menu.find(".active").removeClass("active"),t(e.currentTarget).addClass("active")}};var i=t.fn.typeahead;t.fn.typeahead=function(i){return this.each(function(){var n=t(this),s=n.data("typeahead"),r="object"==typeof i&&i;s||n.data("typeahead",s=new e(this,r)),"string"==typeof i&&s[i]()})},t.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},t.fn.typeahead.Constructor=e,t.fn.typeahead.noConflict=function(){return t.fn.typeahead=i,this},t(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(e){var i=t(this);i.data("typeahead")||(e.preventDefault(),i.typeahead(i.data()))})}(window.jQuery),!function(t){"use strict";var e=function(e,i){this.options=t.extend({},t.fn.affix.defaults,i),this.$window=t(window).on("scroll.affix.data-api",t.proxy(this.checkPosition,this)).on("click.affix.data-api",t.proxy(function(){setTimeout(t.proxy(this.checkPosition,this),1)},this)),this.$element=t(e),this.checkPosition()};e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e,i=t(document).height(),n=this.$window.scrollTop(),s=this.$element.offset(),r=this.options.offset,o=r.bottom,a=r.top,h="affix affix-top affix-bottom";"object"!=typeof r&&(o=a=r),"function"==typeof a&&(a=r.top()),"function"==typeof o&&(o=r.bottom()),e=null!=this.unpin&&n+this.unpin<=s.top?!1:null!=o&&s.top+this.$element.height()>=i-o?"bottom":null!=a&&a>=n?"top":!1,this.affixed!==e&&(this.options.autoWidth&&(e?this.$element.css("width",""):this.$element.css("width",this.$element.parent().width()+"px")),this.affixed=e,this.unpin="bottom"==e?s.top-n:null,this.$element.removeClass(h).addClass("affix"+(e?"-"+e:"")))}};var i=t.fn.affix;t.fn.affix=function(i){return this.each(function(){var n=t(this),s=n.data("affix"),r="object"==typeof i&&i;s||n.data("affix",s=new e(this,r)),"string"==typeof i&&s[i]()})},t.fn.affix.Constructor=e,t.fn.affix.defaults={offset:0,autoWidth:!1},t.fn.affix.noConflict=function(){return t.fn.affix=i,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var e=t(this),i=e.data();i.offset=i.offset||{},i.offsetBottom&&(i.offset.bottom=i.offsetBottom),i.offsetTop&&(i.offset.top=i.offsetTop),e.affix(i)})})}(window.jQuery),jQuery.ui||function(t){t.ui={version:"1.8.1",plugin:{add:function(e,i,n){e=t.ui[e].prototype;for(var s in n)e.plugins[s]=e.plugins[s]||[],e.plugins[s].push([i,n[s]])},call:function(t,e,i){if((e=t.plugins[e])&&t.element[0].parentNode)for(var n=0;n<e.length;n++)t.options[e[n][0]]&&e[n][1].apply(t.element,i)}},contains:function(t,e){return document.compareDocumentPosition?16&t.compareDocumentPosition(e):t!==e&&t.contains(e)},hasScroll:function(e,i){if("hidden"==t(e).css("overflow"))return!1;i=i&&"left"==i?"scrollLeft":"scrollTop";var n=!1;return e[i]>0?!0:(e[i]=1,n=e[i]>0,e[i]=0,n)},isOverAxis:function(t,e,i){return t>e&&e+i>t},isOver:function(e,i,n,s,r,o){return t.ui.isOverAxis(e,n,r)&&t.ui.isOverAxis(i,s,o)},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}},t.fn.extend({_focus:t.fn.focus,focus:function(e,i){return"number"==typeof e?this.each(function(){var n=this;setTimeout(function(){t(n).focus(),i&&i.call(n)},e)}):this._focus.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none")},scrollParent:function(){var e;return e=t.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.curCSS(this,"position",1))&&/(auto|scroll)/.test(t.curCSS(this,"overflow",1)+t.curCSS(this,"overflow-y",1)+t.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.curCSS(this,"overflow",1)+t.curCSS(this,"overflow-y",1)+t.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length){e=t(this[0]);for(var i;e.length&&e[0]!==document;){if(i=e.css("position"),("absolute"==i||"relative"==i||"fixed"==i)&&(i=parseInt(e.css("zIndex")),!isNaN(i)&&0!=i))return i;e=e.parent()}}return 0}}),t.extend(t.expr[":"],{data:function(e,i,n){return!!t.data(e,n[3])},focusable:function(e){var i=e.nodeName.toLowerCase(),n=t.attr(e,"tabindex");return(/input|select|textarea|button|object/.test(i)?!e.disabled:"a"==i||"area"==i?e.href||!isNaN(n):!isNaN(n))&&!t(e)["area"==i?"parents":"closest"](":hidden").length},tabbable:function(e){var i=t.attr(e,"tabindex");return(isNaN(i)||i>=0)&&t(e).is(":focusable")}})}(jQuery),function(t){var e=t.fn.remove;t.fn.remove=function(i,n){return this.each(function(){return n||(!i||t.filter(i,[this]).length)&&t("*",this).add(this).each(function(){t(this).triggerHandler("remove")}),e.call(t(this),i,n)})},t.widget=function(e,i,n){var s,r=e.split(".")[0];e=e.split(".")[1],s=r+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][s]=function(i){return!!t.data(i,e)},t[r]=t[r]||{},t[r][e]=function(t,e){arguments.length&&this._createWidget(t,e)},i=new i,i.options=t.extend({},i.options),t[r][e].prototype=t.extend(!0,i,{namespace:r,widgetName:e,widgetEventPrefix:t[r][e].prototype.widgetEventPrefix||e,widgetBaseClass:s},n),t.widget.bridge(e,t[r][e])},t.widget.bridge=function(e,i){t.fn[e]=function(n){var s="string"==typeof n,r=Array.prototype.slice.call(arguments,1),o=this;return n=!s&&r.length?t.extend.apply(null,[!0,n].concat(r)):n,s&&"_"===n.substring(0,1)?o:(this.each(s?function(){var i=t.data(this,e),s=i&&t.isFunction(i[n])?i[n].apply(i,r):i;return s!==i&&void 0!==s?(o=s,!1):void 0}:function(){var s=t.data(this,e);s?(n&&s.option(n),s._init()):t.data(this,e,new i(n,this))}),o)}},t.Widget=function(t,e){arguments.length&&this._createWidget(t,e)},t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(e,i){this.element=t(i).data(this.widgetName,this),this.options=t.extend(!0,{},this.options,t.metadata&&t.metadata.get(i)[this.widgetName],e);var n=this;this.element.bind("remove."+this.widgetName,function(){n.destroy()}),this._create(),this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(e,i){var n=e,s=this;if(0===arguments.length)return t.extend({},s.options);if("string"==typeof e){if(void 0===i)return this.options[e];n={},n[e]=i}return t.each(n,function(t,e){s._setOption(t,e)}),s},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&this.widget()[e?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",e),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(e,i,n){var s=this.options[e];if(i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n=n||{},i.originalEvent){e=t.event.props.length;for(var r;e;)r=t.event.props[--e],i[r]=i.originalEvent[r]}return this.element.trigger(i,n),!(t.isFunction(s)&&s.call(this.element[0],i,n)===!1||i.isDefaultPrevented())}}}(jQuery),function(t){t.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(e){return t._preventClickEvent?(t._preventClickEvent=!1,e.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(e){if(e.originalEvent=e.originalEvent||{},!e.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,n=1==e.which,s="string"==typeof this.options.cancel?t(e.target).parents().add(e.target).filter(this.options.cancel).length:!1;return n&&!s&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.browser.safari||e.preventDefault(),e.originalEvent.mouseHandled=!0)):!0}},_mouseMove:function(e){return t.browser.msie&&!e.button?this._mouseUp(e):this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&((this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1)?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,this._preventClickEvent=e.target==this._mouseDownEvent.target,this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance
},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t){t.ui=t.ui||{};var e=/left|center|right/,i=/top|center|bottom/,n=t.fn.position,s=t.fn.offset;t.fn.position=function(s){if(!s||!s.of)return n.apply(this,arguments);s=t.extend({},s);var r,o,a,h=t(s.of),l=(s.collision||"flip").split(" "),u=s.offset?s.offset.split(" "):[0,0];return 9===s.of.nodeType?(r=h.width(),o=h.height(),a={top:0,left:0}):s.of.scrollTo&&s.of.document?(r=h.width(),o=h.height(),a={top:h.scrollTop(),left:h.scrollLeft()}):s.of.preventDefault?(s.at="left top",r=o=0,a={top:s.of.pageY,left:s.of.pageX}):(r=h.outerWidth(),o=h.outerHeight(),a=h.offset()),t.each(["my","at"],function(){var t=(s[this]||"").split(" ");1===t.length&&(t=e.test(t[0])?t.concat(["center"]):i.test(t[0])?["center"].concat(t):["center","center"]),t[0]=e.test(t[0])?t[0]:"center",t[1]=i.test(t[1])?t[1]:"center",s[this]=t}),1===l.length&&(l[1]=l[0]),u[0]=parseInt(u[0],10)||0,1===u.length&&(u[1]=u[0]),u[1]=parseInt(u[1],10)||0,"right"===s.at[0]?a.left+=r:"center"===s.at[0]&&(a.left+=r/2),"bottom"===s.at[1]?a.top+=o:"center"===s.at[1]&&(a.top+=o/2),a.left+=u[0],a.top+=u[1],this.each(function(){var e=t(this),i=e.outerWidth(),n=e.outerHeight(),h=t.extend({},a);"right"===s.my[0]?h.left-=i:"center"===s.my[0]&&(h.left-=i/2),"bottom"===s.my[1]?h.top-=n:"center"===s.my[1]&&(h.top-=n/2),h.left=parseInt(h.left),h.top=parseInt(h.top),t.each(["left","top"],function(e,a){t.ui.position[l[e]]&&t.ui.position[l[e]][a](h,{targetWidth:r,targetHeight:o,elemWidth:i,elemHeight:n,offset:u,my:s.my,at:s.at})}),t.fn.bgiframe&&e.bgiframe(),e.offset(t.extend(h,{using:s.using}))})},t.ui.position={fit:{left:function(e,i){var n=t(window);i=e.left+i.elemWidth-n.width()-n.scrollLeft(),e.left=i>0?e.left-i:Math.max(0,e.left)},top:function(e,i){var n=t(window);i=e.top+i.elemHeight-n.height()-n.scrollTop(),e.top=i>0?e.top-i:Math.max(0,e.top)}},flip:{left:function(e,i){if("center"!==i.at[0]){var n=t(window);n=e.left+i.elemWidth-n.width()-n.scrollLeft();var s="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,r=-2*i.offset[0];e.left+=e.left<0?s+i.targetWidth+r:n>0?s-i.targetWidth+r:0}},top:function(e,i){if("center"!==i.at[1]){var n=t(window);n=e.top+i.elemHeight-n.height()-n.scrollTop();var s="top"===i.my[1]?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,r="top"===i.at[1]?i.targetHeight:-i.targetHeight,o=-2*i.offset[1];e.top+=e.top<0?s+i.targetHeight+o:n>0?s+r+o:0}}}},t.offset.setOffset||(t.offset.setOffset=function(e,i){/static/.test(t.curCSS(e,"position"))&&(e.style.position="relative");var n=t(e),s=n.offset(),r=parseInt(t.curCSS(e,"top",!0),10)||0,o=parseInt(t.curCSS(e,"left",!0),10)||0;s={top:i.top-s.top+r,left:i.left-s.left+o},"using"in i?i.using.call(e,s):n.css(s)},t.fn.offset=function(e){var i=this[0];return i&&i.ownerDocument?e?this.each(function(){t.offset.setOffset(this,e)}):s.call(this):null})}(jQuery),function(t){t.widget("ui.slider",t.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var e=this,i=this.options;if(this._mouseSliding=this._keySliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),i.disabled&&this.element.addClass("ui-slider-disabled ui-disabled"),this.range=t([]),i.range&&(i.range===!0?(this.range=t("<div></div>"),i.values||(i.values=[this._valueMin(),this._valueMin()]),i.values.length&&2!==i.values.length&&(i.values=[i.values[0],i.values[0]])):this.range=t("<div></div>"),this.range.appendTo(this.element).addClass("ui-slider-range"),("min"===i.range||"max"===i.range)&&this.range.addClass("ui-slider-range-"+i.range),this.range.addClass("ui-widget-header")),0===t(".ui-slider-handle",this.element).length&&t("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle"),i.values&&i.values.length)for(;t(".ui-slider-handle",this.element).length<i.values.length;)t("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");this.handles=t(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all"),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(t){t.preventDefault()}).hover(function(){i.disabled||t(this).addClass("ui-state-hover")},function(){t(this).removeClass("ui-state-hover")}).focus(function(){i.disabled?t(this).blur():(t(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),t(this).addClass("ui-state-focus"))}).blur(function(){t(this).removeClass("ui-state-focus")}),this.handles.each(function(e){t(this).data("index.ui-slider-handle",e)}),this.handles.keydown(function(i){var n,s,r,o=!0,a=t(this).data("index.ui-slider-handle");if(!e.options.disabled){switch(i.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(o=!1,!e._keySliding&&(e._keySliding=!0,t(this).addClass("ui-state-active"),n=e._start(i,a),n===!1))return}switch(r=e.options.step,n=s=e.options.values&&e.options.values.length?e.values(a):e.value(),i.keyCode){case t.ui.keyCode.HOME:s=e._valueMin();break;case t.ui.keyCode.END:s=e._valueMax();break;case t.ui.keyCode.PAGE_UP:s=n+(e._valueMax()-e._valueMin())/5;break;case t.ui.keyCode.PAGE_DOWN:s=n-(e._valueMax()-e._valueMin())/5;break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===e._valueMax())return;s=n+r;break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===e._valueMin())return;s=n-r}return e._slide(i,a,s),o}}).keyup(function(i){var n=t(this).data("index.ui-slider-handle");e._keySliding&&(e._keySliding=!1,e._stop(i,n),e._change(i,n),t(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(e){var i,n,s,r,o,a,h=this.options;return h.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,o=this,this.handles.each(function(e){var i=Math.abs(n-o.values(e));s>i&&(s=i,r=t(this),a=e)}),h.range===!0&&this.values(1)===h.min&&(a+=1,r=t(this.handles[a])),this._start(e,a)===!1?!1:(this._mouseSliding=!0,o._handleIndex=a,r.addClass("ui-state-active").focus(),h=r.offset(),this._clickOffset=t(e.target).parents().andSelf().is(".ui-slider-handle")?{left:e.pageX-h.left-r.width()/2,top:e.pageY-h.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)}:{left:0,top:0},n=this._normValueFromMouse(i),this._slide(e,a,n),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e=this._normValueFromMouse({x:t.pageX,y:t.pageY});return this._slide(t,this._handleIndex,e),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._clickOffset=this._handleIndex=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e;return"horizontal"===this.orientation?(e=this.elementSize.width,t=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,t=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),e=t/e,e>1&&(e=1),0>e&&(e=0),"vertical"===this.orientation&&(e=1-e),t=this._valueMax()-this._valueMin(),this._trimAlignValue(this._valueMin()+e*t)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var n;this.options.values&&this.options.values.length?(n=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&i>n||1===e&&n>i)&&(i=n),i!==this.values(e)&&(n=this.values(),n[e]=i,t=this._trigger("slide",t,{handle:this.handles[e],value:i,values:n}),this.values(e?0:1),t!==!1&&this.values(e,i,!0))):i!==this.value()&&(t=this._trigger("slide",t,{handle:this.handles[e],value:i}),t!==!1&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("change",t,i)}},value:function(t){return arguments.length&&(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0)),this._value()},values:function(e,i){var n,s,r;if(arguments.length>1&&(this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),this._change(null,e)),!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(n=this.options.values,s=arguments[0],r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(s[r]),this._change(null,r);this._refreshValue()},_setOption:function(e,i){var n,s=0;switch(t.isArray(this.options.values)&&(s=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.attr("disabled","disabled"),this.element.addClass("ui-disabled")):(this.handles.removeAttr("disabled"),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;s>n;n+=1)this._change(null,n);this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);for(e=this.options.values.slice(),i=0;i<e.length;i+=1)e[i]=this._trimAlignValue(e[i]);return e},_trimAlignValue:function(t){if(t<this._valueMin())return this._valueMin();if(t>this._valueMax())return this._valueMax();var e=this.options.step,i=t%e;return t-=i,i>=e/2&&(t+=e),parseFloat(t.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,n,s,r,o=this.options.range,a=this.options,h=this,l=this._animateOff?!1:a.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(n){e=(h.values(n)-h._valueMin())/(h._valueMax()-h._valueMin())*100,u["horizontal"===h.orientation?"left":"bottom"]=e+"%",t(this).stop(1,1)[l?"animate":"css"](u,a.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===n&&h.range.stop(1,1)[l?"animate":"css"]({left:e+"%"},a.animate),1===n&&h.range[l?"animate":"css"]({width:e-i+"%"},{queue:!1,duration:a.animate})):(0===n&&h.range.stop(1,1)[l?"animate":"css"]({bottom:e+"%"},a.animate),1===n&&h.range[l?"animate":"css"]({height:e-i+"%"},{queue:!1,duration:a.animate}))),i=e}):(n=this.value(),s=this._valueMin(),r=this._valueMax(),e=r!==s?(n-s)/(r-s)*100:0,u["horizontal"===h.orientation?"left":"bottom"]=e+"%",this.handle.stop(1,1)[l?"animate":"css"](u,a.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:e+"%"},a.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-e+"%"},{queue:!1,duration:a.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:e+"%"},a.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-e+"%"},{queue:!1,duration:a.animate}))}}),t.extend(t.ui.slider,{version:"1.8.1"})}(jQuery),jQuery.effects||function(t){function e(e){var i;return e&&e.constructor==Array&&3==e.length?e:(i=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))?[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10)]:(i=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))?[2.55*parseFloat(i[1]),2.55*parseFloat(i[2]),2.55*parseFloat(i[3])]:(i=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:(i=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))?[parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(e)?a.transparent:a[t.trim(e).toLowerCase()]}function i(i,n){var s;do{if(s=t.curCSS(i,n),""!=s&&"transparent"!=s||t.nodeName(i,"body"))break;n="backgroundColor"}while(i=i.parentNode);return e(s)}function n(){var t,e,i=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,n={};if(i&&i.length&&i[0]&&i[i[0]])for(var s=i.length;s--;)t=i[s],"string"==typeof i[t]&&(e=t.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()}),n[e]=i[t]);else for(t in i)"string"==typeof i[t]&&(n[t]=i[t]);return n}function s(e){var i,n;for(i in e)n=e[i],(null==n||t.isFunction(n)||i in l||/scrollbar/.test(i)||!/color/i.test(i)&&isNaN(parseFloat(n)))&&delete e[i];return e}function r(t,e){var i,n={_:0};for(i in e)t[i]!=e[i]&&(n[i]=e[i]);return n}function o(e,i,n,s){return"object"==typeof e&&(s=i,n=null,i=e,e=i.effect),t.isFunction(i)&&(s=i,n=null,i={}),t.isFunction(n)&&(s=n,n=null),("number"==typeof i||t.fx.speeds[i])&&(s=n,n=i,i={}),i=i||{},n=n||i.duration,n=t.fx.off?0:"number"==typeof n?n:t.fx.speeds[n]||t.fx.speeds._default,s=s||i.complete,[e,i,n,s]}t.effects={},t.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(n,s){t.fx.step[s]=function(t){t.colorInit||(t.start=i(t.elem,s),t.end=e(t.end),t.colorInit=!0),t.elem.style[s]="rgb("+Math.max(Math.min(parseInt(t.pos*(t.end[0]-t.start[0])+t.start[0],10),255),0)+","+Math.max(Math.min(parseInt(t.pos*(t.end[1]-t.start[1])+t.start[1],10),255),0)+","+Math.max(Math.min(parseInt(t.pos*(t.end[2]-t.start[2])+t.start[2],10),255),0)+")"}});var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},h=["add","remove","toggle"],l={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.effects.animateClass=function(e,i,o,a){return t.isFunction(o)&&(a=o,o=null),this.each(function(){var l,u=t(this),c=u.attr("style")||" ",d=s(n.call(this)),p=u.attr("className");t.each(h,function(t,i){e[i]&&u[i+"Class"](e[i])}),l=s(n.call(this)),u.attr("className",p),u.animate(r(d,l),i,o,function(){t.each(h,function(t,i){e[i]&&u[i+"Class"](e[i])}),"object"==typeof u.attr("style")?(u.attr("style").cssText="",u.attr("style").cssText=c):u.attr("style",c),a&&a.apply(this,arguments)})})},t.fn.extend({_addClass:t.fn.addClass,addClass:function(e,i,n,s){return i?t.effects.animateClass.apply(this,[{add:e},i,n,s]):this._addClass(e)},_removeClass:t.fn.removeClass,removeClass:function(e,i,n,s){return i?t.effects.animateClass.apply(this,[{remove:e},i,n,s]):this._removeClass(e)},_toggleClass:t.fn.toggleClass,toggleClass:function(e,i,n,s,r){return"boolean"==typeof i||void 0===i?n?t.effects.animateClass.apply(this,[i?{add:e}:{remove:e},n,s,r]):this._toggleClass(e,i):t.effects.animateClass.apply(this,[{toggle:e},i,n,s])},switchClass:function(e,i,n,s,r){return t.effects.animateClass.apply(this,[{add:i,remove:e},n,s,r])}}),t.extend(t.effects,{version:"1.8.1",save:function(t,e){for(var i=0;i<e.length;i++)null!==e[i]&&t.data("ec.storage."+e[i],t[0].style[e[i]])},restore:function(t,e){for(var i=0;i<e.length;i++)null!==e[i]&&t.css(e[i],t.data("ec.storage."+e[i]))},setMode:function(t,e){return"toggle"==e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":t=0;break;case"center":t=.5;break;case"right":t=1;break;default:t=t[1]/e.width}return{x:t,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},n=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});return e.wrap(n),n=e.parent(),"static"==e.css("position")?(n.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,n){i[n]=e.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),e.css({position:"relative",top:0,left:0})),n.css(i).show()},removeWrapper:function(t){return t.parent().is(".ui-effects-wrapper")?t.parent().replaceWith(t):t},setTransition:function(e,i,n,s){return s=s||{},t.each(i,function(t,i){unit=e.cssUnit(i),unit[0]>0&&(s[i]=unit[0]*n+unit[1])}),s}}),t.fn.extend({effect:function(e){var i=o.apply(this,arguments);i={options:i[1],duration:i[2],callback:i[3]};var n=t.effects[e];return n&&!t.fx.off?n.call(this,i):this},_show:t.fn.show,show:function(e){if(!e||"number"==typeof e||t.fx.speeds[e])return this._show.apply(this,arguments);var i=o.apply(this,arguments);return i[1].mode="show",this.effect.apply(this,i)},_hide:t.fn.hide,hide:function(e){if(!e||"number"==typeof e||t.fx.speeds[e])return this._hide.apply(this,arguments);var i=o.apply(this,arguments);return i[1].mode="hide",this.effect.apply(this,i)},__toggle:t.fn.toggle,toggle:function(e){if(!e||"number"==typeof e||t.fx.speeds[e]||"boolean"==typeof e||t.isFunction(e))return this.__toggle.apply(this,arguments);var i=o.apply(this,arguments);return i[1].mode="toggle",this.effect.apply(this,i)},cssUnit:function(e){var i=this.css(e),n=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(n=[parseFloat(i),e])}),n}}),t.easing.jswing=t.easing.swing,t.extend(t.easing,{def:"easeOutQuad",swing:function(e,i,n,s,r){return t.easing[t.easing.def](e,i,n,s,r)},easeInQuad:function(t,e,i,n,s){return n*(e/=s)*e+i},easeOutQuad:function(t,e,i,n,s){return-n*(e/=s)*(e-2)+i},easeInOutQuad:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e+i:-n/2*(--e*(e-2)-1)+i},easeInCubic:function(t,e,i,n,s){return n*(e/=s)*e*e+i},easeOutCubic:function(t,e,i,n,s){return n*((e=e/s-1)*e*e+1)+i},easeInOutCubic:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e*e+i:n/2*((e-=2)*e*e+2)+i},easeInQuart:function(t,e,i,n,s){return n*(e/=s)*e*e*e+i},easeOutQuart:function(t,e,i,n,s){return-n*((e=e/s-1)*e*e*e-1)+i},easeInOutQuart:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e*e*e+i:-n/2*((e-=2)*e*e*e-2)+i},easeInQuint:function(t,e,i,n,s){return n*(e/=s)*e*e*e*e+i},easeOutQuint:function(t,e,i,n,s){return n*((e=e/s-1)*e*e*e*e+1)+i},easeInOutQuint:function(t,e,i,n,s){return(e/=s/2)<1?n/2*e*e*e*e*e+i:n/2*((e-=2)*e*e*e*e+2)+i},easeInSine:function(t,e,i,n,s){return-n*Math.cos(e/s*(Math.PI/2))+n+i},easeOutSine:function(t,e,i,n,s){return n*Math.sin(e/s*(Math.PI/2))+i},easeInOutSine:function(t,e,i,n,s){return-n/2*(Math.cos(Math.PI*e/s)-1)+i},easeInExpo:function(t,e,i,n,s){return 0==e?i:n*Math.pow(2,10*(e/s-1))+i},easeOutExpo:function(t,e,i,n,s){return e==s?i+n:n*(-Math.pow(2,-10*e/s)+1)+i},easeInOutExpo:function(t,e,i,n,s){return 0==e?i:e==s?i+n:(e/=s/2)<1?n/2*Math.pow(2,10*(e-1))+i:n/2*(-Math.pow(2,-10*--e)+2)+i},easeInCirc:function(t,e,i,n,s){return-n*(Math.sqrt(1-(e/=s)*e)-1)+i},easeOutCirc:function(t,e,i,n,s){return n*Math.sqrt(1-(e=e/s-1)*e)+i},easeInOutCirc:function(t,e,i,n,s){return(e/=s/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+i:n/2*(Math.sqrt(1-(e-=2)*e)+1)+i},easeInElastic:function(t,e,i,n,s){t=1.70158;var r=0,o=n;return 0==e?i:1==(e/=s)?i+n:(r||(r=.3*s),o<Math.abs(n)?(o=n,t=r/4):t=r/(2*Math.PI)*Math.asin(n/o),-(o*Math.pow(2,10*(e-=1))*Math.sin(2*(e*s-t)*Math.PI/r))+i)},easeOutElastic:function(t,e,i,n,s){t=1.70158;var r=0,o=n;return 0==e?i:1==(e/=s)?i+n:(r||(r=.3*s),o<Math.abs(n)?(o=n,t=r/4):t=r/(2*Math.PI)*Math.asin(n/o),o*Math.pow(2,-10*e)*Math.sin(2*(e*s-t)*Math.PI/r)+n+i)},easeInOutElastic:function(t,e,i,n,s){t=1.70158;var r=0,o=n;return 0==e?i:2==(e/=s/2)?i+n:(r||(r=.3*s*1.5),o<Math.abs(n)?(o=n,t=r/4):t=r/(2*Math.PI)*Math.asin(n/o),1>e?-.5*o*Math.pow(2,10*(e-=1))*Math.sin(2*(e*s-t)*Math.PI/r)+i:o*Math.pow(2,-10*(e-=1))*Math.sin(2*(e*s-t)*Math.PI/r)*.5+n+i)},easeInBack:function(t,e,i,n,s,r){return void 0==r&&(r=1.70158),n*(e/=s)*e*((r+1)*e-r)+i},easeOutBack:function(t,e,i,n,s,r){return void 0==r&&(r=1.70158),n*((e=e/s-1)*e*((r+1)*e+r)+1)+i},easeInOutBack:function(t,e,i,n,s,r){return void 0==r&&(r=1.70158),(e/=s/2)<1?n/2*e*e*(((r*=1.525)+1)*e-r)+i:n/2*((e-=2)*e*(((r*=1.525)+1)*e+r)+2)+i},easeInBounce:function(e,i,n,s,r){return s-t.easing.easeOutBounce(e,r-i,0,s,r)+n},easeOutBounce:function(t,e,i,n,s){return(e/=s)<1/2.75?7.5625*n*e*e+i:2/2.75>e?n*(7.5625*(e-=1.5/2.75)*e+.75)+i:2.5/2.75>e?n*(7.5625*(e-=2.25/2.75)*e+.9375)+i:n*(7.5625*(e-=2.625/2.75)*e+.984375)+i},easeInOutBounce:function(e,i,n,s,r){return r/2>i?.5*t.easing.easeInBounce(e,2*i,0,s,r)+n:.5*t.easing.easeOutBounce(e,2*i-r,0,s,r)+.5*s+n}})}(jQuery),function(t){t.effects.blind=function(e){return this.queue(function(){var i=t(this),n=["position","top","left"],s=t.effects.setMode(i,e.options.mode||"hide"),r=e.options.direction||"vertical";t.effects.save(i,n),i.show();var o=t.effects.createWrapper(i).css({overflow:"hidden"}),a="vertical"==r?"height":"width";r="vertical"==r?o.height():o.width(),"show"==s&&o.css(a,0);var h={};h[a]="show"==s?r:0,o.animate(h,e.duration,e.options.easing,function(){"hide"==s&&i.hide(),t.effects.restore(i,n),t.effects.removeWrapper(i),e.callback&&e.callback.apply(i[0],arguments),i.dequeue()})})}}(jQuery),function(){var t=this,e=t._,i={},n=Array.prototype,s=Object.prototype,r=Function.prototype,o=n.push,a=n.slice,h=n.concat,l=s.toString,u=s.hasOwnProperty,c=n.forEach,d=n.map,p=n.reduce,f=n.reduceRight,g=n.filter,m=n.every,v=n.some,y=n.indexOf,w=n.lastIndexOf,b=Array.isArray,x=Object.keys,V=r.bind,S=function(t){return t instanceof S?t:this instanceof S?void(this._wrapped=t):new S(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=S),exports._=S):t._=S,S.VERSION="1.5.2";var D=S.each=S.forEach=function(t,e,n){if(null!=t)if(c&&t.forEach===c)t.forEach(e,n);else if(t.length===+t.length){for(var s=0,r=t.length;r>s;s++)if(e.call(n,t[s],s,t)===i)return}else for(var o=S.keys(t),s=0,r=o.length;r>s;s++)if(e.call(n,t[o[s]],o[s],t)===i)return};S.map=S.collect=function(t,e,i){var n=[];return null==t?n:d&&t.map===d?t.map(e,i):(D(t,function(t,s,r){n.push(e.call(i,t,s,r))}),n)};var C="Reduce of empty array with no initial value";S.reduce=S.foldl=S.inject=function(t,e,i,n){var s=arguments.length>2;if(null==t&&(t=[]),p&&t.reduce===p)return n&&(e=S.bind(e,n)),s?t.reduce(e,i):t.reduce(e);if(D(t,function(t,r,o){s?i=e.call(n,i,t,r,o):(i=t,s=!0)}),!s)throw new TypeError(C);return i},S.reduceRight=S.foldr=function(t,e,i,n){var s=arguments.length>2;if(null==t&&(t=[]),f&&t.reduceRight===f)return n&&(e=S.bind(e,n)),s?t.reduceRight(e,i):t.reduceRight(e);var r=t.length;if(r!==+r){var o=S.keys(t);r=o.length}if(D(t,function(a,h,l){h=o?o[--r]:--r,s?i=e.call(n,i,t[h],h,l):(i=t[h],s=!0)}),!s)throw new TypeError(C);return i},S.find=S.detect=function(t,e,i){var n;return _(t,function(t,s,r){return e.call(i,t,s,r)?(n=t,!0):void 0}),n},S.filter=S.select=function(t,e,i){var n=[];return null==t?n:g&&t.filter===g?t.filter(e,i):(D(t,function(t,s,r){e.call(i,t,s,r)&&n.push(t)}),n)},S.reject=function(t,e,i){return S.filter(t,function(t,n,s){return!e.call(i,t,n,s)},i)},S.every=S.all=function(t,e,n){e||(e=S.identity);var s=!0;return null==t?s:m&&t.every===m?t.every(e,n):(D(t,function(t,r,o){return(s=s&&e.call(n,t,r,o))?void 0:i}),!!s)};var _=S.some=S.any=function(t,e,n){e||(e=S.identity);var s=!1;return null==t?s:v&&t.some===v?t.some(e,n):(D(t,function(t,r,o){return s||(s=e.call(n,t,r,o))?i:void 0}),!!s)};S.contains=S.include=function(t,e){return null==t?!1:y&&t.indexOf===y?-1!=t.indexOf(e):_(t,function(t){return t===e})},S.invoke=function(t,e){var i=a.call(arguments,2),n=S.isFunction(e);return S.map(t,function(t){return(n?e:t[e]).apply(t,i)})},S.pluck=function(t,e){return S.map(t,function(t){return t[e]})},S.where=function(t,e,i){return S.isEmpty(e)?i?void 0:[]:S[i?"find":"filter"](t,function(t){for(var i in e)if(e[i]!==t[i])return!1;return!0})},S.findWhere=function(t,e){return S.where(t,e,!0)},S.max=function(t,e,i){if(!e&&S.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&S.isEmpty(t))return-1/0;var n={computed:-1/0,value:-1/0};return D(t,function(t,s,r){var o=e?e.call(i,t,s,r):t;o>n.computed&&(n={value:t,computed:o})}),n.value},S.min=function(t,e,i){if(!e&&S.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&S.isEmpty(t))return 1/0;var n={computed:1/0,value:1/0};return D(t,function(t,s,r){var o=e?e.call(i,t,s,r):t;o<n.computed&&(n={value:t,computed:o})}),n.value},S.shuffle=function(t){var e,i=0,n=[];return D(t,function(t){e=S.random(i++),n[i-1]=n[e],n[e]=t}),n},S.sample=function(t,e,i){return arguments.length<2||i?t[S.random(t.length-1)]:S.shuffle(t).slice(0,Math.max(0,e))};var T=function(t){return S.isFunction(t)?t:function(e){return e[t]}};S.sortBy=function(t,e,i){var n=T(e);return S.pluck(S.map(t,function(t,e,s){return{value:t,index:e,criteria:n.call(i,t,e,s)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var A=function(t){return function(e,i,n){var s={},r=null==i?S.identity:T(i);return D(e,function(i,o){var a=r.call(n,i,o,e);t(s,a,i)}),s}};S.groupBy=A(function(t,e,i){(S.has(t,e)?t[e]:t[e]=[]).push(i)}),S.indexBy=A(function(t,e,i){t[e]=i}),S.countBy=A(function(t,e){S.has(t,e)?t[e]++:t[e]=1}),S.sortedIndex=function(t,e,i,n){i=null==i?S.identity:T(i);for(var s=i.call(n,e),r=0,o=t.length;o>r;){var a=r+o>>>1;i.call(n,t[a])<s?r=a+1:o=a}return r},S.toArray=function(t){return t?S.isArray(t)?a.call(t):t.length===+t.length?S.map(t,S.identity):S.values(t):[]},S.size=function(t){return null==t?0:t.length===+t.length?t.length:S.keys(t).length},S.first=S.head=S.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:a.call(t,0,e)},S.initial=function(t,e,i){return a.call(t,0,t.length-(null==e||i?1:e))},S.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},S.rest=S.tail=S.drop=function(t,e,i){return a.call(t,null==e||i?1:e)},S.compact=function(t){return S.filter(t,S.identity)};var k=function(t,e,i){return e&&S.every(t,S.isArray)?h.apply(i,t):(D(t,function(t){S.isArray(t)||S.isArguments(t)?e?o.apply(i,t):k(t,e,i):i.push(t)}),i)};S.flatten=function(t,e){return k(t,e,[])},S.without=function(t){return S.difference(t,a.call(arguments,1))},S.uniq=S.unique=function(t,e,i,n){S.isFunction(e)&&(n=i,i=e,e=!1);var s=i?S.map(t,i,n):t,r=[],o=[];return D(s,function(i,n){(e?n&&o[o.length-1]===i:S.contains(o,i))||(o.push(i),r.push(t[n]))}),r},S.union=function(){return S.uniq(S.flatten(arguments,!0))},S.intersection=function(t){var e=a.call(arguments,1);return S.filter(S.uniq(t),function(t){return S.every(e,function(e){return S.indexOf(e,t)>=0})})},S.difference=function(t){var e=h.apply(n,a.call(arguments,1));return S.filter(t,function(t){return!S.contains(e,t)})},S.zip=function(){for(var t=S.max(S.pluck(arguments,"length").concat(0)),e=new Array(t),i=0;t>i;i++)e[i]=S.pluck(arguments,""+i);return e},S.object=function(t,e){if(null==t)return{};for(var i={},n=0,s=t.length;s>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},S.indexOf=function(t,e,i){if(null==t)return-1;var n=0,s=t.length;if(i){if("number"!=typeof i)return n=S.sortedIndex(t,e),t[n]===e?n:-1;n=0>i?Math.max(0,s+i):i}if(y&&t.indexOf===y)return t.indexOf(e,i);for(;s>n;n++)if(t[n]===e)return n;return-1},S.lastIndexOf=function(t,e,i){if(null==t)return-1;var n=null!=i;if(w&&t.lastIndexOf===w)return n?t.lastIndexOf(e,i):t.lastIndexOf(e);for(var s=n?i:t.length;s--;)if(t[s]===e)return s;return-1},S.range=function(t,e,i){arguments.length<=1&&(e=t||0,t=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((e-t)/i),0),s=0,r=new Array(n);n>s;)r[s++]=t,t+=i;return r};var P=function(){};S.bind=function(t,e){var i,n;if(V&&t.bind===V)return V.apply(t,a.call(arguments,1));if(!S.isFunction(t))throw new TypeError;return i=a.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,i.concat(a.call(arguments)));P.prototype=t.prototype;var s=new P;P.prototype=null;var r=t.apply(s,i.concat(a.call(arguments)));return Object(r)===r?r:s}},S.partial=function(t){var e=a.call(arguments,1);return function(){return t.apply(this,e.concat(a.call(arguments)))}},S.bindAll=function(t){var e=a.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return D(e,function(e){t[e]=S.bind(t[e],t)}),t},S.memoize=function(t,e){var i={};return e||(e=S.identity),function(){var n=e.apply(this,arguments);return S.has(i,n)?i[n]:i[n]=t.apply(this,arguments)}},S.delay=function(t,e){var i=a.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},S.defer=function(t){return S.delay.apply(S,[t,1].concat(a.call(arguments,1)))},S.throttle=function(t,e,i){var n,s,r,o=null,a=0;i||(i={});var h=function(){a=i.leading===!1?0:new Date,o=null,r=t.apply(n,s)};return function(){var l=new Date;a||i.leading!==!1||(a=l);var u=e-(l-a);return n=this,s=arguments,0>=u?(clearTimeout(o),o=null,a=l,r=t.apply(n,s)):o||i.trailing===!1||(o=setTimeout(h,u)),r}},S.debounce=function(t,e,i){var n,s,r,o,a;return function(){r=this,s=arguments,o=new Date;var h=function(){var l=new Date-o;e>l?n=setTimeout(h,e-l):(n=null,i||(a=t.apply(r,s)))},l=i&&!n;return n||(n=setTimeout(h,e)),l&&(a=t.apply(r,s)),a}},S.once=function(t){var e,i=!1;return function(){return i?e:(i=!0,e=t.apply(this,arguments),t=null,e)}},S.wrap=function(t,e){return function(){var i=[t];return o.apply(i,arguments),e.apply(this,i)}},S.compose=function(){var t=arguments;return function(){for(var e=arguments,i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},S.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},S.keys=x||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var i in t)S.has(t,i)&&e.push(i);return e},S.values=function(t){for(var e=S.keys(t),i=e.length,n=new Array(i),s=0;i>s;s++)n[s]=t[e[s]];return n},S.pairs=function(t){for(var e=S.keys(t),i=e.length,n=new Array(i),s=0;i>s;s++)n[s]=[e[s],t[e[s]]];
return n},S.invert=function(t){for(var e={},i=S.keys(t),n=0,s=i.length;s>n;n++)e[t[i[n]]]=i[n];return e},S.functions=S.methods=function(t){var e=[];for(var i in t)S.isFunction(t[i])&&e.push(i);return e.sort()},S.extend=function(t){return D(a.call(arguments,1),function(e){if(e)for(var i in e)t[i]=e[i]}),t},S.pick=function(t){var e={},i=h.apply(n,a.call(arguments,1));return D(i,function(i){i in t&&(e[i]=t[i])}),e},S.omit=function(t){var e={},i=h.apply(n,a.call(arguments,1));for(var s in t)S.contains(i,s)||(e[s]=t[s]);return e},S.defaults=function(t){return D(a.call(arguments,1),function(e){if(e)for(var i in e)void 0===t[i]&&(t[i]=e[i])}),t},S.clone=function(t){return S.isObject(t)?S.isArray(t)?t.slice():S.extend({},t):t},S.tap=function(t,e){return e(t),t};var E=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof S&&(t=t._wrapped),e instanceof S&&(e=e._wrapped);var s=l.call(t);if(s!=l.call(e))return!1;switch(s){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var r=i.length;r--;)if(i[r]==t)return n[r]==e;var o=t.constructor,a=e.constructor;if(o!==a&&!(S.isFunction(o)&&o instanceof o&&S.isFunction(a)&&a instanceof a))return!1;i.push(t),n.push(e);var h=0,u=!0;if("[object Array]"==s){if(h=t.length,u=h==e.length)for(;h--&&(u=E(t[h],e[h],i,n)););}else{for(var c in t)if(S.has(t,c)&&(h++,!(u=S.has(e,c)&&E(t[c],e[c],i,n))))break;if(u){for(c in e)if(S.has(e,c)&&!h--)break;u=!h}}return i.pop(),n.pop(),u};S.isEqual=function(t,e){return E(t,e,[],[])},S.isEmpty=function(t){if(null==t)return!0;if(S.isArray(t)||S.isString(t))return 0===t.length;for(var e in t)if(S.has(t,e))return!1;return!0},S.isElement=function(t){return!(!t||1!==t.nodeType)},S.isArray=b||function(t){return"[object Array]"==l.call(t)},S.isObject=function(t){return t===Object(t)},D(["Arguments","Function","String","Number","Date","RegExp"],function(t){S["is"+t]=function(e){return l.call(e)=="[object "+t+"]"}}),S.isArguments(arguments)||(S.isArguments=function(t){return!(!t||!S.has(t,"callee"))}),"function"!=typeof/./&&(S.isFunction=function(t){return"function"==typeof t}),S.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},S.isNaN=function(t){return S.isNumber(t)&&t!=+t},S.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==l.call(t)},S.isNull=function(t){return null===t},S.isUndefined=function(t){return void 0===t},S.has=function(t,e){return u.call(t,e)},S.noConflict=function(){return t._=e,this},S.identity=function(t){return t},S.times=function(t,e,i){for(var n=Array(Math.max(0,t)),s=0;t>s;s++)n[s]=e.call(i,s);return n},S.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var N={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};N.unescape=S.invert(N.escape);var G={escape:new RegExp("["+S.keys(N.escape).join("")+"]","g"),unescape:new RegExp("("+S.keys(N.unescape).join("|")+")","g")};S.each(["escape","unescape"],function(t){S[t]=function(e){return null==e?"":(""+e).replace(G[t],function(e){return N[t][e]})}}),S.result=function(t,e){if(null==t)return void 0;var i=t[e];return S.isFunction(i)?i.call(t):i},S.mixin=function(t){D(S.functions(t),function(e){var i=S[e]=t[e];S.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),j.call(this,i.apply(S,t))}})};var I=0;S.uniqueId=function(t){var e=++I+"";return t?t+e:e},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var $=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},M=/\\|'|\r|\n|\t|\u2028|\u2029/g;S.template=function(t,e,i){var n;i=S.defaults({},i,S.templateSettings);var s=new RegExp([(i.escape||$).source,(i.interpolate||$).source,(i.evaluate||$).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(s,function(e,i,n,s,a){return o+=t.slice(r,a).replace(M,function(t){return"\\"+O[t]}),i&&(o+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(o+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),s&&(o+="';\n"+s+"\n__p+='"),r=a+e.length,e}),o+="';\n",i.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{n=new Function(i.variable||"obj","_",o)}catch(a){throw a.source=o,a}if(e)return n(e,S);var h=function(t){return n.call(this,t,S)};return h.source="function("+(i.variable||"obj")+"){\n"+o+"}",h},S.chain=function(t){return S(t).chain()};var j=function(t){return this._chain?S(t).chain():t};S.mixin(S),D(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=n[t];S.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!=t&&"splice"!=t||0!==i.length||delete i[0],j.call(this,i)}}),D(["concat","join","slice"],function(t){var e=n[t];S.prototype[t]=function(){return j.call(this,e.apply(this._wrapped,arguments))}}),S.extend(S.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){var t,e=this,i=e.Backbone,n=[],s=n.push,r=n.slice,o=n.splice;t="undefined"!=typeof exports?exports:e.Backbone={},t.VERSION="1.0.0";var a=e._;a||"undefined"==typeof require||(a=require("underscore")),t.$=e.jQuery||e.Zepto||e.ender||e.$,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var h=t.Events={on:function(t,e,i){if(!u(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,i){if(!u(this,"once",t,[e,i])||!e)return this;var n=this,s=a.once(function(){n.off(t,s),e.apply(this,arguments)});return s._callback=e,this.on(t,s,i)},off:function(t,e,i){var n,s,r,o,h,l,c,d;if(!this._events||!u(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events={},this;for(o=t?[t]:a.keys(this._events),h=0,l=o.length;l>h;h++)if(t=o[h],r=this._events[t]){if(this._events[t]=n=[],e||i)for(c=0,d=r.length;d>c;c++)s=r[c],(e&&e!==s.callback&&e!==s.callback._callback||i&&i!==s.context)&&n.push(s);n.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=r.call(arguments,1);if(!u(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&c(i,e),n&&c(n,arguments),this},stopListening:function(t,e,i){var n=this._listeners;if(!n)return this;var s=!e&&!i;"object"==typeof e&&(i=this),t&&((n={})[t._listenerId]=t);for(var r in n)n[r].off(e,i,this),s&&delete this._listeners[r];return this}},l=/\s+/,u=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var s in i)t[e].apply(t,[s,i[s]].concat(n));return!1}if(l.test(i)){for(var r=i.split(l),o=0,a=r.length;a>o;o++)t[e].apply(t,[r[o]].concat(n));return!1}return!0},c=function(t,e){var i,n=-1,s=t.length,r=e[0],o=e[1],a=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,o);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,o,a);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e)}},d={listenTo:"on",listenToOnce:"once"};a.each(d,function(t,e){h[e]=function(e,i,n){var s=this._listeners||(this._listeners={}),r=e._listenerId||(e._listenerId=a.uniqueId("l"));return s[r]=e,"object"==typeof i&&(n=this),e[t](i,n,this),this}}),h.bind=h.on,h.unbind=h.off,a.extend(t,h);var p=t.Model=function(t,e){var i,n=t||{};e||(e={}),this.cid=a.uniqueId("c"),this.attributes={},a.extend(this,a.pick(e,f)),e.parse&&(n=this.parse(n,e)||{}),(i=a.result(this,"defaults"))&&(n=a.defaults({},n,i)),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)},f=["url","urlRoot","collection"];a.extend(p.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return a.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return a.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var n,s,r,o,h,l,u,c;if(null==t)return this;if("object"==typeof t?(s=t,i=e):(s={})[t]=e,i||(i={}),!this._validate(s,i))return!1;r=i.unset,h=i.silent,o=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=a.clone(this.attributes),this.changed={}),c=this.attributes,u=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(n in s)e=s[n],a.isEqual(c[n],e)||o.push(n),a.isEqual(u[n],e)?delete this.changed[n]:this.changed[n]=e,r?delete c[n]:c[n]=e;if(!h){o.length&&(this._pending=!0);for(var d=0,p=o.length;p>d;d++)this.trigger("change:"+o[d],this,c[o[d]],i)}if(l)return this;if(!h)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,a.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,a.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!a.isEmpty(this.changed):a.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?a.clone(this.changed):!1;var e,i=!1,n=this._changing?this._previousAttributes:this.attributes;for(var s in t)a.isEqual(n[s],e=t[s])||((i||(i={}))[s]=e);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return a.clone(this._previousAttributes)},fetch:function(t){t=t?a.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,i=t.success;return t.success=function(n){return e.set(e.parse(n,t),t)?(i&&i(e,n,t),void e.trigger("sync",e,n,t)):!1},M(this,t),this.sync("read",this,t)},save:function(t,e,i){var n,s,r,o=this.attributes;if(null==t||"object"==typeof t?(n=t,i=e):(n={})[t]=e,!(!n||i&&i.wait||this.set(n,i)))return!1;if(i=a.extend({validate:!0},i),!this._validate(n,i))return!1;n&&i.wait&&(this.attributes=a.extend({},o,n)),void 0===i.parse&&(i.parse=!0);var h=this,l=i.success;return i.success=function(t){h.attributes=o;var e=h.parse(t,i);return i.wait&&(e=a.extend(n||{},e)),a.isObject(e)&&!h.set(e,i)?!1:(l&&l(h,t,i),void h.trigger("sync",h,t,i))},M(this,i),s=this.isNew()?"create":i.patch?"patch":"update","patch"===s&&(i.attrs=n),r=this.sync(s,this,i),n&&i.wait&&(this.attributes=o),r},destroy:function(t){t=t?a.clone(t):{};var e=this,i=t.success,n=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(s){(t.wait||e.isNew())&&n(),i&&i(e,s,t),e.isNew()||e.trigger("sync",e,s,t)},this.isNew())return t.success(),!1;M(this,t);var s=this.sync("delete",this,t);return t.wait||n(),s},url:function(){var t=a.result(this,"urlRoot")||a.result(this.collection,"url")||O();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},a.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=a.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return i?(this.trigger("invalid",this,i,a.extend(e||{},{validationError:i})),!1):!0}});var g=["keys","values","pairs","invert","pick","omit"];a.each(g,function(t){p.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.attributes),a[t].apply(a,e)}});var m=t.Collection=function(t,e){e||(e={}),e.url&&(this.url=e.url),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,a.extend({silent:!0},e))},v={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};a.extend(m.prototype,h,{model:p,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return t.sync.apply(this,arguments)},add:function(t,e){return this.set(t,a.defaults(e||{},y))},remove:function(t,e){t=a.isArray(t)?t.slice():[t],e||(e={});var i,n,s,r;for(i=0,n=t.length;n>i;i++)r=this.get(t[i]),r&&(delete this._byId[r.id],delete this._byId[r.cid],s=this.indexOf(r),this.models.splice(s,1),this.length--,e.silent||(e.index=s,r.trigger("remove",r,this,e)),this._removeReference(r));return this},set:function(t,e){e=a.defaults(e||{},v),e.parse&&(t=this.parse(t,e)),a.isArray(t)||(t=t?[t]:[]);var i,n,r,h,l,u=e.at,c=this.comparator&&null==u&&e.sort!==!1,d=a.isString(this.comparator)?this.comparator:null,p=[],f=[],g={};for(i=0,n=t.length;n>i;i++)(r=this._prepareModel(t[i],e))&&((h=this.get(r))?(e.remove&&(g[h.cid]=!0),e.merge&&(h.set(r.attributes,e),c&&!l&&h.hasChanged(d)&&(l=!0))):e.add&&(p.push(r),r.on("all",this._onModelEvent,this),this._byId[r.cid]=r,null!=r.id&&(this._byId[r.id]=r)));if(e.remove){for(i=0,n=this.length;n>i;++i)g[(r=this.models[i]).cid]||f.push(r);f.length&&this.remove(f,e)}if(p.length&&(c&&(l=!0),this.length+=p.length,null!=u?o.apply(this.models,[u,0].concat(p)):s.apply(this.models,p)),l&&this.sort({silent:!0}),e.silent)return this;for(i=0,n=p.length;n>i;i++)(r=p[i]).trigger("add",r,this,e);return l&&this.trigger("sort",this,e),this},reset:function(t,e){e||(e={});for(var i=0,n=this.models.length;n>i;i++)this._removeReference(this.models[i]);return e.previousModels=this.models,this._reset(),this.add(t,a.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,a.extend({at:this.length},e)),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,a.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){return null==t?void 0:this._byId[null!=t.id?t.id:t.cid||t]},at:function(t){return this.models[t]},where:function(t,e){return a.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),a.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(a.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},sortedIndex:function(t,e,i){e||(e=this.comparator);var n=a.isFunction(e)?e:function(t){return t.get(e)};return a.sortedIndex(this.models,t,n,i)},pluck:function(t){return a.invoke(this.models,"get",t)},fetch:function(t){t=t?a.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,i=this;return t.success=function(n){var s=t.reset?"reset":"set";i[s](n,t),e&&e(i,n,t),i.trigger("sync",i,n,t)},M(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?a.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var i=this,n=e.success;return e.success=function(s){e.wait&&i.add(t,e),n&&n(t,s,e)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof p)return t.collection||(t.collection=this),t;e||(e={}),e.collection=this;var i=new this.model(t,e);return i._validate(t,e)?i:(this.trigger("invalid",this,t,e),!1)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var w=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];a.each(w,function(t){m.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.models),a[t].apply(a,e)}});var b=["groupBy","countBy","sortBy"];a.each(b,function(t){m.prototype[t]=function(e,i){var n=a.isFunction(e)?e:function(t){return t.get(e)};return a[t](this.models,n,i)}});var x=t.View=function(t){this.cid=a.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},V=/^(\S+)\s*(.*)$/,S=["model","collection","el","id","attributes","className","tagName","events"];a.extend(x.prototype,h,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,i){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=a.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(a.isFunction(i)||(i=this[t[e]]),i){var n=e.match(V),s=n[1],r=n[2];i=a.bind(i,this),s+=".delegateEvents"+this.cid,""===r?this.$el.on(s,i):this.$el.on(s,r,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(t){this.options&&(t=a.extend({},a.result(this,"options"),t)),a.extend(this,a.pick(t,S)),this.options=t},_ensureElement:function(){if(this.el)this.setElement(a.result(this,"el"),!1);else{var e=a.extend({},a.result(this,"attributes"));this.id&&(e.id=a.result(this,"id")),this.className&&(e["class"]=a.result(this,"className"));var i=t.$("<"+a.result(this,"tagName")+">").attr(e);this.setElement(i,!1)}}}),t.sync=function(e,i,n){var s=D[e];a.defaults(n||(n={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var r={type:s,dataType:"json"};if(n.url||(r.url=a.result(i,"url")||O()),null!=n.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(r.contentType="application/json",r.data=JSON.stringify(n.attrs||i.toJSON(n))),n.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),n.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){r.type="POST",n.emulateJSON&&(r.data._method=s);var o=n.beforeSend;n.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",s),o?o.apply(this,arguments):void 0}}"GET"===r.type||n.emulateJSON||(r.processData=!1),"PATCH"!==r.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var h=n.xhr=t.ajax(a.extend(r,n));return i.trigger("request",i,h,n),h};var D={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},_=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,A=/\*\w+/g,k=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(C.prototype,h,{initialize:function(){},route:function(e,i,n){a.isRegExp(e)||(e=this._routeToRegExp(e)),a.isFunction(i)&&(n=i,i=""),n||(n=this[i]);var s=this;return t.history.route(e,function(r){var o=s._extractParameters(e,r);n&&n.apply(s,o),s.trigger.apply(s,["route:"+i].concat(o)),s.trigger("route",i,o),t.history.trigger("route",s,i,o)}),this},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=a.result(this,"routes");for(var t,e=a.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(k,"\\$&").replace(_,"(?:$1)?").replace(T,function(t,e){return e?t:"([^/]+)"}).replace(A,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return a.map(i,function(t){return t?decodeURIComponent(t):null})}});var P=t.History=function(){this.handlers=[],a.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,G=/msie [\w.]+/,I=/\/$/;P.started=!1,a.extend(P.prototype,h,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var i=this.root.replace(I,"");t.indexOf(i)||(t=t.substr(i.length))}else t=this.getHash();return t.replace(E,"")},start:function(e){if(P.started)throw new Error("Backbone.history has already been started");P.started=!0,this.options=a.extend({},{root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),n=document.documentMode,s=G.exec(navigator.userAgent.toLowerCase())&&(!n||7>=n);this.root=("/"+this.root+"/").replace(N,"/"),s&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(i)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var r=this.location,o=r.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!o?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&o&&r.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment+r.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),P.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(t){var e=this.fragment=this.getFragment(t),i=a.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0});return i},navigate:function(t,e){if(!P.started)return!1;if(e&&e!==!0||(e={trigger:e}),t=this.getFragment(t||""),this.fragment!==t){this.fragment=t;var i=this.root+t;if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}this.trigger("route",t),e.trigger&&this.loadUrl(t)}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),t.history=new P;var $=function(t,e){var i,n=this;i=t&&a.has(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)},a.extend(i,n,e);var s=function(){this.constructor=i};return s.prototype=n.prototype,i.prototype=new s,t&&a.extend(i.prototype,t),i.__super__=n.prototype,i};p.extend=m.extend=C.extend=x.extend=P.extend=$;var O=function(){throw new Error('A "url" property or function must be specified')},M=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}}}.call(this),function(t){t.fn.placeholder=function(e){var i={message:"...",className:"placeholder",clearClassName:"show_cancel_search"},n=t.extend({},i,e),s=function(t){t.val(t.attr("placeholder")||n.message),t.addClass(n.className)};return this.each(function(){var e=t(this);"search"!=e.attr("type")&&(e.bind("blur",function(){""==e.val()&&s(e)}).bind("focus",function(){e.val()==(e.attr("placeholder")||n.message)&&e.val(""),e.removeClass(n.className)}).bind("keyup",function(){var t=e.val();""!=t&&t!=n.message?e.parent().addClass(n.clearClassName):e.parent().removeClass(n.clearClassName)}),_.defer(function(){e.keyup().blur()}))})}}(jQuery),!function(){if(this.SVG=function(t){return SVG.supported?new SVG.Doc(t):void 0},SVG.ns="http://www.w3.org/2000/svg",SVG.xlink="http://www.w3.org/1999/xlink",SVG.did=1e3,SVG.eid=function(t){return"Svgjs"+t.charAt(0).toUpperCase()+t.slice(1)+SVG.did++},SVG.create=function(t){var e=document.createElementNS(this.ns,t);return e.setAttribute("id",this.eid(t)),e},SVG.extend=function(){var t,e,i,n;for(t=[].slice.call(arguments),e=t.pop(),n=t.length-1;n>=0;n--)if(t[n])for(i in e)t[n].prototype[i]=e[i];SVG.Set&&SVG.Set.inherit&&SVG.Set.inherit()},SVG.get=function(t){var e=document.getElementById(t);return e?e.instance:void 0},SVG.supported=function(){return!!document.createElementNS&&!!document.createElementNS(SVG.ns,"svg").createSVGRect}(),!SVG.supported)return!1;SVG.regex={test:function(t,e){return this[e].test(t)},unit:/^(-?[\d\.]+)([a-z%]{0,2})$/,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isStyle:/^font|text|leading|cursor/,isBlank:/^(\s+)?$/,isNumber:/^-?[\d\.]+$/,isPercent:/^-?[\d\.]+%$/},SVG.defaults={matrix:"1 0 0 1 0 0",attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000"},trans:function(){return{x:0,y:0,scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0,matrix:this.matrix,a:1,b:0,c:0,d:1,e:0,f:0}}},SVG.Color=function(t){var e;this.r=0,this.g=0,this.b=0,"string"==typeof t?SVG.regex.isRgb.test(t)?(e=SVG.regex.rgb.exec(t.replace(/\s/g,"")),this.r=parseInt(e[1]),this.g=parseInt(e[2]),this.b=parseInt(e[3])):SVG.regex.isHex.test(t)&&(e=SVG.regex.hex.exec(this._fullHex(t)),this.r=parseInt(e[1],16),this.g=parseInt(e[2],16),this.b=parseInt(e[3],16)):"object"==typeof t&&(this.r=t.r,this.g=t.g,this.b=t.b)},SVG.extend(SVG.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+this._compToHex(this.r)+this._compToHex(this.g)+this._compToHex(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return.3*(this.r/255)+.59*(this.g/255)+.11*(this.b/255)},_fullHex:function(t){return 4==t.length?["#",t.substring(1,2),t.substring(1,2),t.substring(2,3),t.substring(2,3),t.substring(3,4),t.substring(3,4)].join(""):t},_compToHex:function(t){var e=t.toString(16);return 1==e.length?"0"+e:e}}),SVG.Color.test=function(t){return t+="",SVG.regex.isHex.test(t)||SVG.regex.isRgb.test(t)},SVG.Color.isRgb=function(t){return t&&"number"==typeof t.r},SVG.Array=function(t,e){t=(t||[]).valueOf(),0==t.length&&e&&(t=e.valueOf()),this.value=this.parse(t)},SVG.extend(SVG.Array,{morph:function(t){if(this.destination=this.parse(t),this.value.length!=this.destination.length){for(var e=this.value[this.value.length-1],i=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(i);for(;this.value.length<this.destination.length;)this.value.push(e)}return this},settle:function(){var t,e=[];for(t=this.value.length-1;t>=0;t--)-1==e.indexOf(this.value[t])&&e.push(this.value[t]);return this.value=e},at:function(t){if(!this.destination)return this;for(var e=0,i=this.value.length,n=[];i>e;e++)n.push(this.value[e]+(this.destination[e]-this.value[e])*t);return new SVG.Array(n)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(t){return t=t.valueOf(),Array.isArray(t)?t:this.split(t)},split:function(t){return t.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"").split(" ")}}),SVG.PointArray=function(){this.constructor.apply(this,arguments)},SVG.PointArray.prototype=new SVG.Array,SVG.extend(SVG.PointArray,{toString:function(){for(var t=0,e=this.value.length,i=[];e>t;t++)i.push(this.value[t].join(","));return i.join(" ")},at:function(t){if(!this.destination)return this;for(var e=0,i=this.value.length,n=[];i>e;e++)n.push([this.value[e][0]+(this.destination[e][0]-this.value[e][0])*t,this.value[e][1]+(this.destination[e][1]-this.value[e][1])*t]);return new SVG.PointArray(n)},parse:function(t){if(t=t.valueOf(),Array.isArray(t))return t;t=this.split(t);for(var e,i=0,n=t.length,s=[];n>i;i++)e=t[i].split(","),s.push([parseFloat(e[0]),parseFloat(e[1])]);return s},move:function(t,e){var i=this.bbox();t-=i.x,e-=i.y;for(var n=this.value.length-1;n>=0;n--)this.value[n]=[this.value[n][0]+t,this.value[n][1]+e];return this},size:function(t,e){var i,n=this.bbox();for(i=this.value.length-1;i>=0;i--)this.value[i][0]=(this.value[i][0]-n.x)*t/n.width+n.x,this.value[i][1]=(this.value[i][1]-n.y)*e/n.height+n.x;return this},bbox:function(){if(0==this.value.length)return{x:0,y:0,width:0,height:0};var t,e=this.value[0][0],i=this.value[0][1],n={x:e,y:i};for(t=this.value.length-1;t>=0;t--)this.value[t][0]<n.x&&(n.x=this.value[t][0]),this.value[t][1]<n.y&&(n.y=this.value[t][1]),this.value[t][0]>e&&(e=this.value[t][0]),this.value[t][1]>i&&(i=this.value[t][1]);return n.width=e-n.x,n.height=i-n.y,n}}),SVG.Number=function(t){switch(this.value=0,this.unit="",typeof t){case"number":this.value=isNaN(t)?0:isFinite(t)?t:0>t?-3.4e38:3.4e38;break;case"string":var e=t.match(SVG.regex.unit);e&&(this.value=parseFloat(e[1]),"%"==e[2]&&(this.value/=100),this.unit=e[2]);break;default:t instanceof SVG.Number&&(this.value=t.value,this.unit=t.unit)}},SVG.extend(SVG.Number,{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:this.value)+this.unit},valueOf:function(){return this.value},to:function(t){return"string"==typeof t&&(this.unit=t),this},plus:function(t){return this.value=this+new SVG.Number(t),this},minus:function(t){return this.plus(-new SVG.Number(t))},times:function(t){return this.value=this*new SVG.Number(t),this},divide:function(t){return this.value=this/new SVG.Number(t),this}}),SVG.ViewBox=function(t){var e,i,n,s,r=t.bbox(),o=(t.attr("viewBox")||"").match(/-?[\d\.]+/g);this.x=r.x,this.y=r.y,this.width=t.node.clientWidth||t.node.getBoundingClientRect().width,this.height=t.node.clientHeight||t.node.getBoundingClientRect().height,o&&(e=parseFloat(o[0]),i=parseFloat(o[1]),n=parseFloat(o[2]),s=parseFloat(o[3]),this.zoom=this.width/this.height>n/s?this.height/s:this.width/n,this.x=e,this.y=i,this.width=n,this.height=s),this.zoom=this.zoom||1},SVG.extend(SVG.ViewBox,{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height}}),SVG.BBox=function(t){var e;if(this.x=0,this.y=0,this.width=0,this.height=0,t){try{e=t.node.getBBox()}catch(i){e={x:t.node.clientLeft,y:t.node.clientTop,width:t.node.clientWidth,height:t.node.clientHeight}}this.x=e.x+t.trans.x,this.y=e.y+t.trans.y,this.width=e.width*t.trans.scaleX,this.height=e.height*t.trans.scaleY}this.cx=this.x+this.width/2,this.cy=this.y+this.height/2},SVG.extend(SVG.BBox,{merge:function(t){var e=new SVG.BBox;return e.x=Math.min(this.x,t.x),e.y=Math.min(this.y,t.y),e.width=Math.max(this.x+this.width,t.x+t.width)-e.x,e.height=Math.max(this.y+this.height,t.y+t.height)-e.y,e.cx=e.x+e.width/2,e.cy=e.y+e.height/2,e}}),SVG.RBox=function(t){var e,i,n={};if(this.x=0,this.y=0,this.width=0,this.height=0,t){for(e=t.doc().parent,i=t.doc().viewbox().zoom,n=t.node.getBoundingClientRect(),this.x=n.left,this.y=n.top,this.x-=e.offsetLeft,this.y-=e.offsetTop;e=e.offsetParent;)this.x-=e.offsetLeft,this.y-=e.offsetTop;for(e=t;e=e.parent;)"svg"==e.type&&e.viewbox&&(i*=e.viewbox().zoom,this.x-=e.x()||0,this.y-=e.y()||0)
}this.x/=i,this.y/=i,this.width=n.width/=i,this.height=n.height/=i,this.cx=this.x+this.width/2,this.cy=this.y+this.height/2},SVG.extend(SVG.RBox,{merge:function(t){var e=new SVG.RBox;return e.x=Math.min(this.x,t.x),e.y=Math.min(this.y,t.y),e.width=Math.max(this.x+this.width,t.x+t.width)-e.x,e.height=Math.max(this.y+this.height,t.y+t.height)-e.y,e.cx=e.x+e.width/2,e.cy=e.y+e.height/2,e}}),SVG.Element=function(t){this._stroke=SVG.defaults.attrs.stroke,this.styles={},this.trans=SVG.defaults.trans(),(this.node=t)&&(this.type=t.nodeName,this.node.instance=this)},SVG.extend(SVG.Element,{x:function(t){return t&&(t=new SVG.Number(t),t.value/=this.trans.scaleX),this.attr("x",t)},y:function(t){return t&&(t=new SVG.Number(t),t.value/=this.trans.scaleY),this.attr("y",t)},cx:function(t){return null==t?this.bbox().cx:this.x(t-this.bbox().width/2)},cy:function(t){return null==t?this.bbox().cy:this.y(t-this.bbox().height/2)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},size:function(t,e){return this.attr({width:new SVG.Number(t),height:new SVG.Number(e)})},clone:function(){var t,e,i=this.type;return t="rect"==i||"ellipse"==i?this.parent[i](0,0):"line"==i?this.parent[i](0,0,0,0):"image"==i?this.parent[i](this.src):"text"==i?this.parent[i](this.content):"path"==i?this.parent[i](this.attr("d")):"polyline"==i||"polygon"==i?this.parent[i](this.attr("points")):"g"==i?this.parent.group():this.parent[i](),e=this.attr(),delete e.id,t.attr(e),t.trans=this.trans,t.transform({})},remove:function(){return this.parent&&this.parent.removeElement(this),this},doc:function(t){return this._parent(t||SVG.Doc)},attr:function(t,e,i){if(null==t){for(t={},e=this.node.attributes,i=e.length-1;i>=0;i--)t[e[i].nodeName]=SVG.regex.test(e[i].nodeValue,"isNumber")?parseFloat(e[i].nodeValue):e[i].nodeValue;return t}if("object"==typeof t)for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return this._isStyle(t)?"text"==t?this.content:"leading"==t&&this.leading?this.leading():this.style(t):(e=this.node.getAttribute(t),null==e?SVG.defaults.attrs[t]:SVG.regex.test(e,"isNumber")?parseFloat(e):e);if("style"==t)return this.style(e);if("x"==t&&Array.isArray(this.lines))for(i=this.lines.length-1;i>=0;i--)this.lines[i].attr(t,e);"stroke-width"==t?this.attr("stroke",parseFloat(e)>0?this._stroke:null):"stroke"==t&&(this._stroke=e),SVG.Color.test(e)||SVG.Color.isRgb(e)?e=new SVG.Color(e):"number"==typeof e?e=new SVG.Number(e):Array.isArray(e)&&(e=new SVG.Array(e)),null!=i?this.node.setAttributeNS(i,t,e.toString()):this.node.setAttribute(t,e.toString()),this._isStyle(t)&&("text"==t?this.text(e):"leading"==t&&this.leading?this.leading(e):this.style(t,e),this.rebuild&&this.rebuild(t,e))}return this},transform:function(t,e){if(0==arguments.length)return this.trans;if("string"==typeof t){if(arguments.length<2)return this.trans[t];var i={};return i[t]=e,this.transform(i)}var i=[];t=this._parseMatrix(t);for(e in t)null!=t[e]&&(this.trans[e]=t[e]);return this.trans.matrix=this.trans.a+" "+this.trans.b+" "+this.trans.c+" "+this.trans.d+" "+this.trans.e+" "+this.trans.f,t=this.trans,t.matrix!=SVG.defaults.matrix&&i.push("matrix("+t.matrix+")"),0!=t.rotation&&i.push("rotate("+t.rotation+" "+(null==t.cx?this.bbox().cx:t.cx)+" "+(null==t.cy?this.bbox().cy:t.cy)+")"),(1!=t.scaleX||1!=t.scaleY)&&i.push("scale("+t.scaleX+" "+t.scaleY+")"),0!=t.skewX&&i.push("skewX("+t.skewX+")"),0!=t.skewY&&i.push("skewY("+t.skewY+")"),(0!=t.x||0!=t.y)&&i.push("translate("+new SVG.Number(t.x/t.scaleX)+" "+new SVG.Number(t.y/t.scaleY)+")"),this._offset&&0!=this._offset.x&&0!=this._offset.y&&i.push("translate("+-this._offset.x+" "+-this._offset.y+")"),0==i.length?this.node.removeAttribute("transform"):this.node.setAttribute("transform",i.join(" ")),this},style:function(t,e){if(0==arguments.length)return this.attr("style")||"";if(arguments.length<2)if("object"==typeof t)for(e in t)this.style(e,t[e]);else{if(!SVG.regex.isCss.test(t))return this.styles[t];t=t.split(";");for(var i=0;i<t.length;i++)e=t[i].split(":"),2==e.length&&this.style(e[0].replace(/\s+/g,""),e[1].replace(/^\s+/,"").replace(/\s+$/,""))}else null===e||SVG.regex.test(e,"isBlank")?delete this.styles[t]:this.styles[t]=e;t="";for(e in this.styles)t+=e+":"+this.styles[e]+";";return""==t?this.node.removeAttribute("style"):this.node.setAttribute("style",t),this},data:function(t,e,i){if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(n){return this.attr("data-"+t)}else this.attr("data-"+t,null===e?null:i===!0||"string"==typeof e||"number"==typeof e?e:JSON.stringify(e));return this},bbox:function(){return new SVG.BBox(this)},rbox:function(){return new SVG.RBox(this)},inside:function(t,e){var i=this.bbox();return t>i.x&&e>i.y&&t<i.x+i.width&&e<i.y+i.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},_parent:function(t){for(var e=this;null!=e&&!(e instanceof t);)e=e.parent;return e},_isStyle:function(t){return"string"==typeof t?SVG.regex.test(t,"isStyle"):!1},_parseMatrix:function(t){if(t.matrix){var e=t.matrix.replace(/\s/g,"").split(",");6==e.length&&(t.a=parseFloat(e[0]),t.b=parseFloat(e[1]),t.c=parseFloat(e[2]),t.d=parseFloat(e[3]),t.e=parseFloat(e[4]),t.f=parseFloat(e[5]))}return t}}),SVG.Parent=function(t){this.constructor.call(this,t)},SVG.Parent.prototype=new SVG.Element,SVG.extend(SVG.Parent,{children:function(){return this._children||(this._children=[])},add:function(t,e){if(!this.has(t)){if(e=null==e?this.children().length:e,t.parent){var i=t.parent.children().indexOf(t);t.parent.children().splice(i,1)}this.children().splice(e,0,t),this.node.insertBefore(t.node,this.node.childNodes[e]||null),t.parent=this}return this._defs&&(this.node.removeChild(this._defs.node),this.node.appendChild(this._defs.node)),this},put:function(t,e){return this.add(t,e),t},has:function(t){return this.children().indexOf(t)>=0},get:function(t){return this.children()[t]},first:function(){return this.children()[0]},last:function(){return this.children()[this.children().length-1]},each:function(t,e){var i,n,s=this.children();for(i=0,n=s.length;n>i;i++)s[i]instanceof SVG.Element&&t.apply(s[i],[i,s]),e&&s[i]instanceof SVG.Container&&s[i].each(t,e);return this},removeElement:function(t){var e=this.children().indexOf(t);return this.children().splice(e,1),this.node.removeChild(t.node),t.parent=null,this},clear:function(){for(var t=this.children().length-1;t>=0;t--)this.removeElement(this.children()[t]);return this._defs&&this._defs.clear(),this},defs:function(){return this.doc().defs()}}),SVG.Container=function(t){this.constructor.call(this,t)},SVG.Container.prototype=new SVG.Parent,SVG.extend(SVG.Container,{viewbox:function(t){return 0==arguments.length?new SVG.ViewBox(this):(t=1==arguments.length?[t.x,t.y,t.width,t.height]:[].slice.call(arguments),this.attr("viewBox",t))}}),SVG.FX=function(t){this.target=t},SVG.extend(SVG.FX,{animate:function(t,e,i){var n,s,r,o,a=this.target,h=this;return"object"==typeof t&&(i=t.delay,e=t.ease,t=t.duration),t=null==t?1e3:t,e=e||"<>",h.to=function(t){var i;if(t=0>t?0:t>1?1:t,null==n){n=[];for(o in h.attrs)n.push(o);if(a.morphArray){var l,u=new a.morphArray(h._plot||a.points.toString());h._size&&u.size(h._size.width.to,h._size.height.to),l=u.bbox(),h._x?u.move(h._x.to,l.y):h._cx&&u.move(h._cx.to-l.width/2,l.y),l=u.bbox(),h._y?u.move(l.x,h._y.to):h._cy&&u.move(l.x,h._cy.to-l.height/2),delete h._x,delete h._y,delete h._cx,delete h._cy,delete h._size,h._plot=a.points.morph(u)}}if(null==s){s=[];for(o in h.trans)s.push(o)}if(null==r){r=[];for(o in h.styles)r.push(o)}for(t="<>"==e?-Math.cos(t*Math.PI)/2+.5:">"==e?Math.sin(t*Math.PI/2):"<"==e?-Math.cos(t*Math.PI/2)+1:"-"==e?t:"function"==typeof e?e(t):t,h._x?a.x(h._at(h._x,t)):h._cx&&a.cx(h._at(h._cx,t)),h._y?a.y(h._at(h._y,t)):h._cy&&a.cy(h._at(h._cy,t)),h._size&&a.size(h._at(h._size.width,t),h._at(h._size.height,t)),h._plot&&a.plot(h._plot.at(t)),h._viewbox&&a.viewbox(h._at(h._viewbox.x,t),h._at(h._viewbox.y,t),h._at(h._viewbox.width,t),h._at(h._viewbox.height,t)),i=n.length-1;i>=0;i--)a.attr(n[i],h._at(h.attrs[n[i]],t));for(i=s.length-1;i>=0;i--)a.transform(s[i],h._at(h.trans[s[i]],t));for(i=r.length-1;i>=0;i--)a.style(r[i],h._at(h.styles[r[i]],t));h._during&&h._during.call(a,t,function(e,i){return h._at({from:e,to:i},t)})},"number"==typeof t&&(this.timeout=setTimeout(function(){var e=1e3/60,i=(new Date).getTime(),n=i+t;h.interval=setInterval(function(){var e=(new Date).getTime(),s=e>n?1:(e-i)/t;h.to(s),e>n&&(h._plot&&a.plot(new SVG.PointArray(h._plot.destination).settle()),clearInterval(h.interval),h._after?h._after.apply(a,[h]):h.stop())},t>e?e:t)},i||0)),this},bbox:function(){return this.target.bbox()},attr:function(t,e){if("object"==typeof t)for(var i in t)this.attr(i,t[i]);else this.attrs[t]={from:this.target.attr(t),to:e};return this},transform:function(t,e){if(1==arguments.length){t=this.target._parseMatrix(t),delete t.matrix;for(e in t)this.trans[e]={from:this.target.trans[e],to:t[e]}}else{var i={};i[t]=e,this.transform(i)}return this},style:function(t,e){if("object"==typeof t)for(var i in t)this.style(i,t[i]);else this.styles[t]={from:this.target.style(t),to:e};return this},x:function(t){return this._x={from:this.target.x(),to:t},this},y:function(t){return this._y={from:this.target.y(),to:t},this},cx:function(t){return this._cx={from:this.target.cx(),to:t},this},cy:function(t){return this._cy={from:this.target.cy(),to:t},this},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},size:function(t,e){if(this.target instanceof SVG.Text)this.attr("font-size",t);else{var i=this.target.bbox();this._size={width:{from:i.width,to:t},height:{from:i.height,to:e}}}return this},plot:function(t){return this._plot=t,this},viewbox:function(t,e,i,n){if(this.target instanceof SVG.Container){var s=this.target.viewbox();this._viewbox={x:{from:s.x,to:t},y:{from:s.y,to:e},width:{from:s.width,to:i},height:{from:s.height,to:n}}}return this},update:function(t){return this.target instanceof SVG.Stop&&(null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new SVG.Number(t.offset))),this},during:function(t){return this._during=t,this},after:function(t){return this._after=t,this},stop:function(){return clearTimeout(this.timeout),clearInterval(this.interval),this.attrs={},this.trans={},this.styles={},delete this._x,delete this._y,delete this._cx,delete this._cy,delete this._size,delete this._plot,delete this._after,delete this._during,delete this._viewbox,this},_at:function(t,e){return"number"==typeof t.from?t.from+(t.to-t.from)*e:SVG.regex.unit.test(t.to)?new SVG.Number(t.to).minus(new SVG.Number(t.from)).times(e).plus(new SVG.Number(t.from)):t.to&&(t.to.r||SVG.Color.test(t.to))?this._color(t,e):1>e?t.from:t.to},_color:function(t,e){var i,n;return e=0>e?0:e>1?1:e,i=new SVG.Color(t.from),n=new SVG.Color(t.to),new SVG.Color({r:~~(i.r+(n.r-i.r)*e),g:~~(i.g+(n.g-i.g)*e),b:~~(i.b+(n.b-i.b)*e)}).toHex()}}),SVG.extend(SVG.Element,{animate:function(t,e,i){return(this.fx||(this.fx=new SVG.FX(this))).stop().animate(t,e,i)},stop:function(){return this.fx&&this.fx.stop(),this}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave"].forEach(function(t){SVG.Element.prototype[t]=function(e){var i=this;return this.node["on"+t]="function"==typeof e?function(){return e.apply(i,arguments)}:null,this}}),SVG.on=function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent("on"+e,i)},SVG.off=function(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent("on"+e,i)},SVG.extend(SVG.Element,{on:function(t,e){return SVG.on(this.node,t,e),this},off:function(t,e){return SVG.off(this.node,t,e),this}}),SVG.Defs=function(){this.constructor.call(this,SVG.create("defs"))},SVG.Defs.prototype=new SVG.Container,SVG.G=function(){this.constructor.call(this,SVG.create("g"))},SVG.G.prototype=new SVG.Container,SVG.extend(SVG.G,{x:function(t){return null==t?this.trans.x:this.transform("x",t)},y:function(t){return null==t?this.trans.y:this.transform("y",t)}}),SVG.extend(SVG.Container,{group:function(){return this.put(new SVG.G)}}),SVG.extend(SVG.Element,{siblings:function(){return this.parent.children()},position:function(){var t=this.siblings();return t.indexOf(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var t=this.position();return this.parent.removeElement(this).put(this,t+1)},backward:function(){var t=this.position();return t>0&&this.parent.removeElement(this).add(this,t-1),this},front:function(){return this.parent.removeElement(this).put(this)},back:function(){return this.position()>0&&this.parent.removeElement(this).add(this,0),this},before:function(t){t.remove();var e=this.position();return this.parent.add(t,e),this},after:function(t){t.remove();var e=this.position();return this.parent.add(t,e+1),this}}),SVG.Mask=function(){this.constructor.call(this,SVG.create("mask")),this.targets=[]},SVG.Mask.prototype=new SVG.Container,SVG.extend(SVG.Mask,{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unmask();return delete this.targets,this.parent.removeElement(this),this}}),SVG.extend(SVG.Element,{maskWith:function(t){return this.masker=t instanceof SVG.Mask?t:this.parent.mask().add(t),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),SVG.extend(SVG.Container,{mask:function(){return this.defs().put(new SVG.Mask)}}),SVG.Clip=function(){this.constructor.call(this,SVG.create("clipPath")),this.targets=[]},SVG.Clip.prototype=new SVG.Container,SVG.extend(SVG.Clip,{remove:function(){for(var t=this.targets.length-1;t>=0;t--)this.targets[t]&&this.targets[t].unclip();return delete this.targets,this.parent.removeElement(this),this}}),SVG.extend(SVG.Element,{clipWith:function(t){return this.clipper=t instanceof SVG.Clip?t:this.parent.clip().add(t),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),SVG.extend(SVG.Container,{clip:function(){return this.defs().put(new SVG.Clip)}}),SVG.Gradient=function(t){this.constructor.call(this,SVG.create(t+"Gradient")),this.type=t},SVG.Gradient.prototype=new SVG.Container,SVG.extend(SVG.Gradient,{from:function(t,e){return this.attr("radial"==this.type?{fx:new SVG.Number(t),fy:new SVG.Number(e)}:{x1:new SVG.Number(t),y1:new SVG.Number(e)})},to:function(t,e){return this.attr("radial"==this.type?{cx:new SVG.Number(t),cy:new SVG.Number(e)}:{x2:new SVG.Number(t),y2:new SVG.Number(e)})},radius:function(t){return"radial"==this.type?this.attr({r:new SVG.Number(t)}):this},at:function(t){return this.put(new SVG.Stop(t))},update:function(t){return this.clear(),t(this),this},fill:function(){return"url(#"+this.attr("id")+")"},toString:function(){return this.fill()}}),SVG.extend(SVG.Defs,{gradient:function(t,e){var i=this.put(new SVG.Gradient(t));return e(i),i}}),SVG.extend(SVG.Container,{gradient:function(t,e){return this.defs().gradient(t,e)}}),SVG.Stop=function(t){this.constructor.call(this,SVG.create("stop")),this.update(t)},SVG.Stop.prototype=new SVG.Element,SVG.extend(SVG.Stop,{update:function(t){return null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new SVG.Number(t.offset)),this}}),SVG.Doc=function(t){this.parent="string"==typeof t?document.getElementById(t):t,this.constructor.call(this,"svg"==this.parent.nodeName?this.parent:SVG.create("svg")),this.attr({xmlns:SVG.ns,version:"1.1",width:"100%",height:"100%"}).attr("xlink",SVG.xlink,SVG.ns),this._defs=new SVG.Defs,this.node.appendChild(this._defs.node),"svg"!=this.parent.nodeName&&this.stage()},SVG.Doc.prototype=new SVG.Container,SVG.extend(SVG.Doc,{stage:function(){var t,e=this,i=document.createElement("div");return i.style.cssText="position:relative;height:100%;",e.parent.appendChild(i),i.appendChild(e.node),t=function(){"complete"===document.readyState?(e.style("position:absolute;"),setTimeout(function(){e.style("position:relative;overflow:hidden;"),e.parent.removeChild(e.node.parentNode),e.node.parentNode.removeChild(e.node),e.parent.appendChild(e.node),e.fixSubPixelOffset(),SVG.on(window,"resize",function(){e.fixSubPixelOffset()})},5)):setTimeout(t,10)},t(),this},defs:function(){return this._defs},fixSubPixelOffset:function(){var t=this.node.getScreenCTM();this.style("left",-t.e%1+"px").style("top",-t.f%1+"px")}}),SVG.Shape=function(t){this.constructor.call(this,t)},SVG.Shape.prototype=new SVG.Element,SVG.Use=function(){this.constructor.call(this,SVG.create("use"))},SVG.Use.prototype=new SVG.Shape,SVG.extend(SVG.Use,{element:function(t){return this.target=t,this.attr("href","#"+t,SVG.xlink)}}),SVG.extend(SVG.Container,{use:function(t){return this.put(new SVG.Use).element(t)}}),SVG.Rect=function(){this.constructor.call(this,SVG.create("rect"))},SVG.Rect.prototype=new SVG.Shape,SVG.extend(SVG.Container,{rect:function(t,e){return this.put((new SVG.Rect).size(t,e))}}),SVG.Ellipse=function(){this.constructor.call(this,SVG.create("ellipse"))},SVG.Ellipse.prototype=new SVG.Shape,SVG.extend(SVG.Ellipse,{x:function(t){return null==t?this.cx()-this.attr("rx"):this.cx(t+this.attr("rx"))},y:function(t){return null==t?this.cy()-this.attr("ry"):this.cy(t+this.attr("ry"))},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",new SVG.Number(t).divide(this.trans.scaleX))},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",new SVG.Number(t).divide(this.trans.scaleY))},size:function(t,e){return this.attr({rx:new SVG.Number(t).divide(2),ry:new SVG.Number(e).divide(2)})}}),SVG.extend(SVG.Container,{circle:function(t){return this.ellipse(t,t)},ellipse:function(t,e){return this.put(new SVG.Ellipse).size(t,e).move(0,0)}}),SVG.Line=function(){this.constructor.call(this,SVG.create("line"))},SVG.Line.prototype=new SVG.Shape,SVG.extend(SVG.Line,{x:function(t){var e=this.bbox();return null==t?e.x:this.attr({x1:this.attr("x1")-e.x+t,x2:this.attr("x2")-e.x+t})},y:function(t){var e=this.bbox();return null==t?e.y:this.attr({y1:this.attr("y1")-e.y+t,y2:this.attr("y2")-e.y+t})},cx:function(t){var e=this.bbox().width/2;return null==t?this.x()+e:this.x(t-e)},cy:function(t){var e=this.bbox().height/2;return null==t?this.y()+e:this.y(t-e)},size:function(t,e){var i=this.bbox();return this.attr(this.attr("x1")<this.attr("x2")?"x2":"x1",i.x+t).attr(this.attr("y1")<this.attr("y2")?"y2":"y1",i.y+e)},plot:function(t,e,i,n){return this.attr({x1:t,y1:e,x2:i,y2:n})}}),SVG.extend(SVG.Container,{line:function(t,e,i,n){return this.put((new SVG.Line).plot(t,e,i,n))}}),SVG.Polyline=function(){this.constructor.call(this,SVG.create("polyline"))},SVG.Polyline.prototype=new SVG.Shape,SVG.Polygon=function(){this.constructor.call(this,SVG.create("polygon"))},SVG.Polygon.prototype=new SVG.Shape,SVG.extend(SVG.Polyline,SVG.Polygon,{morphArray:SVG.PointArray,plot:function(t){return this.attr("points",this.points=new SVG.PointArray(t,[[0,0]]))},move:function(t,e){return this.attr("points",this.points.move(t,e))},x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},size:function(t,e){return this.attr("points",this.points.size(t,e))}}),SVG.extend(SVG.Container,{polyline:function(t){return this.put(new SVG.Polyline).plot(t)},polygon:function(t){return this.put(new SVG.Polygon).plot(t)}}),SVG.Path=function(t){this.constructor.call(this,SVG.create("path")),this.unbiased=!!t},SVG.Path.prototype=new SVG.Shape,SVG.extend(SVG.Path,{_plot:function(t){return this.attr("d",t||"M0,0")}}),SVG.extend(SVG.Container,{path:function(t,e){return this.put(new SVG.Path(e)).plot(t)}}),SVG.extend(SVG.Path,{x:function(t){return null==t?this.bbox().x:this.transform("x",t)},y:function(t){return null==t?this.bbox().y:this.transform("y",t)},size:function(t,e){var i=t/this._offset.width;return this.transform({scaleX:i,scaleY:null!=e?e/this._offset.height:i})},plot:function(t){var e=this.trans.scaleX,i=this.trans.scaleY;return this._plot(t),this._offset=this.transform({scaleX:1,scaleY:1}).bbox(),this.unbiased?this._offset.x=this._offset.y=0:(this._offset.x-=this.trans.x,this._offset.y-=this.trans.y),this.transform({scaleX:e,scaleY:i})}}),SVG.Image=function(){this.constructor.call(this,SVG.create("image"))},SVG.Image.prototype=new SVG.Shape,SVG.extend(SVG.Image,{load:function(t){return t?this.attr("href",this.src=t,SVG.xlink):this}}),SVG.extend(SVG.Container,{image:function(t,e,i){return e=null!=e?e:100,this.put((new SVG.Image).load(t).size(e,null!=i?i:e))}});var t="size family weight stretch variant style".split(" ");SVG.Text=function(){this.constructor.call(this,SVG.create("text")),this.styles={"font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"},this._leading=new SVG.Number("1.2em"),this._rebuild=!0},SVG.Text.prototype=new SVG.Shape,SVG.extend(SVG.Text,{x:function(t,e){return null==t?e?this.attr("x"):this.bbox().x:(e||(e=this.style("text-anchor"),t="start"==e?t:"end"==e?t+this.bbox().width:t+this.bbox().width/2),this.textPath||this.lines.each(function(){this.newLined&&this.x(t)}),this.attr("x",t))},cx:function(t){return null==t?this.bbox().cx:this.x(t-this.bbox().width/2)},cy:function(t,e){return null==t?this.bbox().cy:this.y(e?t:t-this.bbox().height/2)},move:function(t,e,i){return this.x(t,i).y(e)},center:function(t,e,i){return this.cx(t,i).cy(e,i)},text:function(t){if(null==t)return this.content;if(this.clear(),"function"==typeof t)this._rebuild=!1,t(this);else{this._rebuild=!0,t=SVG.regex.isBlank.test(t)?"text":t;var e,i,n=t.split("\n");for(e=0,i=n.length;i>e;e++)this.tspan(n[e]).newLine();this.rebuild()}return this},tspan:function(t){var e=this.textPath?this.textPath.node:this.node,i=(new SVG.TSpan).text(t),n=this.style();return e.appendChild(i.node),this.lines.add(i),SVG.regex.isBlank.test(n)||i.style(n),this.content+=t,i.parent=this,i},size:function(t){return this.attr("font-size",t)},leading:function(t){return null==t?this._leading:(t=new SVG.Number(t),this._leading=t,this.lines.each(function(){this.newLined&&this.attr("dy",t)}),this)},rebuild:function(){return this._rebuild&&this.lines.attr({x:this.attr("x"),dy:this._leading,style:this.style()}),this},clear:function(){for(var t=this.textPath?this.textPath.node:this.node;t.hasChildNodes();)t.removeChild(t.lastChild);return delete this.lines,this.lines=new SVG.Set,this.content="",this}}),SVG.extend(SVG.Container,{text:function(t){return this.put(new SVG.Text).text(t)}}),SVG.TSpan=function(){this.constructor.call(this,SVG.create("tspan"))},SVG.TSpan.prototype=new SVG.Shape,SVG.extend(SVG.TSpan,{text:function(t){return this.node.appendChild(document.createTextNode(t)),this},dx:function(t){return this.attr("dx",t)},dy:function(t){return this.attr("dy",t)},newLine:function(){return this.newLined=!0,this.parent.content+="\n",this.dy(this.parent._leading),this.attr("x",this.parent.x())}}),SVG.TextPath=function(){this.constructor.call(this,SVG.create("textPath"))},SVG.TextPath.prototype=new SVG.Element,SVG.extend(SVG.Text,{path:function(t){for(this.textPath=new SVG.TextPath;this.node.hasChildNodes();)this.textPath.node.appendChild(this.node.firstChild);return this.node.appendChild(this.textPath.node),this.track=this.doc().defs().path(t,!0),this.textPath.parent=this,this.textPath.attr("href","#"+this.track,SVG.xlink),this},plot:function(t){return this.track&&this.track.plot(t),this}}),SVG.Nested=function(){this.constructor.call(this,SVG.create("svg")),this.style("overflow","visible")},SVG.Nested.prototype=new SVG.Container,SVG.extend(SVG.Container,{nested:function(){return this.put(new SVG.Nested)}}),SVG._stroke=["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],SVG._fill=["color","opacity","rule"];var e=function(t,e){return"color"==e?t:t+"-"+e};["fill","stroke"].forEach(function(t){var i={};i[t]=function(i){if("string"==typeof i||SVG.Color.isRgb(i)||i&&"function"==typeof i.fill)this.attr(t,i);else for(index=SVG["_"+t].length-1;index>=0;index--)null!=i[SVG["_"+t][index]]&&this.attr(e(t,SVG["_"+t][index]),i[SVG["_"+t][index]]);return this},SVG.extend(SVG.Element,SVG.FX,i)}),SVG.extend(SVG.Element,SVG.FX,{rotate:function(t,e,i){return this.transform({rotation:t||0,cx:e,cy:i})},skew:function(t,e){return this.transform({skewX:t||0,skewY:e||0})},scale:function(t,e){return this.transform({scaleX:t,scaleY:null==e?t:e})},translate:function(t,e){return this.transform({x:t,y:e})},matrix:function(t){return this.transform({matrix:t})},opacity:function(t){return this.attr("opacity",t)}}),SVG.Text&&SVG.extend(SVG.Text,SVG.FX,{font:function(e){for(var i in e)"anchor"==i?this.attr("text-anchor",e[i]):t.indexOf(i)>-1?this.attr("font-"+i,e[i]):this.attr(i,e[i]);return this}}),SVG.Set=function(){this.clear()},SVG.SetFX=function(t){this.set=t},SVG.extend(SVG.Set,{add:function(){var t,e,i=[].slice.call(arguments);for(t=0,e=i.length;e>t;t++)this.members.push(i[t]);return this},remove:function(t){var e=this.members.indexOf(t);return e>-1&&this.members.splice(e,1),this},each:function(t){for(var e=0,i=this.members.length;i>e;e++)t.apply(this.members[e],[e,this.members]);return this},clear:function(){return this.members=[],this},valueOf:function(){return this.members}}),SVG.Set.inherit=function(){var t,e=[];for(var t in SVG.Shape.prototype)"function"==typeof SVG.Shape.prototype[t]&&"function"!=typeof SVG.Set.prototype[t]&&e.push(t);e.forEach(function(t){SVG.Set.prototype[t]=function(){for(var e=0,i=this.members.length;i>e;e++)this.members[e]&&"function"==typeof this.members[e][t]&&this.members[e][t].apply(this.members[e],arguments);return"animate"==t?this.fx||(this.fx=new SVG.SetFX(this)):this}}),e=[];for(var t in SVG.FX.prototype)"function"==typeof SVG.FX.prototype[t]&&"function"!=typeof SVG.SetFX.prototype[t]&&e.push(t);e.forEach(function(t){SVG.SetFX.prototype[t]=function(){for(var e=0,i=this.set.members.length;i>e;e++)this.set.members[e].fx[t].apply(this.set.members[e].fx,arguments);return this}})},SVG.extend(SVG.Container,{set:function(){return new SVG.Set}}),SVG.extend(SVG.Element,{remember:function(t,e){if("object"==typeof arguments[0])for(var e in t)this.remember(e,t[e]);else{if(1==arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory||(this._memory={})}}),"function"==typeof define&&define.amd?define(function(){return SVG}):"undefined"!=typeof exports&&(exports.SVG=SVG)}.call(this);var APDate=function(t){if(this.defaults={year:null,month:null,day:null},this.monthAbbreviations={0:"Jan.",1:"Feb.",7:"Aug.",8:"Sept.",9:"Oct.",10:"Nov.",11:"Dec."},this.months={0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},"string"==typeof t)this.date=new Date(t),this.opts={month:this.date.getMonth(),day:this.date.getDate(),year:this.date.getFullYear()};else{this.opts=this.extendDefaults(this.defaults,t);var e=new Date;if(this.opts.year&&this.opts.month&&this.opts.day&&(this.date=new Date(this.opts.year,this.opts.month-1,this.opts.day)),this.opts.year&&this.opts.month&&!this.opts.day&&(this.date=new Date(this.opts.year,this.opts.month-1)),!this.opts.month||this.opts.year||this.opts.day||(this.date=new Date(e.getFullYear(),this.opts.month-1)),this.opts.month&&this.opts.day&&!this.opts.year&&(this.date=new Date(e.getFullYear(),this.opts.month-1,this.opts.day)),!this.opts.month)throw"At minimum, must specify month for AP date"}return this};APDate.prototype.extendDefaults=function(t,e){var i={};for(var n in t)i[n]=e[n]?e[n]:t[n];return i},APDate.prototype.getMonthAbbreviation=function(){var t=this.monthAbbreviations[this.date.getUTCMonth()];return"undefined"==typeof t?this.months[this.date.getUTCMonth()]:t},APDate.prototype.getMonthFull=function(){return this.months[this.date.getUTCMonth()]},APDate.prototype.ap=function(){return this.opts.year&&this.opts.month&&this.opts.day?this.getMonthAbbreviation()+" "+this.date.getDate()+", "+this.date.getFullYear():this.opts.year&&this.opts.month&&!this.opts.day?this.getMonthAbbreviation()+" "+this.date.getFullYear():this.opts.month&&this.opts.day&&!this.opts.year?this.getMonthAbbreviation()+" "+this.date.getDate():!this.opts.month||this.opts.day||this.opts.year?void 0:this.getMonthFull()},window.console||(window.console={}),console.log||(console.log=_.identity),window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),window.DV=window.DV||{},DV.jQuery=jQuery.noConflict(),DV.viewers=DV.viewers||{},DV.model=DV.model||{},DV.Annotation=function(t){this.position={top:t.top,left:t.left},this.dimensions={width:t.width,height:t.height},this.page=t.page,this.pageEl=t.pageEl,this.annotationContainerEl=t.annotationContainerEl,this.viewer=this.page.set.viewer,this.annotationEl=null,this.renderedHTML=t.renderedHTML,this.type=t.type,this.id=t.id,this.model=this.viewer.models.annotations.getAnnotation(this.id),this.state="collapsed",this.active=!1,this.remove(),this.add(),t.active&&(this.viewer.helpers.setActiveAnnotationLimits(this),this.viewer.events.resetTracker(),this.active=null,this.show(),t.showEdit&&this.showEdit())},DV.Annotation.prototype.add=function(){if("page"===this.type)this.annotationEl=this.renderedHTML.insertBefore(this.annotationContainerEl);else if(this.page.annotations.length>0)for(var t=0,e=this.page.annotations.length;e>t;t++){if(this.page.annotations[t].id===this.id)return!1;this.annotationEl=this.renderedHTML.appendTo(this.annotationContainerEl)}else this.annotationEl=this.renderedHTML.appendTo(this.annotationContainerEl)},DV.Annotation.prototype.next=function(){this.hide.preventRemovalOfCoverClass=!0;var t=this.viewer.models.annotations.getNextAnnotation(this.id);t&&this.page.set.showAnnotation({index:t.index,id:t.id,top:t.top})},DV.Annotation.prototype.previous=function(){this.hide.preventRemovalOfCoverClass=!0;var t=this.viewer.models.annotations.getPreviousAnnotation(this.id);t&&this.page.set.showAnnotation({index:t.index,id:t.id,top:t.top})},DV.Annotation.prototype.show=function(t){this.viewer.activeAnnotation&&this.viewer.activeAnnotation.id!=this.id&&this.viewer.activeAnnotation.hide(),this.viewer.annotationToLoadId=null,this.viewer.elements.window.addClass("DV-coverVisible"),this.annotationEl.find("div.DV-annotationBG").css({display:"block",opacity:1}),this.annotationEl.addClass("DV-activeAnnotation"),this.viewer.activeAnnotation=this,this.viewer.helpers.addObserver("trackAnnotation"),this.viewer.helpers.setActiveAnnotationInNav(this.id),this.active=!0,this.pageEl.parent(".DV-set").addClass("DV-activePage"),t&&t.edit&&this.showEdit()},DV.Annotation.prototype.hide=function(t){parseInt(this.viewer.elements.currentPage.text(),10);"page"!==this.type&&this.annotationEl.find("div.DV-annotationBG").css({opacity:0,display:"none"});var e=this.annotationEl.hasClass("DV-editing");this.annotationEl.removeClass("DV-editing DV-activeAnnotation"),t===!0&&this.viewer.elements.window.removeClass("DV-coverVisible"),this.hide.preventRemovalOfCoverClass!==!1&&this.hide.preventRemovalOfCoverClass||(this.viewer.elements.window.removeClass("DV-coverVisible"),this.hide.preventRemovalOfCoverClass=!1),this.viewer.activeAnnotation=null,this.viewer.events.trackAnnotation.h=null,this.viewer.events.trackAnnotation.id=null,this.viewer.events.trackAnnotation.combined=null,this.active=!1,this.viewer.pageSet.setActiveAnnotation(null),this.viewer.helpers.removeObserver("trackAnnotation"),this.viewer.helpers.setActiveAnnotationInNav(),this.pageEl.parent(".DV-set").removeClass("DV-activePage"),this.removeConnector(!0),e&&this.viewer.helpers.saveAnnotation({target:this.annotationEl},"onlyIfText")
},DV.Annotation.prototype.toggle=function(){this.viewer.activeAnnotation&&this.viewer.activeAnnotation!=this&&this.viewer.activeAnnotation.hide(),"page"!==this.type&&(this.annotationEl.toggleClass("DV-activeAnnotation"),1==this.active?this.hide(!0):this.show())},DV.Annotation.prototype.drawConnector=function(){1!=this.active&&(this.viewer.elements.window.addClass("DV-annotationActivated"),this.annotationEl.addClass("DV-annotationHover"))},DV.Annotation.prototype.removeConnector=function(){1!=this.active&&(this.viewer.elements.window.removeClass("DV-annotationActivated"),this.annotationEl.removeClass("DV-annotationHover"))},DV.Annotation.prototype.showEdit=function(){this.annotationEl.addClass("DV-editing"),this.viewer.$(".DV-annotationTitleInput",this.annotationEl).focus()},DV.Annotation.prototype.remove=function(){DV.jQuery("#DV-annotation-"+this.id).remove()},DV.DragReporter=function(t,e,i,n){this.viewer=t,this.dragClassName="DV-dragging",this.sensitivityY=1,this.sensitivityX=1,this.oldPageY=0,_.extend(this,n),this.dispatcher=i,this.toWatch=this.viewer.$(e),this.boundReporter=_.bind(this.mouseMoveReporter,this),this.boundMouseUpReporter=_.bind(this.mouseUpReporter,this),this.boundMouseDownReporter=_.bind(this.mouseDownReporter,this),this.setBinding()},DV.DragReporter.prototype.shouldIgnore=function(t){if(!this.ignoreSelector)return!1;var e=this.viewer.$(t.target);return e.parents().is(this.ignoreSelector)||e.is(this.ignoreSelector)},DV.DragReporter.prototype.mouseUpReporter=function(t){return this.shouldIgnore(t)?!0:(t.preventDefault(),clearInterval(this.updateTimer),void this.stop())},DV.DragReporter.prototype.oldPositionUpdater=function(){this.oldPageY=this.pageY},DV.DragReporter.prototype.stop=function(){this.toWatch.removeClass(this.dragClassName),this.toWatch.unbind("mousemove")},DV.DragReporter.prototype.setBinding=function(){this.toWatch.mouseup(this.boundMouseUpReporter),this.toWatch.mousedown(this.boundMouseDownReporter)},DV.DragReporter.prototype.unBind=function(){this.toWatch.unbind("mouseup",this.boundMouseUpReporter),this.toWatch.unbind("mousedown",this.boundMouseDownReporter)},DV.DragReporter.prototype.destroy=function(){this.unBind(),this.toWatch=null},DV.DragReporter.prototype.mouseDownReporter=function(t){return this.shouldIgnore(t)?!0:(t.preventDefault(),this.pageY=t.pageY,this.pageX=t.pageX,this.oldPageY=t.pageY,this.updateTimer=setInterval(_.bind(this.oldPositionUpdater,this),1200),this.toWatch.addClass(this.dragClassName),void this.toWatch.mousemove(this.boundReporter))},DV.DragReporter.prototype.mouseMoveReporter=function(t){if(this.shouldIgnore(t))return!0;t.preventDefault();var e=Math.round(this.sensitivityX*(this.pageX-t.pageX)),i=Math.round(this.sensitivityY*(this.pageY-t.pageY)),n=e>0?"right":"left",s=i>0?"down":"up";this.pageY=t.pageY,this.pageX=t.pageX,(0!==i||0!==e)&&this.dispatcher({event:t,deltaX:e,deltaY:i,directionX:n,directionY:s})},DV.Elements=function(t){this._viewer=t;for(var e=DV.Schema.elements,i=0,n=e.length;n>i;i++)this.getElement(e[i])},DV.Elements.prototype.getElement=function(t){this[t.name]=this._viewer.$(t.query)},DV.History=Backbone.History.extend({constructor:function(t){this.viewer=t,Backbone.History.apply(this,arguments)},register:function(t,e){this.route(t,e)},loadUrl:function(t){var e=this.fragment=this.getFragment(t),i=_.any(this.handlers,function(t){if(t.route.test(e)){var i=t.route.exec(e);return t.callback.apply(null,i.slice(1)),!0}});return i}}),DV.Page=function(t,e){this.viewer=t,this.index=e.index;for(var i in e)this[i]=e[i];this.el=this.viewer.$(this.el),this.parent=this.el.parent(),this.pageNumberEl=this.el.find("span.DV-pageNumber"),this.pageInsertEl=this.el.find(".DV-pageNoteInsert"),this.removedOverlayEl=this.el.find(".DV-overlay"),this.pageImageEl=this.getPageImage(),this.pageEl=this.el.find("div.DV-page"),this.annotationContainerEl=this.el.find("div.DV-annotations"),this.coverEl=this.el.find("div.DV-cover"),this.loadTimer=null,this.hasLayerPage=!1,this.hasLayerRegional=!1,this.imgSource=null,this.offset=null,this.pageNumber=null,this.zoom=1,this.annotations=[];var n=this.viewer.models;this.model_document=n.document,this.model_pages=n.pages,this.model_annotations=n.annotations,this.model_chapters=n.chapters},DV.Page.prototype.setPageImage=function(){this.pageImageEl=this.getPageImage()},DV.Page.prototype.getPageImage=function(){return this.el.find("img.DV-pageImage")},DV.Page.prototype.getOffset=function(){return this.model_document.offsets[this.index]},DV.Page.prototype.getPageNoteHeight=function(){return this.model_pages.pageNoteHeights[this.index]},DV.Page.prototype.draw=function(t){if(this.index!==t.index||t.force||this.imgSource!=this.model_pages.imageURL(this.index)){this.index=t.force===!0?this.index:t.index;var e=this.model_pages.imageURL(this.index);if(this.el[0].className=this.el[0].className.replace(/\s*DV-page-\d+/,"")+" DV-page-"+(this.index+1),this.viewer.options.ads&&t.force&&this.pageNumber!=this.index+1&&(this.index+1)%this.viewer.options.ads.interval===0&&(this.el.find(".advert").length||(this.el.append('<div class="advert" data-ad-type="cube"></div>'),this.viewer.options.ads.args?this.el.find(".advert").ad(this.viewer.options.ads.args):this.el.find(".advert").ad())),this.imgSource!=e&&(this.imgSource=e,this.loadImage()),this.sizeImage(),this.position(),this.pageNumber!=this.index+1||t.forceAnnotationRedraw===!0){for(var i=0;i<this.annotations.length;i++)this.annotations[i].remove(),delete this.annotations[i],this.hasLayerRegional=!1,this.hasLayerPage=!1;this.annotations=[];var n=this.model_annotations.byPage[this.index];if(n)for(var i=0;i<n.length;i++){var s=n[i];if(s.id===this.viewer.annotationToLoadId){var r=!0;s.id===this.viewer.annotationToLoadEdit&&(t.edit=!0),this.viewer.openingAnnotationFromHash&&(this.viewer.helpers.jump(this.index,(s.top||0)-37),this.viewer.openingAnnotationFromHash=!1)}else var r=!1;"page"==s.type?this.hasLayerPage=!0:"regional"==s.type&&(this.hasLayerRegional=!0);var o=this.viewer.$(".DV-allAnnotations .DV-annotation[rel=aid-"+s.id+"]").clone();o.attr("id","DV-annotation-"+s.id),o.find(".DV-img").each(function(){var t=DV.jQuery(this);t.attr("src",t.attr("data-src"))});var a=new DV.Annotation({renderedHTML:o,id:s.id,page:this,pageEl:this.pageEl,annotationContainerEl:this.annotationContainerEl,pageNumber:this.pageNumber,state:"collapsed",top:s.y1,left:s.x1,width:s.x1+s.x2,height:s.y1+s.y2,active:r,showEdit:t.edit,type:s.type});this.annotations.push(a)}this.pageInsertEl.toggleClass("visible",!this.hasLayerPage),this.renderMeta({pageNumber:this.index+1}),this.drawRemoveOverlay()}this.setPageType()}},DV.Page.prototype.drawRemoveOverlay=function(){this.removedOverlayEl.toggleClass("visible",!!this.viewer.models.removedPages[this.index+1])},DV.Page.prototype.setPageType=function(){this.annotations.length>0?(this.hasLayerPage===!0&&this.el.addClass("DV-layer-page"),this.hasLayerRegional===!0&&this.el.addClass("DV-layer-page")):this.el.removeClass("DV-layer-page DV-layer-regional")},DV.Page.prototype.position=function(){this.el.css({top:this.model_document.offsets[this.index]}),this.offset=this.getOffset()},DV.Page.prototype.renderMeta=function(t){this.pageNumberEl.text("p. "+t.pageNumber),this.pageNumber=t.pageNumber},DV.Page.prototype.loadImage=function(){this.loadTimer&&(clearTimeout(this.loadTimer),delete this.loadTimer),this.el.removeClass("DV-loaded").addClass("DV-loading");var t=this.model_pages,e=DV.jQuery(new Image),i=this,n=function(){i.loadTimer&&(clearTimeout(i.loadTimer),delete i.loadTimer),e.bind("load readystatechange",function(n){if(this.complete||"complete"==this.readyState&&"readystatechange"==n.type){if(e!=i._currentLoader)return;t.updateHeight(e[0],i.index),i.drawImage(e[0].src),clearTimeout(i.loadTimer),delete i.loadTimer}});var n=i.model_pages.imageURL(i.index);i._currentLoader=e,e[0].src=n};this.loadTimer=setTimeout(n,150),this.viewer.pageSet.redraw()},DV.Page.prototype.sizeImage=function(){var t=this.model_pages.width,e=this.model_pages.getPageHeight(this.index);this.coverEl.css({width:t,height:e}),this.pageImageEl.css({width:t,height:e}),this.el.css({height:e,width:t}),this.pageEl.css({height:e,width:t})},DV.Page.prototype.drawImage=function(t){var e=this.model_pages.getPageHeight(this.index);if(t==this.pageImageEl.attr("src")&&e==this.pageImageEl.attr("height"))return void this.el.addClass("DV-loaded").removeClass("DV-loading");this.pageImageEl.replaceWith('<img width="'+this.model_pages.width+'" height="'+e+'" class="DV-pageImage" src="'+t+'" />'),this.setPageImage(),this.sizeImage(),this.el.addClass("DV-loaded").removeClass("DV-loading"),this.el.find(".DV-page").css({"background-image":"url("+t+")","background-size":"100% auto","background-repeat":"none"});this.el;_.each(this.viewer.onPageLoadedCallbacks,_.bind(function(t){t(this)},this)),this.showEditionSectionLabel()},DV.Page.prototype.showEditionSectionLabel=function(){var t=this;if(t.pageNumber!==this.index+1)return!1;if(1==t.pageNumber)return!1;t.el.find(".DV-edition-section-label").remove();var e=_.find(this.viewer.schema.data.sections,function(e){return e.page==t.pageNumber?e:void 0});if(e&&""!==e.title){var i=$("<div />");e.edition&&e.section?i.addClass("DV-edition-section-label").append("<h3>"+e.section+" section from "+e.title+' regional edition <a href="/faq"><i class="icon-question-sign"></i></a></h3>'):e.edition&&!e.section&&i.addClass("DV-edition-section-label").append("<h3>From "+e.title+' regional edition <a href="/faq"><i class="icon-question-sign"></i></a></h3>'),$(this.el).prepend(i)}},DV.PageSet=function(t){this.currentPage=null,this.pages={},this.viewer=t,this.zoomText()},DV.PageSet.prototype.execute=function(t,e){this.pages.each(function(i){i[t].apply(i,e)})},DV.PageSet.prototype.buildPages=function(t){t=t||{};for(var e=this.getPages(),i=0;i<e.length;i++){var n=e[i];n.set=this,n.index=i,this.pages[n.label]=new DV.Page(this.viewer,n),1==n.currentPage&&(this.currentPage=this.pages[n.label])}this.viewer.models.annotations.renderAnnotations()},DV.PageSet.prototype.getPages=function(){var t=[];return this.viewer.elements.sets.each(_.bind(function(e,i){var n=$(i).hasClass("DV-page-"+this.viewer.api.currentPage());t.push({label:"p"+e,el:i,index:e,pageNumber:e+1,currentPage:n})},this)),t},DV.PageSet.prototype.getCurrentPage=function(){var t=this.getPages();return _.find(t,function(t){return t.currentPage?t:void 0})},DV.PageSet.prototype.reflowPages=function(){this.viewer.models.pages.resize(),this.viewer.helpers.setActiveAnnotationLimits(),this.redraw(!1,!0)},DV.PageSet.prototype.simpleReflowPages=function(){this.viewer.helpers.setActiveAnnotationLimits(),this.redraw(!1,!1)},DV.PageSet.prototype.cleanUp=function(){this.viewer.activeAnnotation&&this.viewer.activeAnnotation.hide(!0)},DV.PageSet.prototype.zoom=function(t){if(this.viewer.models.document.zoomLevel!==t.zoomLevel){var e=this.viewer.models.document.currentIndex(),i=this.viewer.models.document.offsets[e],n=1*this.viewer.models.document.zoomLevel,s=t.zoomLevel/n,r=this.viewer.elements.window.scrollTop();this.viewer.models.document.zoom(t.zoomLevel);var o=parseInt(r,10)>parseInt(i,10)?r-i:i-r,a=o/this.viewer.models.pages.height;if(this.reflowPages(),this.zoomText(),"ViewThumbnails"===this.viewer.state&&(this.viewer.thumbnails.setZoom(t.zoomLevel),this.viewer.thumbnails.lazyloadThumbnails()),"ViewDocument"===this.viewer.state&&this.viewer.$(".DV-annotationRegion.DV-accessRedact").each(function(){var t=DV.jQuery(this);t.css({top:Math.round(t.position().top*s),left:Math.round(t.position().left*s),width:Math.round(t.width()*s),height:Math.round(t.height()*s)})}),null!=this.viewer.activeAnnotation){var h={index:this.viewer.models.document.currentIndex(),top:this.viewer.activeAnnotation.top,id:this.viewer.activeAnnotation.id};this.viewer.activeAnnotation=null,this.showAnnotation(h),this.viewer.helpers.setActiveAnnotationLimits(this.viewer.activeAnnotation)}else{var l=Math.round(this.viewer.models.pages.height*a);this.viewer.helpers.jump(this.viewer.models.document.currentIndex(),l)}}},DV.PageSet.prototype.zoomText=function(){var t=this.viewer.models.pages.getPadding(),e=this.viewer.models.pages.zoomLevel;this.viewer.$(".DV-textPage").width(e),this.viewer.elements.collection.css({width:e+t})},DV.PageSet.prototype.draw=function(t){for(var e=0,i=t.length;i>e;e++){var n=this.pages[t[e].label];n&&n.draw({index:t[e].index,pageNumber:t[e].index+1})}},DV.PageSet.prototype.redraw=function(t,e){this.pages.p0&&this.pages.p0.draw({force:!0,forceAnnotationRedraw:e}),this.pages.p1&&this.pages.p1.draw({force:!0,forceAnnotationRedraw:e}),this.pages.p2&&this.pages.p2.draw({force:!0,forceAnnotationRedraw:e}),e&&this.viewer.activeAnnotation&&this.viewer.helpers.jump(this.viewer.activeAnnotation.page.index,this.viewer.activeAnnotation.position.top-37)},DV.PageSet.prototype.setActiveAnnotation=function(t,e){this.viewer.annotationToLoadId=t,this.viewer.annotationToLoadEdit=e?t:null},DV.PageSet.prototype.showAnnotation=function(t,e){if(e=e||{},"ViewAnnotation"===this.viewer.state){var i=this.viewer.$(".DV-allAnnotations div[rel=aid-"+t.id+"]")[0].offsetTop;return this.viewer.elements.window.scrollTop(i+10,"fast"),this.viewer.helpers.setActiveAnnotationInNav(t.id),void(this.viewer.activeAnnotationId=t.id)}this.viewer.helpers.removeObserver("trackAnnotation"),this.viewer.activeAnnotationId=null,null!=this.viewer.activeAnnotation&&this.viewer.activeAnnotation.hide(),this.setActiveAnnotation(t.id,e.edit);for(var n="page"==this.viewer.models.annotations.byId[t.id].type,s=n?-7:36,i=t.top-s,r=0;2>=r;r++)if(this.pages["p"+r])for(var o=0;o<this.pages["p"+r].annotations.length;o++)if(this.pages["p"+r].annotations[o].id===t.id)return this.viewer.helpers.jump(t.index,i),void this.pages["p"+r].annotations[o].show(e);this.viewer.helpers.jump(t.index,i)},DV.Thumbnails=function(t){this.currentIndex=0,this.zoomLevel=null,this.scrollTimer=null,this.imageUrl=t.schema.document.resources.page.image.replace(/\{size\}/,"small"),this.pageCount=t.schema.document.pages,this.viewer=t,this.resizeId=_.uniqueId(),this.sizes={},this.BASE_WIDTH=60,this.BASE_HEIGHT=75,_.each(_.range(this.viewer.models.document.ZOOM_RANGES.length+1),_.bind(function(t){var e,i;0===t?(e=this.BASE_WIDTH,i=this.BASE_HEIGHT):(e=this.BASE_WIDTH+30*t,i=this.BASE_HEIGHT+40*t),this.sizes[String(t)]={w:e,h:i}},this)),_.bindAll(this,"lazyloadThumbnails","loadThumbnails")},DV.Thumbnails.prototype.render=function(){this.el=this.viewer.$(".DV-thumbnails"),this.getCurrentIndex(),this.getZoom(),this.viewer.schema.data.sections.length>0?_.each(this.viewer.schema.data.sections,_.bind(function(t){this.buildThumbnails(t.page,t.endPage)},this)):this.buildThumbnails(1,this.pageCount),this.setZoom(),this.viewer.elements.window.unbind("scroll.thumbnails").bind("scroll.thumbnails",this.lazyloadThumbnails);var t="resize.thumbnails-"+this.resizeId;DV.jQuery(window).unbind(t).bind(t,this.lazyloadThumbnails)},DV.Thumbnails.prototype.buildThumbnails=function(t,e){1==t&&this.el.empty();var i,n=null,s=null;this.viewer.schema.data.sections.length>0&&(i=_.find(this.viewer.schema.data.sections,function(e){return e.page==t?e:void 0}),n=i.section,s=i.edition);var r=JST.thumbnails({page:t,endPage:e,zoom:this.zoomLevel,imageUrl:this.imageUrl,section:n,edition:s});this.el.html(this.el.html()+r),this.highlightCurrentPage(),_.defer(this.loadThumbnails)},DV.Thumbnails.prototype.getCurrentIndex=function(){this.currentIndex=this.viewer.models.document.currentIndex()},DV.Thumbnails.prototype.highlightCurrentPage=function(){this.currentIndex=this.viewer.models.document.currentIndex(),this.viewer.$(".DV-thumbnail.DV-selected").removeClass("DV-selected");var t=this.viewer.$(".DV-thumbnail:eq("+this.currentIndex+")");if(t.length){t.addClass("DV-selected");var e=this.viewer.$(".DV-pages");e.scrollTop(e.scrollTop()+t.position().top-12)}},DV.Thumbnails.prototype.setZoom=function(t){this.getZoom(t);var e=this.sizes[this.zoomLevel];this.viewer.$(".DV-hasHeight").each(function(){var t=e.w/this.width;DV.jQuery(this).css({height:this.height*t})}),this.viewer.$(".DV-hasWidth").each(function(){var t=e.h/this.height,i=DV.jQuery(this);i.add(i.prev(".DV-thumbnail-shadow")).css({width:this.width*t})}),this.el[0].className=this.el[0].className.replace(/DV-zoom-\d\s*/,""),this.el.addClass("DV-zoom-"+this.zoomLevel)},DV.Thumbnails.prototype.getZoom=function(t){return this.zoomLevel=null!==t&&"undefined"!=typeof t?_.indexOf(this.viewer.models.document.ZOOM_RANGES,t):_.indexOf(this.viewer.models.document.ZOOM_RANGES,this.viewer.models.document.zoomLevel)},DV.Thumbnails.prototype.setImageSize=function(t,e){var i=this.sizes[this.zoomLevel],n=i.w/t.width,s=t.height*n;if(Math.abs(i.h-s)>10||/DV-has/.test(e[0].className))if(s<i.h)e.addClass("DV-hasHeight").css({height:s});else{var r=s/i.h,o=i.w/r;e.add(e.prev(".DV-thumbnail-shadow")).addClass("DV-hasWidth").css({width:o})}e.attr({src:t.src})},DV.Thumbnails.prototype.lazyloadThumbnails=function(){"ViewThumbnails"==this.viewer.state&&(this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(this.loadThumbnails,100))},DV.Thumbnails.prototype.loadThumbnails=function(){var t=this.viewer,e=t.$(".DV-thumbnails").width(),i=t.elements.window.height(),n=t.elements.window.scrollTop(),s=n+i,r=t.$(".DV-thumbnail:first-child"),o=r.outerHeight(!0),a=r.outerWidth(!0),h=Math.floor(e/a),l=Math.floor(n/o*h),u=Math.ceil(s/o*h);l-=l%h+1,u+=h-u%h,this.loadImages(l,u)},DV.Thumbnails.prototype.loadImages=function(t,e){var i=this,n=this.viewer,s=t>0?":gt("+t+")":"",r=e<=this.pageCount?":lt("+e+")":"";n.$(".DV-thumbnail"+r+s).each(function(){var t=n.$(this);if(!t.attr("src")){var e=n.$(".DV-thumbnail-image",t),s=new Image;DV.jQuery(s).bind("load",_.bind(i.setImageSize,i,s,e)).attr({src:e.attr("data-src")})}})},DV.Schema=function(){this.models={},this.views={},this.states={},this.helpers={},this.events={},this.elements={},this.text={},this.data={zoomLevel:700,pageWidthPadding:40,additionalPaddingOnPage:30,state:{page:{previous:0,current:0,next:1}}}},DV.Schema.prototype.importCanonicalDocument=function(t){_.uniqueId(),t.sections=_.sortBy(t.sections||[],function(t){return t.page}),t.annotations=t.annotations||[],t.canonicalURL=t.canonical_url,this.document=DV.jQuery.extend(!0,{},t),this.data.title=t.title,this.data.totalPages=t.pages,this.data.totalAnnotations=t.annotations.length,this.data.sections=t.sections,this.data.chapters=[],this.data.annotationsById={},this.data.annotationsByPage={},_.each(t.annotations,DV.jQuery.proxy(this.loadAnnotation,this))},DV.Schema.prototype.loadAnnotation=function(t){t.id&&(t.server_id=t.id);var e=t.page-1;if(t.id=t.id||_.uniqueId(),t.title=t.title||"Untitled Note",t.text=t.content||"",t.access=t.access||"public",t.type=t.location&&t.location.image?"region":"page","region"===t.type){var i=DV.jQuery.map(t.location.image.split(","),function(t){return parseInt(t,10)});t.y1=i[0],t.x2=i[1],t.y2=i[2],t.x1=i[3]}else"page"===t.type&&(t.y1=0,t.x2=0,t.y2=0,t.x1=0);this.data.annotationsById[t.id]=t;var n=this.data.annotationsByPage[e]=this.data.annotationsByPage[e]||[],s=_.sortedIndex(n,t,function(t){return t.y1});return n.splice(s,0,t),t},DV.Schema.elements=[{name:"browserDocument",query:document},{name:"browserWindow",query:window},{name:"header",query:"div.DV-header"},{name:"viewer",query:"div.DV-docViewer"},{name:"window",query:"div.DV-pages"},{name:"sets",query:"div.DV-set"},{name:"pages",query:"div.DV-page"},{name:"metas",query:"div.DV-pageMeta"},{name:"bar",query:"div.DV-bar"},{name:"currentPage",query:"span.DV-currentPage"},{name:"well",query:"div.DV-well"},{name:"collection",query:"div.DV-pageCollection"},{name:"annotations",query:"div.DV-allAnnotations"},{name:"navigation",query:"div.DV-navigation"},{name:"chaptersContainer",query:"div.DV-chaptersContainer"},{name:"searchInput",query:"input.DV-searchInput"},{name:"textCurrentPage",query:"span.DV-textCurrentPage"},{name:"coverPages",query:"div.DV-cover"},{name:"fullscreen",query:"div.DV-fullscreen"},{name:"footer",query:"div.DV-footer"},{name:"text",query:".DV-textContents"},{name:"articleText",query:"div.DV-articleTextContents"}],DV.model.Annotations=function(t){this.LEFT_MARGIN=25,this.PAGE_NOTE_FUDGE=window.dc&&dc.account&&(dc.account.isOwner||dc.account.isReviewer)?46:26,this.viewer=t,this.offsetsAdjustments=[],this.offsetAdjustmentSum=0,this.saveCallbacks=[],this.deleteCallbacks=[],this.byId=this.viewer.schema.data.annotationsById,this.byPage=this.viewer.schema.data.annotationsByPage,this.bySortOrder=this.sortAnnotations()},DV.model.Annotations.prototype={render:function(t){var e,i,n,s,r=(this.viewer.models.document,this.viewer.models.pages),o=r.zoomFactor(),a=t;"page"===a.type?(e=i=n=s=0,a.top=0):(n=Math.round(a.y1*o),s=Math.round(a.y2*o),e<this.LEFT_MARGIN&&(e=this.LEFT_MARGIN),e=Math.round(a.x1*o),i=Math.round(a.x2*o),a.top=n-5),a.owns_note=a.owns_note||!1,a.width=r.width,a.pageNumber=a.page,a.author=a.author||"",a.author_organization=a.author_organization||"",a.bgWidth=a.width,a.bWidth=a.width-16,a.excerptWidth=i-e-8,a.excerptMarginLeft=e-3,a.excerptHeight=s-n,a.index=a.page-1,a.image=r.imageURL(a.index),a.imageTop=n+1,a.tabTop=(35>n?35-n:0)+8,a.imageWidth=r.width,a.imageHeight=Math.round(r.height*o),a.regionLeft=e,a.regionWidth=i-e,a.regionHeight=s-n,a.excerptDSHeight=a.excerptHeight-6,a.DSOffset=3,"public"==a.access?a.accessClass="DV-accessPublic":"exclusive"==a.access?a.accessClass="DV-accessExclusive":"private"==a.access&&(a.accessClass="DV-accessPrivate"),a.orderClass="",a.options=this.viewer.options,1==a.position&&(a.orderClass+=" DV-firstAnnotation"),a.position==this.bySortOrder.length&&(a.orderClass+=" DV-lastAnnotation");var h="page"===a.type?"pageAnnotation":"annotation";return JST[h](a)},sortAnnotations:function(){return this.bySortOrder=_.sortBy(_.values(this.byId),function(t){return 1e4*t.page+t.y1})},renderAnnotations:function(){if(this.viewer.options.showAnnotations!==!1){for(var t=0;t<this.bySortOrder.length;t++){var e=this.bySortOrder[t];e.of=_.indexOf(this.byPage[e.page-1],e),e.position=t+1,e.html=this.render(e)}this.renderAnnotationsByIndex()}},renderAnnotationsByIndex:function(){var t=_.map(this.bySortOrder,function(t){return t.html}),e=t.join("").replace(/id="DV-annotation-(\d+)"/g,function(t,e){return'id="DV-listAnnotation-'+e+'" rel="aid-'+e+'"'});this.viewer.$("div.DV-allAnnotations").html(e),this.renderAnnotationsByIndex.rendered=!0,this.renderAnnotationsByIndex.zoomLevel=this.zoomLevel,this.updateAnnotationOffsets(),_.defer(_.bind(this.updateAnnotationOffsets,this))},refreshAnnotation:function(t){this.viewer;t.html=this.render(t),DV.jQuery.$("#DV-annotation-"+t.id).replaceWith(t.html)},removeAnnotation:function(t){delete this.byId[t.id];var e=t.page-1;this.byPage[e]=_.without(this.byPage[e],t),this.sortAnnotations(),DV.jQuery("#DV-annotation-"+t.id+", #DV-listAnnotation-"+t.id).remove(),this.viewer.api.redraw(!0),_.isEmpty(this.byId)&&this.viewer.open("ViewDocument")},updateAnnotationOffsets:function(){this.offsetsAdjustments=[],this.offsetAdjustmentSum=0;var t=this.viewer.models.document,e=this.viewer.$("div.DV-allAnnotations"),i=e.find(".DV-pageNote"),n=this.viewer.models.pages.pageNoteHeights;0==this.viewer.$("div.DV-docViewer").hasClass("DV-viewAnnotations")&&e.addClass("DV-getHeights");var s=[];_.each(_.select(this.bySortOrder,function(t){return"page"==t.type}),function(t,e){t.el=i[e],s[t.pageNumber]=t});for(var r=0,o=t.totalPages;o>=r;r++){if(n[r]=0,s[r]){var a=this.viewer.$(s[r].el).height()+this.PAGE_NOTE_FUDGE;n[r-1]=a,this.offsetAdjustmentSum+=a}this.offsetsAdjustments[r]=this.offsetAdjustmentSum}e.removeClass("DV-getHeights")},fireSaveCallbacks:function(t){_.each(this.saveCallbacks,function(e){e(t)})},fireDeleteCallbacks:function(t){_.each(this.deleteCallbacks,function(e){e(t)})},getAnnotations:function(t){return this.byPage[t]},getFirstAnnotation:function(){return _.first(this.bySortOrder)},getNextAnnotation:function(t){var e=this.byId[t];return this.bySortOrder[_.indexOf(this.bySortOrder,e)+1]},getPreviousAnnotation:function(t){var e=this.byId[t];return this.bySortOrder[_.indexOf(this.bySortOrder,e)-1]},getAnnotation:function(t){if(t.id)return this.byId[t.id];if(t.index&&!t.id)throw new Error("looked up an annotation without an id");return this.byId[t]}},DV.model.Articles=function(t){this.viewer=t,this.loadedPages={},this.pendingPages={},this.events=_.extend({pageArticlesLoaded:function(t){return this.trigger("pageArticlesLoaded",t)}},Backbone.Events),t.options.articles?(this.options=t.options.articles,this.init()):this.options=null},DV.model.Articles.prototype={pageUrl:function(t){var e=this.options.page.url;return e=e.replace(/\{\s*?page\s*?\}/,t)},articleImageUrl:function(t,e,i){var n=this.options.image.url;return n=n.replace(/\{\s*?page\s*?\}/,t),n=n.replace(/\{\s*?slug\s*?\}/,e),n=n.replace(/\{\s*?size\s*?\}/,i)},getPageElement:function(t){return"undefined"==typeof t&&(t=this.viewer.api.currentPage()),this.viewer.elements.pages[(t-1)%3]},render:function(t,e){var i=$(this.getPageElement(e)),n=(this.viewer.models.document.zoomLevel,1),s=t.articles,r="ontouchstart"in window;if(SVG.supported){var o=i.data("canvas"),a=i.data("page-num");if(o&&a==e)return;o||(o=SVG(i[0]),o.size("100%","100%").style("z-index",99999999999).attr("class","PAGECANVASBAM").attr("viewBox","0 0 "+t.size.width+" "+t.size.height),i.data("canvas",o)),i.data("page-num",e),o.clear(),_.each(s,_.bind(function(t){if(e==i.data("page-num")){var s=t.body;this.viewer.options.ads&&(s='<div class="advert" data-ad-type="cube"></div>'+s);var a=o.group();if(a.attr("class","article-"+t.slug),_.each(t.coords,function(t){var e=[];_.each(t,function(t){e.push([t[0]*n,t[1]*n])}),a.polyline(e).fill({color:"orange",opacity:.5})}),a.opacity(t.slug==this.activeArticleSlug?.5:0),r||(a.on("mouseover",function(){a.opacity(.2+a.opacity())}),a.on("mouseout",function(){var t=a.opacity()-.2;a.opacity(0>t?0:t)})),r)var h="touchstart",l="touchmove",u="touchend";else var h="mousedown",l="mousemove",u="mouseup";var c,d=0,p=0;a.on(h,function(){c=!1}).on(l,function(){c=!0}).on(u,_.bind(function(){c||(p>0?(this.moveToArticle(e,t.slug,!0),clearTimeout(d)):(this.activeArticle=t,this.markRegionActive(t.slug),this.showOptions(e,t.slug),this.triggerAnalytics(t.slug),this.viewer.history.navigate("page/"+t.start_page+"/article/"+t.slug,{trigger:!1,replace:!0})),p+=1,d=setTimeout(function(){p=0},500))},this))}},this))}this.events.pageArticlesLoaded(e)},triggerAnalytics:function(){var t={page:DOCUMENT_ROOT},e=this.viewer.models.articles.activeArticle.title,i=this.viewer.schema.document.date,n=e+" ("+i+")";this.viewer.options.google_analytics&&ga("send","event","Article","View",n,t),this.viewer.options.omniture&&console.log("@todo omniture article view event:",n)},moveToArticle:function(t,e,i){var n=this.loadedPages[t];if("undefined"==typeof n)return!1;var s,r,o,a=($(this.getPageElement(t)),this.viewer.models.document.ZOOM_RANGES),h=this.viewer.models.pages.zoomLevel,l=this.viewer.elements.window,u=_.find(n.articles,function(t){return t.slug==e}),c=function(t){return t[0]},d=function(t){return t[1]},p=function(t){return t[0]},f=_.flatten(u.coords,!0),g=_.min(f,c),m=_.min(f,d),v=_.max(f,p),y=_.max(f,d);if(this.activeArticle=u,this.triggerAnalytics(u.slug),i){for(var w=a.length;w-->0;)if(s=a[w]/n.size.width,r=(v[0]-g[0])*s,o=(y[1]-m[1])*s,r<=l.width()){newZoomLevel=a[w];break}this.viewer.pageSet.zoom({zoomLevel:newZoomLevel})}else s=h/n.size.width,r=(v[0]-g[0])*s,o=(y[1]-m[1])*s;var b=($(window).width()-r)/2,x=g[0]*s-b,V=m[1]*s+this.viewer.models.document.getOffset(t-1);return 0>x&&(x=0),l.scrollLeft(x),l.scrollTop(V),this.markRegionActive(u.slug),this.showOptions(t,u.slug),this.viewer.history.navigate("page/"+u.start_page+"/article/"+u.slug,{trigger:!1}),!1},showOptions:function(t,e){this.cleanUp();var i,n=!1,s=this.getArticle(t,e);s.continuations&&s.continuations.length>1&&(i=s.continuations.sort(),n=i[i.indexOf(Number(t))+1]?i[i.indexOf(Number(t))+1]:i[0]),this.showArticleShareLinks(s),s.legible&&this.viewer.$(".DV-read-article").show().click(_.bind(function(){this.savePosition(),this.viewer.open("ViewArticleText",t,e)},this)),n&&this.viewer.$(".DV-jump-to-continuation").css("display","inline-block").click(_.bind(function(){this.cleanUp(),this.viewer.helpers.jump(n-1),this.pendingPages[n].done(_.bind(function(){this.markRegionActive(e),this.showOptions(n,e)},this))},this)).show()},showArticleShareLinks:function(t){var e;this.viewer.$(".DV-shareTools").hide(),this.viewer.$("#DV-selection-shareTools .dropdown-menu").empty(),this.viewer.helpers.setupShareLinks("#DV-selection-shareTools .dropdown-menu","article"),e=t.type_rollup.match(/image/gi)?"image":t.type_rollup.match(/article/gi)?"article":t.type_rollup.match(/comic/gi)?"comic":t.type_rollup.match(/advertisement/gi)?"advertisement":"content",this.viewer.$("#DV-selection-shareTools .content-type").text(e),this.viewer.$("#DV-selection-shareTools").css("display","inline-block")},getArticle:function(t,e){return _.find(this.loadedPages[t].articles,function(t){return t.slug===e})},showBackToPaper:function(t,e){this.cleanUp();var i=this.getArticle(t,e);this.viewer.$(".DV-back-to-search").hide(),this.viewer.$(".DV-read-article").hide(),this.showArticleShareLinks(i),this.viewer.$(".DV-back-to-paper").show().click(_.bind(function(i){i.preventDefault(),this.cleanUp(),this.viewer.open("ViewDocument");var n=Math.round(this.viewer.models.pages.baseWidth*this.viewer.models.pages.zoomFactor());this.viewer.elements.collection.css({width:n+this.viewer.models.pages.getPadding()}),this.restorePosition(),this.markRegionActive(e),this.showOptions(t,e)},this))},getData:function(){var t=this.viewer.api.currentPage();isNaN(t)||(this.drawArticlesForPage(t),this.drawArticlesForPage(t+1))},drawArticlesForPage:function(t){return"undefined"!=typeof this.loadedPages[t]?this.render(this.loadedPages[t],t):(_.keys(this.pendingPages).length>0&&_.each(_.keys(this.pendingPages),_.bind(function(e){var i=e!=String(t)&&e!=String(t+1)&&e!=String(t-1);i&&this.pendingPages[e].abort()},this)),void(-1==_.keys(this.pendingPages).indexOf(String(t))&&(this.pendingPages[t]=$.getJSON(this.pageUrl(t),_.bind(function(e){this.loadedPages[t]=e,this.render(e,t)},this)))))},markRegionActive:function(t){$(".article-"+this.activeArticleSlug).each(function(){this.instance.opacity(0)}),this.activeArticleSlug=t,$(".article-"+this.activeArticleSlug).each(function(){this.instance.opacity(.5)})},cleanUp:function(){this.viewer.$(".DV-read-article").hide().off(),this.viewer.$(".DV-shareTools").show(),this.viewer.$("#DV-selection-shareTools").hide(),this.viewer.$(".DV-back-to-paper").hide().off(),this.viewer.$(".DV-jump-to-continuation").hide().off(),this.viewer.$(".DV-back-to-search").show()},savePosition:function(){this.position={top:$(".DV-pages").scrollTop(),left:$(".DV-pages").scrollLeft()}},restorePosition:function(){$(".DV-pages").scrollTop(this.position.top),$(".DV-pages").scrollLeft(this.position.left)},init:function(){var t=_.bind(function(e){var i=this.viewer.pageSet.getCurrentPage(),n=e.el;$(i.el).data().id==$(n).data().id&&(this.getData(),this.viewer.onPageLoadedCallbacks.splice(this.viewer.onPageLoadedCallbacks.indexOf(t),1)),this.viewer.api.onPageChange(_.bind(this.getData,this))},this);this.viewer.api.onPageLoaded(t)}},DV.model.Chapters=function(t){this.viewer=t,this.loadChapters()},DV.model.Chapters.prototype={loadChapters:function(){var t=this.viewer.schema.data.sections,e=this.chapters=this.viewer.schema.data.chapters=[];_.each(t,function(t){t.id||(t.id=_.uniqueId())});for(var i=0,n=0,s=this.viewer.schema.data.totalPages;s>n;n++){var r=t[i],o=t[i+1];o&&n>=o.page-1&&(i+=1,r=o),!r||r.page>n+1||(e[n]=r.id)}},getChapterId:function(t){return this.chapters[t]},getChapterPosition:function(t){for(var e=0,i=this.chapters.length;i>e;e++)if(this.chapters[e]===t)return e}},DV.model.Document=function(t){this.viewer=t,this.currentPageIndex=0,this.offsets=[],this.baseHeightsPortion=[],this.baseHeightsPortionOffsets=[],this.paddedOffsets=[],this.originalPageText={},this.totalDocumentHeight=0,this.totalPages=0,this.additionalPaddingOnPage=0,this.ZOOM_RANGES=[400,700,850,1e3,1200,1400,1600,1800,2200,2600];
var e=this.viewer.schema.data;this.state=e.state,this.baseImageURL=e.baseImageURL,this.canonicalURL=e.canonicalURL,this.additionalPaddingOnPage=e.additionalPaddingOnPage,this.pageWidthPadding=e.pageWidthPadding,this.totalPages=e.totalPages,this.onPageChangeCallbacks=[],this.onComputeOffsetsCallbacks=[];var i=this.zoomLevel=this.viewer.options.zoom||e.zoomLevel;"auto"==i&&(this.zoomLevel=e.zoomLevel);var n=_.last(this.ZOOM_RANGES);this.zoomLevel>n&&(this.zoomLevel=n)},DV.model.Document.prototype={setPageIndex:function(t){return this.currentPageIndex!==t&&this.viewer.elements.sets.find(".DV-page").css("background-image","none"),this.currentPageIndex=t,this.viewer.elements.currentPage.text(this.currentPage()),this.viewer.helpers.setActiveChapter(this.viewer.models.chapters.getChapterId(t)),_.each(this.onPageChangeCallbacks,function(t){t()}),t},currentPage:function(){return this.currentPageIndex+1},currentIndex:function(){return this.currentPageIndex},nextPage:function(){var t=this.currentIndex()+1;return t>=this.totalPages?this.currentIndex():this.setPageIndex(t)},previousPage:function(){var t=this.currentIndex()-1;return 0>t?this.currentIndex():this.setPageIndex(t)},zoom:function(t,e){(this.zoomLevel!=t||e===!0)&&(this.zoomLevel=t,this.viewer.models.pages.resize(this.zoomLevel),this.viewer.models.annotations.renderAnnotations(),this.computeOffsets(),0==this.ZOOM_RANGES.indexOf(this.zoomLevel)?(this.viewer.$(".DV-zoomBox .dec").attr("disabled",!0),this.viewer.$(".DV-zoomBox .inc").attr("disabled",!1)):this.ZOOM_RANGES.indexOf(this.zoomLevel)>=this.ZOOM_RANGES.length-1?(this.viewer.$(".DV-zoomBox .inc").attr("disabled",!0),this.viewer.$(".DV-zoomBox .dec").attr("disabled",!1)):(this.viewer.$(".DV-zoomBox .inc").attr("disabled",!1),this.viewer.$(".DV-zoomBox .dec").attr("disabled",!1)))},computeOffsets:function(){for(var t=this.viewer.models.annotations,e=0,i=0,n=this.totalPages,s=0,r=this.viewer.elements.window[0].scrollTop,o=250,a=0;n>a;a++){t.offsetsAdjustments[a]&&(i=t.offsetsAdjustments[a]),this.viewer.options.ads&&a>0&&a%this.viewer.options.ads.interval===0&&(i+=o),this.viewer.schema.data.sections.length>0&&a>0&&this.viewer.models.pages.isSectionStart(a-1)&&(i+=$(".DV-edition-section-label").outerHeight());var h=this.viewer.models.pages.getPageHeight(a),l=this.offsets[a]||0,u=this.offsets[a]=i+e;if(l!==u&&r>u){var c=u-l-s;r+=c,s+=c}this.baseHeightsPortion[a]=Math.round((h+this.additionalPaddingOnPage)/3),this.baseHeightsPortionOffsets[a]=0==a?0:u-this.baseHeightsPortion[a],e+=h+this.additionalPaddingOnPage}e+=i,e!=this.totalDocumentHeight&&(s=0!=this.totalDocumentHeight?s:e-this.totalDocumentHeight,this.viewer.helpers.setDocHeight(e,s),this.totalDocumentHeight=e),_.each(this.onComputeOffsetsCallbacks,function(t){t()})},getOffset:function(t){return this.offsets[t]},resetRemovedPages:function(){this.viewer.models.removedPages={}},addPageToRemovedPages:function(t){this.viewer.models.removedPages[t]=!0},removePageFromRemovedPages:function(t){this.viewer.models.removedPages[t]=!1},redrawPages:function(){_.each(this.viewer.pageSet.pages,function(t){t.drawRemoveOverlay()}),this.viewer.thumbnails&&this.viewer.thumbnails.render()},redrawReorderedPages:function(){this.viewer.thumbnails&&this.viewer.thumbnails.render()}},DV.model.Pages=function(t){this.viewer=t,this.averageHeight=0,this.pageHeights=[],this.pageNoteHeights=[],this.BASE_HEIGHT=1900,this.widths={xsmall:320,small:600,normal:1200,large:1800,xlarge:2200,xxlarge:2600},this.BASE_WIDTH=this.widths.normal,this.DEFAULT_PADDING=100,this.REDUCED_PADDING=38,this.MINI_PADDING=18,this.zoomLevel=this.viewer.models.document.zoomLevel,this.baseWidth=this.BASE_WIDTH,this.baseHeight=this.BASE_HEIGHT,this.width=this.zoomLevel,this.height=this.baseHeight*this.zoomFactor(),this.numPagesLoaded=0},DV.model.Pages.prototype={imageURL:function(t){var e=this.viewer.schema.document.resources.page.image,i=this.zoomLevel>this.BASE_WIDTH?"large":"normal";_.each(this.widths,_.bind(function(t,e){this.zoomLevel==t&&(i=e)},this));var n=t+1;return this.viewer.schema.document.resources.page.zeropad&&(n=this.zeroPad(n,5)),e=e.replace(/\{size\}/,i),e=e.replace(/\{page\}/,n)},zeroPad:function(t,e){for(var i=t.toString();i.length<e;)i="0"+i;return i},getPadding:function(){return this.viewer.options.mini?this.MINI_PADDING:"auto"==this.viewer.options.zoom?this.REDUCED_PADDING:this.DEFAULT_PADDING},zoomFactor:function(){return this.zoomLevel/this.BASE_WIDTH},resize:function(t){var e=this.viewer.models.pages.DEFAULT_PADDING;if(t){if(t==this.zoomLevel)return;var i=this.zoomFactor();this.zoomLevel=t||this.zoomLevel;var n=this.zoomFactor()/i;this.width=Math.round(this.baseWidth*this.zoomFactor()),this.height=Math.round(this.height*n),this.averageHeight=Math.round(this.averageHeight*n)}this.viewer.elements.sets.width(this.zoomLevel),this.viewer.elements.collection.css({width:this.width+e}),this.viewer.$(".DV-textContents").css({"font-size":.02*this.zoomLevel+"px"})},updateHeight:function(t,e){var i=this.getPageHeight(e),n=t.height*(this.zoomLevel>this.BASE_WIDTH?this.BASE_WIDTH/t.width:1);if(t.width<this.baseWidth&&(n*=this.baseWidth/t.width),this.setPageHeight(e,n),this.averageHeight=(this.averageHeight*this.numPagesLoaded+n)/(this.numPagesLoaded+1),this.numPagesLoaded+=1,i!==n&&(this.viewer.models.document.computeOffsets(),this.viewer.pageSet.simpleReflowPages(),!this.viewer.activeAnnotation&&e<this.viewer.models.document.currentIndex())){var s=Math.round(n*this.zoomFactor()-i);this.viewer.elements.window[0].scrollTop+=s}},setPageHeight:function(t,e){this.pageHeights[t]=Math.round(e)},getPageHeight:function(t){var e=this.pageHeights[t];return Math.round(e?e*this.zoomFactor():this.height)},isSectionStart:function(t){var e=_.find(this.viewer.schema.data.sections,function(e){return e.page==t+1?e:void 0});return e?!0:!1}},DV.Schema.events={zoom:function(t){var e=this.viewer,i=function(){var i=e.models.document,n=e.elements.window,s=e.models.pages,r=i.currentPageIndex,o=(n.scrollTop()+n.height()/2-i.offsets[r])/s.getPageHeight(r),a=e.elements.collection.width()>n.width()?(n.scrollLeft()+n.width()/2-i.pageWidthPadding)/s.width:.5;e.pageSet.zoom({zoomLevel:t});var h=o*s.getPageHeight(r)+i.offsets[r]-n.height()/2,l=a*s.width+i.pageWidthPadding-n.width()/2;n.scrollTop(h),l>0&&n.scrollLeft(l);var u=e.models.document.ZOOM_RANGES;return e.dragReporter.sensitivity=u[u.length-1]==t?1.5:1,e.notifyChangedState(),!0};e.confirmStateChange?e.confirmStateChange(i):i()},drawPages:function(){if("ViewDocument"==this.viewer.state){var t=this.models.document,e=this.elements.window[0],i=t.baseHeightsPortionOffsets,n=this.viewer.scrollPosition=e.scrollTop,s=n+this.viewer.$(e).height()/3,r=_.sortedIndex(i,n),o=_.sortedIndex(i,s);i[r]==n&&r++&&o++;{var a=this.helpers.sortPages(o-1);t.totalPages}t.currentPage()!=r&&t.setPageIndex(r-1),this.drawPageAt(a,o-1)}},drawPageAt:function(t,e){var i=0==e,n=e==this.models.document.totalPages-1;i&&(e+=1);var s=[{label:t[0],index:e-1},{label:t[1],index:e},{label:t[2],index:e+1}];n&&s.pop(),s[i?0:s.length-1].currentPage=!0,this.viewer.pageSet.draw(s)},check:function(){var t=this.viewer;if(t.busy===!1){t.busy=!0;for(var e=0;e<this.viewer.observers.length;e++)this[t.observers[e]].call(this);t.busy=!1}},loadText:function(t,e){t=t?parseInt(t,10):this.models.document.currentIndex(),this._previousTextIndex=t;var i=this,n=function(n){var s=parseInt(t,10)+1;i.viewer.$(".DV-textContents").replaceWith('<pre class="DV-textContents">'+n+"</pre>"),i.elements.currentPage.text(s),i.elements.textCurrentPage.text("p. "+s),i.models.document.setPageIndex(t),i.helpers.setActiveChapter(i.models.chapters.getChapterId(t)),"editText"!=i.viewer.openEditor||s in i.models.document.originalPageText||(i.models.document.originalPageText[s]=n),"editText"==i.viewer.openEditor&&i.viewer.$(".DV-textContents").attr("contentEditable",!0).addClass("DV-editing"),e&&e.call(i.helpers)};if(i.viewer.schema.text[t])return n(i.viewer.schema.text[t]);var s=DV.jQuery.proxy(function(e){n(i.viewer.schema.text[t]=e)},this);this.viewer.$(".DV-textContents").text("");var r=i.viewer.schema.document.resources.page.text.replace("{page}",t+1),o=this.helpers.isCrossDomain(r);o&&(r+="?callback=?"),DV.jQuery[o?"getJSON":"get"](r,{},s)},resetTracker:function(){this.viewer.activeAnnotation=null,this.trackAnnotation.combined=null,this.trackAnnotation.h=null},trackAnnotation:function(){var t=this.viewer,e=this.helpers,i=this.elements.window[0].scrollTop;if(t.activeAnnotation){var n=t.activeAnnotation,s=this.trackAnnotation;s.id!=n.id&&(s.id=n.id,e.setActiveAnnotationLimits(n)),!t.activeAnnotation.annotationEl.hasClass("DV-editing")&&(i>s.h||i<s.combined)&&(n.hide(!0),t.pageSet.setActiveAnnotation(null),t.activeAnnotation=null,s.h=null,s.id=null,s.combined=null)}else t.pageSet.setActiveAnnotation(null),t.activeAnnotation=null,s.h=null,s.id=null,s.combined=null,e.removeObserver("trackAnnotation")}},DV.Schema.events.ViewAnnotation={next:function(){var t=this.viewer,e=t.activeAnnotationId,i=this.models.annotations,n=null===e?i.getFirstAnnotation():i.getNextAnnotation(e);return n?(t.pageSet.showAnnotation(n),void this.helpers.setAnnotationPosition(n.position)):!1},previous:function(){var t=this.viewer,e=t.activeAnnotationId,i=this.models.annotations,n=e?i.getPreviousAnnotation(e):i.getFirstAnnotation();return n?(t.pageSet.showAnnotation(n),void this.helpers.setAnnotationPosition(n.position)):!1},search:function(t){return t.preventDefault(),this.viewer.open("ViewSearch"),!1}},DV.Schema.events.ViewDocument={next:function(){var t=this.models.document.nextPage();this.helpers.jump(t)},previous:function(){var t=this.models.document.previousPage();this.helpers.jump(t)},search:function(t){return t.preventDefault(),this.viewer.open("ViewSearch"),!1}},DV.Schema.events.ViewSearch={next:function(){var t=this.models.document.nextPage();this.loadText(t),this.viewer.open("ViewText")},previous:function(){var t=this.models.document.previousPage();this.loadText(t),this.viewer.open("ViewText")},search:function(t){return t.preventDefault(),this.helpers.getSearchResponse(this.elements.searchInput.val()),!1}},DV.Schema.events.ViewText={next:function(){var t=this.models.document.nextPage();this.loadText(t)},previous:function(){var t=this.models.document.previousPage();this.loadText(t)},search:function(t){return t.preventDefault(),this.viewer.open("ViewSearch"),!1}},DV.Schema.events.ViewThumbnails={next:function(){var t=this.models.document.nextPage();this.helpers.jump(t)},previous:function(){var t=this.models.document.previousPage();this.helpers.jump(t)},search:function(t){return t.preventDefault(),this.viewer.open("ViewSearch"),!1}},_.extend(DV.Schema.events,{handleHashChangeViewDocumentPage:function(t){var e=parseInt(t,10)-1;"ViewDocument"===this.viewer.state?(this.viewer.pageSet.cleanUp(),this.helpers.jump(e)):(this.models.document.setPageIndex(e),this.viewer.open("ViewDocument"))},handleHashChangeViewDocumentAnnotation:function(t,e){var i=parseInt(t,10)-1,e=parseInt(e,10);"ViewDocument"===this.viewer.state?this.viewer.pageSet.showAnnotation(this.viewer.models.annotations.byId[e]):(this.models.document.setPageIndex(i),this.viewer.pageSet.setActiveAnnotation(e),this.viewer.openingAnnotationFromHash=!0,this.viewer.open("ViewDocument"))},handleHashChangeViewAnnotationAnnotation:function(t){var t=parseInt(t,10),e=this.viewer;"ViewAnnotation"===e.state?e.pageSet.showAnnotation(this.viewer.models.annotations.byId[t]):(e.activeAnnotationId=t,this.viewer.open("ViewAnnotation"))},handleHashChangeViewArticle:function(t,e){var i=this.viewer,n=_.bind(function(i){i==t&&(this.moveToArticle(t,e),this.showOptions(t,e),this.events.off("pageArticlesLoaded",n))},i.models.articles);i.models.articles.events.on("pageArticlesLoaded",n),this.handleHashChangeViewDocumentPage(t)},handleHashChangeDefault:function(){this.viewer.pageSet.cleanUp(),this.models.document.setPageIndex(0),"ViewDocument"===this.viewer.state?this.helpers.jump(0):this.viewer.open("ViewDocument")},handleHashChangeViewText:function(t){var e=parseInt(t,10)-1;"ViewText"===this.viewer.state?this.events.loadText(e):(this.models.document.setPageIndex(e),this.viewer.open("ViewText"))},handleHashChangeViewPages:function(){"ViewThumbnails"!=this.viewer.state&&this.viewer.open("ViewThumbnails")},handleHashChangeViewSearchRequest:function(t,e){var i=parseInt(t,10)-1;this.elements.searchInput.val(decodeURIComponent(e)),"ViewSearch"!==this.viewer.state&&this.models.document.setPageIndex(i),this.viewer.open("ViewSearch")},handleHashChangeViewEntity:function(t,e,i,n){t=parseInt(t,10)-1,e=decodeURIComponent(e),this.elements.searchInput.val(e),this.models.document.setPageIndex(t),this.states.ViewEntity(e,parseInt(i,10),parseInt(n,10))}}),_.extend(DV.Schema.events,{handleNavigation:function(t){var e=this.viewer.$(t.target),i=e.closest(".DV-trigger"),n=e.closest(".DV-annotationMarker"),s=e.closest(".DV-chapter");if(i.length){if(e.hasClass("DV-expander"))return s.toggleClass("DV-collapsed");if(n.length){{var r=n[0].id.replace("DV-annotationMarker-",""),o=this.models.annotations.getAnnotation(r);parseInt(o.index,10)+1}"ViewText"===this.viewer.state?this.loadText(o.index):("ViewThumbnails"===this.viewer.state&&this.viewer.open("ViewDocument"),this.viewer.pageSet.showAnnotation(o))}else{if(!s.length)return!1;s.removeClass("DV-collapsed");{var a=parseInt(s[0].id.replace("DV-chapter-",""),10),h=parseInt(this.models.chapters.getChapterPosition(a),10);parseInt(h,10)+1}if("ViewText"===this.viewer.state)this.loadText(h);else{if("ViewDocument"!==this.viewer.state&&"ViewThumbnails"!==this.viewer.state)return!1;this.helpers.jump(h),"ViewThumbnails"===this.viewer.state&&this.viewer.open("ViewDocument")}}}}}),DV.Schema.helpers={HOST_EXTRACTOR:/https?:\/\/([^\/]+)\//,annotationClassName:".DV-annotation",bindEvents:function(t){var e=this.events.compile("zoom"),i=t.models.document,n=(_.indexOf(i.ZOOM_RANGES,i.zoomLevel),this.viewer);n.zoomControls=n.$(".DV-zoomBox").html(JST.zoomControls),n.$(".DV-zoomBox").delegate(".inc","click",function(){var t=_.indexOf(i.ZOOM_RANGES,i.zoomLevel)+1;i.ZOOM_RANGES[parseInt(t,10)]&&t>=0&&e(i.ZOOM_RANGES[parseInt(t,10)])}),n.$(".DV-zoomBox").delegate(".dec","click",function(){var t=_.indexOf(i.ZOOM_RANGES,i.zoomLevel)-1;i.ZOOM_RANGES[parseInt(t,10)]&&t>=0&&e(i.ZOOM_RANGES[parseInt(t,10)])}),n.$(".DV-zoomBox").delegate(".resize","click",function(){n.helpers.autoZoomPage()});var s=(n.history,n.compiled);s.next=this.events.compile("next"),s.previous=this.events.compile("previous");t.states;n.$(".DV-navControls").delegate("span.DV-next","click",s.next),n.$(".DV-navControls").delegate("span.DV-previous","click",s.previous),n.$(".DV-annotationView").delegate(".DV-trigger","click",function(e){e.preventDefault(),t.open("ViewAnnotation")}),n.$(".DV-documentView").delegate(".DV-trigger","click",function(){t.open("ViewDocument")}),n.$(".DV-thumbnailsView").delegate(".DV-trigger","click",function(){t.open("ViewThumbnails")}),n.$(".DV-textView").delegate(".DV-trigger","click",function(){t.open("ViewText")}),n.$(".DV-allAnnotations").delegate(".DV-annotationGoto .DV-trigger","click",DV.jQuery.proxy(this.gotoPage,this)),n.$("form.DV-searchDocument").submit(this.events.compile("search")),n.$(".DV-searchBar").delegate(".DV-closeSearch","click",function(e){e.preventDefault(),t.open("ViewText")}),n.$(".DV-searchBox").delegate(".DV-searchInput-cancel","click",DV.jQuery.proxy(this.clearSearch,this)),n.$(".DV-searchResults").delegate("span.DV-resultPrevious","click",DV.jQuery.proxy(this.highlightPreviousMatch,this)),n.$(".DV-searchResults").delegate("span.DV-resultNext","click",DV.jQuery.proxy(this.highlightNextMatch,this)),n.$(".DV-trigger").bind("selectstart",function(){return!1}),this.elements.viewer.delegate(".DV-fullscreen","click",_.bind(this.openFullScreen,this));var r=DV.jQuery.proxy(this.annotationBridgeToggle,this),o=this.elements.collection;o.delegate(".DV-annotationTab","click",r),o.delegate(".DV-annotationRegion","click",DV.jQuery.proxy(this.annotationBridgeShow,this)),o.delegate(".DV-annotationNext","click",DV.jQuery.proxy(this.annotationBridgeNext,this)),o.delegate(".DV-annotationPrevious","click",DV.jQuery.proxy(this.annotationBridgePrevious,this)),o.delegate(".DV-showEdit","click",DV.jQuery.proxy(this.showAnnotationEdit,this)),o.delegate(".DV-cancelEdit","click",DV.jQuery.proxy(this.cancelAnnotationEdit,this)),o.delegate(".DV-saveAnnotation","click",DV.jQuery.proxy(this.saveAnnotation,this)),o.delegate(".DV-saveAnnotationDraft","click",DV.jQuery.proxy(this.saveAnnotation,this)),o.delegate(".DV-deleteAnnotation","click",DV.jQuery.proxy(this.deleteAnnotation,this)),o.delegate(".DV-pageNumber","click",_.bind(this.permalinkPage,this,"document")),o.delegate(".DV-textCurrentPage","click",_.bind(this.permalinkPage,this,"text")),o.delegate(".DV-annotationTitle","click",_.bind(this.permalinkAnnotation,this)),o.delegate(".DV-permalink","click",_.bind(this.permalinkAnnotation,this)),n.$(".DV-thumbnails").delegate(".DV-thumbnail-page","click",function(t){var e=n.$(t.currentTarget);if(!n.openEditor){var i=e.closest(".DV-thumbnail").attr("data-pageNumber");n.helpers.autoZoomPage(),n.history.navigate("page/"+i,{trigger:!0})}}),n.$(".DV-descriptionToggle").live("click",function(t){t.preventDefault(),t.stopPropagation(),n.$(".DV-descriptionText").toggle(),n.$(".DV-descriptionToggle").toggleClass("DV-showDescription")});var a=DV.jQuery.proxy(n.pageSet.cleanUp,this);this.elements.window.live("mousedown",function(e){var i=n.$(e.target);return i.parents().is(".DV-annotation")||i.is(".DV-annotation")?!0:void(t.elements.window.hasClass("DV-coverVisible")&&i.width()-parseInt(e.clientX,10)>=15&&a())});var h=n.schema.document.id;1==DV.jQuery.browser.msie?(this.elements.browserDocument.bind("focus."+h,DV.jQuery.proxy(this.focusWindow,this)),this.elements.browserDocument.bind("focusout."+h,DV.jQuery.proxy(this.focusOut,this))):(this.elements.browserWindow.bind("focus."+h,DV.jQuery.proxy(this.focusWindow,this)),this.elements.browserWindow.bind("blur."+h,DV.jQuery.proxy(this.blurWindow,this))),this.elements.window.bind("scroll."+h,DV.jQuery.proxy(this.focusWindow,this)),this.elements.coverPages.live("mousedown",a),this.setupShareLinks(".DV-shareTools .dropdown-menu")},unbindEvents:function(){var t=this.viewer,e=t.schema.document.id;1==DV.jQuery.browser.msie?(this.elements.browserDocument.unbind("focus."+e),this.elements.browserDocument.unbind("focusout."+e)):(t.helpers.elements.browserWindow.unbind("focus."+e),t.helpers.elements.browserWindow.unbind("blur."+e)),t.helpers.elements.browserWindow.unbind("scroll."+e),_.each(t.observers,function(e){t.helpers.removeObserver(e)})},ensureAnnotationImages:function(){this.viewer.$(".DV-img[data-src]").each(function(){var t=DV.jQuery(this);t.attr("src",t.attr("data-src"))})},startCheckTimer:function(){var t=this.viewer,e=function(){t.events.check()};this.viewer.checkTimer=setInterval(e,100)},stopCheckTimer:function(){clearInterval(this.viewer.checkTimer)},blurWindow:function(){this.viewer.isFocus===!0&&(this.viewer.isFocus=!1,this.stopCheckTimer())},focusOut:function(){return this.viewer.activeElement==document.activeElement?(this.viewer.isFocus=!1,void this.viewer.helpers.stopCheckTimer()):(this.viewer.activeElement=document.activeElement,void(this.viewer.isFocus=!0))},focusWindow:function(){this.viewer.isFocus!==!0&&(this.viewer.isFocus=!0,this.startCheckTimer())},permalinkPage:function(t,e){if("text"==t)var i=this.viewer.models.document.currentPage();else{var n=this.viewer.$(e.target).closest(".DV-set").attr("data-id"),s=this.viewer.pageSet.pages[n],i=s.pageNumber;this.jump(s.index)}this.viewer.history.save(t+"/p"+i)},permalinkAnnotation:function(t){var e=this.viewer.$(t.target).closest(".DV-annotation").attr("data-id"),i=this.viewer.models.annotations.getAnnotation(e),n=i.server_id||i.id;"ViewDocument"==this.viewer.state?(this.viewer.pageSet.showAnnotation(i),this.viewer.history.save("document/p"+i.pageNumber+"/a"+n)):this.viewer.history.save("annotation/a"+n)},setDocHeight:function(t,e){this.elements.bar.css("height",t),this.elements.window[0].scrollTop+=e},getWindowDimensions:function(){var t={height:window.innerHeight?window.innerHeight:this.elements.browserWindow.height(),width:this.elements.browserWindow.width()};return t},isCrossDomain:function(t){var e=t.match(this.HOST_EXTRACTOR);return e&&e[1]!=window.location.host},resetScrollState:function(){this.elements.window.scrollTop(0)},gotoPage:function(t){t.preventDefault();var e=this.viewer.$(t.target).parents(".DV-annotation").attr("rel").replace("aid-",""),i=this.models.annotations.getAnnotation(e),n=this.viewer;"ViewDocument"!==n.state&&(this.models.document.setPageIndex(i.index),n.open("ViewDocument"))},openFullScreen:function(){var t=this.viewer.schema.document,e=t.canonicalURL.replace(/#\S+$/,""),i=this.models.document.currentPage();switch(this.viewer.state){case"ViewAnnotation":e+="#annotation/a"+this.viewer.activeAnnotationId;break;case"ViewDocument":e+="#document/p"+i;break;case"ViewSearch":e+="#search/p"+i+"/"+encodeURIComponent(this.elements.searchInput.val());break;case"ViewText":e+="#text/p"+i;break;case"ViewThumbnails":e+="#pages/p"+i}window.open(e,"documentviewer","toolbar=no,resizable=yes,scrollbars=no,status=no")},sortPages:function(t){return 0==t||t%3==1?["p0","p1","p2"]:t%3==2?["p1","p2","p0"]:t%3==0?["p2","p0","p1"]:void 0},addObserver:function(t){this.removeObserver(t),this.viewer.observers.push(t)},removeObserver:function(t){for(var e=this.viewer.observers,i=0,n=e.length;n>i;i++)t===e[i]&&e.splice(i,1)},toggleContent:function(t){this.elements.viewer.removeClass("DV-viewArticleText DV-viewText DV-viewSearch DV-viewDocument DV-viewAnnotations DV-viewThumbnails").addClass("DV-"+t)},jump:function(t,e,i){e=e?parseInt(e,10):0;var n=this.models.document.getOffset(parseInt(t,10))+e;this.elements.window[0].scrollTop=n,this.models.document.setPageIndex(t),i&&this.viewer.pageSet.redraw(!0),"ViewThumbnails"===this.viewer.state&&this.viewer.thumbnails.highlightCurrentPage()},shift:function(t){var e=this.elements.window,i=e.scrollTop()+t.deltaY,n=e.scrollLeft()+t.deltaX;e.scrollTop(i),e.scrollLeft(n)},getAppState:function(){var t=this.models.document,e=0==t.currentIndex()?1:t.currentPage();return{page:e,zoom:t.zoomLevel,view:this.viewer.state}},constructPages:function(){for(var t=[],e=this.viewer.schema.data.totalPages<3?this.viewer.schema.data.totalPages:3,i=this.models.pages.height,n=0;e>n;n++)t.push(JST.pages({pageNumber:n+1,pageIndex:n,pageImageSource:null,baseHeight:i}));return t.join("")},positionViewer:function(){var t=this.elements.viewer.position();this.elements.viewer.css({position:"absolute",top:t.top,bottom:0,left:0,right:0})},unsupportedBrowser:function(){var t=DV.jQuery.browser;return t.msie&&parseFloat(t.version,10)<=6?(DV.jQuery(this.viewer.options.container).html(JST.unsupported({viewer:this.viewer})),!0):!1},registerHashChangeEvents:function(){var t=this.events,e=this.viewer.history;e.defaultCallback=_.bind(t.handleHashChangeDefault,this.events),e.register(/document\/p(\d*)$/,_.bind(t.handleHashChangeViewDocumentPage,this.events)),e.register(/document\/p(\d*)\/a(\d*)$/,_.bind(t.handleHashChangeViewDocumentAnnotation,this.events)),e.register(/annotation\/a(\d*)$/,_.bind(t.handleHashChangeViewAnnotationAnnotation,this.events)),e.register(/pages$/,_.bind(t.handleHashChangeViewPages,t)),e.register(/page\/(\d*)\/?$/,_.bind(t.handleHashChangeViewDocumentPage,this.events)),e.register(/page\/(\d*)\/article\/([\d\w\-]+)\/?(index.html)?\/?$/,_.bind(t.handleHashChangeViewArticle,this.events)),e.register(/text\/p(\d*)$/,_.bind(t.handleHashChangeViewText,this.events)),e.register(/entity\/p(\d*)\/(.*)\/(\d+):(\d+)$/,_.bind(t.handleHashChangeViewEntity,this.events)),e.register(/search\/p(\d*)\/(.*)$/,_.bind(t.handleHashChangeViewSearchRequest,this.events))},autoZoomPage:function(){var t,e=this.elements.window.outerWidth(!0);t="auto"==this.viewer.options.zoom?e-2*this.viewer.models.pages.getPadding():this.viewer.options.zoom;var i,n,s=[];500>=t?(i=(t+700)/2,s=[t,i,700,850,1e3,1200,1400,1600,1800,2200,2600]):750>=t?(i=100+t,n=200+t,s=[.66*t,t,i,n,1e3,1200,1400,1600,1800,2200,2600]):t>750&&850>=t?(i=(1e3-t)/2+t,s=[.66*t,700,t,i,1e3,1200,1400,1600,1800,2200,2600]):t>850&&1e3>t?(i=(t-700)/2+700,s=[.66*t,700,i,t,1e3,1200,1400,1600,1800,2200,2600]):t>1e3&&1200>=t?(t=850,s=this.viewer.models.document.ZOOM_RANGES):t>1200&&1400>=t?(t=1200,s=this.viewer.models.document.ZOOM_RANGES):t>1400&&1600>=t?(t=1400,s=this.viewer.models.document.ZOOM_RANGES):t>1600&&1800>=t?(t=1600,s=this.viewer.models.document.ZOOM_RANGES):t>1800&&2200>=t?(t=1800,s=this.viewer.models.document.ZOOM_RANGES):t>=2200&&(t=2200,s=this.viewer.models.document.ZOOM_RANGES),this.viewer.models.document.ZOOM_RANGES=s,this.viewer.pageSet.zoom({zoomLevel:t})},handleInitialState:function(){var t=this.viewer.history.loadUrl();if(!t){var e=this.viewer.options;this.viewer.open("ViewDocument"),e.note?this.viewer.pageSet.showAnnotation(this.viewer.models.annotations.byId[e.note]):e.page&&this.jump(e.page-1)}},setupShareLinks:function(t,e){var i=this.viewer,n=i.$(t),s=_.defaults({Facebook:"http://www.facebook.com/sharer/sharer.php?u=<%= url %>",Twitter:"https://twitter.com/share?url=<%= url %>&text=<%= text %>",Tumblr:"http://www.tumblr.com/share/link?url=<%= url %>&title=<%= text %>"},i.options.socialServices);_.each(s,function(t,s){var r=_.template('<li><a target="_blank" data-event-label="<%= name %>" href="<%= href %>"><%= name %></a></li>',{href:t,name:s});if("article"==e){article=i.models.articles.activeArticle;var o={url:encodeURIComponent(window.location.origin+i.history.root+"page/"+article.start_page+"/article/"+article.slug),text:encodeURIComponent("Tribune Archives: "+article.title+" ("+i.schema.document.date+")")}}else var o={url:encodeURIComponent(window.location.origin+i.history.root),text:encodeURIComponent("Chicago Tribune Archives: "+i.schema.document.date)};var a=_.template(r,o);n.append(a)}),$('<li><a class="DV-show-embed-code" href="#">Embed</a></li>').on("click",_.bind(this.showEmbedCode,this,e)).appendTo(n)},showEmbedCode:function(t){var e=this.viewer,i=window.location.origin+e.history.root+"?embed=true";"article"==t&&(i=window.location.href);var n=$(JST.embedModal({embed_url:i}));return n.modal(),n.on("hidden",function(){$(this).remove()}),n.on("shown",function(){n.find("textarea")[0].select()}),n.find(".embed-size-select button").on("click",function(){$(this).siblings().removeClass("active"),$(this).addClass("active");var t={width:null,height:null,embed_url:i},e=_.template('<iframe src="<%= embed_url %>" width="<%= width %>" height="<%= height %>" scrolling="no" frameborder="0"></iframe>');$(this).hasClass("small-embed")?(t.width=300,t.height=600):$(this).hasClass("medium-embed")?(t.width=650,t.height=600):$(this).hasClass("large-embed")&&(t.width=900,t.height=700),n.find("textarea").text(e(t)),n.find("textarea")[0].select()}),!1}},_.extend(DV.Schema.helpers,{getAnnotationModel:function(t){var e=parseInt(t.attr("rel").match(/\d+/),10);return this.models.annotations.getAnnotation(e)},getAnnotationObject:function(t){for(var t=this.viewer.$(t),e=t.attr("id").replace(/DV\-annotation\-|DV\-listAnnotation\-/,""),i=t.closest("div.DV-set").attr("data-id"),n=0;annotationObject=this.viewer.pageSet.pages[i].annotations[n];n++)if(annotationObject.id==e)return t=null,annotationObject;return!1},annotationBridgeToggle:function(t){t.preventDefault();var e=this.getAnnotationObject(this.viewer.$(t.target).closest(this.annotationClassName));e.toggle()},annotationBridgeShow:function(t){t.preventDefault();var e=this.getAnnotationObject(this.viewer.$(t.target).closest(this.annotationClassName));e.show()},annotationBridgeHide:function(t){t.preventDefault();var e=this.getAnnotationObject(this.viewer.$(t.target).closest(this.annotationClassName));e.hide(!0)},annotationBridgeNext:function(t){t.preventDefault();var e=this.getAnnotationObject(this.viewer.$(t.target).closest(this.annotationClassName));e.next()},annotationBridgePrevious:function(t){t.preventDefault();var e=this.getAnnotationObject(this.viewer.$(t.target).closest(this.annotationClassName));e.previous()},setAnnotationPosition:function(t){this.elements.currentPage.text(t)},setActiveAnnotationLimits:function(t){var t=t?t:this.viewer.activeAnnotation;if(t&&null!=t){var e=this.elements,i=t.page,n=t.annotationEl,s=t.position.top*this.models.pages.zoomFactor(),r=this.events.trackAnnotation;"page"===t.type?(r.h=n.outerHeight()+i.getOffset(),r.combined=i.getOffset()-e.window.height()):(r.h=n.height()+s-20+i.getOffset()+i.getPageNoteHeight(),r.combined=s-20+i.getOffset()+i.getPageNoteHeight()-e.window.height())}}}),_.extend(DV.Schema.helpers,{showAnnotations:function(){return this.viewer.options.showAnnotations===!1?!1:_.size(this.models.annotations.byId)>0},renderViewer:function(){var t=this.viewer.schema.document,e=this.constructPages(),i=t.description?t.description:null,n=t.resources.related_article,s=JST.header({options:this.viewer.options,id:t.id,story_url:n,title:t.title||""}),r=JST.footer({options:this.viewer.options}),o=t.resources.pdf;o=o&&this.viewer.options.pdf!==!1?'<a target="_blank" href="'+o+'">Original Document (PDF) &raquo;</a>':"";var a=t.contributor&&t.contributor_organization&&""+t.contributor+", "+t.contributor_organization,h=this.showAnnotations(),l=h&&t.resources.print_annotations,u={options:this.viewer.options,pages:e,header:s,footer:r,pdf_url:o,contributors:a,story_url:n,print_notes_url:l,descriptionContainer:JST.descriptionContainer({description:i}),autoZoom:"auto"==this.viewer.options.zoom,mini:!1},c=this.viewer.options.width,d=this.viewer.options.height;c&&d&&(500>c&&(this.viewer.options.mini=!0,u.mini=!0),DV.jQuery(this.viewer.options.container).css({position:"relative",width:this.viewer.options.width,height:this.viewer.options.height}));var p=this.viewer.options.container,f=DV.jQuery(p);if(!f.length)throw"Document Viewer container element not found: "+p;f.html(JST.viewer(u))},displayNavigation:function(){var t=this.viewer.schema.document,e=!t.description&&!_.size(this.viewer.schema.data.annotationsById)&&!this.viewer.schema.data.sections.length;this.viewer.$(".DV-supplemental").toggleClass("DV-noNavigation",e)},renderSpecificPageCss:function(){for(var t=[],e=1,i=this.models.document.totalPages;i>=e;e++)t.push(".DV-page-"+e+" .DV-pageSpecific-"+e);var n=t.join(", ")+" { display: block; }",s='<style type="text/css" media="all">\n'+n+"\n</style>";DV.jQuery("head").append(s)},renderNavigation:function(){var t=this,e=[],i=JST.navigationExpander({}),n=[],s=[],r=this.viewer.models.boldsId||(this.viewer.models.boldsId=_.uniqueId()),o=function(t,e){for(var i=[],r=t,o=e;o>r;r++)s[r]&&(i.push(s[r]),n[r]="");return i.join("")},a=function(t){var i="#DV-selectedChapter-"+t.id+" #DV-chapter-"+t.id;return e.push(i+" .DV-navChapterTitle"),JST.chapterNav(t)},h=function(i){for(var n=[],s=t.viewer.schema.data.annotationsByPage[i],r=0;r<s.length;r++){var o=s[r];n.push(JST.annotationNav(o)),e.push("#DV-selectedAnnotation-"+o.id+" #DV-annotationMarker-"+o.id+" .DV-navAnnotationTitle")}return n.join("")};if(this.showAnnotations())for(var l=0,u=this.models.document.totalPages;u>l;l++)this.viewer.schema.data.annotationsByPage[l]&&(n[l]=h(l),s[l]=n[l]);var c=this.viewer.schema.data.sections;if(c.length)for(var l=0;l<c.length;l++){var d=c[l],p=c[l+1];d.id=d.id||_.uniqueId(),d.pageNumber=d.page,d.endPage=p?p.page-1:this.viewer.schema.data.totalPages;var f=o(d.pageNumber-1,d.endPage);""!=f?(d.navigationExpander=i,d.navigationExpanderClass="DV-hasChildren",d.noteViews=f,n[d.pageNumber-1]=a(d)):(d.navigationExpanderClass="DV-noChildren",d.noteViews="",d.navigationExpander="",n[d.pageNumber-1]=a(d))}var g=n.join(""),m=this.viewer.$("div.DV-chaptersContainer");m.html(g),m.unbind("click").bind("click",this.events.compile("handleNavigation")),this.viewer.schema.data.sections.length||_.size(this.viewer.schema.data.annotationsById)?m.show():m.hide(),this.displayNavigation(),DV.jQuery("#DV-navigationBolds-"+r,DV.jQuery("head")).remove();
var v=e.join(", ")+" { font-weight:bold; color:#000 !important; }",y='<style id="DV-navigationBolds-'+r+'" type="text/css" media="screen,print">\n'+v+"\n</style>";DV.jQuery("head").append(y),m=null},renderComponents:function(){var t=DV.jQuery(this.viewer.options.container),e=t.css("position");"relative"==e||"absolute"==e||this.viewer.options.fixedSize||(DV.jQuery("html, body").css({overflow:"hidden"}),0==t.offset().top&&this.viewer.elements.viewer.css({border:0}));var i=this.showAnnotations(),n=this.models.document.totalPages>1,s=this.viewer.options.search!==!1&&this.viewer.options.text!==!1&&(!this.viewer.options.width||this.viewer.options.width>=540),r=!(i||n||s||this.viewer.options.sidebar),o=this.viewer.$(".DV-annotationView");o[i?"show":"hide"](),s?(this.elements.viewer.addClass("DV-searchable"),this.viewer.$("input.DV-searchInput",t).placeholder({message:"Search",clearClassName:"DV-searchInput-show-search-cancel"})):this.viewer.$(".DV-textView").hide(),n||this.viewer.$(".DV-thumbnailsView").hide(),i||n||s||this.viewer.$(".DV-views").hide(),this.viewer.api.roundTabCorners();this.models.chapters.chapters.length>0;if(this.viewer.$(".DV-navControls").remove(),n||this.viewer.options.sidebar){var a=JST.navControls({totalPages:this.viewer.schema.data.totalPages,totalAnnotations:this.viewer.schema.data.totalAnnotations});this.viewer.$(".DV-navControlsContainer").html(a)}if(this.viewer.$(".DV-fullscreenControl").remove(),this.viewer.schema.document.canonicalURL){var h=JST.fullscreenControl({});r?(this.viewer.$(".DV-collapsibleControls").prepend(h),this.elements.viewer.addClass("DV-hideFooter")):this.viewer.$(".DV-fullscreenContainer").html(h)}this.viewer.options.sidebar&&this.viewer.$(".DV-sidebar").show(),_.defer(_.bind(function(){this.elements.viewer.width()<=700&&(i||n||s)&&this.viewer.$(".DV-controls").addClass("DV-narrowControls")},this)),this.elements.currentPage=this.viewer.$("span.DV-currentPage"),this.models.document.setPageIndex(this.models.document.currentIndex())},reset:function(){this.models.articles.cleanUp(),this.resetNavigationState(),this.cleanUpSearch(),this.viewer.pageSet.cleanUp(),this.removeObserver("drawPages"),this.viewer.dragReporter.unBind(),this.elements.window.scrollTop(0)}}),_.extend(DV.Schema.helpers,{showAnnotationEdit:function(t){var e=this.viewer.$(t.target).closest(this.annotationClassName),i=this.viewer.$(".DV-annotationTextArea",e);e.addClass("DV-editing"),i.focus()},cancelAnnotationEdit:function(t){var e=this.viewer.$(t.target).closest(this.annotationClassName),i=this.getAnnotationModel(e);this.viewer.$(".DV-annotationTitleInput",e).val(i.title),this.viewer.$(".DV-annotationTextArea",e).val(i.text),i.unsaved?this.models.annotations.removeAnnotation(i):e.removeClass("DV-editing")},saveAnnotation:function(t,e){var i=this.viewer.$(t.target),n=i.closest(this.annotationClassName),s=this.getAnnotationModel(n);if(s){if(s.title=this.viewer.$(".DV-annotationTitleInput",n).val(),s.text=this.viewer.$(".DV-annotationTextArea",n).val(),s.owns_note=s.unsaved?!0:s.owns_note,s.owns_note&&(s.author=s.author||dc.account.name,s.author_organization=s.author_organization||dc.account.isReal&&dc.account.organization.name),i.hasClass("DV-saveAnnotationDraft")?s.access="exclusive":n.hasClass("DV-accessExclusive")&&(s.access="public"),!("onlyIfText"!=e||s.title&&"Untitled Note"!=s.title||s.text||s.server_id))return this.models.annotations.removeAnnotation(s);n.removeClass("DV-editing"),this.models.annotations.fireSaveCallbacks(s),this.viewer.api.redraw(!0),this.viewer.activeAnnotation&&this.viewer.pageSet.showAnnotation(s)}},deleteAnnotation:function(t){var e=this.viewer.$(t.target).closest(this.annotationClassName),i=this.getAnnotationModel(e);this.models.annotations.removeAnnotation(i),this.models.annotations.fireDeleteCallbacks(i)}}),_.extend(DV.Schema.helpers,{resetNavigationState:function(){var t=this.elements;t.chaptersContainer.length&&(t.chaptersContainer[0].id=""),t.navigation.length&&(t.navigation[0].id="")},setActiveChapter:function(t){t&&this.elements.chaptersContainer.attr("id","DV-selectedChapter-"+t)},setActiveAnnotationInNav:function(t){null!=t?this.elements.navigation.attr("id","DV-selectedAnnotation-"+t):this.elements.navigation.attr("id","")}}),_.extend(DV.Schema.helpers,{getSearchResponse:function(t){var e=DV.jQuery.proxy(function(t){this.viewer.searchResponse=t;var e=t.results.length>0?!0:!1,i=e?"of "+t.results.length+" ":" ";if(this.viewer.$("span.DV-totalSearchResult").text(i),this.viewer.$("span.DV-searchQuery").text(t.query),e){var n=this.viewer.models.document.currentPage(),s=_.include(t.results,n)?n:t.results[0];this.events.loadText(s-1,this.highlightSearchResponses)}else this.highlightSearchResponses()},this),i=function(){this.viewer.$(".DV-currentSearchResult").text("Search is not available at this time"),this.viewer.$("span.DV-searchQuery").text(t),this.viewer.$(".DV-searchResults").addClass("DV-noResults")},n=this.viewer.schema.document.resources.search.replace("{query}",encodeURIComponent(t));this.viewer.helpers.isCrossDomain(n)&&(n+="&callback=?"),DV.jQuery.ajax({url:n,dataType:"json",success:e,error:i})},acceptInputCallBack:function(){var t=parseInt(this.elements.currentPage.text(),10)-1;t=""===t?0:t,t=0>t?0:t,t=t+1>this.models.document.totalPages?this.models.document.totalPages-1:t;var e=t+1;this.elements.currentPage.text(e),this.viewer.$(".DV-pageNumberContainer input").val(e),"ViewDocument"===this.viewer.state||"ViewThumbnails"===this.viewer.state?this.jump(t):"ViewText"===this.viewer.state&&this.events.loadText(t)},highlightSearchResponses:function(){var t=this.viewer,e=t.searchResponse;if(!e)return!1;var i=e.results,n=this.viewer.$(".DV-currentSearchResult");0==i.length?(n.text("No Results"),this.viewer.$(".DV-searchResults").addClass("DV-noResults")):this.viewer.$(".DV-searchResults").removeClass("DV-noResults");for(var s=0;s<e.results.length;s++)if(this.models.document.currentPage()===e.results[s]){n.text("Page "+(s+1)+" ");break}var r="(\\b|\\B)",o=r+"("+e.query.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&").replace(/\s+/g,"\\s+")+")"+r,a=this.viewer.$(".DV-textContents"),h=a.text(),l=new RegExp(o,"ig"),u=h.replace(l,'$1<span class="DV-searchMatch">$2</span>$3');a.html(u);var c=t.toHighLight?t.toHighLight:0;this.highlightMatch(c),n=null,a=null},highlightEntity:function(t,e){this.viewer.$(".DV-searchResults").addClass("DV-noResults");var i=this.viewer.$(".DV-textContents"),n=i.text(),s=n.substr(0,t),r=n.substr(t,e),o=n.substr(t+e);n=[s,'<span class="DV-searchMatch">',r,"</span>",o].join(""),i.html(n),this.highlightMatch(0)},highlightMatch:function(t){var e=this.viewer.$(".DV-textContents span.DV-searchMatch");if(0==e.length)return!1;var i=this.getCurrentSearchPageIndex(),n=this.viewer.toHighLight;n&&(n!==!1&&(t="last"===n?e.length-1:"first"===n?0:n),n=!1);var s=this.viewer.searchResponse;if(s){if(t===e.length){if(s.results.length===i+1)return;return n="first",void this.events.loadText(s.results[i+1]-1,this.highlightSearchResponses)}if(-1===t)return 0>i-1?!1:(n="last",void this.events.loadText(s.results[i-1]-1,this.highlightSearchResponses));e.removeClass("DV-highlightedMatch")}var r=this.viewer.$(".DV-textContents span.DV-searchMatch:eq("+t+")");r.addClass("DV-highlightedMatch"),this.elements.window[0].scrollTop=r.position().top-50,s&&(s.highlighted=t),e=null,r=null},getCurrentSearchPageIndex:function(){var t=this.viewer.searchResponse;if(!t)return!1;for(var e=this.models.document,i=0,n=t.results.length;n>i;i++)if(t.results[i]===e.currentPage())return i},highlightPreviousMatch:function(t){t.preventDefault(),this.highlightMatch(this.viewer.searchResponse.highlighted-1)},highlightNextMatch:function(t){t.preventDefault(t),this.highlightMatch(this.viewer.searchResponse.highlighted+1)},clearSearch:function(){this.elements.searchInput.val("").keyup().focus()},showEntity:function(t,e,i){this.viewer.$("span.DV-totalSearchResult").text(""),this.viewer.$("span.DV-searchQuery").text(t),this.viewer.$("span.DV-currentSearchResult").text("Searching"),this.events.loadText(this.models.document.currentIndex(),_.bind(this.viewer.helpers.highlightEntity,this.viewer.helpers,e,i))},cleanUpSearch:function(){var t=this.viewer;t.searchResponse=null,t.toHighLight=null,this.elements&&this.elements.searchInput.keyup().blur()}}),DV.Schema.states={InitialLoad:function(){this.helpers.unsupportedBrowser()||(this.helpers.renderViewer(),this.events.elements=this.helpers.elements=this.elements=new DV.Elements(this),this.helpers.renderComponents(),this.helpers.renderNavigation(),this.helpers.renderSpecificPageCss(),this.pageSet=new DV.PageSet(this),this.pageSet.buildPages(),this.helpers.bindEvents(this),this.helpers.positionViewer(),this.models.document.computeOffsets(),this.helpers.addObserver("drawPages"),this.helpers.registerHashChangeEvents(),this.dragReporter=new DV.DragReporter(this,".DV-pageCollection",DV.jQuery.proxy(this.helpers.shift,this),{ignoreSelector:".DV-annotationContent"}),this.helpers.startCheckTimer(),this.helpers.handleInitialState(),_.defer(_.bind(this.helpers.autoZoomPage,this.helpers)))},ViewAnnotation:function(){return this.helpers.reset(),this.helpers.ensureAnnotationImages(),this.activeAnnotationId=null,DV.jQuery.browser.msie&&(this.elements.annotations.css({zoom:0}),this.elements.annotations.css({zoom:1})),this.helpers.toggleContent("viewAnnotations"),this.compiled.next(),!0},ViewDocument:function(){return this.helpers.reset(),this.helpers.addObserver("drawPages"),this.dragReporter.setBinding(),this.elements.window.mouseleave(DV.jQuery.proxy(this.dragReporter.stop,this.dragReporter)),this.helpers.toggleContent("viewDocument"),this.helpers.setActiveChapter(this.models.chapters.getChapterId(this.models.document.currentIndex())),this.helpers.jump(this.models.document.currentIndex()),!0},ViewEntity:function(t,e,i){this.helpers.reset(),this.helpers.toggleContent("viewSearch"),this.helpers.showEntity(t,e,i)},ViewArticleText:function(t,e,i){var n,s;n=this.models.articles.loadedPages[e],s=_.find(n.articles,function(t){return t.slug==i}),this.helpers.reset(),this.models.articles.showBackToPaper(e,i),this.elements.collection.width("100%"),this.$(".DV-textPage").width("auto"),this.helpers.toggleContent("viewArticleText"),this.$(".DV-articleTextContents").text(""),$(".DV-pages").scrollTop(0);var r=e-1,o=s.body;return this.$(".DV-articleTextContents").html(o),this.elements.currentPage.text(e),this.models.document.setPageIndex(r),this.options.ads&&(this.$(".DV-articleTextContents > p:first-child").after('<div class="advert" data-ad-type="cube"></div>'),this.$(".DV-articleTextContents").find(".advert").css({"float":"right",margin:"0 0 10px 10px"}),jQuery(this.$(".DV-articleTextContents").find(".advert")[0]).ad()),!0},ViewSearch:function(){if(this.helpers.reset(),""==this.elements.searchInput.val())this.elements.searchInput.val(t);else var t=this.elements.searchInput.val();return this.helpers.getSearchResponse(t),this.helpers.toggleContent("viewSearch"),!0},ViewText:function(){return this.helpers.reset(),this.pageSet.zoomText(),this.helpers.toggleContent("viewText"),this.events.loadText(),!0},ViewThumbnails:function(){return this.helpers.reset(),this.helpers.toggleContent("viewThumbnails"),this.thumbnails=new DV.Thumbnails(this),this.thumbnails.render(),!0}},DV.Api=function(t){this.viewer=t},DV.Api.prototype={currentPage:function(){return this.viewer.models.document.currentPage()},setCurrentPage:function(t){this.viewer.helpers.jump(t-1)},onPageChange:function(t){this.viewer.models.document.onPageChangeCallbacks.push(t)},onComputeOffsets:function(t){this.viewer.models.document.onComputeOffsetsCallbacks.push(t)},onPageLoaded:function(t){this.viewer.onPageLoadedCallbacks.push(t)},getPageNumberForId:function(t){var e=this.viewer.pageSet.pages[t];return e.index+1},getSchema:function(){return this.viewer.schema.document},getId:function(){return this.viewer.schema.document.id},getModelId:function(){return parseInt(this.getId(),10)},currentZoom:function(){var t=this.viewer.models.document;return t.zoomLevel/t.ZOOM_RANGES[1]},relativeZoom:function(){var t=this.viewer.models,e=this.currentZoom();return e*(t.document.ZOOM_RANGES[1]/t.pages.BASE_WIDTH)},numberOfPages:function(){return this.viewer.models.document.totalPages},getContributor:function(){return this.viewer.schema.document.contributor},getContributorOrganization:function(){return this.viewer.schema.document.contributor_organization},setSections:function(t){t=_.sortBy(t,function(t){return t.page}),this.viewer.schema.data.sections=t,this.viewer.models.chapters.loadChapters(),this.redraw()},getSections:function(){return _.clone(this.viewer.schema.data.sections||[])},getDescription:function(){return this.viewer.schema.document.description},setDescription:function(t){this.viewer.schema.document.description=t,this.viewer.$(".DV-description").remove(),this.viewer.$(".DV-navigation").prepend(JST.descriptionContainer({description:t})),this.viewer.helpers.displayNavigation()},getRelatedArticle:function(){return this.viewer.schema.document.resources.related_article},setRelatedArticle:function(t){this.viewer.schema.document.resources.related_article=t,this.viewer.$(".DV-storyLink a").attr({href:t}),this.viewer.$(".DV-storyLink").toggle(!!t)},getPublishedUrl:function(){return this.viewer.schema.document.resources.published_url},setPublishedUrl:function(t){this.viewer.schema.document.resources.published_url=t},getTitle:function(){return this.viewer.schema.document.title},setTitle:function(t){this.viewer.schema.document.title=t,document.title=t},getSource:function(){return this.viewer.schema.document.source},setSource:function(t){this.viewer.schema.document.source=t},getPageText:function(t){return this.viewer.schema.text[t-1]},setPageText:function(t,e){this.viewer.schema.text[e-1]=t},resetPageText:function(t){var e=this,i=this.viewer.schema.text;t?this.viewer.models.document.originalPageText={}:_.each(this.viewer.models.document.originalPageText,function(t,n){n=parseInt(n,10),t!=i[n-1]&&(e.setPageText(t,n),n==e.currentPage()&&e.viewer.events.loadText())}),"editText"==this.viewer.openEditor&&this.viewer.$(".DV-textContents").attr("contentEditable",!0).addClass("DV-editing")},redraw:function(t){t&&(this.viewer.models.annotations.renderAnnotations(),this.viewer.models.document.computeOffsets()),this.viewer.helpers.renderNavigation(),this.viewer.helpers.renderComponents(),t&&(this.viewer.elements.window.removeClass("DV-coverVisible"),this.viewer.pageSet.buildPages({noNotes:!0}),this.viewer.pageSet.reflowPages())},getAnnotationsBySortOrder:function(){return this.viewer.models.annotations.sortAnnotations()},getAnnotationsByPageIndex:function(t){return this.viewer.models.annotations.getAnnotations(t)},getAnnotation:function(t){return this.viewer.models.annotations.getAnnotation(t)},addAnnotation:function(t){return t=this.viewer.schema.loadAnnotation(t),this.viewer.models.annotations.sortAnnotations(),this.redraw(!0),this.viewer.pageSet.showAnnotation(t,{active:!0,edit:!0}),t},onAnnotationSave:function(t){this.viewer.models.annotations.saveCallbacks.push(t)},onAnnotationDelete:function(t){this.viewer.models.annotations.deleteCallbacks.push(t)},setConfirmStateChange:function(t){this.viewer.confirmStateChange=t},onChangeState:function(t){this.viewer.onStateChangeCallbacks.push(t)},getState:function(){return this.viewer.state},setState:function(t){this.viewer.open(t)},resetRemovedPages:function(){this.viewer.models.document.resetRemovedPages()},addPageToRemovedPages:function(t){this.viewer.models.document.addPageToRemovedPages(t)},removePageFromRemovedPages:function(t){this.viewer.models.document.removePageFromRemovedPages(t)},resetReorderedPages:function(){this.viewer.models.document.redrawReorderedPages()},reorderPages:function(t,e){var i=this.getModelId();this.viewer.models.document.reorderPages(i,t,e)},loadJS:function(t,e){DV.jQuery.getScript(t,e)},roundTabCorners:function(){var t=this.viewer.$(".DV-views > div:visible");t.first().addClass("DV-first"),t.last().addClass("DV-last")},registerHashListener:function(t,e){this.viewer.history.register(t,e)},clearHashListeners:function(){this.viewer.history.defaultCallback=null,this.viewer.history.handlers=[]},unload:function(){this.viewer.helpers.unbindEvents(),DV.jQuery(".DV-docViewer",this.viewer.options.container).remove(),this.viewer.helpers.stopCheckTimer(),delete DV.viewers[this.viewer.schema.document.id]},enterRemovePagesMode:function(){this.viewer.openEditor="removePages"},leaveRemovePagesMode:function(){this.viewer.openEditor=null},enterAddPagesMode:function(){this.viewer.openEditor="addPages"},leaveAddPagesMode:function(){this.viewer.openEditor=null},enterReplacePagesMode:function(){this.viewer.openEditor="replacePages"},leaveReplacePagesMode:function(){this.viewer.openEditor=null},enterReorderPagesMode:function(){this.viewer.openEditor="reorderPages",this.viewer.elements.viewer.addClass("DV-reorderPages")},leaveReorderPagesMode:function(){this.resetReorderedPages(),this.viewer.openEditor=null,this.viewer.elements.viewer.removeClass("DV-reorderPages")},enterEditPageTextMode:function(){this.viewer.openEditor="editText",this.viewer.events.loadText()},leaveEditPageTextMode:function(){this.viewer.openEditor=null,this.resetPageText()}},DV.DocumentViewer=function(t){this.options=t,this.window=window,this.$=this.jQuery,this.schema=new DV.Schema,this.api=new DV.Api(this),this.history=new DV.History(this),t.history?this.history.start(t.history):this.history.start(),this.models=this.schema.models,this.events=_.extend({},DV.Schema.events),this.helpers=_.extend({},DV.Schema.helpers),this.states=_.extend({},DV.Schema.states),this.isFocus=!0,this.openEditor=null,this.confirmStateChange=null,this.activeElement=null,this.observers=[],this.windowDimensions={},this.scrollPosition=null,this.checkTimer={},this.busy=!1,this.annotationToLoadId=null,this.dragReporter=null,this.compiled={},this.tracker={},this.onStateChangeCallbacks=[],this.onPageLoadedCallbacks=[],this.events=_.extend(this.events,{viewer:this,states:this.states,elements:this.elements,helpers:this.helpers,models:this.models,compile:function(){var t=this.viewer,e=arguments[0];return function(){t.events[t.state][e]?t.events[t.state][e].apply(t.events,arguments):t.events[e].apply(t.events,arguments)}}}),this.helpers=_.extend(this.helpers,{viewer:this,states:this.states,elements:this.elements,events:this.events,models:this.models}),this.states=_.extend(this.states,{viewer:this,helpers:this.helpers,elements:this.elements,events:this.events,models:this.models})},DV.DocumentViewer.prototype.loadModels=function(){this.models.chapters=new DV.model.Chapters(this),this.models.document=new DV.model.Document(this),this.models.pages=new DV.model.Pages(this),this.models.annotations=new DV.model.Annotations(this),this.models.articles=new DV.model.Articles(this),this.models.removedPages={}},DV.DocumentViewer.prototype.open=function(t){var e=arguments;if(this.state!=t){var i=_.bind(function(){return this.state=t,this.states[t].apply(this,e),this.slapIE(),this.notifyChangedState(),!0},this);this.confirmStateChange?this.confirmStateChange(i):i()}},DV.DocumentViewer.prototype.slapIE=function(){DV.jQuery(this.options.container).css({zoom:.99}).css({zoom:1})},DV.DocumentViewer.prototype.notifyChangedState=function(){_.each(this.onStateChangeCallbacks,function(t){t()})},DV.DocumentViewer.prototype.recordHit=function(t){var e=window.location,i=e.protocol+"//"+e.host+e.pathname;if(i.match(/^file:/))return!1;i=i.replace(/[\/]+$/,"");var n=parseInt(this.api.getId(),10),s=encodeURIComponent("document:"+n+":"+i);DV.jQuery(document.body).append('<img alt="" width="1" height="1" src="'+t+"?key="+s+'" />')},DV.DocumentViewer.prototype.jQuery=function(t,e){return e=e||this.options.container,DV.jQuery.call(DV.jQuery,t,e)},DV.load=function(t,e){e=e||{};var i=t.id||t.match(/([^\/]+)(\.js|\.json)$/)[1];"showSidebar"in e&&(e.sidebar=e.showSidebar);var n={container:document.body,zoom:"auto",sidebar:!0};e=_.extend({},n,e),e.fixedSize=!(!e.width&&!e.height);var s=new DV.DocumentViewer(e);DV.viewers[i]=s;var r=DV.loadJSON=function(t){var i=DV.viewers[t.id];i.schema.importCanonicalDocument(t),i.loadModels(),DV.jQuery(function(){i.open("InitialLoad"),e.afterLoad&&e.afterLoad(i),DV.afterLoad&&DV.afterLoad(i),DV.recordHit&&i.recordHit(DV.recordHit)})},o=function(){if(_.isString(t))if(t.match(/\.js$/))DV.jQuery.getScript(t);else{var e=s.helpers.isCrossDomain(t);e&&(t+="?callback=?"),DV.jQuery.getJSON(t,r)}else r(t)};return e.templates?DV.jQuery.getScript(e.templates,o):o(),s},DV.onload&&_.defer(DV.onload);