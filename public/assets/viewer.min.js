!function(e,t){function i(e){var t,i,n=M[e]={};for(e=e.split(/\s+/),t=0,i=e.length;i>t;t++)n[e[t]]=!0;return n}function n(e,i,n){if(n===t&&1===e.nodeType){var s="data-"+i.replace(H,"-$1").toLowerCase();if(n=e.getAttribute(s),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:O.isNumeric(n)?+n:L.test(n)?O.parseJSON(n):n}catch(r){}O.data(e,i,n)}else n=t}return n}function s(e){for(var t in e)if(("data"!==t||!O.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function r(e,t,i){var n=t+"defer",s=t+"queue",r=t+"mark",o=O._data(e,n);!o||"queue"!==i&&O._data(e,s)||"mark"!==i&&O._data(e,r)||setTimeout(function(){O._data(e,s)||O._data(e,r)||(O.removeData(e,n,!0),o.fire())},0)}function o(){return!1}function a(){return!0}function h(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function l(e,t,i){if(t=t||0,O.isFunction(t))return O.grep(e,function(e,n){var s=!!t.call(e,n,e);return s===i});if(t.nodeType)return O.grep(e,function(e){return e===t===i});if("string"==typeof t){var n=O.grep(e,function(e){return 1===e.nodeType});if(ut.test(t))return O.filter(t,n,!i);t=O.filter(t,n)}return O.grep(e,function(e){return O.inArray(e,t)>=0===i})}function u(e){var t=ft.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function c(e){return O.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function d(e,t){if(1===t.nodeType&&O.hasData(e)){var i,n,s,r=O._data(e),o=O._data(t,r),a=r.events;if(a){delete o.handle,o.events={};for(i in a)for(n=0,s=a[i].length;s>n;n++)O.event.add(t,i,a[i][n])}o.data&&(o.data=O.extend({},o.data))}}function p(e,t){var i;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),i=t.nodeName.toLowerCase(),"object"===i?t.outerHTML=e.outerHTML:"input"!==i||"checkbox"!==e.type&&"radio"!==e.type?"option"===i?t.selected=e.defaultSelected:"input"===i||"textarea"===i?t.defaultValue=e.defaultValue:"script"===i&&t.text!==e.text&&(t.text=e.text):(e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value)),t.removeAttribute(O.expando),t.removeAttribute("_submit_attached"),t.removeAttribute("_change_attached"))}function f(e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName("*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll("*"):[]}function g(e){("checkbox"===e.type||"radio"===e.type)&&(e.defaultChecked=e.checked)}function m(e){var t=(e.nodeName||"").toLowerCase();"input"===t?g(e):"script"!==t&&"undefined"!=typeof e.getElementsByTagName&&O.grep(e.getElementsByTagName("input"),g)}function v(e){var t=N.createElement("div");return Tt.appendChild(t),t.innerHTML=e.outerHTML,t.firstChild}function y(e,t,i){var n="width"===t?e.offsetWidth:e.offsetHeight,s="width"===t?1:0,r=4;if(n>0){if("border"!==i)for(;r>s;s+=2)i||(n-=parseFloat(O.css(e,"padding"+Rt[s]))||0),"margin"===i?n+=parseFloat(O.css(e,i+Rt[s]))||0:n-=parseFloat(O.css(e,"border"+Rt[s]+"Width"))||0;return n+"px"}if(n=Pt(e,t),(0>n||null==n)&&(n=e.style[t]),Mt.test(n))return n;if(n=parseFloat(n)||0,i)for(;r>s;s+=2)n+=parseFloat(O.css(e,"padding"+Rt[s]))||0,"padding"!==i&&(n+=parseFloat(O.css(e,"border"+Rt[s]+"Width"))||0),"margin"===i&&(n+=parseFloat(O.css(e,i+Rt[s]))||0);return n+"px"}function w(e){return function(t,i){if("string"!=typeof t&&(i=t,t="*"),O.isFunction(i))for(var n,s,r,o=t.toLowerCase().split(ti),a=0,h=o.length;h>a;a++)n=o[a],r=/^\+/.test(n),r&&(n=n.substr(1)||"*"),s=e[n]=e[n]||[],s[r?"unshift":"push"](i)}}function b(e,i,n,s,r,o){r=r||i.dataTypes[0],o=o||{},o[r]=!0;for(var a,h=e[r],l=0,u=h?h.length:0,c=e===ri;u>l&&(c||!a);l++)a=h[l](i,n,s),"string"==typeof a&&(!c||o[a]?a=t:(i.dataTypes.unshift(a),a=b(e,i,n,s,a,o)));return!c&&a||o["*"]||(a=b(e,i,n,s,"*",o)),a}function x(e,i){var n,s,r=O.ajaxSettings.flatOptions||{};for(n in i)i[n]!==t&&((r[n]?e:s||(s={}))[n]=i[n]);s&&O.extend(!0,e,s)}function V(e,t,i,n){if(O.isArray(t))O.each(t,function(t,s){i||Bt.test(e)?n(e,s):V(e+"["+("object"==typeof s?t:"")+"]",s,i,n)});else if(i||"object"!==O.type(t))n(e,t);else for(var s in t)V(e+"["+s+"]",t[s],i,n)}function S(e,i,n){var s,r,o,a,h=e.contents,l=e.dataTypes,u=e.responseFields;for(r in u)r in n&&(i[u[r]]=n[r]);for(;"*"===l[0];)l.shift(),s===t&&(s=e.mimeType||i.getResponseHeader("content-type"));if(s)for(r in h)if(h[r]&&h[r].test(s)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function D(e,i){e.dataFilter&&(i=e.dataFilter(i,e.dataType));var n,s,r,o,a,h,l,u,c=e.dataTypes,d={},p=c.length,f=c[0];for(n=1;p>n;n++){if(1===n)for(s in e.converters)"string"==typeof s&&(d[s.toLowerCase()]=e.converters[s]);if(o=f,f=c[n],"*"===f)f=o;else if("*"!==o&&o!==f){if(a=o+" "+f,h=d[a]||d["* "+f],!h){u=t;for(l in d)if(r=l.split(" "),(r[0]===o||"*"===r[0])&&(u=d[r[1]+" "+f])){l=d[l],l===!0?h=u:u===!0&&(h=l);break}}h||u||O.error("No conversion from "+a.replace(" "," to ")),h!==!0&&(i=h?h(i):u(l(i)))}}return i}function _(){try{return new e.XMLHttpRequest}catch(t){}}function C(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function A(){return setTimeout(T,0),vi=O.now()}function T(){vi=t}function P(e,t){var i={};return O.each(xi.concat.apply([],xi.slice(0,t)),function(){i[this]=e}),i}function E(e){if(!yi[e]){var t=N.body,i=O("<"+e+">").appendTo(t),n=i.css("display");i.remove(),("none"===n||""===n)&&(fi||(fi=N.createElement("iframe"),fi.frameBorder=fi.width=fi.height=0),t.appendChild(fi),gi&&fi.createElement||(gi=(fi.contentWindow||fi.contentDocument).document,gi.write((O.support.boxModel?"<!doctype html>":"")+"<html><body>"),gi.close()),i=gi.createElement(e),gi.body.appendChild(i),n=O.css(i,"display"),t.removeChild(fi)),yi[e]=n}return yi[e]}function k(e){return O.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var N=e.document,G=e.navigator,I=e.location,O=function(){function i(){if(!a.isReady){try{N.documentElement.doScroll("left")}catch(e){return void setTimeout(i,1)}a.ready()}}var n,s,r,o,a=function(e,t){return new a.fn.init(e,t,n)},h=e.jQuery,l=e.$,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,c=/\S/,d=/^\s+/,p=/\s+$/,f=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,g=/^[\],:{}\s]*$/,m=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,v=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,y=/(?:^|:|,)(?:\s*\[)+/g,w=/(webkit)[ \/]([\w.]+)/,b=/(opera)(?:.*version)?[ \/]([\w.]+)/,x=/(msie) ([\w.]+)/,V=/(mozilla)(?:.*? rv:([\w.]+))?/,S=/-([a-z]|[0-9])/gi,D=/^-ms-/,_=function(e,t){return(t+"").toUpperCase()},C=G.userAgent,A=Object.prototype.toString,T=Object.prototype.hasOwnProperty,P=Array.prototype.push,E=Array.prototype.slice,k=String.prototype.trim,I=Array.prototype.indexOf,O={};return a.fn=a.prototype={constructor:a,init:function(e,i,n){var s,r,o,h;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("body"===e&&!i&&N.body)return this.context=N,this[0]=N.body,this.selector=e,this.length=1,this;if("string"==typeof e){if(s="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:u.exec(e),!s||!s[1]&&i)return!i||i.jquery?(i||n).find(e):this.constructor(i).find(e);if(s[1])return i=i instanceof a?i[0]:i,h=i?i.ownerDocument||i:N,o=f.exec(e),o?a.isPlainObject(i)?(e=[N.createElement(o[1])],a.fn.attr.call(e,i,!0)):e=[h.createElement(o[1])]:(o=a.buildFragment([s[1]],[h]),e=(o.cacheable?a.clone(o.fragment):o.fragment).childNodes),a.merge(this,e);if(r=N.getElementById(s[2]),r&&r.parentNode){if(r.id!==s[2])return n.find(e);this.length=1,this[0]=r}return this.context=N,this.selector=e,this}return a.isFunction(e)?n.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),a.makeArray(e,this))},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return E.call(this,0)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e,t,i){var n=this.constructor();return a.isArray(e)?P.apply(n,e):a.merge(n,e),n.prevObject=this,n.context=this.context,"find"===t?n.selector=this.selector+(this.selector?" ":"")+i:t&&(n.selector=this.selector+"."+t+"("+i+")"),n},each:function(e,t){return a.each(this,e,t)},ready:function(e){return a.bindReady(),r.add(e),this},eq:function(e){return e=+e,-1===e?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(E.apply(this,arguments),"slice",E.call(arguments).join(","))},map:function(e){return this.pushStack(a.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:P,sort:[].sort,splice:[].splice},a.fn.init.prototype=a.fn,a.extend=a.fn.extend=function(){var e,i,n,s,r,o,h=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof h&&(c=h,h=arguments[1]||{},l=2),"object"==typeof h||a.isFunction(h)||(h={}),u===l&&(h=this,--l);u>l;l++)if(null!=(e=arguments[l]))for(i in e)n=h[i],s=e[i],h!==s&&(c&&s&&(a.isPlainObject(s)||(r=a.isArray(s)))?(r?(r=!1,o=n&&a.isArray(n)?n:[]):o=n&&a.isPlainObject(n)?n:{},h[i]=a.extend(c,o,s)):s!==t&&(h[i]=s));return h},a.extend({noConflict:function(t){return e.$===a&&(e.$=l),t&&e.jQuery===a&&(e.jQuery=h),a},isReady:!1,readyWait:1,holdReady:function(e){e?a.readyWait++:a.ready(!0)},ready:function(e){if(e===!0&&!--a.readyWait||e!==!0&&!a.isReady){if(!N.body)return setTimeout(a.ready,1);if(a.isReady=!0,e!==!0&&--a.readyWait>0)return;r.fireWith(N,[a]),a.fn.trigger&&a(N).trigger("ready").off("ready")}},bindReady:function(){if(!r){if(r=a.Callbacks("once memory"),"complete"===N.readyState)return setTimeout(a.ready,1);if(N.addEventListener)N.addEventListener("DOMContentLoaded",o,!1),e.addEventListener("load",a.ready,!1);else if(N.attachEvent){N.attachEvent("onreadystatechange",o),e.attachEvent("onload",a.ready);var t=!1;try{t=null==e.frameElement}catch(n){}N.documentElement.doScroll&&t&&i()}}},isFunction:function(e){return"function"===a.type(e)},isArray:Array.isArray||function(e){return"array"===a.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):O[A.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==a.type(e)||e.nodeType||a.isWindow(e))return!1;try{if(e.constructor&&!T.call(e,"constructor")&&!T.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}var n;for(n in e);return n===t||T.call(e,n)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw new Error(e)},parseJSON:function(t){return"string"==typeof t&&t?(t=a.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):g.test(t.replace(m,"@").replace(v,"]").replace(y,""))?new Function("return "+t)():void a.error("Invalid JSON: "+t)):null},parseXML:function(i){if("string"!=typeof i||!i)return null;var n,s;try{e.DOMParser?(s=new DOMParser,n=s.parseFromString(i,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(i))}catch(r){n=t}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||a.error("Invalid XML: "+i),n},noop:function(){},globalEval:function(t){t&&c.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(D,"ms-").replace(S,_)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,i,n){var s,r=0,o=e.length,h=o===t||a.isFunction(e);if(n)if(h){for(s in e)if(i.apply(e[s],n)===!1)break}else for(;o>r&&i.apply(e[r++],n)!==!1;);else if(h){for(s in e)if(i.call(e[s],s,e[s])===!1)break}else for(;o>r&&i.call(e[r],r,e[r++])!==!1;);return e},trim:k?function(e){return null==e?"":k.call(e)}:function(e){return null==e?"":e.toString().replace(d,"").replace(p,"")},makeArray:function(e,t){var i=t||[];if(null!=e){var n=a.type(e);null==e.length||"string"===n||"function"===n||"regexp"===n||a.isWindow(e)?P.call(i,e):a.merge(i,e)}return i},inArray:function(e,t,i){var n;if(t){if(I)return I.call(t,e,i);for(n=t.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,i){var n=e.length,s=0;if("number"==typeof i.length)for(var r=i.length;r>s;s++)e[n++]=i[s];else for(;i[s]!==t;)e[n++]=i[s++];return e.length=n,e},grep:function(e,t,i){var n,s=[];i=!!i;for(var r=0,o=e.length;o>r;r++)n=!!t(e[r],r),i!==n&&s.push(e[r]);return s},map:function(e,i,n){var s,r,o=[],h=0,l=e.length,u=e instanceof a||l!==t&&"number"==typeof l&&(l>0&&e[0]&&e[l-1]||0===l||a.isArray(e));if(u)for(;l>h;h++)s=i(e[h],h,n),null!=s&&(o[o.length]=s);else for(r in e)s=i(e[r],r,n),null!=s&&(o[o.length]=s);return o.concat.apply([],o)},guid:1,proxy:function(e,i){if("string"==typeof i){var n=e[i];i=e,e=n}if(!a.isFunction(e))return t;var s=E.call(arguments,2),r=function(){return e.apply(i,s.concat(E.call(arguments)))};return r.guid=e.guid=e.guid||r.guid||a.guid++,r},access:function(e,i,n,s,r,o,h){var l,u=null==n,c=0,d=e.length;if(n&&"object"==typeof n){for(c in n)a.access(e,i,c,n[c],1,o,s);r=1}else if(s!==t){if(l=h===t&&a.isFunction(s),u&&(l?(l=i,i=function(e,t,i){return l.call(a(e),i)}):(i.call(e,s),i=null)),i)for(;d>c;c++)i(e[c],n,l?s.call(e[c],c,i(e[c],n)):s,h);r=1}return r?e:u?i.call(e):d?i(e[0],n):o},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=w.exec(e)||b.exec(e)||x.exec(e)||e.indexOf("compatible")<0&&V.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,i){return new e.fn.init(t,i)}a.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(i,n){return n&&n instanceof a&&!(n instanceof e)&&(n=e(n)),a.fn.init.call(this,i,n,t)},e.fn.init.prototype=e.fn;var t=e(N);return e},browser:{}}),a.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){O["[object "+t+"]"]=t.toLowerCase()}),s=a.uaMatch(C),s.browser&&(a.browser[s.browser]=!0,a.browser.version=s.version),a.browser.webkit&&(a.browser.safari=!0),c.test(" ")&&(d=/^[\s\xA0]+/,p=/[\s\xA0]+$/),n=a(N),N.addEventListener?o=function(){N.removeEventListener("DOMContentLoaded",o,!1),a.ready()}:N.attachEvent&&(o=function(){"complete"===N.readyState&&(N.detachEvent("onreadystatechange",o),a.ready())}),a}(),M={};O.Callbacks=function(e){e=e?M[e]||i(e):{};var n,s,r,o,a,h,l=[],u=[],c=function(t){var i,n,s,r;for(i=0,n=t.length;n>i;i++)s=t[i],r=O.type(s),"array"===r?c(s):"function"===r&&(e.unique&&p.has(s)||l.push(s))},d=function(t,i){for(i=i||[],n=!e.memory||[t,i],s=!0,r=!0,h=o||0,o=0,a=l.length;l&&a>h;h++)if(l[h].apply(t,i)===!1&&e.stopOnFalse){n=!0;break}r=!1,l&&(e.once?n===!0?p.disable():l=[]:u&&u.length&&(n=u.shift(),p.fireWith(n[0],n[1])))},p={add:function(){if(l){var e=l.length;c(arguments),r?a=l.length:n&&n!==!0&&(o=e,d(n[0],n[1]))}return this},remove:function(){if(l)for(var t=arguments,i=0,n=t.length;n>i;i++)for(var s=0;s<l.length&&(t[i]!==l[s]||(r&&a>=s&&(a--,h>=s&&h--),l.splice(s--,1),!e.unique));s++);return this},has:function(e){if(l)for(var t=0,i=l.length;i>t;t++)if(e===l[t])return!0;return!1},empty:function(){return l=[],this},disable:function(){return l=u=n=t,this},disabled:function(){return!l},lock:function(){return u=t,n&&n!==!0||p.disable(),this},locked:function(){return!u},fireWith:function(t,i){return u&&(r?e.once||u.push([t,i]):e.once&&n||d(t,i)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!s}};return p};var j=[].slice;O.extend({Deferred:function(e){var t,i=O.Callbacks("once memory"),n=O.Callbacks("once memory"),s=O.Callbacks("memory"),r="pending",o={resolve:i,reject:n,notify:s},a={done:i.add,fail:n.add,progress:s.add,state:function(){return r},isResolved:i.fired,isRejected:n.fired,then:function(e,t,i){return h.done(e).fail(t).progress(i),this},always:function(){return h.done.apply(h,arguments).fail.apply(h,arguments),this},pipe:function(e,t,i){return O.Deferred(function(n){O.each({done:[e,"resolve"],fail:[t,"reject"],progress:[i,"notify"]},function(e,t){var i,s=t[0],r=t[1];h[e](O.isFunction(s)?function(){i=s.apply(this,arguments),i&&O.isFunction(i.promise)?i.promise().then(n.resolve,n.reject,n.notify):n[r+"With"](this===h?n:this,[i])}:n[r])})}).promise()},promise:function(e){if(null==e)e=a;else for(var t in a)e[t]=a[t];return e}},h=a.promise({});for(t in o)h[t]=o[t].fire,h[t+"With"]=o[t].fireWith;return h.done(function(){r="resolved"},n.disable,s.lock).fail(function(){r="rejected"},i.disable,s.lock),e&&e.call(h,h),h},when:function(e){function t(e){return function(t){n[e]=arguments.length>1?j.call(arguments,0):t,--a||h.resolveWith(h,n)}}function i(e){return function(t){o[e]=arguments.length>1?j.call(arguments,0):t,h.notifyWith(l,o)}}var n=j.call(arguments,0),s=0,r=n.length,o=new Array(r),a=r,h=1>=r&&e&&O.isFunction(e.promise)?e:O.Deferred(),l=h.promise();if(r>1){for(;r>s;s++)n[s]&&n[s].promise&&O.isFunction(n[s].promise)?n[s].promise().then(t(s),h.reject,i(s)):--a;a||h.resolveWith(h,n)}else h!==e&&h.resolveWith(h,r?[e]:[]);return l}}),O.support=function(){{var t,i,n,s,r,o,a,h,l,u,c,d=N.createElement("div");N.documentElement}if(d.setAttribute("className","t"),d.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",i=d.getElementsByTagName("*"),n=d.getElementsByTagName("a")[0],!i||!i.length||!n)return{};s=N.createElement("select"),r=s.appendChild(N.createElement("option")),o=d.getElementsByTagName("input")[0],t={leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(n.getAttribute("style")),hrefNormalized:"/a"===n.getAttribute("href"),opacity:/^0.55/.test(n.style.opacity),cssFloat:!!n.style.cssFloat,checkOn:"on"===o.value,optSelected:r.selected,getSetAttribute:"t"!==d.className,enctype:!!N.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==N.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},O.boxModel=t.boxModel="CSS1Compat"===N.compatMode,o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!r.disabled;try{delete d.test}catch(p){t.deleteExpando=!1}if(!d.addEventListener&&d.attachEvent&&d.fireEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).fireEvent("onclick")),o=N.createElement("input"),o.value="t",o.setAttribute("type","radio"),t.radioValue="t"===o.value,o.setAttribute("checked","checked"),o.setAttribute("name","t"),d.appendChild(o),a=N.createDocumentFragment(),a.appendChild(d.lastChild),t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=o.checked,a.removeChild(o),a.appendChild(d),d.attachEvent)for(u in{submit:1,change:1,focusin:1})l="on"+u,c=l in d,c||(d.setAttribute(l,"return;"),c="function"==typeof d[l]),t[u+"Bubbles"]=c;return a.removeChild(d),a=s=r=d=o=null,O(function(){var i,n,s,r,o,a,l,u,p,f,g,m,v=N.getElementsByTagName("body")[0];v&&(l=1,m="padding:0;margin:0;border:",f="position:absolute;top:0;left:0;width:1px;height:1px;",g=m+"0;visibility:hidden;",u="style='"+f+m+"5px solid #000;",p="<div "+u+"display:block;'><div style='"+m+"0;display:block;overflow:hidden;'></div></div><table "+u+"' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",i=N.createElement("div"),i.style.cssText=g+"width:0;height:0;position:static;top:0;margin-top:"+l+"px",v.insertBefore(i,v.firstChild),d=N.createElement("div"),i.appendChild(d),d.innerHTML="<table><tr><td style='"+m+"0;display:none'></td><td>t</td></tr></table>",h=d.getElementsByTagName("td"),c=0===h[0].offsetHeight,h[0].style.display="",h[1].style.display="none",t.reliableHiddenOffsets=c&&0===h[0].offsetHeight,e.getComputedStyle&&(d.innerHTML="",a=N.createElement("div"),a.style.width="0",a.style.marginRight="0",d.style.width="2px",d.appendChild(a),t.reliableMarginRight=0===(parseInt((e.getComputedStyle(a,null)||{marginRight:0}).marginRight,10)||0)),"undefined"!=typeof d.style.zoom&&(d.innerHTML="",d.style.width=d.style.padding="1px",d.style.border=0,d.style.overflow="hidden",d.style.display="inline",d.style.zoom=1,t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div style='width:5px;'></div>",t.shrinkWrapBlocks=3!==d.offsetWidth),d.style.cssText=f+g,d.innerHTML=p,n=d.firstChild,s=n.firstChild,r=n.nextSibling.firstChild.firstChild,o={doesNotAddBorder:5!==s.offsetTop,doesAddBorderForTableAndCells:5===r.offsetTop},s.style.position="fixed",s.style.top="20px",o.fixedPosition=20===s.offsetTop||15===s.offsetTop,s.style.position=s.style.top="",n.style.overflow="hidden",n.style.position="relative",o.subtractsBorderForOverflowNotVisible=-5===s.offsetTop,o.doesNotIncludeMarginInBodyOffset=v.offsetTop!==l,e.getComputedStyle&&(d.style.marginTop="1%",t.pixelMargin="1%"!==(e.getComputedStyle(d,null)||{marginTop:0}).marginTop),"undefined"!=typeof i.style.zoom&&(i.style.zoom=1),v.removeChild(i),a=d=i=null,O.extend(t,o))}),t}();var L=/^(?:\{.*\}|\[.*\])$/,H=/([A-Z])/g;O.extend({cache:{},uuid:0,expando:"jQuery"+(O.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?O.cache[e[O.expando]]:e[O.expando],!!e&&!s(e)},data:function(e,i,n,s){if(O.acceptData(e)){var r,o,a,h=O.expando,l="string"==typeof i,u=e.nodeType,c=u?O.cache:e,d=u?e[h]:e[h]&&h,p="events"===i;if(d&&c[d]&&(p||s||c[d].data)||!l||n!==t)return d||(u?e[h]=d=++O.uuid:d=h),c[d]||(c[d]={},u||(c[d].toJSON=O.noop)),("object"==typeof i||"function"==typeof i)&&(s?c[d]=O.extend(c[d],i):c[d].data=O.extend(c[d].data,i)),r=o=c[d],s||(o.data||(o.data={}),o=o.data),n!==t&&(o[O.camelCase(i)]=n),p&&!o[i]?r.events:(l?(a=o[i],null==a&&(a=o[O.camelCase(i)])):a=o,a)}},removeData:function(e,t,i){if(O.acceptData(e)){var n,r,o,a=O.expando,h=e.nodeType,l=h?O.cache:e,u=h?e[a]:a;if(l[u]){if(t&&(n=i?l[u]:l[u].data)){O.isArray(t)||(t in n?t=[t]:(t=O.camelCase(t),t=t in n?[t]:t.split(" ")));for(r=0,o=t.length;o>r;r++)delete n[t[r]];if(!(i?s:O.isEmptyObject)(n))return}(i||(delete l[u].data,s(l[u])))&&(O.support.deleteExpando||!l.setInterval?delete l[u]:l[u]=null,h&&(O.support.deleteExpando?delete e[a]:e.removeAttribute?e.removeAttribute(a):e[a]=null))}}},_data:function(e,t,i){return O.data(e,t,i,!0)},acceptData:function(e){if(e.nodeName){var t=O.noData[e.nodeName.toLowerCase()];if(t)return!(t===!0||e.getAttribute("classid")!==t)}return!0}}),O.fn.extend({data:function(e,i){var s,r,o,a,h,l=this[0],u=0,c=null;if(e===t){if(this.length&&(c=O.data(l),1===l.nodeType&&!O._data(l,"parsedAttrs"))){for(o=l.attributes,h=o.length;h>u;u++)a=o[u].name,0===a.indexOf("data-")&&(a=O.camelCase(a.substring(5)),n(l,a,c[a]));O._data(l,"parsedAttrs",!0)}return c}return"object"==typeof e?this.each(function(){O.data(this,e)}):(s=e.split(".",2),s[1]=s[1]?"."+s[1]:"",r=s[1]+"!",O.access(this,function(i){return i===t?(c=this.triggerHandler("getData"+r,[s[0]]),c===t&&l&&(c=O.data(l,e),c=n(l,e,c)),c===t&&s[1]?this.data(s[0]):c):(s[1]=i,void this.each(function(){var t=O(this);t.triggerHandler("setData"+r,s),O.data(this,e,i),t.triggerHandler("changeData"+r,s)}))},null,i,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){O.removeData(this,e)})}}),O.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",O._data(e,t,(O._data(e,t)||0)+1))},_unmark:function(e,t,i){if(e!==!0&&(i=t,t=e,e=!1),t){i=i||"fx";var n=i+"mark",s=e?0:(O._data(t,n)||1)-1;s?O._data(t,n,s):(O.removeData(t,n,!0),r(t,i,"mark"))}},queue:function(e,t,i){var n;return e?(t=(t||"fx")+"queue",n=O._data(e,t),i&&(!n||O.isArray(i)?n=O._data(e,t,O.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(e,t){t=t||"fx";var i=O.queue(e,t),n=i.shift(),s={};"inprogress"===n&&(n=i.shift()),n&&("fx"===t&&i.unshift("inprogress"),O._data(e,t+".run",s),n.call(e,function(){O.dequeue(e,t)},s)),i.length||(O.removeData(e,t+"queue "+t+".run",!0),r(e,t,"queue"))}}),O.fn.extend({queue:function(e,i){var n=2;return"string"!=typeof e&&(i=e,e="fx",n--),arguments.length<n?O.queue(this[0],e):i===t?this:this.each(function(){var t=O.queue(this,e,i);"fx"===e&&"inprogress"!==t[0]&&O.dequeue(this,e)})},dequeue:function(e){return this.each(function(){O.dequeue(this,e)})},delay:function(e,t){return e=O.fx?O.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){function n(){--h||r.resolveWith(o,[o])}"string"!=typeof e&&(i=e,e=t),e=e||"fx";for(var s,r=O.Deferred(),o=this,a=o.length,h=1,l=e+"defer",u=e+"queue",c=e+"mark";a--;)(s=O.data(o[a],l,t,!0)||(O.data(o[a],u,t,!0)||O.data(o[a],c,t,!0))&&O.data(o[a],l,O.Callbacks("once memory"),!0))&&(h++,s.add(n));return n(),r.promise(i)}});var R,$,F,z=/[\n\t\r]/g,B=/\s+/,W=/\r/g,q=/^(?:button|input)$/i,U=/^(?:button|input|object|select|textarea)$/i,Q=/^a(?:rea)?$/i,X=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Y=O.support.getSetAttribute;O.fn.extend({attr:function(e,t){return O.access(this,O.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){O.removeAttr(this,e)})},prop:function(e,t){return O.access(this,O.prop,e,t,arguments.length>1)},removeProp:function(e){return e=O.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(i){}})},addClass:function(e){var t,i,n,s,r,o,a;if(O.isFunction(e))return this.each(function(t){O(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(B),i=0,n=this.length;n>i;i++)if(s=this[i],1===s.nodeType)if(s.className||1!==t.length){for(r=" "+s.className+" ",o=0,a=t.length;a>o;o++)~r.indexOf(" "+t[o]+" ")||(r+=t[o]+" ");s.className=O.trim(r)}else s.className=e;return this},removeClass:function(e){var i,n,s,r,o,a,h;if(O.isFunction(e))return this.each(function(t){O(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(i=(e||"").split(B),n=0,s=this.length;s>n;n++)if(r=this[n],1===r.nodeType&&r.className)if(e){for(o=(" "+r.className+" ").replace(z," "),a=0,h=i.length;h>a;a++)o=o.replace(" "+i[a]+" "," ");r.className=O.trim(o)}else r.className="";return this},toggleClass:function(e,t){var i=typeof e,n="boolean"==typeof t;return this.each(O.isFunction(e)?function(i){O(this).toggleClass(e.call(this,i,this.className,t),t)}:function(){if("string"===i)for(var s,r=0,o=O(this),a=t,h=e.split(B);s=h[r++];)a=n?a:!o.hasClass(s),o[a?"addClass":"removeClass"](s);else("undefined"===i||"boolean"===i)&&(this.className&&O._data(this,"__className__",this.className),this.className=this.className||e===!1?"":O._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(z," ").indexOf(t)>-1)return!0;return!1},val:function(e){var i,n,s,r=this[0];{if(arguments.length)return s=O.isFunction(e),this.each(function(n){var r,o=O(this);1===this.nodeType&&(r=s?e.call(this,n,o.val()):e,null==r?r="":"number"==typeof r?r+="":O.isArray(r)&&(r=O.map(r,function(e){return null==e?"":e+""})),i=O.valHooks[this.type]||O.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,r,"value")!==t||(this.value=r))});if(r)return i=O.valHooks[r.type]||O.valHooks[r.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(r,"value"))!==t?n:(n=r.value,"string"==typeof n?n.replace(W,""):null==n?"":n)}}}),O.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,i,n,s,r=e.selectedIndex,o=[],a=e.options,h="select-one"===e.type;if(0>r)return null;for(i=h?r:0,n=h?r+1:a.length;n>i;i++)if(s=a[i],!(!s.selected||(O.support.optDisabled?s.disabled:null!==s.getAttribute("disabled"))||s.parentNode.disabled&&O.nodeName(s.parentNode,"optgroup"))){if(t=O(s).val(),h)return t;o.push(t)}return h&&!o.length&&a.length?O(a[r]).val():o},set:function(e,t){var i=O.makeArray(t);return O(e).find("option").each(function(){this.selected=O.inArray(O(this).val(),i)>=0}),i.length||(e.selectedIndex=-1),i}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,i,n,s){var r,o,a,h=e.nodeType;if(e&&3!==h&&8!==h&&2!==h)return s&&i in O.attrFn?O(e)[i](n):"undefined"==typeof e.getAttribute?O.prop(e,i,n):(a=1!==h||!O.isXMLDoc(e),a&&(i=i.toLowerCase(),o=O.attrHooks[i]||(X.test(i)?$:R)),n!==t?null===n?void O.removeAttr(e,i):o&&"set"in o&&a&&(r=o.set(e,n,i))!==t?r:(e.setAttribute(i,""+n),n):o&&"get"in o&&a&&null!==(r=o.get(e,i))?r:(r=e.getAttribute(i),null===r?t:r))},removeAttr:function(e,t){var i,n,s,r,o,a=0;if(t&&1===e.nodeType)for(n=t.toLowerCase().split(B),r=n.length;r>a;a++)s=n[a],s&&(i=O.propFix[s]||s,o=X.test(s),o||O.attr(e,s,""),e.removeAttribute(Y?s:i),o&&i in e&&(e[i]=!1))},attrHooks:{type:{set:function(e,t){if(q.test(e.nodeName)&&e.parentNode)O.error("type property can't be changed");else if(!O.support.radioValue&&"radio"===t&&O.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}},value:{get:function(e,t){return R&&O.nodeName(e,"button")?R.get(e,t):t in e?e.value:null},set:function(e,t,i){return R&&O.nodeName(e,"button")?R.set(e,t,i):void(e.value=t)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,i,n){var s,r,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return o=1!==a||!O.isXMLDoc(e),o&&(i=O.propFix[i]||i,r=O.propHooks[i]),n!==t?r&&"set"in r&&(s=r.set(e,n,i))!==t?s:e[i]=n:r&&"get"in r&&null!==(s=r.get(e,i))?s:e[i]},propHooks:{tabIndex:{get:function(e){var i=e.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):U.test(e.nodeName)||Q.test(e.nodeName)&&e.href?0:t}}}}),O.attrHooks.tabindex=O.propHooks.tabIndex,$={get:function(e,i){var n,s=O.prop(e,i);return s===!0||"boolean"!=typeof s&&(n=e.getAttributeNode(i))&&n.nodeValue!==!1?i.toLowerCase():t},set:function(e,t,i){var n;return t===!1?O.removeAttr(e,i):(n=O.propFix[i]||i,n in e&&(e[n]=!0),e.setAttribute(i,i.toLowerCase())),i}},Y||(F={name:!0,id:!0,coords:!0},R=O.valHooks.button={get:function(e,i){var n;return n=e.getAttributeNode(i),n&&(F[i]?""!==n.nodeValue:n.specified)?n.nodeValue:t},set:function(e,t,i){var n=e.getAttributeNode(i);return n||(n=N.createAttribute(i),e.setAttributeNode(n)),n.nodeValue=t+""}},O.attrHooks.tabindex.set=R.set,O.each(["width","height"],function(e,t){O.attrHooks[t]=O.extend(O.attrHooks[t],{set:function(e,i){return""===i?(e.setAttribute(t,"auto"),i):void 0}})}),O.attrHooks.contenteditable={get:R.get,set:function(e,t,i){""===t&&(t="false"),R.set(e,t,i)}}),O.support.hrefNormalized||O.each(["href","src","width","height"],function(e,i){O.attrHooks[i]=O.extend(O.attrHooks[i],{get:function(e){var n=e.getAttribute(i,2);return null===n?t:n}})}),O.support.style||(O.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),O.support.optSelected||(O.propHooks.selected=O.extend(O.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),O.support.enctype||(O.propFix.enctype="encoding"),O.support.checkOn||O.each(["radio","checkbox"],function(){O.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),O.each(["radio","checkbox"],function(){O.valHooks[this]=O.extend(O.valHooks[this],{set:function(e,t){return O.isArray(t)?e.checked=O.inArray(O(e).val(),t)>=0:void 0}})});var J=/^(?:textarea|input|select)$/i,Z=/^([^\.]*)?(?:\.(.+))?$/,K=/(?:^|\s)hover(\.\S+)?\b/,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,it=/^(?:focusinfocus|focusoutblur)$/,nt=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,st=function(e){var t=nt.exec(e);
return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},rt=function(e,t){var i=e.attributes||{};return!(t[1]&&e.nodeName.toLowerCase()!==t[1]||t[2]&&(i.id||{}).value!==t[2]||t[3]&&!t[3].test((i["class"]||{}).value))},ot=function(e){return O.event.special.hover?e:e.replace(K,"mouseenter$1 mouseleave$1")};O.event={add:function(e,i,n,s,r){var o,a,h,l,u,c,d,p,f,g,m;if(3!==e.nodeType&&8!==e.nodeType&&i&&n&&(o=O._data(e))){for(n.handler&&(f=n,n=f.handler,r=f.selector),n.guid||(n.guid=O.guid++),h=o.events,h||(o.events=h={}),a=o.handle,a||(o.handle=a=function(e){return"undefined"==typeof O||e&&O.event.triggered===e.type?t:O.event.dispatch.apply(a.elem,arguments)},a.elem=e),i=O.trim(ot(i)).split(" "),l=0;l<i.length;l++)u=Z.exec(i[l])||[],c=u[1],d=(u[2]||"").split(".").sort(),m=O.event.special[c]||{},c=(r?m.delegateType:m.bindType)||c,m=O.event.special[c]||{},p=O.extend({type:c,origType:u[1],data:s,handler:n,guid:n.guid,selector:r,quick:r&&st(r),namespace:d.join(".")},f),g=h[c],g||(g=h[c]=[],g.delegateCount=0,m.setup&&m.setup.call(e,s,d,a)!==!1||(e.addEventListener?e.addEventListener(c,a,!1):e.attachEvent&&e.attachEvent("on"+c,a))),m.add&&(m.add.call(e,p),p.handler.guid||(p.handler.guid=n.guid)),r?g.splice(g.delegateCount++,0,p):g.push(p),O.event.global[c]=!0;e=null}},global:{},remove:function(e,t,i,n,s){var r,o,a,h,l,u,c,d,p,f,g,m,v=O.hasData(e)&&O._data(e);if(v&&(d=v.events)){for(t=O.trim(ot(t||"")).split(" "),r=0;r<t.length;r++)if(o=Z.exec(t[r])||[],a=h=o[1],l=o[2],a){for(p=O.event.special[a]||{},a=(n?p.delegateType:p.bindType)||a,g=d[a]||[],u=g.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,c=0;c<g.length;c++)m=g[c],!s&&h!==m.origType||i&&i.guid!==m.guid||l&&!l.test(m.namespace)||n&&n!==m.selector&&("**"!==n||!m.selector)||(g.splice(c--,1),m.selector&&g.delegateCount--,p.remove&&p.remove.call(e,m));0===g.length&&u!==g.length&&(p.teardown&&p.teardown.call(e,l)!==!1||O.removeEvent(e,a,v.handle),delete d[a])}else for(a in d)O.event.remove(e,a+t[r],i,n,!0);O.isEmptyObject(d)&&(f=v.handle,f&&(f.elem=null),O.removeData(e,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(i,n,s,r){if(!s||3!==s.nodeType&&8!==s.nodeType){var o,a,h,l,u,c,d,p,f,g,m=i.type||i,v=[];if(!it.test(m+O.event.triggered)&&(m.indexOf("!")>=0&&(m=m.slice(0,-1),a=!0),m.indexOf(".")>=0&&(v=m.split("."),m=v.shift(),v.sort()),s&&!O.event.customEvent[m]||O.event.global[m]))if(i="object"==typeof i?i[O.expando]?i:new O.Event(m,i):new O.Event(m),i.type=m,i.isTrigger=!0,i.exclusive=a,i.namespace=v.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,c=m.indexOf(":")<0?"on"+m:"",s){if(i.result=t,i.target||(i.target=s),n=null!=n?O.makeArray(n):[],n.unshift(i),d=O.event.special[m]||{},!d.trigger||d.trigger.apply(s,n)!==!1){if(f=[[s,d.bindType||m]],!r&&!d.noBubble&&!O.isWindow(s)){for(g=d.delegateType||m,l=it.test(g+m)?s:s.parentNode,u=null;l;l=l.parentNode)f.push([l,g]),u=l;u&&u===s.ownerDocument&&f.push([u.defaultView||u.parentWindow||e,g])}for(h=0;h<f.length&&!i.isPropagationStopped();h++)l=f[h][0],i.type=f[h][1],p=(O._data(l,"events")||{})[i.type]&&O._data(l,"handle"),p&&p.apply(l,n),p=c&&l[c],p&&O.acceptData(l)&&p.apply(l,n)===!1&&i.preventDefault();return i.type=m,r||i.isDefaultPrevented()||d._default&&d._default.apply(s.ownerDocument,n)!==!1||"click"===m&&O.nodeName(s,"a")||!O.acceptData(s)||c&&s[m]&&("focus"!==m&&"blur"!==m||0!==i.target.offsetWidth)&&!O.isWindow(s)&&(u=s[c],u&&(s[c]=null),O.event.triggered=m,s[m](),O.event.triggered=t,u&&(s[c]=u)),i.result}}else{o=O.cache;for(h in o)o[h].events&&o[h].events[m]&&O.event.trigger(i,n,o[h].handle.elem,!0)}}},dispatch:function(i){i=O.event.fix(i||e.event);var n,s,r,o,a,h,l,u,c,d,p=(O._data(this,"events")||{})[i.type]||[],f=p.delegateCount,g=[].slice.call(arguments,0),m=!i.exclusive&&!i.namespace,v=O.event.special[i.type]||{},y=[];if(g[0]=i,i.delegateTarget=this,!v.preDispatch||v.preDispatch.call(this,i)!==!1){if(f&&(!i.button||"click"!==i.type))for(o=O(this),o.context=this.ownerDocument||this,r=i.target;r!=this;r=r.parentNode||this)if(r.disabled!==!0){for(h={},u=[],o[0]=r,n=0;f>n;n++)c=p[n],d=c.selector,h[d]===t&&(h[d]=c.quick?rt(r,c.quick):o.is(d)),h[d]&&u.push(c);u.length&&y.push({elem:r,matches:u})}for(p.length>f&&y.push({elem:this,matches:p.slice(f)}),n=0;n<y.length&&!i.isPropagationStopped();n++)for(l=y[n],i.currentTarget=l.elem,s=0;s<l.matches.length&&!i.isImmediatePropagationStopped();s++)c=l.matches[s],(m||!i.namespace&&!c.namespace||i.namespace_re&&i.namespace_re.test(c.namespace))&&(i.data=c.data,i.handleObj=c,a=((O.event.special[c.origType]||{}).handle||c.handler).apply(l.elem,g),a!==t&&(i.result=a,a===!1&&(i.preventDefault(),i.stopPropagation())));return v.postDispatch&&v.postDispatch.call(this,i),i.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var n,s,r,o=i.button,a=i.fromElement;return null==e.pageX&&null!=i.clientX&&(n=e.target.ownerDocument||N,s=n.documentElement,r=n.body,e.pageX=i.clientX+(s&&s.scrollLeft||r&&r.scrollLeft||0)-(s&&s.clientLeft||r&&r.clientLeft||0),e.pageY=i.clientY+(s&&s.scrollTop||r&&r.scrollTop||0)-(s&&s.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?i.toElement:a),e.which||o===t||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[O.expando])return e;var i,n,s=e,r=O.event.fixHooks[e.type]||{},o=r.props?this.props.concat(r.props):this.props;for(e=O.Event(s),i=o.length;i;)n=o[--i],e[n]=s[n];return e.target||(e.target=s.srcElement||N),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),r.filter?r.filter(e,s):e},special:{ready:{setup:O.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,i){O.isWindow(this)&&(this.onbeforeunload=i)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,i,n){var s=O.extend(new O.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?O.event.trigger(s,null,t):O.event.dispatch.call(t,s),s.isDefaultPrevented()&&i.preventDefault()}},O.event.handle=O.event.dispatch,O.removeEvent=N.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){e.detachEvent&&e.detachEvent("on"+t,i)},O.Event=function(e,t){return this instanceof O.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?a:o):this.type=e,t&&O.extend(this,t),this.timeStamp=e&&e.timeStamp||O.now(),void(this[O.expando]=!0)):new O.Event(e,t)},O.Event.prototype={preventDefault:function(){this.isDefaultPrevented=a;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=a;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()},isDefaultPrevented:o,isPropagationStopped:o,isImmediatePropagationStopped:o},O.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){O.event.special[e]={delegateType:t,bindType:t,handle:function(e){{var i,n=this,s=e.relatedTarget,r=e.handleObj;r.selector}return(!s||s!==n&&!O.contains(n,s))&&(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}}),O.support.submitBubbles||(O.event.special.submit={setup:function(){return O.nodeName(this,"form")?!1:void O.event.add(this,"click._submit keypress._submit",function(e){var i=e.target,n=O.nodeName(i,"input")||O.nodeName(i,"button")?i.form:t;n&&!n._submit_attached&&(O.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),n._submit_attached=!0)})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&O.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return O.nodeName(this,"form")?!1:void O.event.remove(this,"._submit")}}),O.support.changeBubbles||(O.event.special.change={setup:function(){return J.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(O.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),O.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1,O.event.simulate("change",this,e,!0))})),!1):void O.event.add(this,"beforeactivate._change",function(e){var t=e.target;J.test(t.nodeName)&&!t._change_attached&&(O.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||O.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return O.event.remove(this,"._change"),J.test(this.nodeName)}}),O.support.focusinBubbles||O.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,n=function(e){O.event.simulate(t,e.target,O.event.fix(e),!0)};O.event.special[t]={setup:function(){0===i++&&N.addEventListener(e,n,!0)},teardown:function(){0===--i&&N.removeEventListener(e,n,!0)}}}),O.fn.extend({on:function(e,i,n,s,r){var a,h;if("object"==typeof e){"string"!=typeof i&&(n=n||i,i=t);for(h in e)this.on(h,i,n,e[h],r);return this}if(null==n&&null==s?(s=i,n=i=t):null==s&&("string"==typeof i?(s=n,n=t):(s=n,n=i,i=t)),s===!1)s=o;else if(!s)return this;return 1===r&&(a=s,s=function(e){return O().off(e),a.apply(this,arguments)},s.guid=a.guid||(a.guid=O.guid++)),this.each(function(){O.event.add(this,e,s,n,i)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,i,n){if(e&&e.preventDefault&&e.handleObj){var s=e.handleObj;return O(e.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this}if("object"==typeof e){for(var r in e)this.off(r,i,e[r]);return this}return(i===!1||"function"==typeof i)&&(n=i,i=t),n===!1&&(n=o),this.each(function(){O.event.remove(this,e,n,i)})},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,i){return O(this.context).on(e,this.selector,t,i),this},die:function(e,t){return O(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1==arguments.length?this.off(e,"**"):this.off(t,e,i)},trigger:function(e,t){return this.each(function(){O.event.trigger(e,t,this)})},triggerHandler:function(e,t){return this[0]?O.event.trigger(e,t,this[0],!0):void 0},toggle:function(e){var t=arguments,i=e.guid||O.guid++,n=0,s=function(i){var s=(O._data(this,"lastToggle"+e.guid)||0)%n;return O._data(this,"lastToggle"+e.guid,s+1),i.preventDefault(),t[s].apply(this,arguments)||!1};for(s.guid=i;n<t.length;)t[n++].guid=i;return this.click(s)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),O.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){O.fn[t]=function(e,i){return null==i&&(i=e,e=null),arguments.length>0?this.on(t,null,e,i):this.trigger(t)},O.attrFn&&(O.attrFn[t]=!0),et.test(t)&&(O.event.fixHooks[t]=O.event.keyHooks),tt.test(t)&&(O.event.fixHooks[t]=O.event.mouseHooks)}),function(){function e(e,t,i,n,r,o){for(var a=0,h=n.length;h>a;a++){var l=n[a];if(l){var u=!1;for(l=l[e];l;){if(l[s]===i){u=n[l.sizset];break}if(1!==l.nodeType||o||(l[s]=i,l.sizset=a),l.nodeName.toLowerCase()===t){u=l;break}l=l[e]}n[a]=u}}}function i(e,t,i,n,r,o){for(var a=0,h=n.length;h>a;a++){var l=n[a];if(l){var u=!1;for(l=l[e];l;){if(l[s]===i){u=n[l.sizset];break}if(1===l.nodeType)if(o||(l[s]=i,l.sizset=a),"string"!=typeof t){if(l===t){u=!0;break}}else if(d.filter(t,[l]).length>0){u=l;break}l=l[e]}n[a]=u}}}var n=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,s="sizcache"+(Math.random()+"").replace(".",""),r=0,o=Object.prototype.toString,a=!1,h=!0,l=/\\/g,u=/\r\n/g,c=/\W/;[0,0].sort(function(){return h=!1,0});var d=function(e,t,i,s){i=i||[],t=t||N;var r=t;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!e||"string"!=typeof e)return i;var a,h,l,u,c,p,m,v,w=!0,b=d.isXML(t),x=[],S=e;do if(n.exec(""),a=n.exec(S),a&&(S=a[3],x.push(a[1]),a[2])){u=a[3];break}while(a);if(x.length>1&&g.exec(e))if(2===x.length&&f.relative[x[0]])h=V(x[0]+x[1],t,s);else for(h=f.relative[x[0]]?[t]:d(x.shift(),t);x.length;)e=x.shift(),f.relative[e]&&(e+=x.shift()),h=V(e,h,s);else if(!s&&x.length>1&&9===t.nodeType&&!b&&f.match.ID.test(x[0])&&!f.match.ID.test(x[x.length-1])&&(c=d.find(x.shift(),t,b),t=c.expr?d.filter(c.expr,c.set)[0]:c.set[0]),t)for(c=s?{expr:x.pop(),set:y(s)}:d.find(x.pop(),1!==x.length||"~"!==x[0]&&"+"!==x[0]||!t.parentNode?t:t.parentNode,b),h=c.expr?d.filter(c.expr,c.set):c.set,x.length>0?l=y(h):w=!1;x.length;)p=x.pop(),m=p,f.relative[p]?m=x.pop():p="",null==m&&(m=t),f.relative[p](l,m,b);else l=x=[];if(l||(l=h),l||d.error(p||e),"[object Array]"===o.call(l))if(w)if(t&&1===t.nodeType)for(v=0;null!=l[v];v++)l[v]&&(l[v]===!0||1===l[v].nodeType&&d.contains(t,l[v]))&&i.push(h[v]);else for(v=0;null!=l[v];v++)l[v]&&1===l[v].nodeType&&i.push(h[v]);else i.push.apply(i,l);else y(l,i);return u&&(d(u,r,i,s),d.uniqueSort(i)),i};d.uniqueSort=function(e){if(b&&(a=h,e.sort(b),a))for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1);return e},d.matches=function(e,t){return d(e,null,null,t)},d.matchesSelector=function(e,t){return d(t,null,null,[e]).length>0},d.find=function(e,t,i){var n,s,r,o,a,h;if(!e)return[];for(s=0,r=f.order.length;r>s;s++)if(a=f.order[s],(o=f.leftMatch[a].exec(e))&&(h=o[1],o.splice(1,1),"\\"!==h.substr(h.length-1)&&(o[1]=(o[1]||"").replace(l,""),n=f.find[a](o,t,i),null!=n))){e=e.replace(f.match[a],"");break}return n||(n="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName("*"):[]),{set:n,expr:e}},d.filter=function(e,i,n,s){for(var r,o,a,h,l,u,c,p,g,m=e,v=[],y=i,w=i&&i[0]&&d.isXML(i[0]);e&&i.length;){for(a in f.filter)if(null!=(r=f.leftMatch[a].exec(e))&&r[2]){if(u=f.filter[a],c=r[1],o=!1,r.splice(1,1),"\\"===c.substr(c.length-1))continue;if(y===v&&(v=[]),f.preFilter[a])if(r=f.preFilter[a](r,y,n,v,s,w)){if(r===!0)continue}else o=h=!0;if(r)for(p=0;null!=(l=y[p]);p++)l&&(h=u(l,r,p,y),g=s^h,n&&null!=h?g?o=!0:y[p]=!1:g&&(v.push(l),o=!0));if(h!==t){if(n||(y=v),e=e.replace(f.match[a],""),!o)return[];break}}if(e===m){if(null!=o)break;d.error(e)}m=e}return y},d.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var p=d.getText=function(e){var t,i,n=e.nodeType,s="";if(n){if(1===n||9===n||11===n){if("string"==typeof e.textContent)return e.textContent;if("string"==typeof e.innerText)return e.innerText.replace(u,"");for(e=e.firstChild;e;e=e.nextSibling)s+=p(e)}else if(3===n||4===n)return e.nodeValue}else for(t=0;i=e[t];t++)8!==i.nodeType&&(s+=p(i));return s},f=d.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var i="string"==typeof t,n=i&&!c.test(t),s=i&&!n;n&&(t=t.toLowerCase());for(var r,o=0,a=e.length;a>o;o++)if(r=e[o]){for(;(r=r.previousSibling)&&1!==r.nodeType;);e[o]=s||r&&r.nodeName.toLowerCase()===t?r||!1:r===t}s&&d.filter(t,e,!0)},">":function(e,t){var i,n="string"==typeof t,s=0,r=e.length;if(n&&!c.test(t)){for(t=t.toLowerCase();r>s;s++)if(i=e[s]){var o=i.parentNode;e[s]=o.nodeName.toLowerCase()===t?o:!1}}else{for(;r>s;s++)i=e[s],i&&(e[s]=n?i.parentNode:i.parentNode===t);n&&d.filter(t,e,!0)}},"":function(t,n,s){var o,a=r++,h=i;"string"!=typeof n||c.test(n)||(n=n.toLowerCase(),o=n,h=e),h("parentNode",n,a,t,o,s)},"~":function(t,n,s){var o,a=r++,h=i;"string"!=typeof n||c.test(n)||(n=n.toLowerCase(),o=n,h=e),h("previousSibling",n,a,t,o,s)}},find:{ID:function(e,t,i){if("undefined"!=typeof t.getElementById&&!i){var n=t.getElementById(e[1]);return n&&n.parentNode?[n]:[]}},NAME:function(e,t){if("undefined"!=typeof t.getElementsByName){for(var i=[],n=t.getElementsByName(e[1]),s=0,r=n.length;r>s;s++)n[s].getAttribute("name")===e[1]&&i.push(n[s]);return 0===i.length?null:i}},TAG:function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e[1]):void 0}},preFilter:{CLASS:function(e,t,i,n,s,r){if(e=" "+e[1].replace(l,"")+" ",r)return e;for(var o,a=0;null!=(o=t[a]);a++)o&&(s^(o.className&&(" "+o.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?i||n.push(o):i&&(t[a]=!1));return!1},ID:function(e){return e[1].replace(l,"")},TAG:function(e){return e[1].replace(l,"").toLowerCase()},CHILD:function(e){if("nth"===e[1]){e[2]||d.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===e[2]&&"2n"||"odd"===e[2]&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&d.error(e[0]);return e[0]=r++,e},ATTR:function(e,t,i,n,s,r){var o=e[1]=e[1].replace(l,"");return!r&&f.attrMap[o]&&(e[1]=f.attrMap[o]),e[4]=(e[4]||e[5]||"").replace(l,""),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,i,s,r){if("not"===e[1]){if(!((n.exec(e[3])||"").length>1||/^\w/.test(e[3]))){var o=d.filter(e[3],t,i,!0^r);return i||s.push.apply(s,o),!1}e[3]=d(e[3],null,null,t)}else if(f.match.POS.test(e[0])||f.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&"hidden"!==e.type},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,i){return!!d(i[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),i=e.type;return"input"===e.nodeName.toLowerCase()&&"text"===i&&(t===i||null===t)},radio:function(e){return"input"===e.nodeName.toLowerCase()&&"radio"===e.type},checkbox:function(e){return"input"===e.nodeName.toLowerCase()&&"checkbox"===e.type},file:function(e){return"input"===e.nodeName.toLowerCase()&&"file"===e.type},password:function(e){return"input"===e.nodeName.toLowerCase()&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"submit"===e.type},image:function(e){return"input"===e.nodeName.toLowerCase()&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,i,n){return t===n.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,i){return t<i[3]-0},gt:function(e,t,i){return t>i[3]-0},nth:function(e,t,i){return i[3]-0===t},eq:function(e,t,i){return i[3]-0===t}},filter:{PSEUDO:function(e,t,i,n){var s=t[1],r=f.filters[s];if(r)return r(e,i,t,n);if("contains"===s)return(e.textContent||e.innerText||p([e])||"").indexOf(t[3])>=0;if("not"===s){for(var o=t[3],a=0,h=o.length;h>a;a++)if(o[a]===e)return!1;return!0}d.error(s)},CHILD:function(e,t){var i,n,r,o,a,h,l=t[1],u=e;switch(l){case"only":case"first":for(;u=u.previousSibling;)if(1===u.nodeType)return!1;if("first"===l)return!0;u=e;case"last":for(;u=u.nextSibling;)if(1===u.nodeType)return!1;return!0;case"nth":if(i=t[2],n=t[3],1===i&&0===n)return!0;if(r=t[0],o=e.parentNode,o&&(o[s]!==r||!e.nodeIndex)){for(a=0,u=o.firstChild;u;u=u.nextSibling)1===u.nodeType&&(u.nodeIndex=++a);o[s]=r}return h=e.nodeIndex-n,0===i?0===h:h%i===0&&h/i>=0}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var i=t[1],n=d.attr?d.attr(e,i):f.attrHandle[i]?f.attrHandle[i](e):null!=e[i]?e[i]:e.getAttribute(i),s=n+"",r=t[2],o=t[4];return null==n?"!="===r:!r&&d.attr?null!=n:"="===r?s===o:"*="===r?s.indexOf(o)>=0:"~="===r?(" "+s+" ").indexOf(o)>=0:o?"!="===r?s!==o:"^="===r?0===s.indexOf(o):"$="===r?s.substr(s.length-o.length)===o:"|="===r?s===o||s.substr(0,o.length+1)===o+"-":!1:s&&n!==!1},POS:function(e,t,i,n){var s=t[2],r=f.setFilters[s];return r?r(e,i,t,n):void 0}}},g=f.match.POS,m=function(e,t){return"\\"+(t-0+1)};for(var v in f.match)f.match[v]=new RegExp(f.match[v].source+/(?![^\[]*\])(?![^\(]*\))/.source),f.leftMatch[v]=new RegExp(/(^(?:.|\r|\n)*?)/.source+f.match[v].source.replace(/\\(\d+)/g,m));f.match.globalPOS=g;var y=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(N.documentElement.childNodes,0)[0].nodeType}catch(w){y=function(e,t){var i=0,n=t||[];if("[object Array]"===o.call(e))Array.prototype.push.apply(n,e);else if("number"==typeof e.length)for(var s=e.length;s>i;i++)n.push(e[i]);else for(;e[i];i++)n.push(e[i]);return n}}var b,x;N.documentElement.compareDocumentPosition?b=function(e,t){return e===t?(a=!0,0):e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t)?-1:1:e.compareDocumentPosition?-1:1}:(b=function(e,t){if(e===t)return a=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var i,n,s=[],r=[],o=e.parentNode,h=t.parentNode,l=o;if(o===h)return x(e,t);if(!o)return-1;if(!h)return 1;for(;l;)s.unshift(l),l=l.parentNode;for(l=h;l;)r.unshift(l),l=l.parentNode;i=s.length,n=r.length;for(var u=0;i>u&&n>u;u++)if(s[u]!==r[u])return x(s[u],r[u]);return u===i?x(e,r[u],-1):x(s[u],t,1)},x=function(e,t,i){if(e===t)return i;for(var n=e.nextSibling;n;){if(n===t)return-1;n=n.nextSibling}return 1}),function(){var e=N.createElement("div"),i="script"+(new Date).getTime(),n=N.documentElement;e.innerHTML="<a name='"+i+"'/>",n.insertBefore(e,n.firstChild),N.getElementById(i)&&(f.find.ID=function(e,i,n){if("undefined"!=typeof i.getElementById&&!n){var s=i.getElementById(e[1]);return s?s.id===e[1]||"undefined"!=typeof s.getAttributeNode&&s.getAttributeNode("id").nodeValue===e[1]?[s]:t:[]}},f.filter.ID=function(e,t){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&i&&i.nodeValue===t}),n.removeChild(e),n=e=null}(),function(){var e=N.createElement("div");e.appendChild(N.createComment("")),e.getElementsByTagName("*").length>0&&(f.find.TAG=function(e,t){var i=t.getElementsByTagName(e[1]);if("*"===e[1]){for(var n=[],s=0;i[s];s++)1===i[s].nodeType&&n.push(i[s]);i=n}return i}),e.innerHTML="<a href='#'></a>",e.firstChild&&"undefined"!=typeof e.firstChild.getAttribute&&"#"!==e.firstChild.getAttribute("href")&&(f.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),N.querySelectorAll&&!function(){var e=d,t=N.createElement("div"),i="__sizzle__";if(t.innerHTML="<p class='TEST'></p>",!t.querySelectorAll||0!==t.querySelectorAll(".TEST").length){d=function(t,n,s,r){if(n=n||N,!r&&!d.isXML(n)){var o=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(o&&(1===n.nodeType||9===n.nodeType)){if(o[1])return y(n.getElementsByTagName(t),s);if(o[2]&&f.find.CLASS&&n.getElementsByClassName)return y(n.getElementsByClassName(o[2]),s)}if(9===n.nodeType){if("body"===t&&n.body)return y([n.body],s);if(o&&o[3]){var a=n.getElementById(o[3]);if(!a||!a.parentNode)return y([],s);if(a.id===o[3])return y([a],s)}try{return y(n.querySelectorAll(t),s)}catch(h){}}else if(1===n.nodeType&&"object"!==n.nodeName.toLowerCase()){var l=n,u=n.getAttribute("id"),c=u||i,p=n.parentNode,g=/^\s*[+~]/.test(t);u?c=c.replace(/'/g,"\\$&"):n.setAttribute("id",c),g&&p&&(n=n.parentNode);try{if(!g||p)return y(n.querySelectorAll("[id='"+c+"'] "+t),s)}catch(m){}finally{u||l.removeAttribute("id")}}}return e(t,n,s,r)};for(var n in e)d[n]=e[n];t=null}}(),function(){var e=N.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var i=!t.call(N.createElement("div"),"div"),n=!1;try{t.call(N.documentElement,"[test!='']:sizzle")}catch(s){n=!0}d.matchesSelector=function(e,s){if(s=s.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!d.isXML(e))try{if(n||!f.match.PSEUDO.test(s)&&!/!=/.test(s)){var r=t.call(e,s);if(r||!i||e.document&&11!==e.document.nodeType)return r}}catch(o){}return d(s,null,null,[e]).length>0}}}(),function(){var e=N.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>",e.getElementsByClassName&&0!==e.getElementsByClassName("e").length&&(e.lastChild.className="e",1!==e.getElementsByClassName("e").length&&(f.order.splice(1,0,"CLASS"),f.find.CLASS=function(e,t,i){return"undefined"==typeof t.getElementsByClassName||i?void 0:t.getElementsByClassName(e[1])},e=null))}(),d.contains=N.documentElement.contains?function(e,t){return e!==t&&(e.contains?e.contains(t):!0)}:N.documentElement.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:function(){return!1},d.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?"HTML"!==t.nodeName:!1};var V=function(e,t,i){for(var n,s=[],r="",o=t.nodeType?[t]:t;n=f.match.PSEUDO.exec(e);)r+=n[0],e=e.replace(f.match.PSEUDO,"");e=f.relative[e]?e+"*":e;for(var a=0,h=o.length;h>a;a++)d(e,o[a],s,i);return d.filter(r,s)};d.attr=O.attr,d.selectors.attrMap={},O.find=d,O.expr=d.selectors,O.expr[":"]=O.expr.filters,O.unique=d.uniqueSort,O.text=d.getText,O.isXMLDoc=d.isXML,O.contains=d.contains}();var at=/Until$/,ht=/^(?:parents|prevUntil|prevAll)/,lt=/,/,ut=/^.[^:#\[\.,]*$/,ct=Array.prototype.slice,dt=O.expr.match.globalPOS,pt={children:!0,contents:!0,next:!0,prev:!0};O.fn.extend({find:function(e){var t,i,n=this;if("string"!=typeof e)return O(e).filter(function(){for(t=0,i=n.length;i>t;t++)if(O.contains(n[t],this))return!0});var s,r,o,a=this.pushStack("","find",e);for(t=0,i=this.length;i>t;t++)if(s=a.length,O.find(e,this[t],a),t>0)for(r=s;r<a.length;r++)for(o=0;s>o;o++)if(a[o]===a[r]){a.splice(r--,1);break}return a},has:function(e){var t=O(e);return this.filter(function(){for(var e=0,i=t.length;i>e;e++)if(O.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(l(this,e,!1),"not",e)},filter:function(e){return this.pushStack(l(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?dt.test(e)?O(e,this.context).index(this[0])>=0:O.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var i,n,s=[],r=this[0];if(O.isArray(e)){for(var o=1;r&&r.ownerDocument&&r!==t;){for(i=0;i<e.length;i++)O(r).is(e[i])&&s.push({selector:e[i],elem:r,level:o});r=r.parentNode,o++}return s}var a=dt.test(e)||"string"!=typeof e?O(e,t||this.context):0;for(i=0,n=this.length;n>i;i++)for(r=this[i];r;){if(a?a.index(r)>-1:O.find.matchesSelector(r,e)){s.push(r);break}if(r=r.parentNode,!r||!r.ownerDocument||r===t||11===r.nodeType)break}return s=s.length>1?O.unique(s):s,this.pushStack(s,"closest",e)},index:function(e){return e?"string"==typeof e?O.inArray(this[0],O(e)):O.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var i="string"==typeof e?O(e,t):O.makeArray(e&&e.nodeType?[e]:e),n=O.merge(this.get(),i);return this.pushStack(h(i[0])||h(n[0])?n:O.unique(n))},andSelf:function(){return this.add(this.prevObject)}}),O.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return O.dir(e,"parentNode")},parentsUntil:function(e,t,i){return O.dir(e,"parentNode",i)},next:function(e){return O.nth(e,2,"nextSibling")},prev:function(e){return O.nth(e,2,"previousSibling")},nextAll:function(e){return O.dir(e,"nextSibling")},prevAll:function(e){return O.dir(e,"previousSibling")},nextUntil:function(e,t,i){return O.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return O.dir(e,"previousSibling",i)},siblings:function(e){return O.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return O.sibling(e.firstChild)},contents:function(e){return O.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:O.makeArray(e.childNodes)}},function(e,t){O.fn[e]=function(i,n){var s=O.map(this,t,i);return at.test(e)||(n=i),n&&"string"==typeof n&&(s=O.filter(n,s)),s=this.length>1&&!pt[e]?O.unique(s):s,(this.length>1||lt.test(n))&&ht.test(e)&&(s=s.reverse()),this.pushStack(s,e,ct.call(arguments).join(","))}}),O.extend({filter:function(e,t,i){return i&&(e=":not("+e+")"),1===t.length?O.find.matchesSelector(t[0],e)?[t[0]]:[]:O.find.matches(e,t)},dir:function(e,i,n){for(var s=[],r=e[i];r&&9!==r.nodeType&&(n===t||1!==r.nodeType||!O(r).is(n));)1===r.nodeType&&s.push(r),r=r[i];return s},nth:function(e,t,i){t=t||1;for(var n=0;e&&(1!==e.nodeType||++n!==t);e=e[i]);return e},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var ft="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gt=/ jQuery\d+="(?:\d+|null)"/g,mt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,yt=/<([\w:]+)/,wt=/<tbody/i,bt=/<|&#?\w+;/,xt=/<(?:script|style)/i,Vt=/<(?:script|object|embed|option|style)/i,St=new RegExp("<(?:"+ft+")[\\s/>]","i"),Dt=/checked\s*(?:[^=]|=\s*.checked.)/i,_t=/\/(java|ecma)script/i,Ct=/^\s*<!(?:\[CDATA\[|\-\-)/,At={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Tt=u(N);At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,O.support.htmlSerialize||(At._default=[1,"div<div>","</div>"]),O.fn.extend({text:function(e){return O.access(this,function(e){return e===t?O.text(this):this.empty().append((this[0]&&this[0].ownerDocument||N).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(O.isFunction(e))return this.each(function(t){O(this).wrapAll(e.call(this,t))});if(this[0]){var t=O(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(O.isFunction(e)?function(t){O(this).wrapInner(e.call(this,t))}:function(){var t=O(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=O.isFunction(e);return this.each(function(i){O(this).wrapAll(t?e.call(this,i):e)
})},unwrap:function(){return this.parent().each(function(){O.nodeName(this,"body")||O(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=O.clean(arguments);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,O.clean(arguments)),e}},remove:function(e,t){for(var i,n=0;null!=(i=this[n]);n++)(!e||O.filter(e,[i]).length)&&(t||1!==i.nodeType||(O.cleanData(i.getElementsByTagName("*")),O.cleanData([i])),i.parentNode&&i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&O.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return O.clone(this,e,t)})},html:function(e){return O.access(this,function(e){var i=this[0]||{},n=0,s=this.length;if(e===t)return 1===i.nodeType?i.innerHTML.replace(gt,""):null;if(!("string"!=typeof e||xt.test(e)||!O.support.leadingWhitespace&&mt.test(e)||At[(yt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;s>n;n++)i=this[n]||{},1===i.nodeType&&(O.cleanData(i.getElementsByTagName("*")),i.innerHTML=e);i=0}catch(r){}}i&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return this[0]&&this[0].parentNode?O.isFunction(e)?this.each(function(t){var i=O(this),n=i.html();i.replaceWith(e.call(this,t,n))}):("string"!=typeof e&&(e=O(e).detach()),this.each(function(){var t=this.nextSibling,i=this.parentNode;O(this).remove(),t?O(t).before(e):O(i).append(e)})):this.length?this.pushStack(O(O.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,i,n){var s,r,o,a,h=e[0],l=[];if(!O.support.checkClone&&3===arguments.length&&"string"==typeof h&&Dt.test(h))return this.each(function(){O(this).domManip(e,i,n,!0)});if(O.isFunction(h))return this.each(function(s){var r=O(this);e[0]=h.call(this,s,i?r.html():t),r.domManip(e,i,n)});if(this[0]){if(a=h&&h.parentNode,s=O.support.parentNode&&a&&11===a.nodeType&&a.childNodes.length===this.length?{fragment:a}:O.buildFragment(e,this,l),o=s.fragment,r=1===o.childNodes.length?o=o.firstChild:o.firstChild){i=i&&O.nodeName(r,"tr");for(var u=0,d=this.length,p=d-1;d>u;u++)n.call(i?c(this[u],r):this[u],s.cacheable||d>1&&p>u?O.clone(o,!0,!0):o)}l.length&&O.each(l,function(e,t){t.src?O.ajax({type:"GET",global:!1,url:t.src,async:!1,dataType:"script"}):O.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Ct,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),O.buildFragment=function(e,t,i){var n,s,r,o,a=e[0];return t&&t[0]&&(o=t[0].ownerDocument||t[0]),o.createDocumentFragment||(o=N),!(1===e.length&&"string"==typeof a&&a.length<512&&o===N&&"<"===a.charAt(0))||Vt.test(a)||!O.support.checkClone&&Dt.test(a)||!O.support.html5Clone&&St.test(a)||(s=!0,r=O.fragments[a],r&&1!==r&&(n=r)),n||(n=o.createDocumentFragment(),O.clean(e,o,n,i)),s&&(O.fragments[a]=r?n:1),{fragment:n,cacheable:s}},O.fragments={},O.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){O.fn[e]=function(i){var n=[],s=O(i),r=1===this.length&&this[0].parentNode;if(r&&11===r.nodeType&&1===r.childNodes.length&&1===s.length)return s[t](this[0]),this;for(var o=0,a=s.length;a>o;o++){var h=(o>0?this.clone(!0):this).get();O(s[o])[t](h),n=n.concat(h)}return this.pushStack(n,e,s.selector)}}),O.extend({clone:function(e,t,i){var n,s,r,o=O.support.html5Clone||O.isXMLDoc(e)||!St.test("<"+e.nodeName+">")?e.cloneNode(!0):v(e);if(!(O.support.noCloneEvent&&O.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||O.isXMLDoc(e)))for(p(e,o),n=f(e),s=f(o),r=0;n[r];++r)s[r]&&p(n[r],s[r]);if(t&&(d(e,o),i))for(n=f(e),s=f(o),r=0;n[r];++r)d(n[r],s[r]);return n=s=null,o},clean:function(e,t,i,n){var s,r,o,a=[];t=t||N,"undefined"==typeof t.createElement&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||N);for(var h,l=0;null!=(h=e[l]);l++)if("number"==typeof h&&(h+=""),h){if("string"==typeof h)if(bt.test(h)){h=h.replace(vt,"<$1></$2>");var c,d=(yt.exec(h)||["",""])[1].toLowerCase(),p=At[d]||At._default,f=p[0],g=t.createElement("div"),v=Tt.childNodes;for(t===N?Tt.appendChild(g):u(t).appendChild(g),g.innerHTML=p[1]+h+p[2];f--;)g=g.lastChild;if(!O.support.tbody){var y=wt.test(h),w="table"!==d||y?"<table>"!==p[1]||y?[]:g.childNodes:g.firstChild&&g.firstChild.childNodes;for(o=w.length-1;o>=0;--o)O.nodeName(w[o],"tbody")&&!w[o].childNodes.length&&w[o].parentNode.removeChild(w[o])}!O.support.leadingWhitespace&&mt.test(h)&&g.insertBefore(t.createTextNode(mt.exec(h)[0]),g.firstChild),h=g.childNodes,g&&(g.parentNode.removeChild(g),v.length>0&&(c=v[v.length-1],c&&c.parentNode&&c.parentNode.removeChild(c)))}else h=t.createTextNode(h);var b;if(!O.support.appendChecked)if(h[0]&&"number"==typeof(b=h.length))for(o=0;b>o;o++)m(h[o]);else m(h);h.nodeType?a.push(h):a=O.merge(a,h)}if(i)for(s=function(e){return!e.type||_t.test(e.type)},l=0;a[l];l++)if(r=a[l],n&&O.nodeName(r,"script")&&(!r.type||_t.test(r.type)))n.push(r.parentNode?r.parentNode.removeChild(r):r);else{if(1===r.nodeType){var x=O.grep(r.getElementsByTagName("script"),s);a.splice.apply(a,[l+1,0].concat(x))}i.appendChild(r)}return a},cleanData:function(e){for(var t,i,n,s=O.cache,r=O.event.special,o=O.support.deleteExpando,a=0;null!=(n=e[a]);a++)if((!n.nodeName||!O.noData[n.nodeName.toLowerCase()])&&(i=n[O.expando])){if(t=s[i],t&&t.events){for(var h in t.events)r[h]?O.event.remove(n,h):O.removeEvent(n,h,t.handle);t.handle&&(t.handle.elem=null)}o?delete n[O.expando]:n.removeAttribute&&n.removeAttribute(O.expando),delete s[i]}}});var Pt,Et,kt,Nt=/alpha\([^)]*\)/i,Gt=/opacity=([^)]*)/,It=/([A-Z]|^ms)/g,Ot=/^[\-+]?(?:\d*\.)?\d+$/i,Mt=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,jt=/^([\-+])=([\-+.\de]+)/,Lt=/^margin/,Ht={position:"absolute",visibility:"hidden",display:"block"},Rt=["Top","Right","Bottom","Left"];O.fn.css=function(e,i){return O.access(this,function(e,i,n){return n!==t?O.style(e,i,n):O.css(e,i)},e,i,arguments.length>1)},O.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Pt(e,"opacity");return""===i?"1":i}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":O.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,n,s){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a=O.camelCase(i),h=e.style,l=O.cssHooks[a];if(i=O.cssProps[a]||a,n===t)return l&&"get"in l&&(r=l.get(e,!1,s))!==t?r:h[i];if(o=typeof n,"string"===o&&(r=jt.exec(n))&&(n=+(r[1]+1)*+r[2]+parseFloat(O.css(e,i)),o="number"),!(null==n||"number"===o&&isNaN(n)||("number"!==o||O.cssNumber[a]||(n+="px"),l&&"set"in l&&(n=l.set(e,n))===t)))try{h[i]=n}catch(u){}}},css:function(e,i,n){var s,r;return i=O.camelCase(i),r=O.cssHooks[i],i=O.cssProps[i]||i,"cssFloat"===i&&(i="float"),r&&"get"in r&&(s=r.get(e,!0,n))!==t?s:Pt?Pt(e,i):void 0},swap:function(e,t,i){var n,s,r={};for(s in t)r[s]=e.style[s],e.style[s]=t[s];n=i.call(e);for(s in t)e.style[s]=r[s];return n}}),O.curCSS=O.css,N.defaultView&&N.defaultView.getComputedStyle&&(Et=function(e,t){var i,n,s,r,o=e.style;return t=t.replace(It,"-$1").toLowerCase(),(n=e.ownerDocument.defaultView)&&(s=n.getComputedStyle(e,null))&&(i=s.getPropertyValue(t),""!==i||O.contains(e.ownerDocument.documentElement,e)||(i=O.style(e,t))),!O.support.pixelMargin&&s&&Lt.test(t)&&Mt.test(i)&&(r=o.width,o.width=i,i=s.width,o.width=r),i}),N.documentElement.currentStyle&&(kt=function(e,t){var i,n,s,r=e.currentStyle&&e.currentStyle[t],o=e.style;return null==r&&o&&(s=o[t])&&(r=s),Mt.test(r)&&(i=o.left,n=e.runtimeStyle&&e.runtimeStyle.left,n&&(e.runtimeStyle.left=e.currentStyle.left),o.left="fontSize"===t?"1em":r,r=o.pixelLeft+"px",o.left=i,n&&(e.runtimeStyle.left=n)),""===r?"auto":r}),Pt=Et||kt,O.each(["height","width"],function(e,t){O.cssHooks[t]={get:function(e,i,n){return i?0!==e.offsetWidth?y(e,t,n):O.swap(e,Ht,function(){return y(e,t,n)}):void 0},set:function(e,t){return Ot.test(t)?t+"px":t}}}),O.support.opacity||(O.cssHooks.opacity={get:function(e,t){return Gt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,s=O.isNumeric(t)?"alpha(opacity="+100*t+")":"",r=n&&n.filter||i.filter||"";i.zoom=1,t>=1&&""===O.trim(r.replace(Nt,""))&&(i.removeAttribute("filter"),n&&!n.filter)||(i.filter=Nt.test(r)?r.replace(Nt,s):r+" "+s)}}),O(function(){O.support.reliableMarginRight||(O.cssHooks.marginRight={get:function(e,t){return O.swap(e,{display:"inline-block"},function(){return t?Pt(e,"margin-right"):e.style.marginRight})}})}),O.expr&&O.expr.filters&&(O.expr.filters.hidden=function(e){var t=e.offsetWidth,i=e.offsetHeight;return 0===t&&0===i||!O.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||O.css(e,"display"))},O.expr.filters.visible=function(e){return!O.expr.filters.hidden(e)}),O.each({margin:"",padding:"",border:"Width"},function(e,t){O.cssHooks[e+t]={expand:function(i){var n,s="string"==typeof i?i.split(" "):[i],r={};for(n=0;4>n;n++)r[e+Rt[n]+t]=s[n]||s[n-2]||s[0];return r}}});var $t,Ft,zt=/%20/g,Bt=/\[\]$/,Wt=/\r?\n/g,qt=/#.*$/,Ut=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Qt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Xt=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Yt=/^(?:GET|HEAD)$/,Jt=/^\/\//,Zt=/\?/,Kt=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,ei=/^(?:select|textarea)/i,ti=/\s+/,ii=/([?&])_=[^&]*/,ni=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,si=O.fn.load,ri={},oi={},ai=["*/"]+["*"];try{$t=I.href}catch(hi){$t=N.createElement("a"),$t.href="",$t=$t.href}Ft=ni.exec($t.toLowerCase())||[],O.fn.extend({load:function(e,i,n){if("string"!=typeof e&&si)return si.apply(this,arguments);if(!this.length)return this;var s=e.indexOf(" ");if(s>=0){var r=e.slice(s,e.length);e=e.slice(0,s)}var o="GET";i&&(O.isFunction(i)?(n=i,i=t):"object"==typeof i&&(i=O.param(i,O.ajaxSettings.traditional),o="POST"));var a=this;return O.ajax({url:e,type:o,dataType:"html",data:i,complete:function(e,t,i){i=e.responseText,e.isResolved()&&(e.done(function(e){i=e}),a.html(r?O("<div>").append(i.replace(Kt,"")).find(r):i)),n&&a.each(n,[i,t,e])}}),this},serialize:function(){return O.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?O.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ei.test(this.nodeName)||Qt.test(this.type))}).map(function(e,t){var i=O(this).val();return null==i?null:O.isArray(i)?O.map(i,function(e){return{name:t.name,value:e.replace(Wt,"\r\n")}}):{name:t.name,value:i.replace(Wt,"\r\n")}}).get()}}),O.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){O.fn[t]=function(e){return this.on(t,e)}}),O.each(["get","post"],function(e,i){O[i]=function(e,n,s,r){return O.isFunction(n)&&(r=r||s,s=n,n=t),O.ajax({type:i,url:e,data:n,success:s,dataType:r})}}),O.extend({getScript:function(e,i){return O.get(e,t,i,"script")},getJSON:function(e,t,i){return O.get(e,t,i,"json")},ajaxSetup:function(e,t){return t?x(e,O.ajaxSettings):(t=e,e=O.ajaxSettings),x(e,t),e},ajaxSettings:{url:$t,isLocal:Xt.test(Ft[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":ai},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":O.parseJSON,"text xml":O.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:w(ri),ajaxTransport:w(oi),ajax:function(e,i){function n(e,i,n,o){if(2!==x){x=2,h&&clearTimeout(h),a=t,r=o||"",V.readyState=e>0?4:0;var l,c,y,w,b,_=i,C=n?S(d,V,n):t;if(e>=200&&300>e||304===e)if(d.ifModified&&((w=V.getResponseHeader("Last-Modified"))&&(O.lastModified[s]=w),(b=V.getResponseHeader("Etag"))&&(O.etag[s]=b)),304===e)_="notmodified",l=!0;else try{c=D(d,C),_="success",l=!0}catch(A){_="parsererror",y=A}else y=_,(!_||e)&&(_="error",0>e&&(e=0));V.status=e,V.statusText=""+(i||_),l?g.resolveWith(p,[c,_,V]):g.rejectWith(p,[V,_,y]),V.statusCode(v),v=t,u&&f.trigger("ajax"+(l?"Success":"Error"),[V,d,l?c:y]),m.fireWith(p,[V,_]),u&&(f.trigger("ajaxComplete",[V,d]),--O.active||O.event.trigger("ajaxStop"))}}"object"==typeof e&&(i=e,e=t),i=i||{};var s,r,o,a,h,l,u,c,d=O.ajaxSetup({},i),p=d.context||d,f=p!==d&&(p.nodeType||p instanceof O)?O(p):O.event,g=O.Deferred(),m=O.Callbacks("once memory"),v=d.statusCode||{},y={},w={},x=0,V={readyState:0,setRequestHeader:function(e,t){if(!x){var i=e.toLowerCase();e=w[i]=w[i]||e,y[e]=t}return this},getAllResponseHeaders:function(){return 2===x?r:null},getResponseHeader:function(e){var i;if(2===x){if(!o)for(o={};i=Ut.exec(r);)o[i[1].toLowerCase()]=i[2];i=o[e.toLowerCase()]}return i===t?null:i},overrideMimeType:function(e){return x||(d.mimeType=e),this},abort:function(e){return e=e||"abort",a&&a.abort(e),n(0,e),this}};if(g.promise(V),V.success=V.done,V.error=V.fail,V.complete=m.add,V.statusCode=function(e){if(e){var t;if(2>x)for(t in e)v[t]=[v[t],e[t]];else t=e[V.status],V.then(t,t)}return this},d.url=((e||d.url)+"").replace(qt,"").replace(Jt,Ft[1]+"//"),d.dataTypes=O.trim(d.dataType||"*").toLowerCase().split(ti),null==d.crossDomain&&(l=ni.exec(d.url.toLowerCase()),d.crossDomain=!(!l||l[1]==Ft[1]&&l[2]==Ft[2]&&(l[3]||("http:"===l[1]?80:443))==(Ft[3]||("http:"===Ft[1]?80:443)))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=O.param(d.data,d.traditional)),b(ri,d,i,V),2===x)return!1;if(u=d.global,d.type=d.type.toUpperCase(),d.hasContent=!Yt.test(d.type),u&&0===O.active++&&O.event.trigger("ajaxStart"),!d.hasContent&&(d.data&&(d.url+=(Zt.test(d.url)?"&":"?")+d.data,delete d.data),s=d.url,d.cache===!1)){var _=O.now(),C=d.url.replace(ii,"$1_="+_);d.url=C+(C===d.url?(Zt.test(d.url)?"&":"?")+"_="+_:"")}(d.data&&d.hasContent&&d.contentType!==!1||i.contentType)&&V.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(s=s||d.url,O.lastModified[s]&&V.setRequestHeader("If-Modified-Since",O.lastModified[s]),O.etag[s]&&V.setRequestHeader("If-None-Match",O.etag[s])),V.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+ai+"; q=0.01":""):d.accepts["*"]);for(c in d.headers)V.setRequestHeader(c,d.headers[c]);if(d.beforeSend&&(d.beforeSend.call(p,V,d)===!1||2===x))return V.abort(),!1;for(c in{success:1,error:1,complete:1})V[c](d[c]);if(a=b(oi,d,i,V)){V.readyState=1,u&&f.trigger("ajaxSend",[V,d]),d.async&&d.timeout>0&&(h=setTimeout(function(){V.abort("timeout")},d.timeout));try{x=1,a.send(y,n)}catch(A){if(!(2>x))throw A;n(-1,A)}}else n(-1,"No Transport");return V},param:function(e,i){var n=[],s=function(e,t){t=O.isFunction(t)?t():t,n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=O.ajaxSettings.traditional),O.isArray(e)||e.jquery&&!O.isPlainObject(e))O.each(e,function(){s(this.name,this.value)});else for(var r in e)V(r,e[r],i,s);return n.join("&").replace(zt,"+")}}),O.extend({active:0,lastModified:{},etag:{}});var li=O.now(),ui=/(\=)\?(&|$)|\?\?/i;O.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return O.expando+"_"+li++}}),O.ajaxPrefilter("json jsonp",function(t,i,n){var s="string"==typeof t.data&&/^application\/x\-www\-form\-urlencoded/.test(t.contentType);if("jsonp"===t.dataTypes[0]||t.jsonp!==!1&&(ui.test(t.url)||s&&ui.test(t.data))){var r,o=t.jsonpCallback=O.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a=e[o],h=t.url,l=t.data,u="$1"+o+"$2";return t.jsonp!==!1&&(h=h.replace(ui,u),t.url===h&&(s&&(l=l.replace(ui,u)),t.data===l&&(h+=(/\?/.test(h)?"&":"?")+t.jsonp+"="+o))),t.url=h,t.data=l,e[o]=function(e){r=[e]},n.always(function(){e[o]=a,r&&O.isFunction(a)&&e[o](r[0])}),t.converters["script json"]=function(){return r||O.error(o+" was not called"),r[0]},t.dataTypes[0]="json","script"}}),O.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return O.globalEval(e),e}}}),O.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),O.ajaxTransport("script",function(e){if(e.crossDomain){var i,n=N.head||N.getElementsByTagName("head")[0]||N.documentElement;return{send:function(s,r){i=N.createElement("script"),i.async="async",e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,s){(s||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,n&&i.parentNode&&n.removeChild(i),i=t,s||r(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(0,1)}}}});var ci,di=e.ActiveXObject?function(){for(var e in ci)ci[e](0,1)}:!1,pi=0;O.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&_()||C()}:_,function(e){O.extend(O.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(O.ajaxSettings.xhr()),O.support.ajax&&O.ajaxTransport(function(i){if(!i.crossDomain||O.support.cors){var n;return{send:function(s,r){var o,a,h=i.xhr();if(i.username?h.open(i.type,i.url,i.async,i.username,i.password):h.open(i.type,i.url,i.async),i.xhrFields)for(a in i.xhrFields)h[a]=i.xhrFields[a];i.mimeType&&h.overrideMimeType&&h.overrideMimeType(i.mimeType),i.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");try{for(a in s)h.setRequestHeader(a,s[a])}catch(l){}h.send(i.hasContent&&i.data||null),n=function(e,s){var a,l,u,c,d;try{if(n&&(s||4===h.readyState))if(n=t,o&&(h.onreadystatechange=O.noop,di&&delete ci[o]),s)4!==h.readyState&&h.abort();else{a=h.status,u=h.getAllResponseHeaders(),c={},d=h.responseXML,d&&d.documentElement&&(c.xml=d);try{c.text=h.responseText}catch(e){}try{l=h.statusText}catch(p){l=""}a||!i.isLocal||i.crossDomain?1223===a&&(a=204):a=c.text?200:404}}catch(f){s||r(-1,f)}c&&r(a,l,c,u)},i.async&&4!==h.readyState?(o=++pi,di&&(ci||(ci={},O(e).unload(di)),ci[o]=n),h.onreadystatechange=n):n()},abort:function(){n&&n(0,1)}}}});var fi,gi,mi,vi,yi={},wi=/^(?:toggle|show|hide)$/,bi=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,xi=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];O.fn.extend({show:function(e,t,i){var n,s;if(e||0===e)return this.animate(P("show",3),e,t,i);for(var r=0,o=this.length;o>r;r++)n=this[r],n.style&&(s=n.style.display,O._data(n,"olddisplay")||"none"!==s||(s=n.style.display=""),(""===s&&"none"===O.css(n,"display")||!O.contains(n.ownerDocument.documentElement,n))&&O._data(n,"olddisplay",E(n.nodeName)));for(r=0;o>r;r++)n=this[r],n.style&&(s=n.style.display,(""===s||"none"===s)&&(n.style.display=O._data(n,"olddisplay")||""));return this},hide:function(e,t,i){if(e||0===e)return this.animate(P("hide",3),e,t,i);for(var n,s,r=0,o=this.length;o>r;r++)n=this[r],n.style&&(s=O.css(n,"display"),"none"===s||O._data(n,"olddisplay")||O._data(n,"olddisplay",s));for(r=0;o>r;r++)this[r].style&&(this[r].style.display="none");return this},_toggle:O.fn.toggle,toggle:function(e,t,i){var n="boolean"==typeof e;return O.isFunction(e)&&O.isFunction(t)?this._toggle.apply(this,arguments):null==e||n?this.each(function(){var t=n?e:O(this).is(":hidden");O(this)[t?"show":"hide"]()}):this.animate(P("toggle",3),e,t,i),this},fadeTo:function(e,t,i,n){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){function s(){r.queue===!1&&O._mark(this);var t,i,n,s,o,a,h,l,u,c,d,p=O.extend({},r),f=1===this.nodeType,g=f&&O(this).is(":hidden");p.animatedProperties={};for(n in e)if(t=O.camelCase(n),n!==t&&(e[t]=e[n],delete e[n]),(o=O.cssHooks[t])&&"expand"in o){a=o.expand(e[t]),delete e[t];for(n in a)n in e||(e[n]=a[n])}for(t in e){if(i=e[t],O.isArray(i)?(p.animatedProperties[t]=i[1],i=e[t]=i[0]):p.animatedProperties[t]=p.specialEasing&&p.specialEasing[t]||p.easing||"swing","hide"===i&&g||"show"===i&&!g)return p.complete.call(this);!f||"height"!==t&&"width"!==t||(p.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===O.css(this,"display")&&"none"===O.css(this,"float")&&(O.support.inlineBlockNeedsLayout&&"inline"!==E(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=p.overflow&&(this.style.overflow="hidden");for(n in e)s=new O.fx(this,p,n),i=e[n],wi.test(i)?(d=O._data(this,"toggle"+n)||("toggle"===i?g?"show":"hide":0),d?(O._data(this,"toggle"+n,"show"===d?"hide":"show"),s[d]()):s[i]()):(h=bi.exec(i),l=s.cur(),h?(u=parseFloat(h[2]),c=h[3]||(O.cssNumber[n]?"":"px"),"px"!==c&&(O.style(this,n,(u||1)+c),l=(u||1)/s.cur()*l,O.style(this,n,l+c)),h[1]&&(u=("-="===h[1]?-1:1)*u+l),s.custom(l,u,c)):s.custom(l,i,""));return!0}var r=O.speed(t,i,n);return O.isEmptyObject(e)?this.each(r.complete,[!1]):(e=O.extend({},e),r.queue===!1?this.each(s):this.queue(r.queue,s))},stop:function(e,i,n){return"string"!=typeof e&&(n=i,i=e,e=t),i&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){function t(e,t,i){var s=t[i];O.removeData(e,i,!0),s.stop(n)}var i,s=!1,r=O.timers,o=O._data(this);if(n||O._unmark(!0,this),null==e)for(i in o)o[i]&&o[i].stop&&i.indexOf(".run")===i.length-4&&t(this,o,i);else o[i=e+".run"]&&o[i].stop&&t(this,o,i);for(i=r.length;i--;)r[i].elem!==this||null!=e&&r[i].queue!==e||(n?r[i](!0):r[i].saveState(),s=!0,r.splice(i,1));n&&s||O.dequeue(this,e)})}}),O.each({slideDown:P("show",1),slideUp:P("hide",1),slideToggle:P("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){O.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),O.extend({speed:function(e,t,i){var n=e&&"object"==typeof e?O.extend({},e):{complete:i||!i&&t||O.isFunction(e)&&e,duration:e,easing:i&&t||t&&!O.isFunction(t)&&t};return n.duration=O.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in O.fx.speeds?O.fx.speeds[n.duration]:O.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(e){O.isFunction(n.old)&&n.old.call(this),n.queue?O.dequeue(this,n.queue):e!==!1&&O._unmark(this)},n},easing:{linear:function(e){return e},swing:function(e){return-Math.cos(e*Math.PI)/2+.5}},timers:[],fx:function(e,t,i){this.options=t,this.elem=e,this.prop=i,t.orig=t.orig||{}}}),O.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(O.fx.step[this.prop]||O.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var e,t=O.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?t&&"auto"!==t?t:0:e},custom:function(e,i,n){function s(e){return r.step(e)}var r=this,o=O.fx;this.startTime=vi||A(),this.end=i,this.now=this.start=e,this.pos=this.state=0,this.unit=n||this.unit||(O.cssNumber[this.prop]?"":"px"),s.queue=this.options.queue,s.elem=this.elem,s.saveState=function(){O._data(r.elem,"fxshow"+r.prop)===t&&(r.options.hide?O._data(r.elem,"fxshow"+r.prop,r.start):r.options.show&&O._data(r.elem,"fxshow"+r.prop,r.end))},s()&&O.timers.push(s)&&!mi&&(mi=setInterval(o.tick,o.interval))},show:function(){var e=O._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||O.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),O(this.elem).show()},hide:function(){this.options.orig[this.prop]=O._data(this.elem,"fxshow"+this.prop)||O.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,i,n,s=vi||A(),r=!0,o=this.elem,a=this.options;if(e||s>=a.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0;for(t in a.animatedProperties)a.animatedProperties[t]!==!0&&(r=!1);if(r){if(null==a.overflow||O.support.shrinkWrapBlocks||O.each(["","X","Y"],function(e,t){o.style["overflow"+t]=a.overflow[e]}),a.hide&&O(o).hide(),a.hide||a.show)for(t in a.animatedProperties)O.style(o,t,a.orig[t]),O.removeData(o,"fxshow"+t,!0),O.removeData(o,"toggle"+t,!0);n=a.complete,n&&(a.complete=!1,n.call(o))}return!1}return 1/0==a.duration?this.now=s:(i=s-this.startTime,this.state=i/a.duration,this.pos=O.easing[a.animatedProperties[this.prop]](this.state,i,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},O.extend(O.fx,{tick:function(){for(var e,t=O.timers,i=0;i<t.length;i++)e=t[i],e()||t[i]!==e||t.splice(i--,1);t.length||O.fx.stop()},interval:13,stop:function(){clearInterval(mi),mi=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){O.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&null!=e.elem.style[e.prop]?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),O.each(xi.concat.apply([],xi),function(e,t){t.indexOf("margin")&&(O.fx.step[t]=function(e){O.style(e.elem,t,Math.max(0,e.now)+e.unit)})}),O.expr&&O.expr.filters&&(O.expr.filters.animated=function(e){return O.grep(O.timers,function(t){return e===t.elem}).length});var Vi,Si=/^t(?:able|d|h)$/i,Di=/^(?:body|html)$/i;Vi="getBoundingClientRect"in N.documentElement?function(e,t,i,n){try{n=e.getBoundingClientRect()}catch(s){}if(!n||!O.contains(i,e))return n?{top:n.top,left:n.left}:{top:0,left:0};var r=t.body,o=k(t),a=i.clientTop||r.clientTop||0,h=i.clientLeft||r.clientLeft||0,l=o.pageYOffset||O.support.boxModel&&i.scrollTop||r.scrollTop,u=o.pageXOffset||O.support.boxModel&&i.scrollLeft||r.scrollLeft,c=n.top+l-a,d=n.left+u-h;return{top:c,left:d}}:function(e,t,i){for(var n,s=e.offsetParent,r=e,o=t.body,a=t.defaultView,h=a?a.getComputedStyle(e,null):e.currentStyle,l=e.offsetTop,u=e.offsetLeft;(e=e.parentNode)&&e!==o&&e!==i&&(!O.support.fixedPosition||"fixed"!==h.position);)n=a?a.getComputedStyle(e,null):e.currentStyle,l-=e.scrollTop,u-=e.scrollLeft,e===s&&(l+=e.offsetTop,u+=e.offsetLeft,!O.support.doesNotAddBorder||O.support.doesAddBorderForTableAndCells&&Si.test(e.nodeName)||(l+=parseFloat(n.borderTopWidth)||0,u+=parseFloat(n.borderLeftWidth)||0),r=s,s=e.offsetParent),O.support.subtractsBorderForOverflowNotVisible&&"visible"!==n.overflow&&(l+=parseFloat(n.borderTopWidth)||0,u+=parseFloat(n.borderLeftWidth)||0),h=n;return("relative"===h.position||"static"===h.position)&&(l+=o.offsetTop,u+=o.offsetLeft),O.support.fixedPosition&&"fixed"===h.position&&(l+=Math.max(i.scrollTop,o.scrollTop),u+=Math.max(i.scrollLeft,o.scrollLeft)),{top:l,left:u}},O.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){O.offset.setOffset(this,e,t)});var i=this[0],n=i&&i.ownerDocument;return n?i===n.body?O.offset.bodyOffset(i):Vi(i,n,n.documentElement):null},O.offset={bodyOffset:function(e){var t=e.offsetTop,i=e.offsetLeft;return O.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(O.css(e,"marginTop"))||0,i+=parseFloat(O.css(e,"marginLeft"))||0),{top:t,left:i}},setOffset:function(e,t,i){var n=O.css(e,"position");"static"===n&&(e.style.position="relative");var s,r,o=O(e),a=o.offset(),h=O.css(e,"top"),l=O.css(e,"left"),u=("absolute"===n||"fixed"===n)&&O.inArray("auto",[h,l])>-1,c={},d={};u?(d=o.position(),s=d.top,r=d.left):(s=parseFloat(h)||0,r=parseFloat(l)||0),O.isFunction(t)&&(t=t.call(e,i,a)),null!=t.top&&(c.top=t.top-a.top+s),null!=t.left&&(c.left=t.left-a.left+r),"using"in t?t.using.call(e,c):o.css(c)}},O.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),i=this.offset(),n=Di.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(O.css(e,"marginTop"))||0,i.left-=parseFloat(O.css(e,"marginLeft"))||0,n.top+=parseFloat(O.css(t[0],"borderTopWidth"))||0,n.left+=parseFloat(O.css(t[0],"borderLeftWidth"))||0,{top:i.top-n.top,left:i.left-n.left}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||N.body;e&&!Di.test(e.nodeName)&&"static"===O.css(e,"position");)e=e.offsetParent;return e})}}),O.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n=/Y/.test(i);O.fn[e]=function(s){return O.access(this,function(e,s,r){var o=k(e);return r===t?o?i in o?o[i]:O.support.boxModel&&o.document.documentElement[s]||o.document.body[s]:e[s]:void(o?o.scrollTo(n?O(o).scrollLeft():r,n?r:O(o).scrollTop()):e[s]=r)},e,s,arguments.length,null)}}),O.each({Height:"height",Width:"width"},function(e,i){var n="client"+e,s="scroll"+e,r="offset"+e;O.fn["inner"+e]=function(){var e=this[0];return e?e.style?parseFloat(O.css(e,i,"padding")):this[i]():null},O.fn["outer"+e]=function(e){var t=this[0];return t?t.style?parseFloat(O.css(t,i,e?"margin":"border")):this[i]():null},O.fn[i]=function(e){return O.access(this,function(e,i,o){var a,h,l,u;return O.isWindow(e)?(a=e.document,h=a.documentElement[n],O.support.boxModel&&h||a.body&&a.body[n]||h):9===e.nodeType?(a=e.documentElement,a[n]>=a[s]?a[n]:Math.max(e.body[s],a[s],e.body[r],a[r])):o===t?(l=O.css(e,i),u=parseFloat(l),O.isNumeric(u)?u:l):void O(e).css(i,o)},i,e,arguments.length,null)}}),e.jQuery=e.$=O,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return O})}(window),jQuery.ui||function(e){e.ui={version:"1.8.1",plugin:{add:function(t,i,n){t=e.ui[t].prototype;for(var s in n)t.plugins[s]=t.plugins[s]||[],t.plugins[s].push([i,n[s]])},call:function(e,t,i){if((t=e.plugins[t])&&e.element[0].parentNode)for(var n=0;n<t.length;n++)e.options[t[n][0]]&&t[n][1].apply(e.element,i)}},contains:function(e,t){return document.compareDocumentPosition?16&e.compareDocumentPosition(t):e!==t&&e.contains(t)},hasScroll:function(t,i){if("hidden"==e(t).css("overflow"))return!1;i=i&&"left"==i?"scrollLeft":"scrollTop";var n=!1;return t[i]>0?!0:(t[i]=1,n=t[i]>0,t[i]=0,n)},isOverAxis:function(e,t,i){return e>t&&t+i>e},isOver:function(t,i,n,s,r,o){return e.ui.isOverAxis(t,n,r)&&e.ui.isOverAxis(i,s,o)},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38}},e.fn.extend({_focus:e.fn.focus,focus:function(t,i){return"number"==typeof t?this.each(function(){var n=this;setTimeout(function(){e(n).focus(),i&&i.call(n)},t)}):this._focus.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none")},scrollParent:function(){var t;return t=e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length){t=e(this[0]);for(var i;t.length&&t[0]!==document;){if(i=t.css("position"),("absolute"==i||"relative"==i||"fixed"==i)&&(i=parseInt(t.css("zIndex")),!isNaN(i)&&0!=i))return i;
t=t.parent()}}return 0}}),e.extend(e.expr[":"],{data:function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){var i=t.nodeName.toLowerCase(),n=e.attr(t,"tabindex");return(/input|select|textarea|button|object/.test(i)?!t.disabled:"a"==i||"area"==i?t.href||!isNaN(n):!isNaN(n))&&!e(t)["area"==i?"parents":"closest"](":hidden").length},tabbable:function(t){var i=e.attr(t,"tabindex");return(isNaN(i)||i>=0)&&e(t).is(":focusable")}})}(jQuery),function(e){var t=e.fn.remove;e.fn.remove=function(i,n){return this.each(function(){return n||(!i||e.filter(i,[this]).length)&&e("*",this).add(this).each(function(){e(this).triggerHandler("remove")}),t.call(e(this),i,n)})},e.widget=function(t,i,n){var s,r=t.split(".")[0];t=t.split(".")[1],s=r+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][s]=function(i){return!!e.data(i,t)},e[r]=e[r]||{},e[r][t]=function(e,t){arguments.length&&this._createWidget(e,t)},i=new i,i.options=e.extend({},i.options),e[r][t].prototype=e.extend(!0,i,{namespace:r,widgetName:t,widgetEventPrefix:e[r][t].prototype.widgetEventPrefix||t,widgetBaseClass:s},n),e.widget.bridge(t,e[r][t])},e.widget.bridge=function(t,i){e.fn[t]=function(n){var s="string"==typeof n,r=Array.prototype.slice.call(arguments,1),o=this;return n=!s&&r.length?e.extend.apply(null,[!0,n].concat(r)):n,s&&"_"===n.substring(0,1)?o:(this.each(s?function(){var i=e.data(this,t),s=i&&e.isFunction(i[n])?i[n].apply(i,r):i;return s!==i&&void 0!==s?(o=s,!1):void 0}:function(){var s=e.data(this,t);s?(n&&s.option(n),s._init()):e.data(this,t,new i(n,this))}),o)}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,i){this.element=e(i).data(this.widgetName,this),this.options=e.extend(!0,{},this.options,e.metadata&&e.metadata.get(i)[this.widgetName],t);var n=this;this.element.bind("remove."+this.widgetName,function(){n.destroy()}),this._create(),this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(t,i){var n=t,s=this;if(0===arguments.length)return e.extend({},s.options);if("string"==typeof t){if(void 0===i)return this.options[t];n={},n[t]=i}return e.each(n,function(e,t){s._setOption(e,t)}),s},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,i,n){var s=this.options[t];if(i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n=n||{},i.originalEvent){t=e.event.props.length;for(var r;t;)r=e.event.props[--t],i[r]=i.originalEvent[r]}return this.element.trigger(i,n),!(e.isFunction(s)&&s.call(this.element[0],i,n)===!1||i.isDefaultPrevented())}}}(jQuery),function(e){e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(t){return e._preventClickEvent?(e._preventClickEvent=!1,t.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(t){if(t.originalEvent=t.originalEvent||{},!t.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,n=1==t.which,s="string"==typeof this.options.cancel?e(t.target).parents().add(t.target).filter(this.options.cancel).length:!1;return n&&!s&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.browser.safari||t.preventDefault(),t.originalEvent.mouseHandled=!0)):!0}},_mouseMove:function(t){return e.browser.msie&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&((this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1)?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,this._preventClickEvent=t.target==this._mouseDownEvent.target,this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){e.ui=e.ui||{};var t=/left|center|right/,i=/top|center|bottom/,n=e.fn.position,s=e.fn.offset;e.fn.position=function(s){if(!s||!s.of)return n.apply(this,arguments);s=e.extend({},s);var r,o,a,h=e(s.of),l=(s.collision||"flip").split(" "),u=s.offset?s.offset.split(" "):[0,0];return 9===s.of.nodeType?(r=h.width(),o=h.height(),a={top:0,left:0}):s.of.scrollTo&&s.of.document?(r=h.width(),o=h.height(),a={top:h.scrollTop(),left:h.scrollLeft()}):s.of.preventDefault?(s.at="left top",r=o=0,a={top:s.of.pageY,left:s.of.pageX}):(r=h.outerWidth(),o=h.outerHeight(),a=h.offset()),e.each(["my","at"],function(){var e=(s[this]||"").split(" ");1===e.length&&(e=t.test(e[0])?e.concat(["center"]):i.test(e[0])?["center"].concat(e):["center","center"]),e[0]=t.test(e[0])?e[0]:"center",e[1]=i.test(e[1])?e[1]:"center",s[this]=e}),1===l.length&&(l[1]=l[0]),u[0]=parseInt(u[0],10)||0,1===u.length&&(u[1]=u[0]),u[1]=parseInt(u[1],10)||0,"right"===s.at[0]?a.left+=r:"center"===s.at[0]&&(a.left+=r/2),"bottom"===s.at[1]?a.top+=o:"center"===s.at[1]&&(a.top+=o/2),a.left+=u[0],a.top+=u[1],this.each(function(){var t=e(this),i=t.outerWidth(),n=t.outerHeight(),h=e.extend({},a);"right"===s.my[0]?h.left-=i:"center"===s.my[0]&&(h.left-=i/2),"bottom"===s.my[1]?h.top-=n:"center"===s.my[1]&&(h.top-=n/2),h.left=parseInt(h.left),h.top=parseInt(h.top),e.each(["left","top"],function(t,a){e.ui.position[l[t]]&&e.ui.position[l[t]][a](h,{targetWidth:r,targetHeight:o,elemWidth:i,elemHeight:n,offset:u,my:s.my,at:s.at})}),e.fn.bgiframe&&t.bgiframe(),t.offset(e.extend(h,{using:s.using}))})},e.ui.position={fit:{left:function(t,i){var n=e(window);i=t.left+i.elemWidth-n.width()-n.scrollLeft(),t.left=i>0?t.left-i:Math.max(0,t.left)},top:function(t,i){var n=e(window);i=t.top+i.elemHeight-n.height()-n.scrollTop(),t.top=i>0?t.top-i:Math.max(0,t.top)}},flip:{left:function(t,i){if("center"!==i.at[0]){var n=e(window);n=t.left+i.elemWidth-n.width()-n.scrollLeft();var s="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,r=-2*i.offset[0];t.left+=t.left<0?s+i.targetWidth+r:n>0?s-i.targetWidth+r:0}},top:function(t,i){if("center"!==i.at[1]){var n=e(window);n=t.top+i.elemHeight-n.height()-n.scrollTop();var s="top"===i.my[1]?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,r="top"===i.at[1]?i.targetHeight:-i.targetHeight,o=-2*i.offset[1];t.top+=t.top<0?s+i.targetHeight+o:n>0?s+r+o:0}}}},e.offset.setOffset||(e.offset.setOffset=function(t,i){/static/.test(e.curCSS(t,"position"))&&(t.style.position="relative");var n=e(t),s=n.offset(),r=parseInt(e.curCSS(t,"top",!0),10)||0,o=parseInt(e.curCSS(t,"left",!0),10)||0;s={top:i.top-s.top+r,left:i.left-s.left+o},"using"in i?i.using.call(t,s):n.css(s)},e.fn.offset=function(t){var i=this[0];return i&&i.ownerDocument?t?this.each(function(){e.offset.setOffset(this,t)}):s.call(this):null})}(jQuery),function(e){e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t=this,i=this.options;if(this._mouseSliding=this._keySliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),i.disabled&&this.element.addClass("ui-slider-disabled ui-disabled"),this.range=e([]),i.range&&(i.range===!0?(this.range=e("<div></div>"),i.values||(i.values=[this._valueMin(),this._valueMin()]),i.values.length&&2!==i.values.length&&(i.values=[i.values[0],i.values[0]])):this.range=e("<div></div>"),this.range.appendTo(this.element).addClass("ui-slider-range"),("min"===i.range||"max"===i.range)&&this.range.addClass("ui-slider-range-"+i.range),this.range.addClass("ui-widget-header")),0===e(".ui-slider-handle",this.element).length&&e("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle"),i.values&&i.values.length)for(;e(".ui-slider-handle",this.element).length<i.values.length;)e("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");this.handles=e(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all"),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){i.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){i.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(i){var n,s,r,o=!0,a=e(this).data("index.ui-slider-handle");if(!t.options.disabled){switch(i.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(o=!1,!t._keySliding&&(t._keySliding=!0,e(this).addClass("ui-state-active"),n=t._start(i,a),n===!1))return}switch(r=t.options.step,n=s=t.options.values&&t.options.values.length?t.values(a):t.value(),i.keyCode){case e.ui.keyCode.HOME:s=t._valueMin();break;case e.ui.keyCode.END:s=t._valueMax();break;case e.ui.keyCode.PAGE_UP:s=n+(t._valueMax()-t._valueMin())/5;break;case e.ui.keyCode.PAGE_DOWN:s=n-(t._valueMax()-t._valueMin())/5;break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(n===t._valueMax())return;s=n+r;break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n===t._valueMin())return;s=n-r}return t._slide(i,a,s),o}}).keyup(function(i){var n=e(this).data("index.ui-slider-handle");t._keySliding&&(t._keySliding=!1,t._stop(i,n),t._change(i,n),e(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(t){var i,n,s,r,o,a,h=this.options;return h.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,o=this,this.handles.each(function(t){var i=Math.abs(n-o.values(t));s>i&&(s=i,r=e(this),a=t)}),h.range===!0&&this.values(1)===h.min&&(a+=1,r=e(this.handles[a])),this._start(t,a)===!1?!1:(this._mouseSliding=!0,o._handleIndex=a,r.addClass("ui-state-active").focus(),h=r.offset(),this._clickOffset=e(t.target).parents().andSelf().is(".ui-slider-handle")?{left:t.pageX-h.left-r.width()/2,top:t.pageY-h.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)}:{left:0,top:0},n=this._normValueFromMouse(i),this._slide(t,a,n),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t=this._normValueFromMouse({x:e.pageX,y:e.pageY});return this._slide(e,this._handleIndex,t),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._clickOffset=this._handleIndex=null,this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t;return"horizontal"===this.orientation?(t=this.elementSize.width,e=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,e=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),t=e/t,t>1&&(t=1),0>t&&(t=0),"vertical"===this.orientation&&(t=1-t),e=this._valueMax()-this._valueMin(),this._trimAlignValue(this._valueMin()+t*e)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>n||1===t&&n>i)&&(i=n),i!==this.values(t)&&(n=this.values(),n[t]=i,e=this._trigger("slide",e,{handle:this.handles[t],value:i,values:n}),this.values(t?0:1),e!==!1&&this.values(t,i,!0))):i!==this.value()&&(e=this._trigger("slide",e,{handle:this.handles[t],value:i}),e!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("change",e,i)}},value:function(e){return arguments.length&&(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0)),this._value()},values:function(t,i){var n,s,r;if(arguments.length>1&&(this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),this._change(null,t)),!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,s=arguments[0],r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(s[r]),this._change(null,r);this._refreshValue()},_setOption:function(t,i){var n,s=0;switch(e.isArray(this.options.values)&&(s=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.attr("disabled","disabled"),this.element.addClass("ui-disabled")):(this.handles.removeAttr("disabled"),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;s>n;n+=1)this._change(null,n);this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(t=this.options.values.slice(),i=0;i<t.length;i+=1)t[i]=this._trimAlignValue(t[i]);return t},_trimAlignValue:function(e){if(e<this._valueMin())return this._valueMin();if(e>this._valueMax())return this._valueMax();var t=this.options.step,i=e%t;return e-=i,i>=t/2&&(e+=t),parseFloat(e.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,s,r,o=this.options.range,a=this.options,h=this,l=this._animateOff?!1:a.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(n){t=(h.values(n)-h._valueMin())/(h._valueMax()-h._valueMin())*100,u["horizontal"===h.orientation?"left":"bottom"]=t+"%",e(this).stop(1,1)[l?"animate":"css"](u,a.animate),h.options.range===!0&&("horizontal"===h.orientation?(0===n&&h.range.stop(1,1)[l?"animate":"css"]({left:t+"%"},a.animate),1===n&&h.range[l?"animate":"css"]({width:t-i+"%"},{queue:!1,duration:a.animate})):(0===n&&h.range.stop(1,1)[l?"animate":"css"]({bottom:t+"%"},a.animate),1===n&&h.range[l?"animate":"css"]({height:t-i+"%"},{queue:!1,duration:a.animate}))),i=t}):(n=this.value(),s=this._valueMin(),r=this._valueMax(),t=r!==s?(n-s)/(r-s)*100:0,u["horizontal"===h.orientation?"left":"bottom"]=t+"%",this.handle.stop(1,1)[l?"animate":"css"](u,a.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({width:t+"%"},a.animate),"max"===o&&"horizontal"===this.orientation&&this.range[l?"animate":"css"]({width:100-t+"%"},{queue:!1,duration:a.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[l?"animate":"css"]({height:t+"%"},a.animate),"max"===o&&"vertical"===this.orientation&&this.range[l?"animate":"css"]({height:100-t+"%"},{queue:!1,duration:a.animate}))}}),e.extend(e.ui.slider,{version:"1.8.1"})}(jQuery),jQuery.effects||function(e){function t(t){var i;return t&&t.constructor==Array&&3==t.length?t:(i=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10)]:(i=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[2.55*parseFloat(i[1]),2.55*parseFloat(i[2]),2.55*parseFloat(i[3])]:(i=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:(i=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(t)?a.transparent:a[e.trim(t).toLowerCase()]}function i(i,n){var s;do{if(s=e.curCSS(i,n),""!=s&&"transparent"!=s||e.nodeName(i,"body"))break;n="backgroundColor"}while(i=i.parentNode);return t(s)}function n(){var e,t,i=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,n={};if(i&&i.length&&i[0]&&i[i[0]])for(var s=i.length;s--;)e=i[s],"string"==typeof i[e]&&(t=e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),n[t]=i[e]);else for(e in i)"string"==typeof i[e]&&(n[e]=i[e]);return n}function s(t){var i,n;for(i in t)n=t[i],(null==n||e.isFunction(n)||i in l||/scrollbar/.test(i)||!/color/i.test(i)&&isNaN(parseFloat(n)))&&delete t[i];return t}function r(e,t){var i,n={_:0};for(i in t)e[i]!=t[i]&&(n[i]=t[i]);return n}function o(t,i,n,s){return"object"==typeof t&&(s=i,n=null,i=t,t=i.effect),e.isFunction(i)&&(s=i,n=null,i={}),e.isFunction(n)&&(s=n,n=null),("number"==typeof i||e.fx.speeds[i])&&(s=n,n=i,i={}),i=i||{},n=n||i.duration,n=e.fx.off?0:"number"==typeof n?n:e.fx.speeds[n]||e.fx.speeds._default,s=s||i.complete,[t,i,n,s]}e.effects={},e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(n,s){e.fx.step[s]=function(e){e.colorInit||(e.start=i(e.elem,s),e.end=t(e.end),e.colorInit=!0),e.elem.style[s]="rgb("+Math.max(Math.min(parseInt(e.pos*(e.end[0]-e.start[0])+e.start[0],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[1]-e.start[1])+e.start[1],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[2]-e.start[2])+e.start[2],10),255),0)+")"}});var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},h=["add","remove","toggle"],l={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.effects.animateClass=function(t,i,o,a){return e.isFunction(o)&&(a=o,o=null),this.each(function(){var l,u=e(this),c=u.attr("style")||" ",d=s(n.call(this)),p=u.attr("className");e.each(h,function(e,i){t[i]&&u[i+"Class"](t[i])}),l=s(n.call(this)),u.attr("className",p),u.animate(r(d,l),i,o,function(){e.each(h,function(e,i){t[i]&&u[i+"Class"](t[i])}),"object"==typeof u.attr("style")?(u.attr("style").cssText="",u.attr("style").cssText=c):u.attr("style",c),a&&a.apply(this,arguments)})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,i,n,s){return i?e.effects.animateClass.apply(this,[{add:t},i,n,s]):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,i,n,s){return i?e.effects.animateClass.apply(this,[{remove:t},i,n,s]):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(t,i,n,s,r){return"boolean"==typeof i||void 0===i?n?e.effects.animateClass.apply(this,[i?{add:t}:{remove:t},n,s,r]):this._toggleClass(t,i):e.effects.animateClass.apply(this,[{toggle:t},i,n,s])},switchClass:function(t,i,n,s,r){return e.effects.animateClass.apply(this,[{add:i,remove:t},n,s,r])}}),e.extend(e.effects,{version:"1.8.1",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data("ec.storage."+t[i],e[0].style[t[i]])},restore:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.css(t[i],e.data("ec.storage."+t[i]))},setMode:function(e,t){return"toggle"==t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":e=0;break;case"center":e=.5;break;case"right":e=1;break;default:e=e[1]/t.width}return{x:e,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});return t.wrap(n),n=t.parent(),"static"==t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),t.css({position:"relative",top:0,left:0})),n.css(i).show()},removeWrapper:function(e){return e.parent().is(".ui-effects-wrapper")?e.parent().replaceWith(e):e},setTransition:function(t,i,n,s){return s=s||{},e.each(i,function(e,i){unit=t.cssUnit(i),unit[0]>0&&(s[i]=unit[0]*n+unit[1])}),s}}),e.fn.extend({effect:function(t){var i=o.apply(this,arguments);i={options:i[1],duration:i[2],callback:i[3]};var n=e.effects[t];return n&&!e.fx.off?n.call(this,i):this},_show:e.fn.show,show:function(t){if(!t||"number"==typeof t||e.fx.speeds[t])return this._show.apply(this,arguments);var i=o.apply(this,arguments);return i[1].mode="show",this.effect.apply(this,i)},_hide:e.fn.hide,hide:function(t){if(!t||"number"==typeof t||e.fx.speeds[t])return this._hide.apply(this,arguments);var i=o.apply(this,arguments);return i[1].mode="hide",this.effect.apply(this,i)},__toggle:e.fn.toggle,toggle:function(t){if(!t||"number"==typeof t||e.fx.speeds[t]||"boolean"==typeof t||e.isFunction(t))return this.__toggle.apply(this,arguments);var i=o.apply(this,arguments);return i[1].mode="toggle",this.effect.apply(this,i)},cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])}),n}}),e.easing.jswing=e.easing.swing,e.extend(e.easing,{def:"easeOutQuad",swing:function(t,i,n,s,r){return e.easing[e.easing.def](t,i,n,s,r)},easeInQuad:function(e,t,i,n,s){return n*(t/=s)*t+i},easeOutQuad:function(e,t,i,n,s){return-n*(t/=s)*(t-2)+i},easeInOutQuad:function(e,t,i,n,s){return(t/=s/2)<1?n/2*t*t+i:-n/2*(--t*(t-2)-1)+i},easeInCubic:function(e,t,i,n,s){return n*(t/=s)*t*t+i},easeOutCubic:function(e,t,i,n,s){return n*((t=t/s-1)*t*t+1)+i},easeInOutCubic:function(e,t,i,n,s){return(t/=s/2)<1?n/2*t*t*t+i:n/2*((t-=2)*t*t+2)+i},easeInQuart:function(e,t,i,n,s){return n*(t/=s)*t*t*t+i},easeOutQuart:function(e,t,i,n,s){return-n*((t=t/s-1)*t*t*t-1)+i},easeInOutQuart:function(e,t,i,n,s){return(t/=s/2)<1?n/2*t*t*t*t+i:-n/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(e,t,i,n,s){return n*(t/=s)*t*t*t*t+i},easeOutQuint:function(e,t,i,n,s){return n*((t=t/s-1)*t*t*t*t+1)+i},easeInOutQuint:function(e,t,i,n,s){return(t/=s/2)<1?n/2*t*t*t*t*t+i:n/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(e,t,i,n,s){return-n*Math.cos(t/s*(Math.PI/2))+n+i},easeOutSine:function(e,t,i,n,s){return n*Math.sin(t/s*(Math.PI/2))+i},easeInOutSine:function(e,t,i,n,s){return-n/2*(Math.cos(Math.PI*t/s)-1)+i},easeInExpo:function(e,t,i,n,s){return 0==t?i:n*Math.pow(2,10*(t/s-1))+i},easeOutExpo:function(e,t,i,n,s){return t==s?i+n:n*(-Math.pow(2,-10*t/s)+1)+i},easeInOutExpo:function(e,t,i,n,s){return 0==t?i:t==s?i+n:(t/=s/2)<1?n/2*Math.pow(2,10*(t-1))+i:n/2*(-Math.pow(2,-10*--t)+2)+i},easeInCirc:function(e,t,i,n,s){return-n*(Math.sqrt(1-(t/=s)*t)-1)+i},easeOutCirc:function(e,t,i,n,s){return n*Math.sqrt(1-(t=t/s-1)*t)+i},easeInOutCirc:function(e,t,i,n,s){return(t/=s/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+i:n/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(e,t,i,n,s){e=1.70158;var r=0,o=n;return 0==t?i:1==(t/=s)?i+n:(r||(r=.3*s),o<Math.abs(n)?(o=n,e=r/4):e=r/(2*Math.PI)*Math.asin(n/o),-(o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*s-e)*Math.PI/r))+i)},easeOutElastic:function(e,t,i,n,s){e=1.70158;var r=0,o=n;return 0==t?i:1==(t/=s)?i+n:(r||(r=.3*s),o<Math.abs(n)?(o=n,e=r/4):e=r/(2*Math.PI)*Math.asin(n/o),o*Math.pow(2,-10*t)*Math.sin(2*(t*s-e)*Math.PI/r)+n+i)},easeInOutElastic:function(e,t,i,n,s){e=1.70158;var r=0,o=n;return 0==t?i:2==(t/=s/2)?i+n:(r||(r=.3*s*1.5),o<Math.abs(n)?(o=n,e=r/4):e=r/(2*Math.PI)*Math.asin(n/o),1>t?-.5*o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*s-e)*Math.PI/r)+i:o*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*s-e)*Math.PI/r)*.5+n+i)},easeInBack:function(e,t,i,n,s,r){return void 0==r&&(r=1.70158),n*(t/=s)*t*((r+1)*t-r)+i},easeOutBack:function(e,t,i,n,s,r){return void 0==r&&(r=1.70158),n*((t=t/s-1)*t*((r+1)*t+r)+1)+i},easeInOutBack:function(e,t,i,n,s,r){return void 0==r&&(r=1.70158),(t/=s/2)<1?n/2*t*t*(((r*=1.525)+1)*t-r)+i:n/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+i},easeInBounce:function(t,i,n,s,r){return s-e.easing.easeOutBounce(t,r-i,0,s,r)+n},easeOutBounce:function(e,t,i,n,s){return(t/=s)<1/2.75?7.5625*n*t*t+i:2/2.75>t?n*(7.5625*(t-=1.5/2.75)*t+.75)+i:2.5/2.75>t?n*(7.5625*(t-=2.25/2.75)*t+.9375)+i:n*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOutBounce:function(t,i,n,s,r){return r/2>i?.5*e.easing.easeInBounce(t,2*i,0,s,r)+n:.5*e.easing.easeOutBounce(t,2*i-r,0,s,r)+.5*s+n}})}(jQuery),function(e){e.effects.blind=function(t){return this.queue(function(){var i=e(this),n=["position","top","left"],s=e.effects.setMode(i,t.options.mode||"hide"),r=t.options.direction||"vertical";e.effects.save(i,n),i.show();var o=e.effects.createWrapper(i).css({overflow:"hidden"}),a="vertical"==r?"height":"width";r="vertical"==r?o.height():o.width(),"show"==s&&o.css(a,0);var h={};h[a]="show"==s?r:0,o.animate(h,t.duration,t.options.easing,function(){"hide"==s&&i.hide(),e.effects.restore(i,n),e.effects.removeWrapper(i),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()})})}}(jQuery),function(){var e=this,t=e._,i={},n=Array.prototype,s=Object.prototype,r=Function.prototype,o=n.push,a=n.slice,h=n.concat,l=s.toString,u=s.hasOwnProperty,c=n.forEach,d=n.map,p=n.reduce,f=n.reduceRight,g=n.filter,m=n.every,v=n.some,y=n.indexOf,w=n.lastIndexOf,b=Array.isArray,x=Object.keys,V=r.bind,S=function(e){return e instanceof S?e:this instanceof S?void(this._wrapped=e):new S(e)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=S),exports._=S):e._=S,S.VERSION="1.5.2";var D=S.each=S.forEach=function(e,t,n){if(null!=e)if(c&&e.forEach===c)e.forEach(t,n);else if(e.length===+e.length){for(var s=0,r=e.length;r>s;s++)if(t.call(n,e[s],s,e)===i)return}else for(var o=S.keys(e),s=0,r=o.length;r>s;s++)if(t.call(n,e[o[s]],o[s],e)===i)return};S.map=S.collect=function(e,t,i){var n=[];return null==e?n:d&&e.map===d?e.map(t,i):(D(e,function(e,s,r){n.push(t.call(i,e,s,r))}),n)};var _="Reduce of empty array with no initial value";S.reduce=S.foldl=S.inject=function(e,t,i,n){var s=arguments.length>2;if(null==e&&(e=[]),p&&e.reduce===p)return n&&(t=S.bind(t,n)),s?e.reduce(t,i):e.reduce(t);if(D(e,function(e,r,o){s?i=t.call(n,i,e,r,o):(i=e,s=!0)}),!s)throw new TypeError(_);return i},S.reduceRight=S.foldr=function(e,t,i,n){var s=arguments.length>2;if(null==e&&(e=[]),f&&e.reduceRight===f)return n&&(t=S.bind(t,n)),s?e.reduceRight(t,i):e.reduceRight(t);var r=e.length;if(r!==+r){var o=S.keys(e);r=o.length}if(D(e,function(a,h,l){h=o?o[--r]:--r,s?i=t.call(n,i,e[h],h,l):(i=e[h],s=!0)}),!s)throw new TypeError(_);return i},S.find=S.detect=function(e,t,i){var n;return C(e,function(e,s,r){return t.call(i,e,s,r)?(n=e,!0):void 0}),n},S.filter=S.select=function(e,t,i){var n=[];return null==e?n:g&&e.filter===g?e.filter(t,i):(D(e,function(e,s,r){t.call(i,e,s,r)&&n.push(e)}),n)},S.reject=function(e,t,i){return S.filter(e,function(e,n,s){return!t.call(i,e,n,s)},i)},S.every=S.all=function(e,t,n){t||(t=S.identity);var s=!0;return null==e?s:m&&e.every===m?e.every(t,n):(D(e,function(e,r,o){return(s=s&&t.call(n,e,r,o))?void 0:i}),!!s)};var C=S.some=S.any=function(e,t,n){t||(t=S.identity);var s=!1;return null==e?s:v&&e.some===v?e.some(t,n):(D(e,function(e,r,o){return s||(s=t.call(n,e,r,o))?i:void 0}),!!s)};S.contains=S.include=function(e,t){return null==e?!1:y&&e.indexOf===y?-1!=e.indexOf(t):C(e,function(e){return e===t})},S.invoke=function(e,t){var i=a.call(arguments,2),n=S.isFunction(t);return S.map(e,function(e){return(n?t:e[t]).apply(e,i)})},S.pluck=function(e,t){return S.map(e,function(e){return e[t]})},S.where=function(e,t,i){return S.isEmpty(t)?i?void 0:[]:S[i?"find":"filter"](e,function(e){for(var i in t)if(t[i]!==e[i])return!1;return!0})},S.findWhere=function(e,t){return S.where(e,t,!0)},S.max=function(e,t,i){if(!t&&S.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&S.isEmpty(e))return-1/0;var n={computed:-1/0,value:-1/0};return D(e,function(e,s,r){var o=t?t.call(i,e,s,r):e;o>n.computed&&(n={value:e,computed:o})}),n.value},S.min=function(e,t,i){if(!t&&S.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&S.isEmpty(e))return 1/0;var n={computed:1/0,value:1/0};return D(e,function(e,s,r){var o=t?t.call(i,e,s,r):e;o<n.computed&&(n={value:e,computed:o})}),n.value},S.shuffle=function(e){var t,i=0,n=[];return D(e,function(e){t=S.random(i++),n[i-1]=n[t],n[t]=e}),n},S.sample=function(e,t,i){return arguments.length<2||i?e[S.random(e.length-1)]:S.shuffle(e).slice(0,Math.max(0,t))};var A=function(e){return S.isFunction(e)?e:function(t){return t[e]
}};S.sortBy=function(e,t,i){var n=A(t);return S.pluck(S.map(e,function(e,t,s){return{value:e,index:t,criteria:n.call(i,e,t,s)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return e.index-t.index}),"value")};var T=function(e){return function(t,i,n){var s={},r=null==i?S.identity:A(i);return D(t,function(i,o){var a=r.call(n,i,o,t);e(s,a,i)}),s}};S.groupBy=T(function(e,t,i){(S.has(e,t)?e[t]:e[t]=[]).push(i)}),S.indexBy=T(function(e,t,i){e[t]=i}),S.countBy=T(function(e,t){S.has(e,t)?e[t]++:e[t]=1}),S.sortedIndex=function(e,t,i,n){i=null==i?S.identity:A(i);for(var s=i.call(n,t),r=0,o=e.length;o>r;){var a=r+o>>>1;i.call(n,e[a])<s?r=a+1:o=a}return r},S.toArray=function(e){return e?S.isArray(e)?a.call(e):e.length===+e.length?S.map(e,S.identity):S.values(e):[]},S.size=function(e){return null==e?0:e.length===+e.length?e.length:S.keys(e).length},S.first=S.head=S.take=function(e,t,i){return null==e?void 0:null==t||i?e[0]:a.call(e,0,t)},S.initial=function(e,t,i){return a.call(e,0,e.length-(null==t||i?1:t))},S.last=function(e,t,i){return null==e?void 0:null==t||i?e[e.length-1]:a.call(e,Math.max(e.length-t,0))},S.rest=S.tail=S.drop=function(e,t,i){return a.call(e,null==t||i?1:t)},S.compact=function(e){return S.filter(e,S.identity)};var P=function(e,t,i){return t&&S.every(e,S.isArray)?h.apply(i,e):(D(e,function(e){S.isArray(e)||S.isArguments(e)?t?o.apply(i,e):P(e,t,i):i.push(e)}),i)};S.flatten=function(e,t){return P(e,t,[])},S.without=function(e){return S.difference(e,a.call(arguments,1))},S.uniq=S.unique=function(e,t,i,n){S.isFunction(t)&&(n=i,i=t,t=!1);var s=i?S.map(e,i,n):e,r=[],o=[];return D(s,function(i,n){(t?n&&o[o.length-1]===i:S.contains(o,i))||(o.push(i),r.push(e[n]))}),r},S.union=function(){return S.uniq(S.flatten(arguments,!0))},S.intersection=function(e){var t=a.call(arguments,1);return S.filter(S.uniq(e),function(e){return S.every(t,function(t){return S.indexOf(t,e)>=0})})},S.difference=function(e){var t=h.apply(n,a.call(arguments,1));return S.filter(e,function(e){return!S.contains(t,e)})},S.zip=function(){for(var e=S.max(S.pluck(arguments,"length").concat(0)),t=new Array(e),i=0;e>i;i++)t[i]=S.pluck(arguments,""+i);return t},S.object=function(e,t){if(null==e)return{};for(var i={},n=0,s=e.length;s>n;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},S.indexOf=function(e,t,i){if(null==e)return-1;var n=0,s=e.length;if(i){if("number"!=typeof i)return n=S.sortedIndex(e,t),e[n]===t?n:-1;n=0>i?Math.max(0,s+i):i}if(y&&e.indexOf===y)return e.indexOf(t,i);for(;s>n;n++)if(e[n]===t)return n;return-1},S.lastIndexOf=function(e,t,i){if(null==e)return-1;var n=null!=i;if(w&&e.lastIndexOf===w)return n?e.lastIndexOf(t,i):e.lastIndexOf(t);for(var s=n?i:e.length;s--;)if(e[s]===t)return s;return-1},S.range=function(e,t,i){arguments.length<=1&&(t=e||0,e=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((t-e)/i),0),s=0,r=new Array(n);n>s;)r[s++]=e,e+=i;return r};var E=function(){};S.bind=function(e,t){var i,n;if(V&&e.bind===V)return V.apply(e,a.call(arguments,1));if(!S.isFunction(e))throw new TypeError;return i=a.call(arguments,2),n=function(){if(!(this instanceof n))return e.apply(t,i.concat(a.call(arguments)));E.prototype=e.prototype;var s=new E;E.prototype=null;var r=e.apply(s,i.concat(a.call(arguments)));return Object(r)===r?r:s}},S.partial=function(e){var t=a.call(arguments,1);return function(){return e.apply(this,t.concat(a.call(arguments)))}},S.bindAll=function(e){var t=a.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return D(t,function(t){e[t]=S.bind(e[t],e)}),e},S.memoize=function(e,t){var i={};return t||(t=S.identity),function(){var n=t.apply(this,arguments);return S.has(i,n)?i[n]:i[n]=e.apply(this,arguments)}},S.delay=function(e,t){var i=a.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},S.defer=function(e){return S.delay.apply(S,[e,1].concat(a.call(arguments,1)))},S.throttle=function(e,t,i){var n,s,r,o=null,a=0;i||(i={});var h=function(){a=i.leading===!1?0:new Date,o=null,r=e.apply(n,s)};return function(){var l=new Date;a||i.leading!==!1||(a=l);var u=t-(l-a);return n=this,s=arguments,0>=u?(clearTimeout(o),o=null,a=l,r=e.apply(n,s)):o||i.trailing===!1||(o=setTimeout(h,u)),r}},S.debounce=function(e,t,i){var n,s,r,o,a;return function(){r=this,s=arguments,o=new Date;var h=function(){var l=new Date-o;t>l?n=setTimeout(h,t-l):(n=null,i||(a=e.apply(r,s)))},l=i&&!n;return n||(n=setTimeout(h,t)),l&&(a=e.apply(r,s)),a}},S.once=function(e){var t,i=!1;return function(){return i?t:(i=!0,t=e.apply(this,arguments),e=null,t)}},S.wrap=function(e,t){return function(){var i=[e];return o.apply(i,arguments),t.apply(this,i)}},S.compose=function(){var e=arguments;return function(){for(var t=arguments,i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},S.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},S.keys=x||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var i in e)S.has(e,i)&&t.push(i);return t},S.values=function(e){for(var t=S.keys(e),i=t.length,n=new Array(i),s=0;i>s;s++)n[s]=e[t[s]];return n},S.pairs=function(e){for(var t=S.keys(e),i=t.length,n=new Array(i),s=0;i>s;s++)n[s]=[t[s],e[t[s]]];return n},S.invert=function(e){for(var t={},i=S.keys(e),n=0,s=i.length;s>n;n++)t[e[i[n]]]=i[n];return t},S.functions=S.methods=function(e){var t=[];for(var i in e)S.isFunction(e[i])&&t.push(i);return t.sort()},S.extend=function(e){return D(a.call(arguments,1),function(t){if(t)for(var i in t)e[i]=t[i]}),e},S.pick=function(e){var t={},i=h.apply(n,a.call(arguments,1));return D(i,function(i){i in e&&(t[i]=e[i])}),t},S.omit=function(e){var t={},i=h.apply(n,a.call(arguments,1));for(var s in e)S.contains(i,s)||(t[s]=e[s]);return t},S.defaults=function(e){return D(a.call(arguments,1),function(t){if(t)for(var i in t)void 0===e[i]&&(e[i]=t[i])}),e},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e};var k=function(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof S&&(e=e._wrapped),t instanceof S&&(t=t._wrapped);var s=l.call(e);if(s!=l.call(t))return!1;switch(s){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var r=i.length;r--;)if(i[r]==e)return n[r]==t;var o=e.constructor,a=t.constructor;if(o!==a&&!(S.isFunction(o)&&o instanceof o&&S.isFunction(a)&&a instanceof a))return!1;i.push(e),n.push(t);var h=0,u=!0;if("[object Array]"==s){if(h=e.length,u=h==t.length)for(;h--&&(u=k(e[h],t[h],i,n)););}else{for(var c in e)if(S.has(e,c)&&(h++,!(u=S.has(t,c)&&k(e[c],t[c],i,n))))break;if(u){for(c in t)if(S.has(t,c)&&!h--)break;u=!h}}return i.pop(),n.pop(),u};S.isEqual=function(e,t){return k(e,t,[],[])},S.isEmpty=function(e){if(null==e)return!0;if(S.isArray(e)||S.isString(e))return 0===e.length;for(var t in e)if(S.has(e,t))return!1;return!0},S.isElement=function(e){return!(!e||1!==e.nodeType)},S.isArray=b||function(e){return"[object Array]"==l.call(e)},S.isObject=function(e){return e===Object(e)},D(["Arguments","Function","String","Number","Date","RegExp"],function(e){S["is"+e]=function(t){return l.call(t)=="[object "+e+"]"}}),S.isArguments(arguments)||(S.isArguments=function(e){return!(!e||!S.has(e,"callee"))}),"function"!=typeof/./&&(S.isFunction=function(e){return"function"==typeof e}),S.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},S.isNaN=function(e){return S.isNumber(e)&&e!=+e},S.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==l.call(e)},S.isNull=function(e){return null===e},S.isUndefined=function(e){return void 0===e},S.has=function(e,t){return u.call(e,t)},S.noConflict=function(){return e._=t,this},S.identity=function(e){return e},S.times=function(e,t,i){for(var n=Array(Math.max(0,e)),s=0;e>s;s++)n[s]=t.call(i,s);return n},S.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var N={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};N.unescape=S.invert(N.escape);var G={escape:new RegExp("["+S.keys(N.escape).join("")+"]","g"),unescape:new RegExp("("+S.keys(N.unescape).join("|")+")","g")};S.each(["escape","unescape"],function(e){S[e]=function(t){return null==t?"":(""+t).replace(G[e],function(t){return N[e][t]})}}),S.result=function(e,t){if(null==e)return void 0;var i=e[t];return S.isFunction(i)?i.call(e):i},S.mixin=function(e){D(S.functions(e),function(t){var i=S[t]=e[t];S.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),L.call(this,i.apply(S,e))}})};var I=0;S.uniqueId=function(e){var t=++I+"";return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/(.)^/,M={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;S.template=function(e,t,i){var n;i=S.defaults({},i,S.templateSettings);var s=new RegExp([(i.escape||O).source,(i.interpolate||O).source,(i.evaluate||O).source].join("|")+"|$","g"),r=0,o="__p+='";e.replace(s,function(t,i,n,s,a){return o+=e.slice(r,a).replace(j,function(e){return"\\"+M[e]}),i&&(o+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(o+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),s&&(o+="';\n"+s+"\n__p+='"),r=a+t.length,t}),o+="';\n",i.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{n=new Function(i.variable||"obj","_",o)}catch(a){throw a.source=o,a}if(t)return n(t,S);var h=function(e){return n.call(this,e,S)};return h.source="function("+(i.variable||"obj")+"){\n"+o+"}",h},S.chain=function(e){return S(e).chain()};var L=function(e){return this._chain?S(e).chain():e};S.mixin(S),D(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=n[e];S.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!=e&&"splice"!=e||0!==i.length||delete i[0],L.call(this,i)}}),D(["concat","join","slice"],function(e){var t=n[e];S.prototype[e]=function(){return L.call(this,t.apply(this._wrapped,arguments))}}),S.extend(S.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){var e,t=this,i=t.Backbone,n=[],s=n.push,r=n.slice,o=n.splice;e="undefined"!=typeof exports?exports:t.Backbone={},e.VERSION="1.0.0";var a=t._;a||"undefined"==typeof require||(a=require("underscore")),e.$=t.jQuery||t.Zepto||t.ender||t.$,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var h=e.Events={on:function(e,t,i){if(!u(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:i,ctx:i||this}),this},once:function(e,t,i){if(!u(this,"once",e,[t,i])||!t)return this;var n=this,s=a.once(function(){n.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,i)},off:function(e,t,i){var n,s,r,o,h,l,c,d;if(!this._events||!u(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events={},this;for(o=e?[e]:a.keys(this._events),h=0,l=o.length;l>h;h++)if(e=o[h],r=this._events[e]){if(this._events[e]=n=[],t||i)for(c=0,d=r.length;d>c;c++)s=r[c],(t&&t!==s.callback&&t!==s.callback._callback||i&&i!==s.context)&&n.push(s);n.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=r.call(arguments,1);if(!u(this,"trigger",e,t))return this;var i=this._events[e],n=this._events.all;return i&&c(i,t),n&&c(n,arguments),this},stopListening:function(e,t,i){var n=this._listeners;if(!n)return this;var s=!t&&!i;"object"==typeof t&&(i=this),e&&((n={})[e._listenerId]=e);for(var r in n)n[r].off(t,i,this),s&&delete this._listeners[r];return this}},l=/\s+/,u=function(e,t,i,n){if(!i)return!0;if("object"==typeof i){for(var s in i)e[t].apply(e,[s,i[s]].concat(n));return!1}if(l.test(i)){for(var r=i.split(l),o=0,a=r.length;a>o;o++)e[t].apply(e,[r[o]].concat(n));return!1}return!0},c=function(e,t){var i,n=-1,s=e.length,r=t[0],o=t[1],a=t[2];switch(t.length){case 0:for(;++n<s;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=e[n]).callback.call(i.ctx,r);return;case 2:for(;++n<s;)(i=e[n]).callback.call(i.ctx,r,o);return;case 3:for(;++n<s;)(i=e[n]).callback.call(i.ctx,r,o,a);return;default:for(;++n<s;)(i=e[n]).callback.apply(i.ctx,t)}},d={listenTo:"on",listenToOnce:"once"};a.each(d,function(e,t){h[t]=function(t,i,n){var s=this._listeners||(this._listeners={}),r=t._listenerId||(t._listenerId=a.uniqueId("l"));return s[r]=t,"object"==typeof i&&(n=this),t[e](i,n,this),this}}),h.bind=h.on,h.unbind=h.off,a.extend(e,h);var p=e.Model=function(e,t){var i,n=e||{};t||(t={}),this.cid=a.uniqueId("c"),this.attributes={},a.extend(this,a.pick(t,f)),t.parse&&(n=this.parse(n,t)||{}),(i=a.result(this,"defaults"))&&(n=a.defaults({},n,i)),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)},f=["url","urlRoot","collection"];a.extend(p.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return a.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return a.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var n,s,r,o,h,l,u,c;if(null==e)return this;if("object"==typeof e?(s=e,i=t):(s={})[e]=t,i||(i={}),!this._validate(s,i))return!1;r=i.unset,h=i.silent,o=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=a.clone(this.attributes),this.changed={}),c=this.attributes,u=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(n in s)t=s[n],a.isEqual(c[n],t)||o.push(n),a.isEqual(u[n],t)?delete this.changed[n]:this.changed[n]=t,r?delete c[n]:c[n]=t;if(!h){o.length&&(this._pending=!0);for(var d=0,p=o.length;p>d;d++)this.trigger("change:"+o[d],this,c[o[d]],i)}if(l)return this;if(!h)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,a.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,a.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!a.isEmpty(this.changed):a.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?a.clone(this.changed):!1;var t,i=!1,n=this._changing?this._previousAttributes:this.attributes;for(var s in e)a.isEqual(n[s],t=e[s])||((i||(i={}))[s]=t);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return a.clone(this._previousAttributes)},fetch:function(e){e=e?a.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,i=e.success;return e.success=function(n){return t.set(t.parse(n,e),e)?(i&&i(t,n,e),void t.trigger("sync",t,n,e)):!1},j(this,e),this.sync("read",this,e)},save:function(e,t,i){var n,s,r,o=this.attributes;if(null==e||"object"==typeof e?(n=e,i=t):(n={})[e]=t,!(!n||i&&i.wait||this.set(n,i)))return!1;if(i=a.extend({validate:!0},i),!this._validate(n,i))return!1;n&&i.wait&&(this.attributes=a.extend({},o,n)),void 0===i.parse&&(i.parse=!0);var h=this,l=i.success;return i.success=function(e){h.attributes=o;var t=h.parse(e,i);return i.wait&&(t=a.extend(n||{},t)),a.isObject(t)&&!h.set(t,i)?!1:(l&&l(h,e,i),void h.trigger("sync",h,e,i))},j(this,i),s=this.isNew()?"create":i.patch?"patch":"update","patch"===s&&(i.attrs=n),r=this.sync(s,this,i),n&&i.wait&&(this.attributes=o),r},destroy:function(e){e=e?a.clone(e):{};var t=this,i=e.success,n=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(s){(e.wait||t.isNew())&&n(),i&&i(t,s,e),t.isNew()||t.trigger("sync",t,s,e)},this.isNew())return e.success(),!1;j(this,e);var s=this.sync("delete",this,e);return e.wait||n(),s},url:function(){var e=a.result(this,"urlRoot")||a.result(this.collection,"url")||M();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},a.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=a.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return i?(this.trigger("invalid",this,i,a.extend(t||{},{validationError:i})),!1):!0}});var g=["keys","values","pairs","invert","pick","omit"];a.each(g,function(e){p.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.attributes),a[e].apply(a,t)}});var m=e.Collection=function(e,t){t||(t={}),t.url&&(this.url=t.url),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,a.extend({silent:!0},t))},v={add:!0,remove:!0,merge:!0},y={add:!0,merge:!1,remove:!1};a.extend(m.prototype,h,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return e.sync.apply(this,arguments)},add:function(e,t){return this.set(e,a.defaults(t||{},y))},remove:function(e,t){e=a.isArray(e)?e.slice():[e],t||(t={});var i,n,s,r;for(i=0,n=e.length;n>i;i++)r=this.get(e[i]),r&&(delete this._byId[r.id],delete this._byId[r.cid],s=this.indexOf(r),this.models.splice(s,1),this.length--,t.silent||(t.index=s,r.trigger("remove",r,this,t)),this._removeReference(r));return this},set:function(e,t){t=a.defaults(t||{},v),t.parse&&(e=this.parse(e,t)),a.isArray(e)||(e=e?[e]:[]);var i,n,r,h,l,u=t.at,c=this.comparator&&null==u&&t.sort!==!1,d=a.isString(this.comparator)?this.comparator:null,p=[],f=[],g={};for(i=0,n=e.length;n>i;i++)(r=this._prepareModel(e[i],t))&&((h=this.get(r))?(t.remove&&(g[h.cid]=!0),t.merge&&(h.set(r.attributes,t),c&&!l&&h.hasChanged(d)&&(l=!0))):t.add&&(p.push(r),r.on("all",this._onModelEvent,this),this._byId[r.cid]=r,null!=r.id&&(this._byId[r.id]=r)));if(t.remove){for(i=0,n=this.length;n>i;++i)g[(r=this.models[i]).cid]||f.push(r);f.length&&this.remove(f,t)}if(p.length&&(c&&(l=!0),this.length+=p.length,null!=u?o.apply(this.models,[u,0].concat(p)):s.apply(this.models,p)),l&&this.sort({silent:!0}),t.silent)return this;for(i=0,n=p.length;n>i;i++)(r=p[i]).trigger("add",r,this,t);return l&&this.trigger("sort",this,t),this},reset:function(e,t){t||(t={});for(var i=0,n=this.models.length;n>i;i++)this._removeReference(this.models[i]);return t.previousModels=this.models,this._reset(),this.add(e,a.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),this},push:function(e,t){return e=this._prepareModel(e,t),this.add(e,a.extend({at:this.length},t)),e},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return e=this._prepareModel(e,t),this.add(e,a.extend({at:0},t)),e},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(e,t){return this.models.slice(e,t)},get:function(e){return null==e?void 0:this._byId[null!=e.id?e.id:e.cid||e]},at:function(e){return this.models[e]},where:function(e,t){return a.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var i in e)if(e[i]!==t.get(i))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),a.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(a.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},sortedIndex:function(e,t,i){t||(t=this.comparator);var n=a.isFunction(t)?t:function(e){return e.get(t)};return a.sortedIndex(this.models,e,n,i)},pluck:function(e){return a.invoke(this.models,"get",e)},fetch:function(e){e=e?a.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,i=this;return e.success=function(n){var s=e.reset?"reset":"set";i[s](n,e),t&&t(i,n,e),i.trigger("sync",i,n,e)},j(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?a.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var i=this,n=t.success;return t.success=function(s){t.wait&&i.add(e,t),n&&n(e,s,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e.collection||(e.collection=this),e;t||(t={}),t.collection=this;var i=new this.model(e,t);return i._validate(e,t)?i:(this.trigger("invalid",this,e,t),!1)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){("add"!==e&&"remove"!==e||i===this)&&("destroy"===e&&this.remove(t,n),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var w=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];a.each(w,function(e){m.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.models),a[e].apply(a,t)}});var b=["groupBy","countBy","sortBy"];a.each(b,function(e){m.prototype[e]=function(t,i){var n=a.isFunction(t)?t:function(e){return e.get(t)};return a[e](this.models,n,i)}});var x=e.View=function(e){this.cid=a.uniqueId("view"),this._configure(e||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},V=/^(\S+)\s*(.*)$/,S=["model","collection","el","id","attributes","className","tagName","events"];a.extend(x.prototype,h,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=a.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var i=e[t];if(a.isFunction(i)||(i=this[e[t]]),i){var n=t.match(V),s=n[1],r=n[2];i=a.bind(i,this),s+=".delegateEvents"+this.cid,""===r?this.$el.on(s,i):this.$el.on(s,r,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(e){this.options&&(e=a.extend({},a.result(this,"options"),e)),a.extend(this,a.pick(e,S)),this.options=e},_ensureElement:function(){if(this.el)this.setElement(a.result(this,"el"),!1);else{var t=a.extend({},a.result(this,"attributes"));this.id&&(t.id=a.result(this,"id")),this.className&&(t["class"]=a.result(this,"className"));var i=e.$("<"+a.result(this,"tagName")+">").attr(t);this.setElement(i,!1)}}}),e.sync=function(t,i,n){var s=D[t];a.defaults(n||(n={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var r={type:s,dataType:"json"};if(n.url||(r.url=a.result(i,"url")||M()),null!=n.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(r.contentType="application/json",r.data=JSON.stringify(n.attrs||i.toJSON(n))),n.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),n.emulateHTTP&&("PUT"===s||"DELETE"===s||"PATCH"===s)){r.type="POST",n.emulateJSON&&(r.data._method=s);var o=n.beforeSend;n.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",s),o?o.apply(this,arguments):void 0}}"GET"===r.type||n.emulateJSON||(r.processData=!1),"PATCH"!==r.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var h=n.xhr=e.ajax(a.extend(r,n));return i.trigger("request",i,h,n),h};var D={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var _=e.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,A=/(\(\?)?:\w+/g,T=/\*\w+/g,P=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(_.prototype,h,{initialize:function(){},route:function(t,i,n){a.isRegExp(t)||(t=this._routeToRegExp(t)),a.isFunction(i)&&(n=i,i=""),n||(n=this[i]);var s=this;return e.history.route(t,function(r){var o=s._extractParameters(t,r);n&&n.apply(s,o),s.trigger.apply(s,["route:"+i].concat(o)),s.trigger("route",i,o),e.history.trigger("route",s,i,o)}),this},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=a.result(this,"routes");for(var e,t=a.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(P,"\\$&").replace(C,"(?:$1)?").replace(A,function(e,t){return t?e:"([^/]+)"}).replace(T,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return a.map(i,function(e){return e?decodeURIComponent(e):null})}});var E=e.History=function(){this.handlers=[],a.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},k=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,G=/msie [\w.]+/,I=/\/$/;E.started=!1,a.extend(E.prototype,h,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var i=this.root.replace(I,"");e.indexOf(i)||(e=e.substr(i.length))}else e=this.getHash();return e.replace(k,"")},start:function(t){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,this.options=a.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),n=document.documentMode,s=G.exec(navigator.userAgent.toLowerCase())&&(!n||7>=n);this.root=("/"+this.root+"/").replace(N,"/"),s&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(i)),this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var r=this.location,o=r.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!o?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&o&&r.hash&&(this.fragment=this.getHash().replace(k,""),this.history.replaceState({},document.title,this.root+this.fragment+r.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),E.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(e){var t=this.fragment=this.getFragment(e),i=a.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0});return i},navigate:function(e,t){if(!E.started)return!1;if(t&&t!==!0||(t={trigger:t}),e=this.getFragment(e||""),this.fragment!==e){this.fragment=e;var i=this.root+e;if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}t.trigger&&this.loadUrl(e)}},_updateHash:function(e,t,i){if(i){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),e.history=new E;var O=function(e,t){var i,n=this;i=e&&a.has(e,"constructor")?e.constructor:function(){return n.apply(this,arguments)},a.extend(i,n,t);var s=function(){this.constructor=i};return s.prototype=n.prototype,i.prototype=new s,e&&a.extend(i.prototype,e),i.__super__=n.prototype,i};p.extend=m.extend=_.extend=x.extend=E.extend=O;var M=function(){throw new Error('A "url" property or function must be specified')},j=function(e,t){var i=t.error;t.error=function(n){i&&i(e,n,t),e.trigger("error",e,n,t)}}}.call(this),function(e){e.fn.placeholder=function(t){var i={message:"...",className:"placeholder",clearClassName:"show_cancel_search"},n=e.extend({},i,t),s=function(e){e.val(e.attr("placeholder")||n.message),e.addClass(n.className)};return this.each(function(){var t=e(this);"search"!=t.attr("type")&&(t.bind("blur",function(){""==t.val()&&s(t)}).bind("focus",function(){t.val()==(t.attr("placeholder")||n.message)&&t.val(""),t.removeClass(n.className)}).bind("keyup",function(){var e=t.val();""!=e&&e!=n.message?t.parent().addClass(n.clearClassName):t.parent().removeClass(n.clearClassName)}),_.defer(function(){t.keyup().blur()}))})}}(jQuery),!function(){if(this.SVG=function(e){return SVG.supported?new SVG.Doc(e):void 0},SVG.ns="http://www.w3.org/2000/svg",SVG.xlink="http://www.w3.org/1999/xlink",SVG.did=1e3,SVG.eid=function(e){return"Svgjs"+e.charAt(0).toUpperCase()+e.slice(1)+SVG.did++},SVG.create=function(e){var t=document.createElementNS(this.ns,e);return t.setAttribute("id",this.eid(e)),t},SVG.extend=function(){var e,t,i,n;for(e=[].slice.call(arguments),t=e.pop(),n=e.length-1;n>=0;n--)if(e[n])for(i in t)e[n].prototype[i]=t[i];SVG.Set&&SVG.Set.inherit&&SVG.Set.inherit()},SVG.get=function(e){var t=document.getElementById(e);return t?t.instance:void 0},SVG.supported=function(){return!!document.createElementNS&&!!document.createElementNS(SVG.ns,"svg").createSVGRect}(),!SVG.supported)return!1;SVG.regex={test:function(e,t){return this[t].test(e)},unit:/^(-?[\d\.]+)([a-z%]{0,2})$/,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isStyle:/^font|text|leading|cursor/,isBlank:/^(\s+)?$/,isNumber:/^-?[\d\.]+$/,isPercent:/^-?[\d\.]+%$/},SVG.defaults={matrix:"1 0 0 1 0 0",attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000"},trans:function(){return{x:0,y:0,scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0,matrix:this.matrix,a:1,b:0,c:0,d:1,e:0,f:0}}},SVG.Color=function(e){var t;this.r=0,this.g=0,this.b=0,"string"==typeof e?SVG.regex.isRgb.test(e)?(t=SVG.regex.rgb.exec(e.replace(/\s/g,"")),this.r=parseInt(t[1]),this.g=parseInt(t[2]),this.b=parseInt(t[3])):SVG.regex.isHex.test(e)&&(t=SVG.regex.hex.exec(this._fullHex(e)),this.r=parseInt(t[1],16),this.g=parseInt(t[2],16),this.b=parseInt(t[3],16)):"object"==typeof e&&(this.r=e.r,this.g=e.g,this.b=e.b)},SVG.extend(SVG.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+this._compToHex(this.r)+this._compToHex(this.g)+this._compToHex(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return.3*(this.r/255)+.59*(this.g/255)+.11*(this.b/255)
},_fullHex:function(e){return 4==e.length?["#",e.substring(1,2),e.substring(1,2),e.substring(2,3),e.substring(2,3),e.substring(3,4),e.substring(3,4)].join(""):e},_compToHex:function(e){var t=e.toString(16);return 1==t.length?"0"+t:t}}),SVG.Color.test=function(e){return e+="",SVG.regex.isHex.test(e)||SVG.regex.isRgb.test(e)},SVG.Color.isRgb=function(e){return e&&"number"==typeof e.r},SVG.Array=function(e,t){e=(e||[]).valueOf(),0==e.length&&t&&(e=t.valueOf()),this.value=this.parse(e)},SVG.extend(SVG.Array,{morph:function(e){if(this.destination=this.parse(e),this.value.length!=this.destination.length){for(var t=this.value[this.value.length-1],i=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(i);for(;this.value.length<this.destination.length;)this.value.push(t)}return this},settle:function(){var e,t=[];for(e=this.value.length-1;e>=0;e--)-1==t.indexOf(this.value[e])&&t.push(this.value[e]);return this.value=t},at:function(e){if(!this.destination)return this;for(var t=0,i=this.value.length,n=[];i>t;t++)n.push(this.value[t]+(this.destination[t]-this.value[t])*e);return new SVG.Array(n)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(e){return e=e.valueOf(),Array.isArray(e)?e:this.split(e)},split:function(e){return e.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"").split(" ")}}),SVG.PointArray=function(){this.constructor.apply(this,arguments)},SVG.PointArray.prototype=new SVG.Array,SVG.extend(SVG.PointArray,{toString:function(){for(var e=0,t=this.value.length,i=[];t>e;e++)i.push(this.value[e].join(","));return i.join(" ")},at:function(e){if(!this.destination)return this;for(var t=0,i=this.value.length,n=[];i>t;t++)n.push([this.value[t][0]+(this.destination[t][0]-this.value[t][0])*e,this.value[t][1]+(this.destination[t][1]-this.value[t][1])*e]);return new SVG.PointArray(n)},parse:function(e){if(e=e.valueOf(),Array.isArray(e))return e;e=this.split(e);for(var t,i=0,n=e.length,s=[];n>i;i++)t=e[i].split(","),s.push([parseFloat(t[0]),parseFloat(t[1])]);return s},move:function(e,t){var i=this.bbox();e-=i.x,t-=i.y;for(var n=this.value.length-1;n>=0;n--)this.value[n]=[this.value[n][0]+e,this.value[n][1]+t];return this},size:function(e,t){var i,n=this.bbox();for(i=this.value.length-1;i>=0;i--)this.value[i][0]=(this.value[i][0]-n.x)*e/n.width+n.x,this.value[i][1]=(this.value[i][1]-n.y)*t/n.height+n.x;return this},bbox:function(){if(0==this.value.length)return{x:0,y:0,width:0,height:0};var e,t=this.value[0][0],i=this.value[0][1],n={x:t,y:i};for(e=this.value.length-1;e>=0;e--)this.value[e][0]<n.x&&(n.x=this.value[e][0]),this.value[e][1]<n.y&&(n.y=this.value[e][1]),this.value[e][0]>t&&(t=this.value[e][0]),this.value[e][1]>i&&(i=this.value[e][1]);return n.width=t-n.x,n.height=i-n.y,n}}),SVG.Number=function(e){switch(this.value=0,this.unit="",typeof e){case"number":this.value=isNaN(e)?0:isFinite(e)?e:0>e?-3.4e38:3.4e38;break;case"string":var t=e.match(SVG.regex.unit);t&&(this.value=parseFloat(t[1]),"%"==t[2]&&(this.value/=100),this.unit=t[2]);break;default:e instanceof SVG.Number&&(this.value=e.value,this.unit=e.unit)}},SVG.extend(SVG.Number,{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:this.value)+this.unit},valueOf:function(){return this.value},to:function(e){return"string"==typeof e&&(this.unit=e),this},plus:function(e){return this.value=this+new SVG.Number(e),this},minus:function(e){return this.plus(-new SVG.Number(e))},times:function(e){return this.value=this*new SVG.Number(e),this},divide:function(e){return this.value=this/new SVG.Number(e),this}}),SVG.ViewBox=function(e){var t,i,n,s,r=e.bbox(),o=(e.attr("viewBox")||"").match(/-?[\d\.]+/g);this.x=r.x,this.y=r.y,this.width=e.node.clientWidth||e.node.getBoundingClientRect().width,this.height=e.node.clientHeight||e.node.getBoundingClientRect().height,o&&(t=parseFloat(o[0]),i=parseFloat(o[1]),n=parseFloat(o[2]),s=parseFloat(o[3]),this.zoom=this.width/this.height>n/s?this.height/s:this.width/n,this.x=t,this.y=i,this.width=n,this.height=s),this.zoom=this.zoom||1},SVG.extend(SVG.ViewBox,{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height}}),SVG.BBox=function(e){var t;if(this.x=0,this.y=0,this.width=0,this.height=0,e){try{t=e.node.getBBox()}catch(i){t={x:e.node.clientLeft,y:e.node.clientTop,width:e.node.clientWidth,height:e.node.clientHeight}}this.x=t.x+e.trans.x,this.y=t.y+e.trans.y,this.width=t.width*e.trans.scaleX,this.height=t.height*e.trans.scaleY}this.cx=this.x+this.width/2,this.cy=this.y+this.height/2},SVG.extend(SVG.BBox,{merge:function(e){var t=new SVG.BBox;return t.x=Math.min(this.x,e.x),t.y=Math.min(this.y,e.y),t.width=Math.max(this.x+this.width,e.x+e.width)-t.x,t.height=Math.max(this.y+this.height,e.y+e.height)-t.y,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2,t}}),SVG.RBox=function(e){var t,i,n={};if(this.x=0,this.y=0,this.width=0,this.height=0,e){for(t=e.doc().parent,i=e.doc().viewbox().zoom,n=e.node.getBoundingClientRect(),this.x=n.left,this.y=n.top,this.x-=t.offsetLeft,this.y-=t.offsetTop;t=t.offsetParent;)this.x-=t.offsetLeft,this.y-=t.offsetTop;for(t=e;t=t.parent;)"svg"==t.type&&t.viewbox&&(i*=t.viewbox().zoom,this.x-=t.x()||0,this.y-=t.y()||0)}this.x/=i,this.y/=i,this.width=n.width/=i,this.height=n.height/=i,this.cx=this.x+this.width/2,this.cy=this.y+this.height/2},SVG.extend(SVG.RBox,{merge:function(e){var t=new SVG.RBox;return t.x=Math.min(this.x,e.x),t.y=Math.min(this.y,e.y),t.width=Math.max(this.x+this.width,e.x+e.width)-t.x,t.height=Math.max(this.y+this.height,e.y+e.height)-t.y,t.cx=t.x+t.width/2,t.cy=t.y+t.height/2,t}}),SVG.Element=function(e){this._stroke=SVG.defaults.attrs.stroke,this.styles={},this.trans=SVG.defaults.trans(),(this.node=e)&&(this.type=e.nodeName,this.node.instance=this)},SVG.extend(SVG.Element,{x:function(e){return e&&(e=new SVG.Number(e),e.value/=this.trans.scaleX),this.attr("x",e)},y:function(e){return e&&(e=new SVG.Number(e),e.value/=this.trans.scaleY),this.attr("y",e)},cx:function(e){return null==e?this.bbox().cx:this.x(e-this.bbox().width/2)},cy:function(e){return null==e?this.bbox().cy:this.y(e-this.bbox().height/2)},move:function(e,t){return this.x(e).y(t)},center:function(e,t){return this.cx(e).cy(t)},size:function(e,t){return this.attr({width:new SVG.Number(e),height:new SVG.Number(t)})},clone:function(){var e,t,i=this.type;return e="rect"==i||"ellipse"==i?this.parent[i](0,0):"line"==i?this.parent[i](0,0,0,0):"image"==i?this.parent[i](this.src):"text"==i?this.parent[i](this.content):"path"==i?this.parent[i](this.attr("d")):"polyline"==i||"polygon"==i?this.parent[i](this.attr("points")):"g"==i?this.parent.group():this.parent[i](),t=this.attr(),delete t.id,e.attr(t),e.trans=this.trans,e.transform({})},remove:function(){return this.parent&&this.parent.removeElement(this),this},doc:function(e){return this._parent(e||SVG.Doc)},attr:function(e,t,i){if(null==e){for(e={},t=this.node.attributes,i=t.length-1;i>=0;i--)e[t[i].nodeName]=SVG.regex.test(t[i].nodeValue,"isNumber")?parseFloat(t[i].nodeValue):t[i].nodeValue;return e}if("object"==typeof e)for(t in e)this.attr(t,e[t]);else if(null===t)this.node.removeAttribute(e);else{if(null==t)return this._isStyle(e)?"text"==e?this.content:"leading"==e&&this.leading?this.leading():this.style(e):(t=this.node.getAttribute(e),null==t?SVG.defaults.attrs[e]:SVG.regex.test(t,"isNumber")?parseFloat(t):t);if("style"==e)return this.style(t);if("x"==e&&Array.isArray(this.lines))for(i=this.lines.length-1;i>=0;i--)this.lines[i].attr(e,t);"stroke-width"==e?this.attr("stroke",parseFloat(t)>0?this._stroke:null):"stroke"==e&&(this._stroke=t),SVG.Color.test(t)||SVG.Color.isRgb(t)?t=new SVG.Color(t):"number"==typeof t?t=new SVG.Number(t):Array.isArray(t)&&(t=new SVG.Array(t)),null!=i?this.node.setAttributeNS(i,e,t.toString()):this.node.setAttribute(e,t.toString()),this._isStyle(e)&&("text"==e?this.text(t):"leading"==e&&this.leading?this.leading(t):this.style(e,t),this.rebuild&&this.rebuild(e,t))}return this},transform:function(e,t){if(0==arguments.length)return this.trans;if("string"==typeof e){if(arguments.length<2)return this.trans[e];var i={};return i[e]=t,this.transform(i)}var i=[];e=this._parseMatrix(e);for(t in e)null!=e[t]&&(this.trans[t]=e[t]);return this.trans.matrix=this.trans.a+" "+this.trans.b+" "+this.trans.c+" "+this.trans.d+" "+this.trans.e+" "+this.trans.f,e=this.trans,e.matrix!=SVG.defaults.matrix&&i.push("matrix("+e.matrix+")"),0!=e.rotation&&i.push("rotate("+e.rotation+" "+(null==e.cx?this.bbox().cx:e.cx)+" "+(null==e.cy?this.bbox().cy:e.cy)+")"),(1!=e.scaleX||1!=e.scaleY)&&i.push("scale("+e.scaleX+" "+e.scaleY+")"),0!=e.skewX&&i.push("skewX("+e.skewX+")"),0!=e.skewY&&i.push("skewY("+e.skewY+")"),(0!=e.x||0!=e.y)&&i.push("translate("+new SVG.Number(e.x/e.scaleX)+" "+new SVG.Number(e.y/e.scaleY)+")"),this._offset&&0!=this._offset.x&&0!=this._offset.y&&i.push("translate("+-this._offset.x+" "+-this._offset.y+")"),0==i.length?this.node.removeAttribute("transform"):this.node.setAttribute("transform",i.join(" ")),this},style:function(e,t){if(0==arguments.length)return this.attr("style")||"";if(arguments.length<2)if("object"==typeof e)for(t in e)this.style(t,e[t]);else{if(!SVG.regex.isCss.test(e))return this.styles[e];e=e.split(";");for(var i=0;i<e.length;i++)t=e[i].split(":"),2==t.length&&this.style(t[0].replace(/\s+/g,""),t[1].replace(/^\s+/,"").replace(/\s+$/,""))}else null===t||SVG.regex.test(t,"isBlank")?delete this.styles[e]:this.styles[e]=t;e="";for(t in this.styles)e+=t+":"+this.styles[t]+";";return""==e?this.node.removeAttribute("style"):this.node.setAttribute("style",e),this},data:function(e,t,i){if(arguments.length<2)try{return JSON.parse(this.attr("data-"+e))}catch(n){return this.attr("data-"+e)}else this.attr("data-"+e,null===t?null:i===!0||"string"==typeof t||"number"==typeof t?t:JSON.stringify(t));return this},bbox:function(){return new SVG.BBox(this)},rbox:function(){return new SVG.RBox(this)},inside:function(e,t){var i=this.bbox();return e>i.x&&t>i.y&&e<i.x+i.width&&t<i.y+i.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},_parent:function(e){for(var t=this;null!=t&&!(t instanceof e);)t=t.parent;return t},_isStyle:function(e){return"string"==typeof e?SVG.regex.test(e,"isStyle"):!1},_parseMatrix:function(e){if(e.matrix){var t=e.matrix.replace(/\s/g,"").split(",");6==t.length&&(e.a=parseFloat(t[0]),e.b=parseFloat(t[1]),e.c=parseFloat(t[2]),e.d=parseFloat(t[3]),e.e=parseFloat(t[4]),e.f=parseFloat(t[5]))}return e}}),SVG.Parent=function(e){this.constructor.call(this,e)},SVG.Parent.prototype=new SVG.Element,SVG.extend(SVG.Parent,{children:function(){return this._children||(this._children=[])},add:function(e,t){if(!this.has(e)){if(t=null==t?this.children().length:t,e.parent){var i=e.parent.children().indexOf(e);e.parent.children().splice(i,1)}this.children().splice(t,0,e),this.node.insertBefore(e.node,this.node.childNodes[t]||null),e.parent=this}return this._defs&&(this.node.removeChild(this._defs.node),this.node.appendChild(this._defs.node)),this},put:function(e,t){return this.add(e,t),e},has:function(e){return this.children().indexOf(e)>=0},get:function(e){return this.children()[e]},first:function(){return this.children()[0]},last:function(){return this.children()[this.children().length-1]},each:function(e,t){var i,n,s=this.children();for(i=0,n=s.length;n>i;i++)s[i]instanceof SVG.Element&&e.apply(s[i],[i,s]),t&&s[i]instanceof SVG.Container&&s[i].each(e,t);return this},removeElement:function(e){var t=this.children().indexOf(e);return this.children().splice(t,1),this.node.removeChild(e.node),e.parent=null,this},clear:function(){for(var e=this.children().length-1;e>=0;e--)this.removeElement(this.children()[e]);return this._defs&&this._defs.clear(),this},defs:function(){return this.doc().defs()}}),SVG.Container=function(e){this.constructor.call(this,e)},SVG.Container.prototype=new SVG.Parent,SVG.extend(SVG.Container,{viewbox:function(e){return 0==arguments.length?new SVG.ViewBox(this):(e=1==arguments.length?[e.x,e.y,e.width,e.height]:[].slice.call(arguments),this.attr("viewBox",e))}}),SVG.FX=function(e){this.target=e},SVG.extend(SVG.FX,{animate:function(e,t,i){var n,s,r,o,a=this.target,h=this;return"object"==typeof e&&(i=e.delay,t=e.ease,e=e.duration),e=null==e?1e3:e,t=t||"<>",h.to=function(e){var i;if(e=0>e?0:e>1?1:e,null==n){n=[];for(o in h.attrs)n.push(o);if(a.morphArray){var l,u=new a.morphArray(h._plot||a.points.toString());h._size&&u.size(h._size.width.to,h._size.height.to),l=u.bbox(),h._x?u.move(h._x.to,l.y):h._cx&&u.move(h._cx.to-l.width/2,l.y),l=u.bbox(),h._y?u.move(l.x,h._y.to):h._cy&&u.move(l.x,h._cy.to-l.height/2),delete h._x,delete h._y,delete h._cx,delete h._cy,delete h._size,h._plot=a.points.morph(u)}}if(null==s){s=[];for(o in h.trans)s.push(o)}if(null==r){r=[];for(o in h.styles)r.push(o)}for(e="<>"==t?-Math.cos(e*Math.PI)/2+.5:">"==t?Math.sin(e*Math.PI/2):"<"==t?-Math.cos(e*Math.PI/2)+1:"-"==t?e:"function"==typeof t?t(e):e,h._x?a.x(h._at(h._x,e)):h._cx&&a.cx(h._at(h._cx,e)),h._y?a.y(h._at(h._y,e)):h._cy&&a.cy(h._at(h._cy,e)),h._size&&a.size(h._at(h._size.width,e),h._at(h._size.height,e)),h._plot&&a.plot(h._plot.at(e)),h._viewbox&&a.viewbox(h._at(h._viewbox.x,e),h._at(h._viewbox.y,e),h._at(h._viewbox.width,e),h._at(h._viewbox.height,e)),i=n.length-1;i>=0;i--)a.attr(n[i],h._at(h.attrs[n[i]],e));for(i=s.length-1;i>=0;i--)a.transform(s[i],h._at(h.trans[s[i]],e));for(i=r.length-1;i>=0;i--)a.style(r[i],h._at(h.styles[r[i]],e));h._during&&h._during.call(a,e,function(t,i){return h._at({from:t,to:i},e)})},"number"==typeof e&&(this.timeout=setTimeout(function(){var t=1e3/60,i=(new Date).getTime(),n=i+e;h.interval=setInterval(function(){var t=(new Date).getTime(),s=t>n?1:(t-i)/e;h.to(s),t>n&&(h._plot&&a.plot(new SVG.PointArray(h._plot.destination).settle()),clearInterval(h.interval),h._after?h._after.apply(a,[h]):h.stop())},e>t?t:e)},i||0)),this},bbox:function(){return this.target.bbox()},attr:function(e,t){if("object"==typeof e)for(var i in e)this.attr(i,e[i]);else this.attrs[e]={from:this.target.attr(e),to:t};return this},transform:function(e,t){if(1==arguments.length){e=this.target._parseMatrix(e),delete e.matrix;for(t in e)this.trans[t]={from:this.target.trans[t],to:e[t]}}else{var i={};i[e]=t,this.transform(i)}return this},style:function(e,t){if("object"==typeof e)for(var i in e)this.style(i,e[i]);else this.styles[e]={from:this.target.style(e),to:t};return this},x:function(e){return this._x={from:this.target.x(),to:e},this},y:function(e){return this._y={from:this.target.y(),to:e},this},cx:function(e){return this._cx={from:this.target.cx(),to:e},this},cy:function(e){return this._cy={from:this.target.cy(),to:e},this},move:function(e,t){return this.x(e).y(t)},center:function(e,t){return this.cx(e).cy(t)},size:function(e,t){if(this.target instanceof SVG.Text)this.attr("font-size",e);else{var i=this.target.bbox();this._size={width:{from:i.width,to:e},height:{from:i.height,to:t}}}return this},plot:function(e){return this._plot=e,this},viewbox:function(e,t,i,n){if(this.target instanceof SVG.Container){var s=this.target.viewbox();this._viewbox={x:{from:s.x,to:e},y:{from:s.y,to:t},width:{from:s.width,to:i},height:{from:s.height,to:n}}}return this},update:function(e){return this.target instanceof SVG.Stop&&(null!=e.opacity&&this.attr("stop-opacity",e.opacity),null!=e.color&&this.attr("stop-color",e.color),null!=e.offset&&this.attr("offset",new SVG.Number(e.offset))),this},during:function(e){return this._during=e,this},after:function(e){return this._after=e,this},stop:function(){return clearTimeout(this.timeout),clearInterval(this.interval),this.attrs={},this.trans={},this.styles={},delete this._x,delete this._y,delete this._cx,delete this._cy,delete this._size,delete this._plot,delete this._after,delete this._during,delete this._viewbox,this},_at:function(e,t){return"number"==typeof e.from?e.from+(e.to-e.from)*t:SVG.regex.unit.test(e.to)?new SVG.Number(e.to).minus(new SVG.Number(e.from)).times(t).plus(new SVG.Number(e.from)):e.to&&(e.to.r||SVG.Color.test(e.to))?this._color(e,t):1>t?e.from:e.to},_color:function(e,t){var i,n;return t=0>t?0:t>1?1:t,i=new SVG.Color(e.from),n=new SVG.Color(e.to),new SVG.Color({r:~~(i.r+(n.r-i.r)*t),g:~~(i.g+(n.g-i.g)*t),b:~~(i.b+(n.b-i.b)*t)}).toHex()}}),SVG.extend(SVG.Element,{animate:function(e,t,i){return(this.fx||(this.fx=new SVG.FX(this))).stop().animate(e,t,i)},stop:function(){return this.fx&&this.fx.stop(),this}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave"].forEach(function(e){SVG.Element.prototype[e]=function(t){var i=this;return this.node["on"+e]="function"==typeof t?function(){return t.apply(i,arguments)}:null,this}}),SVG.on=function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent("on"+t,i)},SVG.off=function(e,t,i){e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent("on"+t,i)},SVG.extend(SVG.Element,{on:function(e,t){return SVG.on(this.node,e,t),this},off:function(e,t){return SVG.off(this.node,e,t),this}}),SVG.Defs=function(){this.constructor.call(this,SVG.create("defs"))},SVG.Defs.prototype=new SVG.Container,SVG.G=function(){this.constructor.call(this,SVG.create("g"))},SVG.G.prototype=new SVG.Container,SVG.extend(SVG.G,{x:function(e){return null==e?this.trans.x:this.transform("x",e)},y:function(e){return null==e?this.trans.y:this.transform("y",e)}}),SVG.extend(SVG.Container,{group:function(){return this.put(new SVG.G)}}),SVG.extend(SVG.Element,{siblings:function(){return this.parent.children()},position:function(){var e=this.siblings();return e.indexOf(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var e=this.position();return this.parent.removeElement(this).put(this,e+1)},backward:function(){var e=this.position();return e>0&&this.parent.removeElement(this).add(this,e-1),this},front:function(){return this.parent.removeElement(this).put(this)},back:function(){return this.position()>0&&this.parent.removeElement(this).add(this,0),this},before:function(e){e.remove();var t=this.position();return this.parent.add(e,t),this},after:function(e){e.remove();var t=this.position();return this.parent.add(e,t+1),this}}),SVG.Mask=function(){this.constructor.call(this,SVG.create("mask")),this.targets=[]},SVG.Mask.prototype=new SVG.Container,SVG.extend(SVG.Mask,{remove:function(){for(var e=this.targets.length-1;e>=0;e--)this.targets[e]&&this.targets[e].unmask();return delete this.targets,this.parent.removeElement(this),this}}),SVG.extend(SVG.Element,{maskWith:function(e){return this.masker=e instanceof SVG.Mask?e:this.parent.mask().add(e),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),SVG.extend(SVG.Container,{mask:function(){return this.defs().put(new SVG.Mask)}}),SVG.Clip=function(){this.constructor.call(this,SVG.create("clipPath")),this.targets=[]},SVG.Clip.prototype=new SVG.Container,SVG.extend(SVG.Clip,{remove:function(){for(var e=this.targets.length-1;e>=0;e--)this.targets[e]&&this.targets[e].unclip();return delete this.targets,this.parent.removeElement(this),this}}),SVG.extend(SVG.Element,{clipWith:function(e){return this.clipper=e instanceof SVG.Clip?e:this.parent.clip().add(e),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),SVG.extend(SVG.Container,{clip:function(){return this.defs().put(new SVG.Clip)}}),SVG.Gradient=function(e){this.constructor.call(this,SVG.create(e+"Gradient")),this.type=e},SVG.Gradient.prototype=new SVG.Container,SVG.extend(SVG.Gradient,{from:function(e,t){return this.attr("radial"==this.type?{fx:new SVG.Number(e),fy:new SVG.Number(t)}:{x1:new SVG.Number(e),y1:new SVG.Number(t)})},to:function(e,t){return this.attr("radial"==this.type?{cx:new SVG.Number(e),cy:new SVG.Number(t)}:{x2:new SVG.Number(e),y2:new SVG.Number(t)})},radius:function(e){return"radial"==this.type?this.attr({r:new SVG.Number(e)}):this},at:function(e){return this.put(new SVG.Stop(e))},update:function(e){return this.clear(),e(this),this},fill:function(){return"url(#"+this.attr("id")+")"},toString:function(){return this.fill()}}),SVG.extend(SVG.Defs,{gradient:function(e,t){var i=this.put(new SVG.Gradient(e));return t(i),i}}),SVG.extend(SVG.Container,{gradient:function(e,t){return this.defs().gradient(e,t)}}),SVG.Stop=function(e){this.constructor.call(this,SVG.create("stop")),this.update(e)},SVG.Stop.prototype=new SVG.Element,SVG.extend(SVG.Stop,{update:function(e){return null!=e.opacity&&this.attr("stop-opacity",e.opacity),null!=e.color&&this.attr("stop-color",e.color),null!=e.offset&&this.attr("offset",new SVG.Number(e.offset)),this}}),SVG.Doc=function(e){this.parent="string"==typeof e?document.getElementById(e):e,this.constructor.call(this,"svg"==this.parent.nodeName?this.parent:SVG.create("svg")),this.attr({xmlns:SVG.ns,version:"1.1",width:"100%",height:"100%"}).attr("xlink",SVG.xlink,SVG.ns),this._defs=new SVG.Defs,this.node.appendChild(this._defs.node),"svg"!=this.parent.nodeName&&this.stage()},SVG.Doc.prototype=new SVG.Container,SVG.extend(SVG.Doc,{stage:function(){var e,t=this,i=document.createElement("div");return i.style.cssText="position:relative;height:100%;",t.parent.appendChild(i),i.appendChild(t.node),e=function(){"complete"===document.readyState?(t.style("position:absolute;"),setTimeout(function(){t.style("position:relative;overflow:hidden;"),t.parent.removeChild(t.node.parentNode),t.node.parentNode.removeChild(t.node),t.parent.appendChild(t.node),t.fixSubPixelOffset(),SVG.on(window,"resize",function(){t.fixSubPixelOffset()})},5)):setTimeout(e,10)},e(),this},defs:function(){return this._defs},fixSubPixelOffset:function(){var e=this.node.getScreenCTM();this.style("left",-e.e%1+"px").style("top",-e.f%1+"px")}}),SVG.Shape=function(e){this.constructor.call(this,e)},SVG.Shape.prototype=new SVG.Element,SVG.Use=function(){this.constructor.call(this,SVG.create("use"))},SVG.Use.prototype=new SVG.Shape,SVG.extend(SVG.Use,{element:function(e){return this.target=e,this.attr("href","#"+e,SVG.xlink)}}),SVG.extend(SVG.Container,{use:function(e){return this.put(new SVG.Use).element(e)}}),SVG.Rect=function(){this.constructor.call(this,SVG.create("rect"))},SVG.Rect.prototype=new SVG.Shape,SVG.extend(SVG.Container,{rect:function(e,t){return this.put((new SVG.Rect).size(e,t))}}),SVG.Ellipse=function(){this.constructor.call(this,SVG.create("ellipse"))},SVG.Ellipse.prototype=new SVG.Shape,SVG.extend(SVG.Ellipse,{x:function(e){return null==e?this.cx()-this.attr("rx"):this.cx(e+this.attr("rx"))},y:function(e){return null==e?this.cy()-this.attr("ry"):this.cy(e+this.attr("ry"))},cx:function(e){return null==e?this.attr("cx"):this.attr("cx",new SVG.Number(e).divide(this.trans.scaleX))},cy:function(e){return null==e?this.attr("cy"):this.attr("cy",new SVG.Number(e).divide(this.trans.scaleY))},size:function(e,t){return this.attr({rx:new SVG.Number(e).divide(2),ry:new SVG.Number(t).divide(2)})}}),SVG.extend(SVG.Container,{circle:function(e){return this.ellipse(e,e)},ellipse:function(e,t){return this.put(new SVG.Ellipse).size(e,t).move(0,0)}}),SVG.Line=function(){this.constructor.call(this,SVG.create("line"))},SVG.Line.prototype=new SVG.Shape,SVG.extend(SVG.Line,{x:function(e){var t=this.bbox();return null==e?t.x:this.attr({x1:this.attr("x1")-t.x+e,x2:this.attr("x2")-t.x+e})},y:function(e){var t=this.bbox();return null==e?t.y:this.attr({y1:this.attr("y1")-t.y+e,y2:this.attr("y2")-t.y+e})},cx:function(e){var t=this.bbox().width/2;return null==e?this.x()+t:this.x(e-t)},cy:function(e){var t=this.bbox().height/2;return null==e?this.y()+t:this.y(e-t)},size:function(e,t){var i=this.bbox();return this.attr(this.attr("x1")<this.attr("x2")?"x2":"x1",i.x+e).attr(this.attr("y1")<this.attr("y2")?"y2":"y1",i.y+t)},plot:function(e,t,i,n){return this.attr({x1:e,y1:t,x2:i,y2:n})}}),SVG.extend(SVG.Container,{line:function(e,t,i,n){return this.put((new SVG.Line).plot(e,t,i,n))}}),SVG.Polyline=function(){this.constructor.call(this,SVG.create("polyline"))},SVG.Polyline.prototype=new SVG.Shape,SVG.Polygon=function(){this.constructor.call(this,SVG.create("polygon"))},SVG.Polygon.prototype=new SVG.Shape,SVG.extend(SVG.Polyline,SVG.Polygon,{morphArray:SVG.PointArray,plot:function(e){return this.attr("points",this.points=new SVG.PointArray(e,[[0,0]]))},move:function(e,t){return this.attr("points",this.points.move(e,t))},x:function(e){return null==e?this.bbox().x:this.move(e,this.bbox().y)},y:function(e){return null==e?this.bbox().y:this.move(this.bbox().x,e)},size:function(e,t){return this.attr("points",this.points.size(e,t))}}),SVG.extend(SVG.Container,{polyline:function(e){return this.put(new SVG.Polyline).plot(e)},polygon:function(e){return this.put(new SVG.Polygon).plot(e)}}),SVG.Path=function(e){this.constructor.call(this,SVG.create("path")),this.unbiased=!!e},SVG.Path.prototype=new SVG.Shape,SVG.extend(SVG.Path,{_plot:function(e){return this.attr("d",e||"M0,0")}}),SVG.extend(SVG.Container,{path:function(e,t){return this.put(new SVG.Path(t)).plot(e)}}),SVG.extend(SVG.Path,{x:function(e){return null==e?this.bbox().x:this.transform("x",e)},y:function(e){return null==e?this.bbox().y:this.transform("y",e)},size:function(e,t){var i=e/this._offset.width;return this.transform({scaleX:i,scaleY:null!=t?t/this._offset.height:i})},plot:function(e){var t=this.trans.scaleX,i=this.trans.scaleY;return this._plot(e),this._offset=this.transform({scaleX:1,scaleY:1}).bbox(),this.unbiased?this._offset.x=this._offset.y=0:(this._offset.x-=this.trans.x,this._offset.y-=this.trans.y),this.transform({scaleX:t,scaleY:i})}}),SVG.Image=function(){this.constructor.call(this,SVG.create("image"))},SVG.Image.prototype=new SVG.Shape,SVG.extend(SVG.Image,{load:function(e){return e?this.attr("href",this.src=e,SVG.xlink):this}}),SVG.extend(SVG.Container,{image:function(e,t,i){return t=null!=t?t:100,this.put((new SVG.Image).load(e).size(t,null!=i?i:t))}});var e="size family weight stretch variant style".split(" ");SVG.Text=function(){this.constructor.call(this,SVG.create("text")),this.styles={"font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"},this._leading=new SVG.Number("1.2em"),this._rebuild=!0},SVG.Text.prototype=new SVG.Shape,SVG.extend(SVG.Text,{x:function(e,t){return null==e?t?this.attr("x"):this.bbox().x:(t||(t=this.style("text-anchor"),e="start"==t?e:"end"==t?e+this.bbox().width:e+this.bbox().width/2),this.textPath||this.lines.each(function(){this.newLined&&this.x(e)}),this.attr("x",e))},cx:function(e){return null==e?this.bbox().cx:this.x(e-this.bbox().width/2)},cy:function(e,t){return null==e?this.bbox().cy:this.y(t?e:e-this.bbox().height/2)},move:function(e,t,i){return this.x(e,i).y(t)},center:function(e,t,i){return this.cx(e,i).cy(t,i)},text:function(e){if(null==e)return this.content;if(this.clear(),"function"==typeof e)this._rebuild=!1,e(this);else{this._rebuild=!0,e=SVG.regex.isBlank.test(e)?"text":e;var t,i,n=e.split("\n");for(t=0,i=n.length;i>t;t++)this.tspan(n[t]).newLine();this.rebuild()}return this},tspan:function(e){var t=this.textPath?this.textPath.node:this.node,i=(new SVG.TSpan).text(e),n=this.style();return t.appendChild(i.node),this.lines.add(i),SVG.regex.isBlank.test(n)||i.style(n),this.content+=e,i.parent=this,i},size:function(e){return this.attr("font-size",e)},leading:function(e){return null==e?this._leading:(e=new SVG.Number(e),this._leading=e,this.lines.each(function(){this.newLined&&this.attr("dy",e)}),this)},rebuild:function(){return this._rebuild&&this.lines.attr({x:this.attr("x"),dy:this._leading,style:this.style()}),this},clear:function(){for(var e=this.textPath?this.textPath.node:this.node;e.hasChildNodes();)e.removeChild(e.lastChild);return delete this.lines,this.lines=new SVG.Set,this.content="",this}}),SVG.extend(SVG.Container,{text:function(e){return this.put(new SVG.Text).text(e)}}),SVG.TSpan=function(){this.constructor.call(this,SVG.create("tspan"))},SVG.TSpan.prototype=new SVG.Shape,SVG.extend(SVG.TSpan,{text:function(e){return this.node.appendChild(document.createTextNode(e)),this},dx:function(e){return this.attr("dx",e)},dy:function(e){return this.attr("dy",e)},newLine:function(){return this.newLined=!0,this.parent.content+="\n",this.dy(this.parent._leading),this.attr("x",this.parent.x())}}),SVG.TextPath=function(){this.constructor.call(this,SVG.create("textPath"))},SVG.TextPath.prototype=new SVG.Element,SVG.extend(SVG.Text,{path:function(e){for(this.textPath=new SVG.TextPath;this.node.hasChildNodes();)this.textPath.node.appendChild(this.node.firstChild);return this.node.appendChild(this.textPath.node),this.track=this.doc().defs().path(e,!0),this.textPath.parent=this,this.textPath.attr("href","#"+this.track,SVG.xlink),this},plot:function(e){return this.track&&this.track.plot(e),this}}),SVG.Nested=function(){this.constructor.call(this,SVG.create("svg")),this.style("overflow","visible")},SVG.Nested.prototype=new SVG.Container,SVG.extend(SVG.Container,{nested:function(){return this.put(new SVG.Nested)}}),SVG._stroke=["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],SVG._fill=["color","opacity","rule"];var t=function(e,t){return"color"==t?e:e+"-"+t};["fill","stroke"].forEach(function(e){var i={};i[e]=function(i){if("string"==typeof i||SVG.Color.isRgb(i)||i&&"function"==typeof i.fill)this.attr(e,i);else for(index=SVG["_"+e].length-1;index>=0;index--)null!=i[SVG["_"+e][index]]&&this.attr(t(e,SVG["_"+e][index]),i[SVG["_"+e][index]]);return this},SVG.extend(SVG.Element,SVG.FX,i)}),SVG.extend(SVG.Element,SVG.FX,{rotate:function(e,t,i){return this.transform({rotation:e||0,cx:t,cy:i})},skew:function(e,t){return this.transform({skewX:e||0,skewY:t||0})},scale:function(e,t){return this.transform({scaleX:e,scaleY:null==t?e:t})},translate:function(e,t){return this.transform({x:e,y:t})},matrix:function(e){return this.transform({matrix:e})},opacity:function(e){return this.attr("opacity",e)}}),SVG.Text&&SVG.extend(SVG.Text,SVG.FX,{font:function(t){for(var i in t)"anchor"==i?this.attr("text-anchor",t[i]):e.indexOf(i)>-1?this.attr("font-"+i,t[i]):this.attr(i,t[i]);return this}}),SVG.Set=function(){this.clear()},SVG.SetFX=function(e){this.set=e},SVG.extend(SVG.Set,{add:function(){var e,t,i=[].slice.call(arguments);for(e=0,t=i.length;t>e;e++)this.members.push(i[e]);return this},remove:function(e){var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this},each:function(e){for(var t=0,i=this.members.length;i>t;t++)e.apply(this.members[t],[t,this.members]);return this},clear:function(){return this.members=[],this},valueOf:function(){return this.members}}),SVG.Set.inherit=function(){var e,t=[];for(var e in SVG.Shape.prototype)"function"==typeof SVG.Shape.prototype[e]&&"function"!=typeof SVG.Set.prototype[e]&&t.push(e);t.forEach(function(e){SVG.Set.prototype[e]=function(){for(var t=0,i=this.members.length;i>t;t++)this.members[t]&&"function"==typeof this.members[t][e]&&this.members[t][e].apply(this.members[t],arguments);return"animate"==e?this.fx||(this.fx=new SVG.SetFX(this)):this}}),t=[];for(var e in SVG.FX.prototype)"function"==typeof SVG.FX.prototype[e]&&"function"!=typeof SVG.SetFX.prototype[e]&&t.push(e);t.forEach(function(e){SVG.SetFX.prototype[e]=function(){for(var t=0,i=this.set.members.length;i>t;t++)this.set.members[t].fx[e].apply(this.set.members[t].fx,arguments);return this}})},SVG.extend(SVG.Container,{set:function(){return new SVG.Set}}),SVG.extend(SVG.Element,{remember:function(e,t){if("object"==typeof arguments[0])for(var t in e)this.remember(t,e[t]);else{if(1==arguments.length)return this.memory()[e];this.memory()[e]=t}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var e=arguments.length-1;e>=0;e--)delete this.memory()[arguments[e]];
return this},memory:function(){return this._memory||(this._memory={})}}),"function"==typeof define&&define.amd?define(function(){return SVG}):"undefined"!=typeof exports&&(exports.SVG=SVG)}.call(this);var APDate=function(e){if(this.defaults={year:null,month:null,day:null},this.monthAbbreviations={0:"Jan.",1:"Feb.",7:"Aug.",8:"Sept.",9:"Oct.",10:"Nov.",11:"Dec."},this.months={0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},"string"==typeof e)this.date=new Date(e),this.opts={month:this.date.getMonth(),day:this.date.getDate(),year:this.date.getFullYear()};else{this.opts=this.extendDefaults(this.defaults,e);var t=new Date;if(this.opts.year&&this.opts.month&&this.opts.day&&(this.date=new Date(this.opts.year,this.opts.month-1,this.opts.day)),this.opts.year&&this.opts.month&&!this.opts.day&&(this.date=new Date(this.opts.year,this.opts.month-1)),!this.opts.month||this.opts.year||this.opts.day||(this.date=new Date(t.getFullYear(),this.opts.month-1)),this.opts.month&&this.opts.day&&!this.opts.year&&(this.date=new Date(t.getFullYear(),this.opts.month-1,this.opts.day)),!this.opts.month)throw"At minimum, must specify month for AP date"}return this};APDate.prototype.extendDefaults=function(e,t){var i={};for(var n in e)i[n]=t[n]?t[n]:e[n];return i},APDate.prototype.getMonthAbbreviation=function(){var e=this.monthAbbreviations[this.date.getUTCMonth()];return"undefined"==typeof e?this.months[this.date.getUTCMonth()]:e},APDate.prototype.getMonthFull=function(){return this.months[this.date.getUTCMonth()]},APDate.prototype.ap=function(){return this.opts.year&&this.opts.month&&this.opts.day?this.getMonthAbbreviation()+" "+this.date.getDate()+", "+this.date.getFullYear():this.opts.year&&this.opts.month&&!this.opts.day?this.getMonthAbbreviation()+" "+this.date.getFullYear():this.opts.month&&this.opts.day&&!this.opts.year?this.getMonthAbbreviation()+" "+this.date.getDate():!this.opts.month||this.opts.day||this.opts.year?void 0:this.getMonthFull()},window.console||(window.console={}),console.log||(console.log=_.identity),window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),window.DV=window.DV||{},DV.jQuery=jQuery.noConflict(),DV.viewers=DV.viewers||{},DV.model=DV.model||{},DV.Annotation=function(e){this.position={top:e.top,left:e.left},this.dimensions={width:e.width,height:e.height},this.page=e.page,this.pageEl=e.pageEl,this.annotationContainerEl=e.annotationContainerEl,this.viewer=this.page.set.viewer,this.annotationEl=null,this.renderedHTML=e.renderedHTML,this.type=e.type,this.id=e.id,this.model=this.viewer.models.annotations.getAnnotation(this.id),this.state="collapsed",this.active=!1,this.remove(),this.add(),e.active&&(this.viewer.helpers.setActiveAnnotationLimits(this),this.viewer.events.resetTracker(),this.active=null,this.show(),e.showEdit&&this.showEdit())},DV.Annotation.prototype.add=function(){if("page"===this.type)this.annotationEl=this.renderedHTML.insertBefore(this.annotationContainerEl);else if(this.page.annotations.length>0)for(var e=0,t=this.page.annotations.length;t>e;e++){if(this.page.annotations[e].id===this.id)return!1;this.annotationEl=this.renderedHTML.appendTo(this.annotationContainerEl)}else this.annotationEl=this.renderedHTML.appendTo(this.annotationContainerEl)},DV.Annotation.prototype.next=function(){this.hide.preventRemovalOfCoverClass=!0;var e=this.viewer.models.annotations.getNextAnnotation(this.id);e&&this.page.set.showAnnotation({index:e.index,id:e.id,top:e.top})},DV.Annotation.prototype.previous=function(){this.hide.preventRemovalOfCoverClass=!0;var e=this.viewer.models.annotations.getPreviousAnnotation(this.id);e&&this.page.set.showAnnotation({index:e.index,id:e.id,top:e.top})},DV.Annotation.prototype.show=function(e){this.viewer.activeAnnotation&&this.viewer.activeAnnotation.id!=this.id&&this.viewer.activeAnnotation.hide(),this.viewer.annotationToLoadId=null,this.viewer.elements.window.addClass("DV-coverVisible"),this.annotationEl.find("div.DV-annotationBG").css({display:"block",opacity:1}),this.annotationEl.addClass("DV-activeAnnotation"),this.viewer.activeAnnotation=this,this.viewer.helpers.addObserver("trackAnnotation"),this.viewer.helpers.setActiveAnnotationInNav(this.id),this.active=!0,this.pageEl.parent(".DV-set").addClass("DV-activePage"),e&&e.edit&&this.showEdit()},DV.Annotation.prototype.hide=function(e){parseInt(this.viewer.elements.currentPage.text(),10);"page"!==this.type&&this.annotationEl.find("div.DV-annotationBG").css({opacity:0,display:"none"});var t=this.annotationEl.hasClass("DV-editing");this.annotationEl.removeClass("DV-editing DV-activeAnnotation"),e===!0&&this.viewer.elements.window.removeClass("DV-coverVisible"),this.hide.preventRemovalOfCoverClass!==!1&&this.hide.preventRemovalOfCoverClass||(this.viewer.elements.window.removeClass("DV-coverVisible"),this.hide.preventRemovalOfCoverClass=!1),this.viewer.activeAnnotation=null,this.viewer.events.trackAnnotation.h=null,this.viewer.events.trackAnnotation.id=null,this.viewer.events.trackAnnotation.combined=null,this.active=!1,this.viewer.pageSet.setActiveAnnotation(null),this.viewer.helpers.removeObserver("trackAnnotation"),this.viewer.helpers.setActiveAnnotationInNav(),this.pageEl.parent(".DV-set").removeClass("DV-activePage"),this.removeConnector(!0),t&&this.viewer.helpers.saveAnnotation({target:this.annotationEl},"onlyIfText")},DV.Annotation.prototype.toggle=function(){this.viewer.activeAnnotation&&this.viewer.activeAnnotation!=this&&this.viewer.activeAnnotation.hide(),"page"!==this.type&&(this.annotationEl.toggleClass("DV-activeAnnotation"),1==this.active?this.hide(!0):this.show())},DV.Annotation.prototype.drawConnector=function(){1!=this.active&&(this.viewer.elements.window.addClass("DV-annotationActivated"),this.annotationEl.addClass("DV-annotationHover"))},DV.Annotation.prototype.removeConnector=function(){1!=this.active&&(this.viewer.elements.window.removeClass("DV-annotationActivated"),this.annotationEl.removeClass("DV-annotationHover"))},DV.Annotation.prototype.showEdit=function(){this.annotationEl.addClass("DV-editing"),this.viewer.$(".DV-annotationTitleInput",this.annotationEl).focus()},DV.Annotation.prototype.remove=function(){DV.jQuery("#DV-annotation-"+this.id).remove()},DV.DragReporter=function(e,t,i,n){this.viewer=e,this.dragClassName="DV-dragging",this.sensitivityY=1,this.sensitivityX=1,this.oldPageY=0,_.extend(this,n),this.dispatcher=i,this.toWatch=this.viewer.$(t),this.boundReporter=_.bind(this.mouseMoveReporter,this),this.boundMouseUpReporter=_.bind(this.mouseUpReporter,this),this.boundMouseDownReporter=_.bind(this.mouseDownReporter,this),this.setBinding()},DV.DragReporter.prototype.shouldIgnore=function(e){if(!this.ignoreSelector)return!1;var t=this.viewer.$(e.target);return t.parents().is(this.ignoreSelector)||t.is(this.ignoreSelector)},DV.DragReporter.prototype.mouseUpReporter=function(e){return this.shouldIgnore(e)?!0:(e.preventDefault(),clearInterval(this.updateTimer),void this.stop())},DV.DragReporter.prototype.oldPositionUpdater=function(){this.oldPageY=this.pageY},DV.DragReporter.prototype.stop=function(){this.toWatch.removeClass(this.dragClassName),this.toWatch.unbind("mousemove")},DV.DragReporter.prototype.setBinding=function(){this.toWatch.mouseup(this.boundMouseUpReporter),this.toWatch.mousedown(this.boundMouseDownReporter)},DV.DragReporter.prototype.unBind=function(){this.toWatch.unbind("mouseup",this.boundMouseUpReporter),this.toWatch.unbind("mousedown",this.boundMouseDownReporter)},DV.DragReporter.prototype.destroy=function(){this.unBind(),this.toWatch=null},DV.DragReporter.prototype.mouseDownReporter=function(e){return this.shouldIgnore(e)?!0:(e.preventDefault(),this.pageY=e.pageY,this.pageX=e.pageX,this.oldPageY=e.pageY,this.updateTimer=setInterval(_.bind(this.oldPositionUpdater,this),1200),this.toWatch.addClass(this.dragClassName),void this.toWatch.mousemove(this.boundReporter))},DV.DragReporter.prototype.mouseMoveReporter=function(e){if(this.shouldIgnore(e))return!0;e.preventDefault();var t=Math.round(this.sensitivityX*(this.pageX-e.pageX)),i=Math.round(this.sensitivityY*(this.pageY-e.pageY)),n=t>0?"right":"left",s=i>0?"down":"up";this.pageY=e.pageY,this.pageX=e.pageX,(0!==i||0!==t)&&this.dispatcher({event:e,deltaX:t,deltaY:i,directionX:n,directionY:s})},DV.Elements=function(e){this._viewer=e;for(var t=DV.Schema.elements,i=0,n=t.length;n>i;i++)this.getElement(t[i])},DV.Elements.prototype.getElement=function(e){this[e.name]=this._viewer.$(e.query)},DV.History=Backbone.History.extend({constructor:function(e){this.viewer=e,Backbone.History.apply(this,arguments)},register:function(e,t){this.route(e,t)},loadUrl:function(e){var t=this.fragment=this.getFragment(e),i=_.any(this.handlers,function(e){if(e.route.test(t)){var i=e.route.exec(t);return e.callback.apply(null,i.slice(1)),!0}});return i}}),DV.Page=function(e,t){this.viewer=e,this.index=t.index;for(var i in t)this[i]=t[i];this.el=this.viewer.$(this.el),this.parent=this.el.parent(),this.pageNumberEl=this.el.find("span.DV-pageNumber"),this.pageInsertEl=this.el.find(".DV-pageNoteInsert"),this.removedOverlayEl=this.el.find(".DV-overlay"),this.pageImageEl=this.getPageImage(),this.pageEl=this.el.find("div.DV-page"),this.annotationContainerEl=this.el.find("div.DV-annotations"),this.coverEl=this.el.find("div.DV-cover"),this.loadTimer=null,this.hasLayerPage=!1,this.hasLayerRegional=!1,this.imgSource=null,this.offset=null,this.pageNumber=null,this.zoom=1,this.annotations=[];var n=this.viewer.models;this.model_document=n.document,this.model_pages=n.pages,this.model_annotations=n.annotations,this.model_chapters=n.chapters},DV.Page.prototype.setPageImage=function(){this.pageImageEl=this.getPageImage()},DV.Page.prototype.getPageImage=function(){return this.el.find("img.DV-pageImage")},DV.Page.prototype.getOffset=function(){return this.model_document.offsets[this.index]},DV.Page.prototype.getPageNoteHeight=function(){return this.model_pages.pageNoteHeights[this.index]},DV.Page.prototype.draw=function(e){if(this.index!==e.index||e.force||this.imgSource!=this.model_pages.imageURL(this.index)){this.index=e.force===!0?this.index:e.index;var t=this.model_pages.imageURL(this.index);if(this.el[0].className=this.el[0].className.replace(/\s*DV-page-\d+/,"")+" DV-page-"+(this.index+1),this.viewer.options.ads&&e.force&&this.pageNumber!=this.index+1&&(this.index+1)%this.viewer.options.ads.interval===0&&(this.el.find(".advert").length||(this.el.append('<div class="advert" data-ad-type="cube"></div>'),this.viewer.options.ads.args?this.el.find(".advert").ad(this.viewer.options.ads.args):this.el.find(".advert").ad())),this.imgSource!=t&&(this.imgSource=t,this.loadImage()),this.sizeImage(),this.position(),this.pageNumber!=this.index+1||e.forceAnnotationRedraw===!0){for(var i=0;i<this.annotations.length;i++)this.annotations[i].remove(),delete this.annotations[i],this.hasLayerRegional=!1,this.hasLayerPage=!1;this.annotations=[];var n=this.model_annotations.byPage[this.index];if(n)for(var i=0;i<n.length;i++){var s=n[i];if(s.id===this.viewer.annotationToLoadId){var r=!0;s.id===this.viewer.annotationToLoadEdit&&(e.edit=!0),this.viewer.openingAnnotationFromHash&&(this.viewer.helpers.jump(this.index,(s.top||0)-37),this.viewer.openingAnnotationFromHash=!1)}else var r=!1;"page"==s.type?this.hasLayerPage=!0:"regional"==s.type&&(this.hasLayerRegional=!0);var o=this.viewer.$(".DV-allAnnotations .DV-annotation[rel=aid-"+s.id+"]").clone();o.attr("id","DV-annotation-"+s.id),o.find(".DV-img").each(function(){var e=DV.jQuery(this);e.attr("src",e.attr("data-src"))});var a=new DV.Annotation({renderedHTML:o,id:s.id,page:this,pageEl:this.pageEl,annotationContainerEl:this.annotationContainerEl,pageNumber:this.pageNumber,state:"collapsed",top:s.y1,left:s.x1,width:s.x1+s.x2,height:s.y1+s.y2,active:r,showEdit:e.edit,type:s.type});this.annotations.push(a)}this.pageInsertEl.toggleClass("visible",!this.hasLayerPage),this.renderMeta({pageNumber:this.index+1}),this.drawRemoveOverlay()}this.setPageType()}},DV.Page.prototype.drawRemoveOverlay=function(){this.removedOverlayEl.toggleClass("visible",!!this.viewer.models.removedPages[this.index+1])},DV.Page.prototype.setPageType=function(){this.annotations.length>0?(this.hasLayerPage===!0&&this.el.addClass("DV-layer-page"),this.hasLayerRegional===!0&&this.el.addClass("DV-layer-page")):this.el.removeClass("DV-layer-page DV-layer-regional")},DV.Page.prototype.position=function(){this.el.css({top:this.model_document.offsets[this.index]}),this.offset=this.getOffset()},DV.Page.prototype.renderMeta=function(e){this.pageNumberEl.text("p. "+e.pageNumber),this.pageNumber=e.pageNumber},DV.Page.prototype.loadImage=function(){this.loadTimer&&(clearTimeout(this.loadTimer),delete this.loadTimer),this.el.removeClass("DV-loaded").addClass("DV-loading");var e=this.model_pages,t=DV.jQuery(new Image),i=this,n=function(){i.loadTimer&&(clearTimeout(i.loadTimer),delete i.loadTimer),t.bind("load readystatechange",function(n){if(this.complete||"complete"==this.readyState&&"readystatechange"==n.type){if(t!=i._currentLoader)return;e.updateHeight(t[0],i.index),i.drawImage(t[0].src),clearTimeout(i.loadTimer),delete i.loadTimer}});var n=i.model_pages.imageURL(i.index);i._currentLoader=t,t[0].src=n};this.loadTimer=setTimeout(n,150),this.viewer.pageSet.redraw()},DV.Page.prototype.sizeImage=function(){var e=this.model_pages.width,t=this.model_pages.getPageHeight(this.index);this.coverEl.css({width:e,height:t}),this.pageImageEl.css({width:e,height:t}),this.el.css({height:t,width:e}),this.pageEl.css({height:t,width:e})},DV.Page.prototype.drawImage=function(e){var t=this.model_pages.getPageHeight(this.index);if(e==this.pageImageEl.attr("src")&&t==this.pageImageEl.attr("height"))return void this.el.addClass("DV-loaded").removeClass("DV-loading");this.pageImageEl.replaceWith('<img width="'+this.model_pages.width+'" height="'+t+'" class="DV-pageImage" src="'+e+'" />'),this.setPageImage(),this.sizeImage(),this.el.addClass("DV-loaded").removeClass("DV-loading"),this.el.find(".DV-page").css({"background-image":"url("+e+")","background-size":"100% auto","background-repeat":"none"});this.el;_.each(this.viewer.onPageLoadedCallbacks,_.bind(function(e){e(this)},this)),this.showEditionSectionLabel()},DV.Page.prototype.showEditionSectionLabel=function(){var e=this;if(e.pageNumber!==this.index+1)return!1;if(1==e.pageNumber)return!1;e.el.find(".DV-edition-section-label").remove();var t=_.find(this.viewer.schema.data.sections,function(t){return t.page==e.pageNumber?t:void 0});if(t&&""!==t.title){var i=$("<div />");t.edition&&t.section?i.addClass("DV-edition-section-label").append("<h3>"+t.section+" section from "+t.title+' regional edition <a href="/faq"><i class="icon-question-sign"></i></a></h3>'):t.edition&&!t.section&&i.addClass("DV-edition-section-label").append("<h3>From "+t.title+' regional edition <a href="/faq"><i class="icon-question-sign"></i></a></h3>'),$(this.el).prepend(i)}},DV.PageSet=function(e){this.currentPage=null,this.pages={},this.viewer=e,this.zoomText()},DV.PageSet.prototype.execute=function(e,t){this.pages.each(function(i){i[e].apply(i,t)})},DV.PageSet.prototype.buildPages=function(e){e=e||{};for(var t=this.getPages(),i=0;i<t.length;i++){var n=t[i];n.set=this,n.index=i,this.pages[n.label]=new DV.Page(this.viewer,n),1==n.currentPage&&(this.currentPage=this.pages[n.label])}this.viewer.models.annotations.renderAnnotations()},DV.PageSet.prototype.getPages=function(){var e=[];return this.viewer.elements.sets.each(_.bind(function(t,i){var n=$(i).hasClass("DV-page-"+this.viewer.api.currentPage());e.push({label:"p"+t,el:i,index:t,pageNumber:t+1,currentPage:n})},this)),e},DV.PageSet.prototype.getCurrentPage=function(){var e=this.getPages();return _.find(e,function(e){return e.currentPage?e:void 0})},DV.PageSet.prototype.reflowPages=function(){this.viewer.models.pages.resize(),this.viewer.helpers.setActiveAnnotationLimits(),this.redraw(!1,!0)},DV.PageSet.prototype.simpleReflowPages=function(){this.viewer.helpers.setActiveAnnotationLimits(),this.redraw(!1,!1)},DV.PageSet.prototype.cleanUp=function(){this.viewer.activeAnnotation&&this.viewer.activeAnnotation.hide(!0)},DV.PageSet.prototype.zoom=function(e){if(this.viewer.models.document.zoomLevel!==e.zoomLevel){var t=this.viewer.models.document.currentIndex(),i=this.viewer.models.document.offsets[t],n=1*this.viewer.models.document.zoomLevel,s=e.zoomLevel/n,r=this.viewer.elements.window.scrollTop();this.viewer.models.document.zoom(e.zoomLevel);var o=parseInt(r,10)>parseInt(i,10)?r-i:i-r,a=o/this.viewer.models.pages.height;if(this.reflowPages(),this.zoomText(),"ViewThumbnails"===this.viewer.state&&(this.viewer.thumbnails.setZoom(e.zoomLevel),this.viewer.thumbnails.lazyloadThumbnails()),"ViewDocument"===this.viewer.state&&this.viewer.$(".DV-annotationRegion.DV-accessRedact").each(function(){var e=DV.jQuery(this);e.css({top:Math.round(e.position().top*s),left:Math.round(e.position().left*s),width:Math.round(e.width()*s),height:Math.round(e.height()*s)})}),null!=this.viewer.activeAnnotation){var h={index:this.viewer.models.document.currentIndex(),top:this.viewer.activeAnnotation.top,id:this.viewer.activeAnnotation.id};this.viewer.activeAnnotation=null,this.showAnnotation(h),this.viewer.helpers.setActiveAnnotationLimits(this.viewer.activeAnnotation)}else{var l=Math.round(this.viewer.models.pages.height*a);this.viewer.helpers.jump(this.viewer.models.document.currentIndex(),l)}}},DV.PageSet.prototype.zoomText=function(){var e=this.viewer.models.pages.getPadding(),t=this.viewer.models.pages.zoomLevel;this.viewer.$(".DV-textPage").width(t),this.viewer.elements.collection.css({width:t+e})},DV.PageSet.prototype.draw=function(e){for(var t=0,i=e.length;i>t;t++){var n=this.pages[e[t].label];n&&n.draw({index:e[t].index,pageNumber:e[t].index+1})}},DV.PageSet.prototype.redraw=function(e,t){this.pages.p0&&this.pages.p0.draw({force:!0,forceAnnotationRedraw:t}),this.pages.p1&&this.pages.p1.draw({force:!0,forceAnnotationRedraw:t}),this.pages.p2&&this.pages.p2.draw({force:!0,forceAnnotationRedraw:t}),t&&this.viewer.activeAnnotation&&this.viewer.helpers.jump(this.viewer.activeAnnotation.page.index,this.viewer.activeAnnotation.position.top-37)},DV.PageSet.prototype.setActiveAnnotation=function(e,t){this.viewer.annotationToLoadId=e,this.viewer.annotationToLoadEdit=t?e:null},DV.PageSet.prototype.showAnnotation=function(e,t){if(t=t||{},"ViewAnnotation"===this.viewer.state){var i=this.viewer.$(".DV-allAnnotations div[rel=aid-"+e.id+"]")[0].offsetTop;return this.viewer.elements.window.scrollTop(i+10,"fast"),this.viewer.helpers.setActiveAnnotationInNav(e.id),void(this.viewer.activeAnnotationId=e.id)}this.viewer.helpers.removeObserver("trackAnnotation"),this.viewer.activeAnnotationId=null,null!=this.viewer.activeAnnotation&&this.viewer.activeAnnotation.hide(),this.setActiveAnnotation(e.id,t.edit);for(var n="page"==this.viewer.models.annotations.byId[e.id].type,s=n?-7:36,i=e.top-s,r=0;2>=r;r++)if(this.pages["p"+r])for(var o=0;o<this.pages["p"+r].annotations.length;o++)if(this.pages["p"+r].annotations[o].id===e.id)return this.viewer.helpers.jump(e.index,i),void this.pages["p"+r].annotations[o].show(t);this.viewer.helpers.jump(e.index,i)},DV.Thumbnails=function(e){this.currentIndex=0,this.zoomLevel=null,this.scrollTimer=null,this.imageUrl=e.schema.document.resources.page.image.replace(/\{size\}/,"small"),this.pageCount=e.schema.document.pages,this.viewer=e,this.resizeId=_.uniqueId(),this.sizes={},this.BASE_WIDTH=60,this.BASE_HEIGHT=75,_.each(_.range(this.viewer.models.document.ZOOM_RANGES.length+1),_.bind(function(e){var t,i;0===e?(t=this.BASE_WIDTH,i=this.BASE_HEIGHT):(t=this.BASE_WIDTH+30*e,i=this.BASE_HEIGHT+40*e),this.sizes[String(e)]={w:t,h:i}},this)),_.bindAll(this,"lazyloadThumbnails","loadThumbnails")},DV.Thumbnails.prototype.render=function(){this.el=this.viewer.$(".DV-thumbnails"),this.getCurrentIndex(),this.getZoom(),this.viewer.schema.data.sections.length>0?_.each(this.viewer.schema.data.sections,_.bind(function(e){this.buildThumbnails(e.page,e.endPage)},this)):this.buildThumbnails(1,this.pageCount),this.setZoom(),this.viewer.elements.window.unbind("scroll.thumbnails").bind("scroll.thumbnails",this.lazyloadThumbnails);var e="resize.thumbnails-"+this.resizeId;DV.jQuery(window).unbind(e).bind(e,this.lazyloadThumbnails)},DV.Thumbnails.prototype.buildThumbnails=function(e,t){1==e&&this.el.empty();var i,n=null,s=null;this.viewer.schema.data.sections.length>0&&(i=_.find(this.viewer.schema.data.sections,function(t){return t.page==e?t:void 0}),n=i.section,s=i.edition);var r=JST.thumbnails({page:e,endPage:t,zoom:this.zoomLevel,imageUrl:this.imageUrl,section:n,edition:s});this.el.html(this.el.html()+r),this.highlightCurrentPage(),_.defer(this.loadThumbnails)},DV.Thumbnails.prototype.getCurrentIndex=function(){this.currentIndex=this.viewer.models.document.currentIndex()},DV.Thumbnails.prototype.highlightCurrentPage=function(){this.currentIndex=this.viewer.models.document.currentIndex(),this.viewer.$(".DV-thumbnail.DV-selected").removeClass("DV-selected");var e=this.viewer.$(".DV-thumbnail:eq("+this.currentIndex+")");if(e.length){e.addClass("DV-selected");var t=this.viewer.$(".DV-pages");t.scrollTop(t.scrollTop()+e.position().top-12)}},DV.Thumbnails.prototype.setZoom=function(e){this.getZoom(e);var t=this.sizes[this.zoomLevel];this.viewer.$(".DV-hasHeight").each(function(){var e=t.w/this.width;DV.jQuery(this).css({height:this.height*e})}),this.viewer.$(".DV-hasWidth").each(function(){var e=t.h/this.height,i=DV.jQuery(this);i.add(i.prev(".DV-thumbnail-shadow")).css({width:this.width*e})}),this.el[0].className=this.el[0].className.replace(/DV-zoom-\d\s*/,""),this.el.addClass("DV-zoom-"+this.zoomLevel)},DV.Thumbnails.prototype.getZoom=function(e){return this.zoomLevel=null!==e&&"undefined"!=typeof e?_.indexOf(this.viewer.models.document.ZOOM_RANGES,e):_.indexOf(this.viewer.models.document.ZOOM_RANGES,this.viewer.models.document.zoomLevel)},DV.Thumbnails.prototype.setImageSize=function(e,t){var i=this.sizes[this.zoomLevel],n=i.w/e.width,s=e.height*n;if(Math.abs(i.h-s)>10||/DV-has/.test(t[0].className))if(s<i.h)t.addClass("DV-hasHeight").css({height:s});else{var r=s/i.h,o=i.w/r;t.add(t.prev(".DV-thumbnail-shadow")).addClass("DV-hasWidth").css({width:o})}t.attr({src:e.src})},DV.Thumbnails.prototype.lazyloadThumbnails=function(){"ViewThumbnails"==this.viewer.state&&(this.scrollTimer&&clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(this.loadThumbnails,100))},DV.Thumbnails.prototype.loadThumbnails=function(){var e=this.viewer,t=e.$(".DV-thumbnails").width(),i=e.elements.window.height(),n=e.elements.window.scrollTop(),s=n+i,r=e.$(".DV-thumbnail:first-child"),o=r.outerHeight(!0),a=r.outerWidth(!0),h=Math.floor(t/a),l=Math.floor(n/o*h),u=Math.ceil(s/o*h);l-=l%h+1,u+=h-u%h,this.loadImages(l,u)},DV.Thumbnails.prototype.loadImages=function(e,t){var i=this,n=this.viewer,s=e>0?":gt("+e+")":"",r=t<=this.pageCount?":lt("+t+")":"";n.$(".DV-thumbnail"+r+s).each(function(){var e=n.$(this);if(!e.attr("src")){var t=n.$(".DV-thumbnail-image",e),s=new Image;DV.jQuery(s).bind("load",_.bind(i.setImageSize,i,s,t)).attr({src:t.attr("data-src")})}})},DV.Schema=function(){this.models={},this.views={},this.states={},this.helpers={},this.events={},this.elements={},this.text={},this.data={zoomLevel:700,pageWidthPadding:40,additionalPaddingOnPage:30,state:{page:{previous:0,current:0,next:1}}}},DV.Schema.prototype.importCanonicalDocument=function(e){_.uniqueId(),e.sections=_.sortBy(e.sections||[],function(e){return e.page}),e.annotations=e.annotations||[],e.canonicalURL=e.canonical_url,this.document=DV.jQuery.extend(!0,{},e),this.data.title=e.title,this.data.totalPages=e.pages,this.data.totalAnnotations=e.annotations.length,this.data.sections=e.sections,this.data.chapters=[],this.data.annotationsById={},this.data.annotationsByPage={},_.each(e.annotations,DV.jQuery.proxy(this.loadAnnotation,this))},DV.Schema.prototype.loadAnnotation=function(e){e.id&&(e.server_id=e.id);var t=e.page-1;if(e.id=e.id||_.uniqueId(),e.title=e.title||"Untitled Note",e.text=e.content||"",e.access=e.access||"public",e.type=e.location&&e.location.image?"region":"page","region"===e.type){var i=DV.jQuery.map(e.location.image.split(","),function(e){return parseInt(e,10)});e.y1=i[0],e.x2=i[1],e.y2=i[2],e.x1=i[3]}else"page"===e.type&&(e.y1=0,e.x2=0,e.y2=0,e.x1=0);this.data.annotationsById[e.id]=e;var n=this.data.annotationsByPage[t]=this.data.annotationsByPage[t]||[],s=_.sortedIndex(n,e,function(e){return e.y1});return n.splice(s,0,e),e},DV.Schema.elements=[{name:"browserDocument",query:document},{name:"browserWindow",query:window},{name:"header",query:"div.DV-header"},{name:"viewer",query:"div.DV-docViewer"},{name:"window",query:"div.DV-pages"},{name:"sets",query:"div.DV-set"},{name:"pages",query:"div.DV-page"},{name:"metas",query:"div.DV-pageMeta"},{name:"bar",query:"div.DV-bar"},{name:"currentPage",query:"span.DV-currentPage"},{name:"well",query:"div.DV-well"},{name:"collection",query:"div.DV-pageCollection"},{name:"annotations",query:"div.DV-allAnnotations"},{name:"navigation",query:"div.DV-navigation"},{name:"chaptersContainer",query:"div.DV-chaptersContainer"},{name:"searchInput",query:"input.DV-searchInput"},{name:"textCurrentPage",query:"span.DV-textCurrentPage"},{name:"coverPages",query:"div.DV-cover"},{name:"fullscreen",query:"div.DV-fullscreen"},{name:"footer",query:"div.DV-footer"},{name:"text",query:".DV-textContents"},{name:"articleText",query:"div.DV-articleTextContents"}],DV.model.Annotations=function(e){this.LEFT_MARGIN=25,this.PAGE_NOTE_FUDGE=window.dc&&dc.account&&(dc.account.isOwner||dc.account.isReviewer)?46:26,this.viewer=e,this.offsetsAdjustments=[],this.offsetAdjustmentSum=0,this.saveCallbacks=[],this.deleteCallbacks=[],this.byId=this.viewer.schema.data.annotationsById,this.byPage=this.viewer.schema.data.annotationsByPage,this.bySortOrder=this.sortAnnotations()},DV.model.Annotations.prototype={render:function(e){var t,i,n,s,r=(this.viewer.models.document,this.viewer.models.pages),o=r.zoomFactor(),a=e;"page"===a.type?(t=i=n=s=0,a.top=0):(n=Math.round(a.y1*o),s=Math.round(a.y2*o),t<this.LEFT_MARGIN&&(t=this.LEFT_MARGIN),t=Math.round(a.x1*o),i=Math.round(a.x2*o),a.top=n-5),a.owns_note=a.owns_note||!1,a.width=r.width,a.pageNumber=a.page,a.author=a.author||"",a.author_organization=a.author_organization||"",a.bgWidth=a.width,a.bWidth=a.width-16,a.excerptWidth=i-t-8,a.excerptMarginLeft=t-3,a.excerptHeight=s-n,a.index=a.page-1,a.image=r.imageURL(a.index),a.imageTop=n+1,a.tabTop=(35>n?35-n:0)+8,a.imageWidth=r.width,a.imageHeight=Math.round(r.height*o),a.regionLeft=t,a.regionWidth=i-t,a.regionHeight=s-n,a.excerptDSHeight=a.excerptHeight-6,a.DSOffset=3,"public"==a.access?a.accessClass="DV-accessPublic":"exclusive"==a.access?a.accessClass="DV-accessExclusive":"private"==a.access&&(a.accessClass="DV-accessPrivate"),a.orderClass="",a.options=this.viewer.options,1==a.position&&(a.orderClass+=" DV-firstAnnotation"),a.position==this.bySortOrder.length&&(a.orderClass+=" DV-lastAnnotation");var h="page"===a.type?"pageAnnotation":"annotation";return JST[h](a)},sortAnnotations:function(){return this.bySortOrder=_.sortBy(_.values(this.byId),function(e){return 1e4*e.page+e.y1})},renderAnnotations:function(){if(this.viewer.options.showAnnotations!==!1){for(var e=0;e<this.bySortOrder.length;e++){var t=this.bySortOrder[e];t.of=_.indexOf(this.byPage[t.page-1],t),t.position=e+1,t.html=this.render(t)}this.renderAnnotationsByIndex()}},renderAnnotationsByIndex:function(){var e=_.map(this.bySortOrder,function(e){return e.html}),t=e.join("").replace(/id="DV-annotation-(\d+)"/g,function(e,t){return'id="DV-listAnnotation-'+t+'" rel="aid-'+t+'"'});this.viewer.$("div.DV-allAnnotations").html(t),this.renderAnnotationsByIndex.rendered=!0,this.renderAnnotationsByIndex.zoomLevel=this.zoomLevel,this.updateAnnotationOffsets(),_.defer(_.bind(this.updateAnnotationOffsets,this))},refreshAnnotation:function(e){this.viewer;e.html=this.render(e),DV.jQuery.$("#DV-annotation-"+e.id).replaceWith(e.html)},removeAnnotation:function(e){delete this.byId[e.id];var t=e.page-1;this.byPage[t]=_.without(this.byPage[t],e),this.sortAnnotations(),DV.jQuery("#DV-annotation-"+e.id+", #DV-listAnnotation-"+e.id).remove(),this.viewer.api.redraw(!0),_.isEmpty(this.byId)&&this.viewer.open("ViewDocument")},updateAnnotationOffsets:function(){this.offsetsAdjustments=[],this.offsetAdjustmentSum=0;var e=this.viewer.models.document,t=this.viewer.$("div.DV-allAnnotations"),i=t.find(".DV-pageNote"),n=this.viewer.models.pages.pageNoteHeights;0==this.viewer.$("div.DV-docViewer").hasClass("DV-viewAnnotations")&&t.addClass("DV-getHeights");var s=[];_.each(_.select(this.bySortOrder,function(e){return"page"==e.type}),function(e,t){e.el=i[t],s[e.pageNumber]=e});for(var r=0,o=e.totalPages;o>=r;r++){if(n[r]=0,s[r]){var a=this.viewer.$(s[r].el).height()+this.PAGE_NOTE_FUDGE;n[r-1]=a,this.offsetAdjustmentSum+=a}this.offsetsAdjustments[r]=this.offsetAdjustmentSum}t.removeClass("DV-getHeights")},fireSaveCallbacks:function(e){_.each(this.saveCallbacks,function(t){t(e)})},fireDeleteCallbacks:function(e){_.each(this.deleteCallbacks,function(t){t(e)})},getAnnotations:function(e){return this.byPage[e]},getFirstAnnotation:function(){return _.first(this.bySortOrder)},getNextAnnotation:function(e){var t=this.byId[e];return this.bySortOrder[_.indexOf(this.bySortOrder,t)+1]},getPreviousAnnotation:function(e){var t=this.byId[e];return this.bySortOrder[_.indexOf(this.bySortOrder,t)-1]},getAnnotation:function(e){if(e.id)return this.byId[e.id];if(e.index&&!e.id)throw new Error("looked up an annotation without an id");return this.byId[e]}},DV.model.Articles=function(e){this.viewer=e,this.loadedPages={},this.pendingPages={},this.events=_.extend({pageArticlesLoaded:function(e){return this.trigger("pageArticlesLoaded",e)}},Backbone.Events),e.options.articles?(this.options=e.options.articles,this.init()):this.options=null},DV.model.Articles.prototype={pageUrl:function(e){var t=this.options.page.url;return t=t.replace(/\{\s*?page\s*?\}/,e)},articleImageUrl:function(e,t,i){var n=this.options.image.url;return n=n.replace(/\{\s*?page\s*?\}/,e),n=n.replace(/\{\s*?slug\s*?\}/,t),n=n.replace(/\{\s*?size\s*?\}/,i)},getPageElement:function(e){return"undefined"==typeof e&&(e=this.viewer.api.currentPage()),this.viewer.elements.pages[(e-1)%3]},render:function(e,t){var i=$(this.getPageElement(t)),n=(this.viewer.models.document.zoomLevel,1),s=e.articles,r="ontouchstart"in window;if(SVG.supported){var o=i.data("canvas"),a=i.data("page-num");if(o&&a==t)return;o||(o=SVG(i[0]),o.size("100%","100%").style("z-index",99999999999).attr("class","PAGECANVASBAM").attr("viewBox","0 0 "+e.size.width+" "+e.size.height),i.data("canvas",o)),i.data("page-num",t),o.clear(),_.each(s,_.bind(function(e){if(t==i.data("page-num")){var s=e.body;this.viewer.options.ads&&(s='<div class="advert" data-ad-type="cube"></div>'+s);var a=o.group();if(a.attr("class","article-"+e.slug),_.each(e.coords,function(e){var t=[];_.each(e,function(e){t.push([e[0]*n,e[1]*n])}),a.polyline(t).fill({color:"orange",opacity:.5})}),a.opacity(e.slug==this.activeArticleSlug?.5:0),r||(a.on("mouseover",function(){a.opacity(.2+a.opacity())}),a.on("mouseout",function(){var e=a.opacity()-.2;a.opacity(0>e?0:e)})),r)var h="touchstart",l="touchmove",u="touchend";else var h="mousedown",l="mousemove",u="mouseup";var c,d=0,p=0;a.on(h,function(){c=!1}).on(l,function(){c=!0}).on(u,_.bind(function(){c||(p>0?(this.moveToArticle(t,e.slug,!0),clearTimeout(d)):(this.activeArticle=e,this.markRegionActive(e.slug),this.showOptions(t,e.slug),this.viewer.history.navigate("page/"+e.start_page+"/article/"+e.slug,{trigger:!1})),p+=1,d=setTimeout(function(){p=0},500))},this))}},this))}this.events.pageArticlesLoaded(t)},moveToArticle:function(e,t,i){var n=this.loadedPages[e];if("undefined"==typeof n)return!1;
var s,r,o,a=($(this.getPageElement(e)),this.viewer.models.document.ZOOM_RANGES),h=this.viewer.models.pages.zoomLevel,l=this.viewer.elements.window,u=_.find(n.articles,function(e){return e.slug==t}),c=function(e){return e[0]},d=function(e){return e[1]},p=function(e){return e[0]},f=_.flatten(u.coords,!0),g=_.min(f,c),m=_.min(f,d),v=_.max(f,p),y=_.max(f,d);if(this.activeArticle=u,i){for(var w=a.length;w-->0;)if(s=a[w]/n.size.width,r=(v[0]-g[0])*s,o=(y[1]-m[1])*s,r<=l.width()){newZoomLevel=a[w];break}this.viewer.pageSet.zoom({zoomLevel:newZoomLevel})}else s=h/n.size.width,r=(v[0]-g[0])*s,o=(y[1]-m[1])*s;var b=($(window).width()-r)/2,x=g[0]*s-b,V=m[1]*s+this.viewer.models.document.getOffset(e-1);return 0>x&&(x=0),l.scrollLeft(x),l.scrollTop(V),this.markRegionActive(u.slug),this.showOptions(e,u.slug),this.viewer.history.navigate("page/"+u.start_page+"/article/"+u.slug,{trigger:!1}),!1},showOptions:function(e,t){this.cleanUp();var i,n=!1,s=this.getArticle(e,t);s.continuations&&s.continuations.length>1&&(i=s.continuations.sort(),n=i[i.indexOf(Number(e))+1]?i[i.indexOf(Number(e))+1]:i[0]),this.showArticleShareLinks(s),s.legible&&this.viewer.$(".DV-read-article").show().click(_.bind(function(){return this.savePosition(),this.viewer.open("ViewArticleText",e,t),!1},this)),n&&this.viewer.$(".DV-jump-to-continuation").css("display","inline-block").click(_.bind(function(){this.cleanUp(),this.viewer.helpers.jump(n-1),this.pendingPages[n].done(_.bind(function(){this.markRegionActive(t),this.showOptions(n,t)},this))},this)).show()},showArticleShareLinks:function(e){var t;this.viewer.$(".DV-shareTools").hide(),this.viewer.$("#DV-selection-shareTools .dropdown-menu").empty(),this.viewer.helpers.setupShareLinks("#DV-selection-shareTools .dropdown-menu","article"),t=e.type_rollup.match(/image/gi)?"image":e.type_rollup.match(/article/gi)?"article":e.type_rollup.match(/comic/gi)?"comic":e.type_rollup.match(/advertisement/gi)?"advertisement":"content",this.viewer.$("#DV-selection-shareTools .content-type").text(t),this.viewer.$("#DV-selection-shareTools").css("display","inline-block")},getArticle:function(e,t){return _.find(this.loadedPages[e].articles,function(e){return e.slug===t})},showBackToPaper:function(e,t){this.cleanUp();var i=this.getArticle(e,t);this.viewer.$(".DV-back-to-search").hide(),this.viewer.$(".DV-read-article").hide(),this.showArticleShareLinks(i),this.viewer.$(".DV-back-to-paper").show().click(_.bind(function(i){i.preventDefault(),this.cleanUp(),this.viewer.open("ViewDocument");var n=Math.round(this.viewer.models.pages.baseWidth*this.viewer.models.pages.zoomFactor());this.viewer.elements.collection.css({width:n+this.viewer.models.pages.getPadding()}),this.restorePosition(),this.markRegionActive(t),this.showOptions(e,t)},this))},getData:function(){var e=this.viewer.api.currentPage();isNaN(e)||(this.drawArticlesForPage(e),this.drawArticlesForPage(e+1))},drawArticlesForPage:function(e){return"undefined"!=typeof this.loadedPages[e]?this.render(this.loadedPages[e],e):(_.keys(this.pendingPages).length>0&&_.each(_.keys(this.pendingPages),_.bind(function(t){var i=t!=String(e)&&t!=String(e+1)&&t!=String(e-1);i&&this.pendingPages[t].abort()},this)),void(-1==_.keys(this.pendingPages).indexOf(String(e))&&(this.pendingPages[e]=$.getJSON(this.pageUrl(e),_.bind(function(t){this.loadedPages[e]=t,this.render(t,e)},this)))))},markRegionActive:function(e){$(".article-"+this.activeArticleSlug).each(function(){this.instance.opacity(0)}),this.activeArticleSlug=e,$(".article-"+this.activeArticleSlug).each(function(){this.instance.opacity(.5)})},cleanUp:function(){this.viewer.$(".DV-read-article").hide().off(),this.viewer.$(".DV-shareTools").show(),this.viewer.$("#DV-selection-shareTools").hide(),this.viewer.$(".DV-back-to-paper").hide().off(),this.viewer.$(".DV-jump-to-continuation").hide().off(),this.viewer.$(".DV-back-to-search").show()},savePosition:function(){this.position={top:$(".DV-pages").scrollTop(),left:$(".DV-pages").scrollLeft()}},restorePosition:function(){$(".DV-pages").scrollTop(this.position.top),$(".DV-pages").scrollLeft(this.position.left)},init:function(){var e=_.bind(function(t){var i=this.viewer.pageSet.getCurrentPage(),n=t.el;$(i.el).data().id==$(n).data().id&&(this.getData(),this.viewer.onPageLoadedCallbacks.splice(this.viewer.onPageLoadedCallbacks.indexOf(e),1)),this.viewer.api.onPageChange(_.bind(this.getData,this))},this);this.viewer.api.onPageLoaded(e)}},DV.model.Chapters=function(e){this.viewer=e,this.loadChapters()},DV.model.Chapters.prototype={loadChapters:function(){var e=this.viewer.schema.data.sections,t=this.chapters=this.viewer.schema.data.chapters=[];_.each(e,function(e){e.id||(e.id=_.uniqueId())});for(var i=0,n=0,s=this.viewer.schema.data.totalPages;s>n;n++){var r=e[i],o=e[i+1];o&&n>=o.page-1&&(i+=1,r=o),!r||r.page>n+1||(t[n]=r.id)}},getChapterId:function(e){return this.chapters[e]},getChapterPosition:function(e){for(var t=0,i=this.chapters.length;i>t;t++)if(this.chapters[t]===e)return t}},DV.model.Document=function(e){this.viewer=e,this.currentPageIndex=0,this.offsets=[],this.baseHeightsPortion=[],this.baseHeightsPortionOffsets=[],this.paddedOffsets=[],this.originalPageText={},this.totalDocumentHeight=0,this.totalPages=0,this.additionalPaddingOnPage=0,this.ZOOM_RANGES=[400,700,850,1e3,1200,1400,1600,1800,2200,2600];var t=this.viewer.schema.data;this.state=t.state,this.baseImageURL=t.baseImageURL,this.canonicalURL=t.canonicalURL,this.additionalPaddingOnPage=t.additionalPaddingOnPage,this.pageWidthPadding=t.pageWidthPadding,this.totalPages=t.totalPages,this.onPageChangeCallbacks=[],this.onComputeOffsetsCallbacks=[];var i=this.zoomLevel=this.viewer.options.zoom||t.zoomLevel;"auto"==i&&(this.zoomLevel=t.zoomLevel);var n=_.last(this.ZOOM_RANGES);this.zoomLevel>n&&(this.zoomLevel=n)},DV.model.Document.prototype={setPageIndex:function(e){return this.currentPageIndex!==e&&this.viewer.elements.sets.find(".DV-page").css("background-image","none"),this.currentPageIndex=e,this.viewer.elements.currentPage.text(this.currentPage()),this.viewer.helpers.setActiveChapter(this.viewer.models.chapters.getChapterId(e)),_.each(this.onPageChangeCallbacks,function(e){e()}),e},currentPage:function(){return this.currentPageIndex+1},currentIndex:function(){return this.currentPageIndex},nextPage:function(){var e=this.currentIndex()+1;return e>=this.totalPages?this.currentIndex():this.setPageIndex(e)},previousPage:function(){var e=this.currentIndex()-1;return 0>e?this.currentIndex():this.setPageIndex(e)},zoom:function(e,t){(this.zoomLevel!=e||t===!0)&&(this.zoomLevel=e,this.viewer.models.pages.resize(this.zoomLevel),this.viewer.models.annotations.renderAnnotations(),this.computeOffsets(),0==this.ZOOM_RANGES.indexOf(this.zoomLevel)?(this.viewer.$(".DV-zoomBox .dec").attr("disabled",!0),this.viewer.$(".DV-zoomBox .inc").attr("disabled",!1)):this.ZOOM_RANGES.indexOf(this.zoomLevel)>=this.ZOOM_RANGES.length-1?(this.viewer.$(".DV-zoomBox .inc").attr("disabled",!0),this.viewer.$(".DV-zoomBox .dec").attr("disabled",!1)):(this.viewer.$(".DV-zoomBox .inc").attr("disabled",!1),this.viewer.$(".DV-zoomBox .dec").attr("disabled",!1)))},computeOffsets:function(){for(var e=this.viewer.models.annotations,t=0,i=0,n=this.totalPages,s=0,r=this.viewer.elements.window[0].scrollTop,o=250,a=0;n>a;a++){e.offsetsAdjustments[a]&&(i=e.offsetsAdjustments[a]),this.viewer.options.ads&&a>0&&a%this.viewer.options.ads.interval===0&&(i+=o),this.viewer.schema.data.sections.length>0&&a>0&&this.viewer.models.pages.isSectionStart(a-1)&&(i+=$(".DV-edition-section-label").outerHeight());var h=this.viewer.models.pages.getPageHeight(a),l=this.offsets[a]||0,u=this.offsets[a]=i+t;if(l!==u&&r>u){var c=u-l-s;r+=c,s+=c}this.baseHeightsPortion[a]=Math.round((h+this.additionalPaddingOnPage)/3),this.baseHeightsPortionOffsets[a]=0==a?0:u-this.baseHeightsPortion[a],t+=h+this.additionalPaddingOnPage}t+=i,t!=this.totalDocumentHeight&&(s=0!=this.totalDocumentHeight?s:t-this.totalDocumentHeight,this.viewer.helpers.setDocHeight(t,s),this.totalDocumentHeight=t),_.each(this.onComputeOffsetsCallbacks,function(e){e()})},getOffset:function(e){return this.offsets[e]},resetRemovedPages:function(){this.viewer.models.removedPages={}},addPageToRemovedPages:function(e){this.viewer.models.removedPages[e]=!0},removePageFromRemovedPages:function(e){this.viewer.models.removedPages[e]=!1},redrawPages:function(){_.each(this.viewer.pageSet.pages,function(e){e.drawRemoveOverlay()}),this.viewer.thumbnails&&this.viewer.thumbnails.render()},redrawReorderedPages:function(){this.viewer.thumbnails&&this.viewer.thumbnails.render()}},DV.model.Pages=function(e){this.viewer=e,this.averageHeight=0,this.pageHeights=[],this.pageNoteHeights=[],this.BASE_HEIGHT=1900,this.widths={xsmall:320,small:600,normal:1200,large:1800,xlarge:2200,xxlarge:2600},this.BASE_WIDTH=this.widths.normal,this.DEFAULT_PADDING=100,this.REDUCED_PADDING=38,this.MINI_PADDING=18,this.zoomLevel=this.viewer.models.document.zoomLevel,this.baseWidth=this.BASE_WIDTH,this.baseHeight=this.BASE_HEIGHT,this.width=this.zoomLevel,this.height=this.baseHeight*this.zoomFactor(),this.numPagesLoaded=0},DV.model.Pages.prototype={imageURL:function(e){var t=this.viewer.schema.document.resources.page.image,i=this.zoomLevel>this.BASE_WIDTH?"large":"normal";_.each(this.widths,_.bind(function(e,t){this.zoomLevel==e&&(i=t)},this));var n=e+1;return this.viewer.schema.document.resources.page.zeropad&&(n=this.zeroPad(n,5)),t=t.replace(/\{size\}/,i),t=t.replace(/\{page\}/,n)},zeroPad:function(e,t){for(var i=e.toString();i.length<t;)i="0"+i;return i},getPadding:function(){return this.viewer.options.mini?this.MINI_PADDING:"auto"==this.viewer.options.zoom?this.REDUCED_PADDING:this.DEFAULT_PADDING},zoomFactor:function(){return this.zoomLevel/this.BASE_WIDTH},resize:function(e){var t=this.viewer.models.pages.DEFAULT_PADDING;if(e){if(e==this.zoomLevel)return;var i=this.zoomFactor();this.zoomLevel=e||this.zoomLevel;var n=this.zoomFactor()/i;this.width=Math.round(this.baseWidth*this.zoomFactor()),this.height=Math.round(this.height*n),this.averageHeight=Math.round(this.averageHeight*n)}this.viewer.elements.sets.width(this.zoomLevel),this.viewer.elements.collection.css({width:this.width+t}),this.viewer.$(".DV-textContents").css({"font-size":.02*this.zoomLevel+"px"})},updateHeight:function(e,t){var i=this.getPageHeight(t),n=e.height*(this.zoomLevel>this.BASE_WIDTH?this.BASE_WIDTH/e.width:1);if(e.width<this.baseWidth&&(n*=this.baseWidth/e.width),this.setPageHeight(t,n),this.averageHeight=(this.averageHeight*this.numPagesLoaded+n)/(this.numPagesLoaded+1),this.numPagesLoaded+=1,i!==n&&(this.viewer.models.document.computeOffsets(),this.viewer.pageSet.simpleReflowPages(),!this.viewer.activeAnnotation&&t<this.viewer.models.document.currentIndex())){var s=Math.round(n*this.zoomFactor()-i);this.viewer.elements.window[0].scrollTop+=s}},setPageHeight:function(e,t){this.pageHeights[e]=Math.round(t)},getPageHeight:function(e){var t=this.pageHeights[e];return Math.round(t?t*this.zoomFactor():this.height)},isSectionStart:function(e){var t=_.find(this.viewer.schema.data.sections,function(t){return t.page==e+1?t:void 0});return t?!0:!1}},DV.Schema.events={zoom:function(e){var t=this.viewer,i=function(){var i=t.models.document,n=t.elements.window,s=t.models.pages,r=i.currentPageIndex,o=(n.scrollTop()+n.height()/2-i.offsets[r])/s.getPageHeight(r),a=t.elements.collection.width()>n.width()?(n.scrollLeft()+n.width()/2-i.pageWidthPadding)/s.width:.5;t.pageSet.zoom({zoomLevel:e});var h=o*s.getPageHeight(r)+i.offsets[r]-n.height()/2,l=a*s.width+i.pageWidthPadding-n.width()/2;n.scrollTop(h),l>0&&n.scrollLeft(l);var u=t.models.document.ZOOM_RANGES;return t.dragReporter.sensitivity=u[u.length-1]==e?1.5:1,t.notifyChangedState(),!0};t.confirmStateChange?t.confirmStateChange(i):i()},drawPages:function(){if("ViewDocument"==this.viewer.state){var e=this.models.document,t=this.elements.window[0],i=e.baseHeightsPortionOffsets,n=this.viewer.scrollPosition=t.scrollTop,s=n+this.viewer.$(t).height()/3,r=_.sortedIndex(i,n),o=_.sortedIndex(i,s);i[r]==n&&r++&&o++;{var a=this.helpers.sortPages(o-1);e.totalPages}e.currentPage()!=r&&e.setPageIndex(r-1),this.drawPageAt(a,o-1)}},drawPageAt:function(e,t){var i=0==t,n=t==this.models.document.totalPages-1;i&&(t+=1);var s=[{label:e[0],index:t-1},{label:e[1],index:t},{label:e[2],index:t+1}];n&&s.pop(),s[i?0:s.length-1].currentPage=!0,this.viewer.pageSet.draw(s)},check:function(){var e=this.viewer;if(e.busy===!1){e.busy=!0;for(var t=0;t<this.viewer.observers.length;t++)this[e.observers[t]].call(this);e.busy=!1}},loadText:function(e,t){e=e?parseInt(e,10):this.models.document.currentIndex(),this._previousTextIndex=e;var i=this,n=function(n){var s=parseInt(e,10)+1;i.viewer.$(".DV-textContents").replaceWith('<pre class="DV-textContents">'+n+"</pre>"),i.elements.currentPage.text(s),i.elements.textCurrentPage.text("p. "+s),i.models.document.setPageIndex(e),i.helpers.setActiveChapter(i.models.chapters.getChapterId(e)),"editText"!=i.viewer.openEditor||s in i.models.document.originalPageText||(i.models.document.originalPageText[s]=n),"editText"==i.viewer.openEditor&&i.viewer.$(".DV-textContents").attr("contentEditable",!0).addClass("DV-editing"),t&&t.call(i.helpers)};if(i.viewer.schema.text[e])return n(i.viewer.schema.text[e]);var s=DV.jQuery.proxy(function(t){n(i.viewer.schema.text[e]=t)},this);this.viewer.$(".DV-textContents").text("");var r=i.viewer.schema.document.resources.page.text.replace("{page}",e+1),o=this.helpers.isCrossDomain(r);o&&(r+="?callback=?"),DV.jQuery[o?"getJSON":"get"](r,{},s)},resetTracker:function(){this.viewer.activeAnnotation=null,this.trackAnnotation.combined=null,this.trackAnnotation.h=null},trackAnnotation:function(){var e=this.viewer,t=this.helpers,i=this.elements.window[0].scrollTop;if(e.activeAnnotation){var n=e.activeAnnotation,s=this.trackAnnotation;s.id!=n.id&&(s.id=n.id,t.setActiveAnnotationLimits(n)),!e.activeAnnotation.annotationEl.hasClass("DV-editing")&&(i>s.h||i<s.combined)&&(n.hide(!0),e.pageSet.setActiveAnnotation(null),e.activeAnnotation=null,s.h=null,s.id=null,s.combined=null)}else e.pageSet.setActiveAnnotation(null),e.activeAnnotation=null,s.h=null,s.id=null,s.combined=null,t.removeObserver("trackAnnotation")}},DV.Schema.events.ViewAnnotation={next:function(){var e=this.viewer,t=e.activeAnnotationId,i=this.models.annotations,n=null===t?i.getFirstAnnotation():i.getNextAnnotation(t);return n?(e.pageSet.showAnnotation(n),void this.helpers.setAnnotationPosition(n.position)):!1},previous:function(){var e=this.viewer,t=e.activeAnnotationId,i=this.models.annotations,n=t?i.getPreviousAnnotation(t):i.getFirstAnnotation();return n?(e.pageSet.showAnnotation(n),void this.helpers.setAnnotationPosition(n.position)):!1},search:function(e){return e.preventDefault(),this.viewer.open("ViewSearch"),!1}},DV.Schema.events.ViewDocument={next:function(){var e=this.models.document.nextPage();this.helpers.jump(e)},previous:function(){var e=this.models.document.previousPage();this.helpers.jump(e)},search:function(e){return e.preventDefault(),this.viewer.open("ViewSearch"),!1}},DV.Schema.events.ViewSearch={next:function(){var e=this.models.document.nextPage();this.loadText(e),this.viewer.open("ViewText")},previous:function(){var e=this.models.document.previousPage();this.loadText(e),this.viewer.open("ViewText")},search:function(e){return e.preventDefault(),this.helpers.getSearchResponse(this.elements.searchInput.val()),!1}},DV.Schema.events.ViewText={next:function(){var e=this.models.document.nextPage();this.loadText(e)},previous:function(){var e=this.models.document.previousPage();this.loadText(e)},search:function(e){return e.preventDefault(),this.viewer.open("ViewSearch"),!1}},DV.Schema.events.ViewThumbnails={next:function(){var e=this.models.document.nextPage();this.helpers.jump(e)},previous:function(){var e=this.models.document.previousPage();this.helpers.jump(e)},search:function(e){return e.preventDefault(),this.viewer.open("ViewSearch"),!1}},_.extend(DV.Schema.events,{handleHashChangeViewDocumentPage:function(e){var t=parseInt(e,10)-1;"ViewDocument"===this.viewer.state?(this.viewer.pageSet.cleanUp(),this.helpers.jump(t)):(this.models.document.setPageIndex(t),this.viewer.open("ViewDocument"))},handleHashChangeViewDocumentAnnotation:function(e,t){var i=parseInt(e,10)-1,t=parseInt(t,10);"ViewDocument"===this.viewer.state?this.viewer.pageSet.showAnnotation(this.viewer.models.annotations.byId[t]):(this.models.document.setPageIndex(i),this.viewer.pageSet.setActiveAnnotation(t),this.viewer.openingAnnotationFromHash=!0,this.viewer.open("ViewDocument"))},handleHashChangeViewAnnotationAnnotation:function(e){var e=parseInt(e,10),t=this.viewer;"ViewAnnotation"===t.state?t.pageSet.showAnnotation(this.viewer.models.annotations.byId[e]):(t.activeAnnotationId=e,this.viewer.open("ViewAnnotation"))},handleHashChangeViewArticle:function(e,t){var i=this.viewer,n=_.bind(function(i){i==e&&(this.moveToArticle(e,t),this.showOptions(e,t),this.events.off("pageArticlesLoaded",n))},i.models.articles);i.models.articles.events.on("pageArticlesLoaded",n),this.handleHashChangeViewDocumentPage(e)},handleHashChangeDefault:function(){this.viewer.pageSet.cleanUp(),this.models.document.setPageIndex(0),"ViewDocument"===this.viewer.state?this.helpers.jump(0):this.viewer.open("ViewDocument")},handleHashChangeViewText:function(e){var t=parseInt(e,10)-1;"ViewText"===this.viewer.state?this.events.loadText(t):(this.models.document.setPageIndex(t),this.viewer.open("ViewText"))},handleHashChangeViewPages:function(){"ViewThumbnails"!=this.viewer.state&&this.viewer.open("ViewThumbnails")},handleHashChangeViewSearchRequest:function(e,t){var i=parseInt(e,10)-1;this.elements.searchInput.val(decodeURIComponent(t)),"ViewSearch"!==this.viewer.state&&this.models.document.setPageIndex(i),this.viewer.open("ViewSearch")},handleHashChangeViewEntity:function(e,t,i,n){e=parseInt(e,10)-1,t=decodeURIComponent(t),this.elements.searchInput.val(t),this.models.document.setPageIndex(e),this.states.ViewEntity(t,parseInt(i,10),parseInt(n,10))}}),_.extend(DV.Schema.events,{handleNavigation:function(e){var t=this.viewer.$(e.target),i=t.closest(".DV-trigger"),n=t.closest(".DV-annotationMarker"),s=t.closest(".DV-chapter");if(i.length){if(t.hasClass("DV-expander"))return s.toggleClass("DV-collapsed");if(n.length){{var r=n[0].id.replace("DV-annotationMarker-",""),o=this.models.annotations.getAnnotation(r);parseInt(o.index,10)+1}"ViewText"===this.viewer.state?this.loadText(o.index):("ViewThumbnails"===this.viewer.state&&this.viewer.open("ViewDocument"),this.viewer.pageSet.showAnnotation(o))}else{if(!s.length)return!1;s.removeClass("DV-collapsed");{var a=parseInt(s[0].id.replace("DV-chapter-",""),10),h=parseInt(this.models.chapters.getChapterPosition(a),10);parseInt(h,10)+1}if("ViewText"===this.viewer.state)this.loadText(h);else{if("ViewDocument"!==this.viewer.state&&"ViewThumbnails"!==this.viewer.state)return!1;this.helpers.jump(h),"ViewThumbnails"===this.viewer.state&&this.viewer.open("ViewDocument")}}}}}),DV.Schema.helpers={HOST_EXTRACTOR:/https?:\/\/([^\/]+)\//,annotationClassName:".DV-annotation",bindEvents:function(e){var t=this.events.compile("zoom"),i=e.models.document,n=(_.indexOf(i.ZOOM_RANGES,i.zoomLevel),this.viewer);n.zoomControls=n.$(".DV-zoomBox").html(JST.zoomControls),n.$(".DV-zoomBox").delegate(".inc","click",function(){var e=_.indexOf(i.ZOOM_RANGES,i.zoomLevel)+1;i.ZOOM_RANGES[parseInt(e,10)]&&e>=0&&t(i.ZOOM_RANGES[parseInt(e,10)])}),n.$(".DV-zoomBox").delegate(".dec","click",function(){var e=_.indexOf(i.ZOOM_RANGES,i.zoomLevel)-1;i.ZOOM_RANGES[parseInt(e,10)]&&e>=0&&t(i.ZOOM_RANGES[parseInt(e,10)])}),n.$(".DV-zoomBox").delegate(".resize","click",function(){n.helpers.autoZoomPage()});var s=(n.history,n.compiled);s.next=this.events.compile("next"),s.previous=this.events.compile("previous");e.states;n.$(".DV-navControls").delegate("span.DV-next","click",s.next),n.$(".DV-navControls").delegate("span.DV-previous","click",s.previous),n.$(".DV-annotationView").delegate(".DV-trigger","click",function(t){t.preventDefault(),e.open("ViewAnnotation")}),n.$(".DV-documentView").delegate(".DV-trigger","click",function(){e.open("ViewDocument")}),n.$(".DV-thumbnailsView").delegate(".DV-trigger","click",function(){e.open("ViewThumbnails")}),n.$(".DV-textView").delegate(".DV-trigger","click",function(){e.open("ViewText")}),n.$(".DV-allAnnotations").delegate(".DV-annotationGoto .DV-trigger","click",DV.jQuery.proxy(this.gotoPage,this)),n.$("form.DV-searchDocument").submit(this.events.compile("search")),n.$(".DV-searchBar").delegate(".DV-closeSearch","click",function(t){t.preventDefault(),e.open("ViewText")}),n.$(".DV-searchBox").delegate(".DV-searchInput-cancel","click",DV.jQuery.proxy(this.clearSearch,this)),n.$(".DV-searchResults").delegate("span.DV-resultPrevious","click",DV.jQuery.proxy(this.highlightPreviousMatch,this)),n.$(".DV-searchResults").delegate("span.DV-resultNext","click",DV.jQuery.proxy(this.highlightNextMatch,this)),n.$(".DV-trigger").bind("selectstart",function(){return!1}),this.elements.viewer.delegate(".DV-fullscreen","click",_.bind(this.openFullScreen,this));var r=DV.jQuery.proxy(this.annotationBridgeToggle,this),o=this.elements.collection;o.delegate(".DV-annotationTab","click",r),o.delegate(".DV-annotationRegion","click",DV.jQuery.proxy(this.annotationBridgeShow,this)),o.delegate(".DV-annotationNext","click",DV.jQuery.proxy(this.annotationBridgeNext,this)),o.delegate(".DV-annotationPrevious","click",DV.jQuery.proxy(this.annotationBridgePrevious,this)),o.delegate(".DV-showEdit","click",DV.jQuery.proxy(this.showAnnotationEdit,this)),o.delegate(".DV-cancelEdit","click",DV.jQuery.proxy(this.cancelAnnotationEdit,this)),o.delegate(".DV-saveAnnotation","click",DV.jQuery.proxy(this.saveAnnotation,this)),o.delegate(".DV-saveAnnotationDraft","click",DV.jQuery.proxy(this.saveAnnotation,this)),o.delegate(".DV-deleteAnnotation","click",DV.jQuery.proxy(this.deleteAnnotation,this)),o.delegate(".DV-pageNumber","click",_.bind(this.permalinkPage,this,"document")),o.delegate(".DV-textCurrentPage","click",_.bind(this.permalinkPage,this,"text")),o.delegate(".DV-annotationTitle","click",_.bind(this.permalinkAnnotation,this)),o.delegate(".DV-permalink","click",_.bind(this.permalinkAnnotation,this)),n.$(".DV-thumbnails").delegate(".DV-thumbnail-page","click",function(e){var t=n.$(e.currentTarget);if(!n.openEditor){var i=t.closest(".DV-thumbnail").attr("data-pageNumber");n.helpers.autoZoomPage(),n.history.navigate("page/"+i,{trigger:!0})}}),n.$(".DV-descriptionToggle").live("click",function(e){e.preventDefault(),e.stopPropagation(),n.$(".DV-descriptionText").toggle(),n.$(".DV-descriptionToggle").toggleClass("DV-showDescription")});var a=DV.jQuery.proxy(n.pageSet.cleanUp,this);this.elements.window.live("mousedown",function(t){var i=n.$(t.target);return i.parents().is(".DV-annotation")||i.is(".DV-annotation")?!0:void(e.elements.window.hasClass("DV-coverVisible")&&i.width()-parseInt(t.clientX,10)>=15&&a())});var h=n.schema.document.id;1==DV.jQuery.browser.msie?(this.elements.browserDocument.bind("focus."+h,DV.jQuery.proxy(this.focusWindow,this)),this.elements.browserDocument.bind("focusout."+h,DV.jQuery.proxy(this.focusOut,this))):(this.elements.browserWindow.bind("focus."+h,DV.jQuery.proxy(this.focusWindow,this)),this.elements.browserWindow.bind("blur."+h,DV.jQuery.proxy(this.blurWindow,this))),this.elements.window.bind("scroll."+h,DV.jQuery.proxy(this.focusWindow,this)),this.elements.coverPages.live("mousedown",a),this.setupShareLinks(".DV-shareTools .dropdown-menu")},unbindEvents:function(){var e=this.viewer,t=e.schema.document.id;1==DV.jQuery.browser.msie?(this.elements.browserDocument.unbind("focus."+t),this.elements.browserDocument.unbind("focusout."+t)):(e.helpers.elements.browserWindow.unbind("focus."+t),e.helpers.elements.browserWindow.unbind("blur."+t)),e.helpers.elements.browserWindow.unbind("scroll."+t),_.each(e.observers,function(t){e.helpers.removeObserver(t)})},ensureAnnotationImages:function(){this.viewer.$(".DV-img[data-src]").each(function(){var e=DV.jQuery(this);e.attr("src",e.attr("data-src"))})},startCheckTimer:function(){var e=this.viewer,t=function(){e.events.check()};this.viewer.checkTimer=setInterval(t,100)},stopCheckTimer:function(){clearInterval(this.viewer.checkTimer)},blurWindow:function(){this.viewer.isFocus===!0&&(this.viewer.isFocus=!1,this.stopCheckTimer())},focusOut:function(){return this.viewer.activeElement==document.activeElement?(this.viewer.isFocus=!1,void this.viewer.helpers.stopCheckTimer()):(this.viewer.activeElement=document.activeElement,void(this.viewer.isFocus=!0))},focusWindow:function(){this.viewer.isFocus!==!0&&(this.viewer.isFocus=!0,this.startCheckTimer())},permalinkPage:function(e,t){if("text"==e)var i=this.viewer.models.document.currentPage();else{var n=this.viewer.$(t.target).closest(".DV-set").attr("data-id"),s=this.viewer.pageSet.pages[n],i=s.pageNumber;this.jump(s.index)}this.viewer.history.save(e+"/p"+i)},permalinkAnnotation:function(e){var t=this.viewer.$(e.target).closest(".DV-annotation").attr("data-id"),i=this.viewer.models.annotations.getAnnotation(t),n=i.server_id||i.id;"ViewDocument"==this.viewer.state?(this.viewer.pageSet.showAnnotation(i),this.viewer.history.save("document/p"+i.pageNumber+"/a"+n)):this.viewer.history.save("annotation/a"+n)},setDocHeight:function(e,t){this.elements.bar.css("height",e),this.elements.window[0].scrollTop+=t},getWindowDimensions:function(){var e={height:window.innerHeight?window.innerHeight:this.elements.browserWindow.height(),width:this.elements.browserWindow.width()};return e},isCrossDomain:function(e){var t=e.match(this.HOST_EXTRACTOR);return t&&t[1]!=window.location.host},resetScrollState:function(){this.elements.window.scrollTop(0)},gotoPage:function(e){e.preventDefault();var t=this.viewer.$(e.target).parents(".DV-annotation").attr("rel").replace("aid-",""),i=this.models.annotations.getAnnotation(t),n=this.viewer;"ViewDocument"!==n.state&&(this.models.document.setPageIndex(i.index),n.open("ViewDocument"))},openFullScreen:function(){var e=this.viewer.schema.document,t=e.canonicalURL.replace(/#\S+$/,""),i=this.models.document.currentPage();switch(this.viewer.state){case"ViewAnnotation":t+="#annotation/a"+this.viewer.activeAnnotationId;break;case"ViewDocument":t+="#document/p"+i;break;case"ViewSearch":t+="#search/p"+i+"/"+encodeURIComponent(this.elements.searchInput.val());break;case"ViewText":t+="#text/p"+i;break;case"ViewThumbnails":t+="#pages/p"+i}window.open(t,"documentviewer","toolbar=no,resizable=yes,scrollbars=no,status=no")},sortPages:function(e){return 0==e||e%3==1?["p0","p1","p2"]:e%3==2?["p1","p2","p0"]:e%3==0?["p2","p0","p1"]:void 0},addObserver:function(e){this.removeObserver(e),this.viewer.observers.push(e)},removeObserver:function(e){for(var t=this.viewer.observers,i=0,n=t.length;n>i;i++)e===t[i]&&t.splice(i,1)},toggleContent:function(e){this.elements.viewer.removeClass("DV-viewArticleText DV-viewText DV-viewSearch DV-viewDocument DV-viewAnnotations DV-viewThumbnails").addClass("DV-"+e)},jump:function(e,t,i){t=t?parseInt(t,10):0;var n=this.models.document.getOffset(parseInt(e,10))+t;this.elements.window[0].scrollTop=n,this.models.document.setPageIndex(e),i&&this.viewer.pageSet.redraw(!0),"ViewThumbnails"===this.viewer.state&&this.viewer.thumbnails.highlightCurrentPage()},shift:function(e){var t=this.elements.window,i=t.scrollTop()+e.deltaY,n=t.scrollLeft()+e.deltaX;t.scrollTop(i),t.scrollLeft(n)},getAppState:function(){var e=this.models.document,t=0==e.currentIndex()?1:e.currentPage();return{page:t,zoom:e.zoomLevel,view:this.viewer.state}},constructPages:function(){for(var e=[],t=this.viewer.schema.data.totalPages<3?this.viewer.schema.data.totalPages:3,i=this.models.pages.height,n=0;t>n;n++)e.push(JST.pages({pageNumber:n+1,pageIndex:n,pageImageSource:null,baseHeight:i}));return e.join("")},positionViewer:function(){var e=this.elements.viewer.position();this.elements.viewer.css({position:"absolute",top:e.top,bottom:0,left:0,right:0})},unsupportedBrowser:function(){var e=DV.jQuery.browser;return e.msie&&parseFloat(e.version,10)<=6?(DV.jQuery(this.viewer.options.container).html(JST.unsupported({viewer:this.viewer})),!0):!1},registerHashChangeEvents:function(){var e=this.events,t=this.viewer.history;t.defaultCallback=_.bind(e.handleHashChangeDefault,this.events),t.register(/document\/p(\d*)$/,_.bind(e.handleHashChangeViewDocumentPage,this.events)),t.register(/document\/p(\d*)\/a(\d*)$/,_.bind(e.handleHashChangeViewDocumentAnnotation,this.events)),t.register(/annotation\/a(\d*)$/,_.bind(e.handleHashChangeViewAnnotationAnnotation,this.events)),t.register(/pages$/,_.bind(e.handleHashChangeViewPages,e)),t.register(/page\/(\d*)\/?$/,_.bind(e.handleHashChangeViewDocumentPage,this.events)),t.register(/page\/(\d*)\/article\/([\d\w\-]+)\/?$/,_.bind(e.handleHashChangeViewArticle,this.events)),t.register(/text\/p(\d*)$/,_.bind(e.handleHashChangeViewText,this.events)),t.register(/entity\/p(\d*)\/(.*)\/(\d+):(\d+)$/,_.bind(e.handleHashChangeViewEntity,this.events)),t.register(/search\/p(\d*)\/(.*)$/,_.bind(e.handleHashChangeViewSearchRequest,this.events))},autoZoomPage:function(){var e,t=this.elements.window.outerWidth(!0);e="auto"==this.viewer.options.zoom?t-2*this.viewer.models.pages.getPadding():this.viewer.options.zoom;var i,n,s=[];500>=e?(i=(e+700)/2,s=[e,i,700,850,1e3,1200,1400,1600,1800,2200,2600]):750>=e?(i=100+e,n=200+e,s=[.66*e,e,i,n,1e3,1200,1400,1600,1800,2200,2600]):e>750&&850>=e?(i=(1e3-e)/2+e,s=[.66*e,700,e,i,1e3,1200,1400,1600,1800,2200,2600]):e>850&&1e3>e?(i=(e-700)/2+700,s=[.66*e,700,i,e,1e3,1200,1400,1600,1800,2200,2600]):e>1e3&&1200>=e?(e=850,s=this.viewer.models.document.ZOOM_RANGES):e>1200&&1400>=e?(e=1200,s=this.viewer.models.document.ZOOM_RANGES):e>1400&&1600>=e?(e=1400,s=this.viewer.models.document.ZOOM_RANGES):e>1600&&1800>=e?(e=1600,s=this.viewer.models.document.ZOOM_RANGES):e>1800&&2200>=e?(e=1800,s=this.viewer.models.document.ZOOM_RANGES):e>=2200&&(e=2200,s=this.viewer.models.document.ZOOM_RANGES),this.viewer.models.document.ZOOM_RANGES=s,this.viewer.pageSet.zoom({zoomLevel:e})},handleInitialState:function(){var e=this.viewer.history.loadUrl();if(!e){var t=this.viewer.options;this.viewer.open("ViewDocument"),t.note?this.viewer.pageSet.showAnnotation(this.viewer.models.annotations.byId[t.note]):t.page&&this.jump(t.page-1)}if(this.viewer.options.ads){var i=this.viewer;i.api.onPageChange(function(){i.api.currentPage()>i.options.ads.interval&&i.api.currentPage()%i.options.ads.interval===0&&i.pageSet.pages.p2.el.find(".advert").ad("refresh")})}},setupShareLinks:function(e,t){var i=this.viewer,n=i.$(e),s=_.defaults({Facebook:"http://www.facebook.com/sharer/sharer.php?u=<%= url %>",Twitter:"https://twitter.com/share?url=<%= url %>&text=<%= text %>",Tumblr:"http://www.tumblr.com/share/link?url=<%= url %>&title=<%= text %>"},i.options.socialServices);_.each(s,function(e,s){var r=_.template('<li><a target="_blank" href="<%= href %>"><%= name %></a></li>',{href:e,name:s});if("article"==t){article=i.models.articles.activeArticle;var o={url:encodeURIComponent(window.location.origin+i.history.root+"page/"+article.start_page+"/article/"+article.slug),text:encodeURIComponent(article.title+" from the "+i.schema.document.title)}}else var o={url:encodeURIComponent(window.location.origin+i.history.root),text:encodeURIComponent(i.schema.document.title)};var a=_.template(r,o);n.append(a)}),$('<li><a class="DV-show-embed-code" href="#">Embed</a></li>').on("click",_.bind(this.showEmbedCode,this,t)).appendTo(n)},showEmbedCode:function(e){var t=this.viewer,i=window.location.origin+t.history.root+"?embed=true";"article"==e&&(i=window.location.href);var n=$(JST.embedModal({embed_url:i}));return n.modal(),n.on("hidden",function(){$(this).remove()}),n.on("shown",function(){n.find("textarea")[0].select()}),n.find(".embed-size-select button").on("click",function(){$(this).siblings().removeClass("active"),$(this).addClass("active");
var e={width:null,height:null,embed_url:i},t=_.template('<iframe src="<%= embed_url %>" width="<%= width %>" height="<%= height %>" scrolling="no" frameborder="0"></iframe>');$(this).hasClass("small-embed")?(e.width=300,e.height=600):$(this).hasClass("medium-embed")?(e.width=650,e.height=600):$(this).hasClass("large-embed")&&(e.width=900,e.height=700),n.find("textarea").text(t(e)),n.find("textarea")[0].select()}),!1}},_.extend(DV.Schema.helpers,{getAnnotationModel:function(e){var t=parseInt(e.attr("rel").match(/\d+/),10);return this.models.annotations.getAnnotation(t)},getAnnotationObject:function(e){for(var e=this.viewer.$(e),t=e.attr("id").replace(/DV\-annotation\-|DV\-listAnnotation\-/,""),i=e.closest("div.DV-set").attr("data-id"),n=0;annotationObject=this.viewer.pageSet.pages[i].annotations[n];n++)if(annotationObject.id==t)return e=null,annotationObject;return!1},annotationBridgeToggle:function(e){e.preventDefault();var t=this.getAnnotationObject(this.viewer.$(e.target).closest(this.annotationClassName));t.toggle()},annotationBridgeShow:function(e){e.preventDefault();var t=this.getAnnotationObject(this.viewer.$(e.target).closest(this.annotationClassName));t.show()},annotationBridgeHide:function(e){e.preventDefault();var t=this.getAnnotationObject(this.viewer.$(e.target).closest(this.annotationClassName));t.hide(!0)},annotationBridgeNext:function(e){e.preventDefault();var t=this.getAnnotationObject(this.viewer.$(e.target).closest(this.annotationClassName));t.next()},annotationBridgePrevious:function(e){e.preventDefault();var t=this.getAnnotationObject(this.viewer.$(e.target).closest(this.annotationClassName));t.previous()},setAnnotationPosition:function(e){this.elements.currentPage.text(e)},setActiveAnnotationLimits:function(e){var e=e?e:this.viewer.activeAnnotation;if(e&&null!=e){var t=this.elements,i=e.page,n=e.annotationEl,s=e.position.top*this.models.pages.zoomFactor(),r=this.events.trackAnnotation;"page"===e.type?(r.h=n.outerHeight()+i.getOffset(),r.combined=i.getOffset()-t.window.height()):(r.h=n.height()+s-20+i.getOffset()+i.getPageNoteHeight(),r.combined=s-20+i.getOffset()+i.getPageNoteHeight()-t.window.height())}}}),_.extend(DV.Schema.helpers,{showAnnotations:function(){return this.viewer.options.showAnnotations===!1?!1:_.size(this.models.annotations.byId)>0},renderViewer:function(){var e=this.viewer.schema.document,t=this.constructPages(),i=e.description?e.description:null,n=e.resources.related_article,s=JST.header({options:this.viewer.options,id:e.id,story_url:n,title:e.title||""}),r=JST.footer({options:this.viewer.options}),o=e.resources.pdf;o=o&&this.viewer.options.pdf!==!1?'<a target="_blank" href="'+o+'">Original Document (PDF) &raquo;</a>':"";var a=e.contributor&&e.contributor_organization&&""+e.contributor+", "+e.contributor_organization,h=this.showAnnotations(),l=h&&e.resources.print_annotations,u={options:this.viewer.options,pages:t,header:s,footer:r,pdf_url:o,contributors:a,story_url:n,print_notes_url:l,descriptionContainer:JST.descriptionContainer({description:i}),autoZoom:"auto"==this.viewer.options.zoom,mini:!1},c=this.viewer.options.width,d=this.viewer.options.height;c&&d&&(500>c&&(this.viewer.options.mini=!0,u.mini=!0),DV.jQuery(this.viewer.options.container).css({position:"relative",width:this.viewer.options.width,height:this.viewer.options.height}));var p=this.viewer.options.container,f=DV.jQuery(p);if(!f.length)throw"Document Viewer container element not found: "+p;f.html(JST.viewer(u))},displayNavigation:function(){var e=this.viewer.schema.document,t=!e.description&&!_.size(this.viewer.schema.data.annotationsById)&&!this.viewer.schema.data.sections.length;this.viewer.$(".DV-supplemental").toggleClass("DV-noNavigation",t)},renderSpecificPageCss:function(){for(var e=[],t=1,i=this.models.document.totalPages;i>=t;t++)e.push(".DV-page-"+t+" .DV-pageSpecific-"+t);var n=e.join(", ")+" { display: block; }",s='<style type="text/css" media="all">\n'+n+"\n</style>";DV.jQuery("head").append(s)},renderNavigation:function(){var e=this,t=[],i=JST.navigationExpander({}),n=[],s=[],r=this.viewer.models.boldsId||(this.viewer.models.boldsId=_.uniqueId()),o=function(e,t){for(var i=[],r=e,o=t;o>r;r++)s[r]&&(i.push(s[r]),n[r]="");return i.join("")},a=function(e){var i="#DV-selectedChapter-"+e.id+" #DV-chapter-"+e.id;return t.push(i+" .DV-navChapterTitle"),JST.chapterNav(e)},h=function(i){for(var n=[],s=e.viewer.schema.data.annotationsByPage[i],r=0;r<s.length;r++){var o=s[r];n.push(JST.annotationNav(o)),t.push("#DV-selectedAnnotation-"+o.id+" #DV-annotationMarker-"+o.id+" .DV-navAnnotationTitle")}return n.join("")};if(this.showAnnotations())for(var l=0,u=this.models.document.totalPages;u>l;l++)this.viewer.schema.data.annotationsByPage[l]&&(n[l]=h(l),s[l]=n[l]);var c=this.viewer.schema.data.sections;if(c.length)for(var l=0;l<c.length;l++){var d=c[l],p=c[l+1];d.id=d.id||_.uniqueId(),d.pageNumber=d.page,d.endPage=p?p.page-1:this.viewer.schema.data.totalPages;var f=o(d.pageNumber-1,d.endPage);""!=f?(d.navigationExpander=i,d.navigationExpanderClass="DV-hasChildren",d.noteViews=f,n[d.pageNumber-1]=a(d)):(d.navigationExpanderClass="DV-noChildren",d.noteViews="",d.navigationExpander="",n[d.pageNumber-1]=a(d))}var g=n.join(""),m=this.viewer.$("div.DV-chaptersContainer");m.html(g),m.unbind("click").bind("click",this.events.compile("handleNavigation")),this.viewer.schema.data.sections.length||_.size(this.viewer.schema.data.annotationsById)?m.show():m.hide(),this.displayNavigation(),DV.jQuery("#DV-navigationBolds-"+r,DV.jQuery("head")).remove();var v=t.join(", ")+" { font-weight:bold; color:#000 !important; }",y='<style id="DV-navigationBolds-'+r+'" type="text/css" media="screen,print">\n'+v+"\n</style>";DV.jQuery("head").append(y),m=null},renderComponents:function(){var e=DV.jQuery(this.viewer.options.container),t=e.css("position");"relative"==t||"absolute"==t||this.viewer.options.fixedSize||(DV.jQuery("html, body").css({overflow:"hidden"}),0==e.offset().top&&this.viewer.elements.viewer.css({border:0}));var i=this.showAnnotations(),n=this.models.document.totalPages>1,s=this.viewer.options.search!==!1&&this.viewer.options.text!==!1&&(!this.viewer.options.width||this.viewer.options.width>=540),r=!(i||n||s||this.viewer.options.sidebar),o=this.viewer.$(".DV-annotationView");o[i?"show":"hide"](),s?(this.elements.viewer.addClass("DV-searchable"),this.viewer.$("input.DV-searchInput",e).placeholder({message:"Search",clearClassName:"DV-searchInput-show-search-cancel"})):this.viewer.$(".DV-textView").hide(),n||this.viewer.$(".DV-thumbnailsView").hide(),i||n||s||this.viewer.$(".DV-views").hide(),this.viewer.api.roundTabCorners();this.models.chapters.chapters.length>0;if(this.viewer.$(".DV-navControls").remove(),n||this.viewer.options.sidebar){var a=JST.navControls({totalPages:this.viewer.schema.data.totalPages,totalAnnotations:this.viewer.schema.data.totalAnnotations});this.viewer.$(".DV-navControlsContainer").html(a)}if(this.viewer.$(".DV-fullscreenControl").remove(),this.viewer.schema.document.canonicalURL){var h=JST.fullscreenControl({});r?(this.viewer.$(".DV-collapsibleControls").prepend(h),this.elements.viewer.addClass("DV-hideFooter")):this.viewer.$(".DV-fullscreenContainer").html(h)}this.viewer.options.sidebar&&this.viewer.$(".DV-sidebar").show(),_.defer(_.bind(function(){this.elements.viewer.width()<=700&&(i||n||s)&&this.viewer.$(".DV-controls").addClass("DV-narrowControls")},this)),this.elements.currentPage=this.viewer.$("span.DV-currentPage"),this.models.document.setPageIndex(this.models.document.currentIndex())},reset:function(){this.models.articles.cleanUp(),this.resetNavigationState(),this.cleanUpSearch(),this.viewer.pageSet.cleanUp(),this.removeObserver("drawPages"),this.viewer.dragReporter.unBind(),this.elements.window.scrollTop(0)}}),_.extend(DV.Schema.helpers,{showAnnotationEdit:function(e){var t=this.viewer.$(e.target).closest(this.annotationClassName),i=this.viewer.$(".DV-annotationTextArea",t);t.addClass("DV-editing"),i.focus()},cancelAnnotationEdit:function(e){var t=this.viewer.$(e.target).closest(this.annotationClassName),i=this.getAnnotationModel(t);this.viewer.$(".DV-annotationTitleInput",t).val(i.title),this.viewer.$(".DV-annotationTextArea",t).val(i.text),i.unsaved?this.models.annotations.removeAnnotation(i):t.removeClass("DV-editing")},saveAnnotation:function(e,t){var i=this.viewer.$(e.target),n=i.closest(this.annotationClassName),s=this.getAnnotationModel(n);if(s){if(s.title=this.viewer.$(".DV-annotationTitleInput",n).val(),s.text=this.viewer.$(".DV-annotationTextArea",n).val(),s.owns_note=s.unsaved?!0:s.owns_note,s.owns_note&&(s.author=s.author||dc.account.name,s.author_organization=s.author_organization||dc.account.isReal&&dc.account.organization.name),i.hasClass("DV-saveAnnotationDraft")?s.access="exclusive":n.hasClass("DV-accessExclusive")&&(s.access="public"),!("onlyIfText"!=t||s.title&&"Untitled Note"!=s.title||s.text||s.server_id))return this.models.annotations.removeAnnotation(s);n.removeClass("DV-editing"),this.models.annotations.fireSaveCallbacks(s),this.viewer.api.redraw(!0),this.viewer.activeAnnotation&&this.viewer.pageSet.showAnnotation(s)}},deleteAnnotation:function(e){var t=this.viewer.$(e.target).closest(this.annotationClassName),i=this.getAnnotationModel(t);this.models.annotations.removeAnnotation(i),this.models.annotations.fireDeleteCallbacks(i)}}),_.extend(DV.Schema.helpers,{resetNavigationState:function(){var e=this.elements;e.chaptersContainer.length&&(e.chaptersContainer[0].id=""),e.navigation.length&&(e.navigation[0].id="")},setActiveChapter:function(e){e&&this.elements.chaptersContainer.attr("id","DV-selectedChapter-"+e)},setActiveAnnotationInNav:function(e){null!=e?this.elements.navigation.attr("id","DV-selectedAnnotation-"+e):this.elements.navigation.attr("id","")}}),_.extend(DV.Schema.helpers,{getSearchResponse:function(e){var t=DV.jQuery.proxy(function(e){this.viewer.searchResponse=e;var t=e.results.length>0?!0:!1,i=t?"of "+e.results.length+" ":" ";if(this.viewer.$("span.DV-totalSearchResult").text(i),this.viewer.$("span.DV-searchQuery").text(e.query),t){var n=this.viewer.models.document.currentPage(),s=_.include(e.results,n)?n:e.results[0];this.events.loadText(s-1,this.highlightSearchResponses)}else this.highlightSearchResponses()},this),i=function(){this.viewer.$(".DV-currentSearchResult").text("Search is not available at this time"),this.viewer.$("span.DV-searchQuery").text(e),this.viewer.$(".DV-searchResults").addClass("DV-noResults")},n=this.viewer.schema.document.resources.search.replace("{query}",encodeURIComponent(e));this.viewer.helpers.isCrossDomain(n)&&(n+="&callback=?"),DV.jQuery.ajax({url:n,dataType:"json",success:t,error:i})},acceptInputCallBack:function(){var e=parseInt(this.elements.currentPage.text(),10)-1;e=""===e?0:e,e=0>e?0:e,e=e+1>this.models.document.totalPages?this.models.document.totalPages-1:e;var t=e+1;this.elements.currentPage.text(t),this.viewer.$(".DV-pageNumberContainer input").val(t),"ViewDocument"===this.viewer.state||"ViewThumbnails"===this.viewer.state?this.jump(e):"ViewText"===this.viewer.state&&this.events.loadText(e)},highlightSearchResponses:function(){var e=this.viewer,t=e.searchResponse;if(!t)return!1;var i=t.results,n=this.viewer.$(".DV-currentSearchResult");0==i.length?(n.text("No Results"),this.viewer.$(".DV-searchResults").addClass("DV-noResults")):this.viewer.$(".DV-searchResults").removeClass("DV-noResults");for(var s=0;s<t.results.length;s++)if(this.models.document.currentPage()===t.results[s]){n.text("Page "+(s+1)+" ");break}var r="(\\b|\\B)",o=r+"("+t.query.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&").replace(/\s+/g,"\\s+")+")"+r,a=this.viewer.$(".DV-textContents"),h=a.text(),l=new RegExp(o,"ig"),u=h.replace(l,'$1<span class="DV-searchMatch">$2</span>$3');a.html(u);var c=e.toHighLight?e.toHighLight:0;this.highlightMatch(c),n=null,a=null},highlightEntity:function(e,t){this.viewer.$(".DV-searchResults").addClass("DV-noResults");var i=this.viewer.$(".DV-textContents"),n=i.text(),s=n.substr(0,e),r=n.substr(e,t),o=n.substr(e+t);n=[s,'<span class="DV-searchMatch">',r,"</span>",o].join(""),i.html(n),this.highlightMatch(0)},highlightMatch:function(e){var t=this.viewer.$(".DV-textContents span.DV-searchMatch");if(0==t.length)return!1;var i=this.getCurrentSearchPageIndex(),n=this.viewer.toHighLight;n&&(n!==!1&&(e="last"===n?t.length-1:"first"===n?0:n),n=!1);var s=this.viewer.searchResponse;if(s){if(e===t.length){if(s.results.length===i+1)return;return n="first",void this.events.loadText(s.results[i+1]-1,this.highlightSearchResponses)}if(-1===e)return 0>i-1?!1:(n="last",void this.events.loadText(s.results[i-1]-1,this.highlightSearchResponses));t.removeClass("DV-highlightedMatch")}var r=this.viewer.$(".DV-textContents span.DV-searchMatch:eq("+e+")");r.addClass("DV-highlightedMatch"),this.elements.window[0].scrollTop=r.position().top-50,s&&(s.highlighted=e),t=null,r=null},getCurrentSearchPageIndex:function(){var e=this.viewer.searchResponse;if(!e)return!1;for(var t=this.models.document,i=0,n=e.results.length;n>i;i++)if(e.results[i]===t.currentPage())return i},highlightPreviousMatch:function(e){e.preventDefault(),this.highlightMatch(this.viewer.searchResponse.highlighted-1)},highlightNextMatch:function(e){e.preventDefault(e),this.highlightMatch(this.viewer.searchResponse.highlighted+1)},clearSearch:function(){this.elements.searchInput.val("").keyup().focus()},showEntity:function(e,t,i){this.viewer.$("span.DV-totalSearchResult").text(""),this.viewer.$("span.DV-searchQuery").text(e),this.viewer.$("span.DV-currentSearchResult").text("Searching"),this.events.loadText(this.models.document.currentIndex(),_.bind(this.viewer.helpers.highlightEntity,this.viewer.helpers,t,i))},cleanUpSearch:function(){var e=this.viewer;e.searchResponse=null,e.toHighLight=null,this.elements&&this.elements.searchInput.keyup().blur()}}),DV.Schema.states={InitialLoad:function(){this.helpers.unsupportedBrowser()||(this.helpers.renderViewer(),this.events.elements=this.helpers.elements=this.elements=new DV.Elements(this),this.helpers.renderComponents(),this.helpers.renderNavigation(),this.helpers.renderSpecificPageCss(),this.pageSet=new DV.PageSet(this),this.pageSet.buildPages(),this.helpers.bindEvents(this),this.helpers.positionViewer(),this.models.document.computeOffsets(),this.helpers.addObserver("drawPages"),this.helpers.registerHashChangeEvents(),this.dragReporter=new DV.DragReporter(this,".DV-pageCollection",DV.jQuery.proxy(this.helpers.shift,this),{ignoreSelector:".DV-annotationContent"}),this.helpers.startCheckTimer(),this.helpers.handleInitialState(),_.defer(_.bind(this.helpers.autoZoomPage,this.helpers)))},ViewAnnotation:function(){return this.helpers.reset(),this.helpers.ensureAnnotationImages(),this.activeAnnotationId=null,DV.jQuery.browser.msie&&(this.elements.annotations.css({zoom:0}),this.elements.annotations.css({zoom:1})),this.helpers.toggleContent("viewAnnotations"),this.compiled.next(),!0},ViewDocument:function(){return this.helpers.reset(),this.helpers.addObserver("drawPages"),this.dragReporter.setBinding(),this.elements.window.mouseleave(DV.jQuery.proxy(this.dragReporter.stop,this.dragReporter)),this.helpers.toggleContent("viewDocument"),this.helpers.setActiveChapter(this.models.chapters.getChapterId(this.models.document.currentIndex())),this.helpers.jump(this.models.document.currentIndex()),!0},ViewEntity:function(e,t,i){this.helpers.reset(),this.helpers.toggleContent("viewSearch"),this.helpers.showEntity(e,t,i)},ViewArticleText:function(e,t,i){var n,s;n=this.models.articles.loadedPages[t],s=_.find(n.articles,function(e){return e.slug==i}),this.helpers.reset(),this.models.articles.showBackToPaper(t,i),this.elements.collection.width("100%"),this.$(".DV-textPage").width("auto"),this.helpers.toggleContent("viewArticleText"),this.$(".DV-articleTextContents").text(""),$(".DV-pages").scrollTop(0);var r=t-1,o=s.body;return this.$(".DV-articleTextContents").html(o),this.elements.currentPage.text(t),this.models.document.setPageIndex(r),this.options.ads&&(this.$(".DV-articleTextContents > p:first-child").after('<div class="advert" data-ad-type="cube"></div>'),this.$(".DV-articleTextContents").find(".advert").css({"float":"right",margin:"0 0 10px 10px"}),jQuery(this.$(".DV-articleTextContents").find(".advert")[0]).ad()),!0},ViewSearch:function(){if(this.helpers.reset(),""==this.elements.searchInput.val())this.elements.searchInput.val(e);else var e=this.elements.searchInput.val();return this.helpers.getSearchResponse(e),this.helpers.toggleContent("viewSearch"),!0},ViewText:function(){return this.helpers.reset(),this.pageSet.zoomText(),this.helpers.toggleContent("viewText"),this.events.loadText(),!0},ViewThumbnails:function(){return this.helpers.reset(),this.helpers.toggleContent("viewThumbnails"),this.thumbnails=new DV.Thumbnails(this),this.thumbnails.render(),!0}},DV.Api=function(e){this.viewer=e},DV.Api.prototype={currentPage:function(){return this.viewer.models.document.currentPage()},setCurrentPage:function(e){this.viewer.helpers.jump(e-1)},onPageChange:function(e){this.viewer.models.document.onPageChangeCallbacks.push(e)},onComputeOffsets:function(e){this.viewer.models.document.onComputeOffsetsCallbacks.push(e)},onPageLoaded:function(e){this.viewer.onPageLoadedCallbacks.push(e)},getPageNumberForId:function(e){var t=this.viewer.pageSet.pages[e];return t.index+1},getSchema:function(){return this.viewer.schema.document},getId:function(){return this.viewer.schema.document.id},getModelId:function(){return parseInt(this.getId(),10)},currentZoom:function(){var e=this.viewer.models.document;return e.zoomLevel/e.ZOOM_RANGES[1]},relativeZoom:function(){var e=this.viewer.models,t=this.currentZoom();return t*(e.document.ZOOM_RANGES[1]/e.pages.BASE_WIDTH)},numberOfPages:function(){return this.viewer.models.document.totalPages},getContributor:function(){return this.viewer.schema.document.contributor},getContributorOrganization:function(){return this.viewer.schema.document.contributor_organization},setSections:function(e){e=_.sortBy(e,function(e){return e.page}),this.viewer.schema.data.sections=e,this.viewer.models.chapters.loadChapters(),this.redraw()},getSections:function(){return _.clone(this.viewer.schema.data.sections||[])},getDescription:function(){return this.viewer.schema.document.description},setDescription:function(e){this.viewer.schema.document.description=e,this.viewer.$(".DV-description").remove(),this.viewer.$(".DV-navigation").prepend(JST.descriptionContainer({description:e})),this.viewer.helpers.displayNavigation()},getRelatedArticle:function(){return this.viewer.schema.document.resources.related_article},setRelatedArticle:function(e){this.viewer.schema.document.resources.related_article=e,this.viewer.$(".DV-storyLink a").attr({href:e}),this.viewer.$(".DV-storyLink").toggle(!!e)},getPublishedUrl:function(){return this.viewer.schema.document.resources.published_url},setPublishedUrl:function(e){this.viewer.schema.document.resources.published_url=e},getTitle:function(){return this.viewer.schema.document.title},setTitle:function(e){this.viewer.schema.document.title=e,document.title=e},getSource:function(){return this.viewer.schema.document.source},setSource:function(e){this.viewer.schema.document.source=e},getPageText:function(e){return this.viewer.schema.text[e-1]},setPageText:function(e,t){this.viewer.schema.text[t-1]=e},resetPageText:function(e){var t=this,i=this.viewer.schema.text;e?this.viewer.models.document.originalPageText={}:_.each(this.viewer.models.document.originalPageText,function(e,n){n=parseInt(n,10),e!=i[n-1]&&(t.setPageText(e,n),n==t.currentPage()&&t.viewer.events.loadText())}),"editText"==this.viewer.openEditor&&this.viewer.$(".DV-textContents").attr("contentEditable",!0).addClass("DV-editing")},redraw:function(e){e&&(this.viewer.models.annotations.renderAnnotations(),this.viewer.models.document.computeOffsets()),this.viewer.helpers.renderNavigation(),this.viewer.helpers.renderComponents(),e&&(this.viewer.elements.window.removeClass("DV-coverVisible"),this.viewer.pageSet.buildPages({noNotes:!0}),this.viewer.pageSet.reflowPages())},getAnnotationsBySortOrder:function(){return this.viewer.models.annotations.sortAnnotations()},getAnnotationsByPageIndex:function(e){return this.viewer.models.annotations.getAnnotations(e)},getAnnotation:function(e){return this.viewer.models.annotations.getAnnotation(e)},addAnnotation:function(e){return e=this.viewer.schema.loadAnnotation(e),this.viewer.models.annotations.sortAnnotations(),this.redraw(!0),this.viewer.pageSet.showAnnotation(e,{active:!0,edit:!0}),e},onAnnotationSave:function(e){this.viewer.models.annotations.saveCallbacks.push(e)},onAnnotationDelete:function(e){this.viewer.models.annotations.deleteCallbacks.push(e)},setConfirmStateChange:function(e){this.viewer.confirmStateChange=e},onChangeState:function(e){this.viewer.onStateChangeCallbacks.push(e)},getState:function(){return this.viewer.state},setState:function(e){this.viewer.open(e)},resetRemovedPages:function(){this.viewer.models.document.resetRemovedPages()},addPageToRemovedPages:function(e){this.viewer.models.document.addPageToRemovedPages(e)},removePageFromRemovedPages:function(e){this.viewer.models.document.removePageFromRemovedPages(e)},resetReorderedPages:function(){this.viewer.models.document.redrawReorderedPages()},reorderPages:function(e,t){var i=this.getModelId();this.viewer.models.document.reorderPages(i,e,t)},loadJS:function(e,t){DV.jQuery.getScript(e,t)},roundTabCorners:function(){var e=this.viewer.$(".DV-views > div:visible");e.first().addClass("DV-first"),e.last().addClass("DV-last")},registerHashListener:function(e,t){this.viewer.history.register(e,t)},clearHashListeners:function(){this.viewer.history.defaultCallback=null,this.viewer.history.handlers=[]},unload:function(){this.viewer.helpers.unbindEvents(),DV.jQuery(".DV-docViewer",this.viewer.options.container).remove(),this.viewer.helpers.stopCheckTimer(),delete DV.viewers[this.viewer.schema.document.id]},enterRemovePagesMode:function(){this.viewer.openEditor="removePages"},leaveRemovePagesMode:function(){this.viewer.openEditor=null},enterAddPagesMode:function(){this.viewer.openEditor="addPages"},leaveAddPagesMode:function(){this.viewer.openEditor=null},enterReplacePagesMode:function(){this.viewer.openEditor="replacePages"},leaveReplacePagesMode:function(){this.viewer.openEditor=null},enterReorderPagesMode:function(){this.viewer.openEditor="reorderPages",this.viewer.elements.viewer.addClass("DV-reorderPages")},leaveReorderPagesMode:function(){this.resetReorderedPages(),this.viewer.openEditor=null,this.viewer.elements.viewer.removeClass("DV-reorderPages")},enterEditPageTextMode:function(){this.viewer.openEditor="editText",this.viewer.events.loadText()},leaveEditPageTextMode:function(){this.viewer.openEditor=null,this.resetPageText()}},DV.DocumentViewer=function(e){this.options=e,this.window=window,this.$=this.jQuery,this.schema=new DV.Schema,this.api=new DV.Api(this),this.history=new DV.History(this),e.history?this.history.start(e.history):this.history.start(),this.models=this.schema.models,this.events=_.extend({},DV.Schema.events),this.helpers=_.extend({},DV.Schema.helpers),this.states=_.extend({},DV.Schema.states),this.isFocus=!0,this.openEditor=null,this.confirmStateChange=null,this.activeElement=null,this.observers=[],this.windowDimensions={},this.scrollPosition=null,this.checkTimer={},this.busy=!1,this.annotationToLoadId=null,this.dragReporter=null,this.compiled={},this.tracker={},this.onStateChangeCallbacks=[],this.onPageLoadedCallbacks=[],this.events=_.extend(this.events,{viewer:this,states:this.states,elements:this.elements,helpers:this.helpers,models:this.models,compile:function(){var e=this.viewer,t=arguments[0];return function(){e.events[e.state][t]?e.events[e.state][t].apply(e.events,arguments):e.events[t].apply(e.events,arguments)}}}),this.helpers=_.extend(this.helpers,{viewer:this,states:this.states,elements:this.elements,events:this.events,models:this.models}),this.states=_.extend(this.states,{viewer:this,helpers:this.helpers,elements:this.elements,events:this.events,models:this.models})},DV.DocumentViewer.prototype.loadModels=function(){this.models.chapters=new DV.model.Chapters(this),this.models.document=new DV.model.Document(this),this.models.pages=new DV.model.Pages(this),this.models.annotations=new DV.model.Annotations(this),this.models.articles=new DV.model.Articles(this),this.models.removedPages={}},DV.DocumentViewer.prototype.open=function(e){var t=arguments;if(this.state!=e){var i=_.bind(function(){return this.state=e,this.states[e].apply(this,t),this.slapIE(),this.notifyChangedState(),!0},this);this.confirmStateChange?this.confirmStateChange(i):i()}},DV.DocumentViewer.prototype.slapIE=function(){DV.jQuery(this.options.container).css({zoom:.99}).css({zoom:1})},DV.DocumentViewer.prototype.notifyChangedState=function(){_.each(this.onStateChangeCallbacks,function(e){e()})},DV.DocumentViewer.prototype.recordHit=function(e){var t=window.location,i=t.protocol+"//"+t.host+t.pathname;if(i.match(/^file:/))return!1;i=i.replace(/[\/]+$/,"");var n=parseInt(this.api.getId(),10),s=encodeURIComponent("document:"+n+":"+i);DV.jQuery(document.body).append('<img alt="" width="1" height="1" src="'+e+"?key="+s+'" />')},DV.DocumentViewer.prototype.jQuery=function(e,t){return t=t||this.options.container,DV.jQuery.call(DV.jQuery,e,t)},DV.load=function(e,t){t=t||{};var i=e.id||e.match(/([^\/]+)(\.js|\.json)$/)[1];"showSidebar"in t&&(t.sidebar=t.showSidebar);var n={container:document.body,zoom:"auto",sidebar:!0};t=_.extend({},n,t),t.fixedSize=!(!t.width&&!t.height);var s=new DV.DocumentViewer(t);DV.viewers[i]=s;var r=DV.loadJSON=function(e){var i=DV.viewers[e.id];i.schema.importCanonicalDocument(e),i.loadModels(),DV.jQuery(function(){i.open("InitialLoad"),t.afterLoad&&t.afterLoad(i),DV.afterLoad&&DV.afterLoad(i),DV.recordHit&&i.recordHit(DV.recordHit)})},o=function(){if(_.isString(e))if(e.match(/\.js$/))DV.jQuery.getScript(e);else{var t=s.helpers.isCrossDomain(e);t&&(e+="?callback=?"),DV.jQuery.getJSON(e,r)}else r(e)};return t.templates?DV.jQuery.getScript(t.templates,o):o(),s},DV.onload&&_.defer(DV.onload);